'use strict';description('Test whether Promise treats thenable correctly.');var thisValue;var result;var value={then:function(onFulfilled,onRejected){testPassed('value.then is called.');thisValue=this;shouldBe('thisValue','value');onRejected('hello')}};new Promise(function(resolve){resolve(value)}).then(function(){testFailed('fulfilled');finishJSTest()},function(localResult){testPassed('rejected');result=localResult;shouldBeEqualToString('result','hello');finishJSTest()});debug('The promise is not rejected now.');