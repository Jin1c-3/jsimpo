define(function ConsoleAgent(require,exports,module){"use strict";var Inspector=require("LiveDevelopment/Inspector/Inspector");var _lastMessage;function _log(message){var level=message.level;if(level==="warning"){level="warn"}var text="ConsoleAgent: "+message.text;if(message.url){text+=" (url: "+message.url+")"}if(message.stackTrace){var callFrame=message.stackTrace[0];text+=" in "+callFrame.functionName+":"+callFrame.columnNumber}console[level](text)}function _onMessageAdded(event,res){_lastMessage=res.message;_log(_lastMessage)}function _onMessageRepeatCountUpdated(event,res){if(_lastMessage){_log(_lastMessage)}}function _onMessagesCleared(event,res){}function enable(){return Inspector.Console.enable()}function load(){Inspector.Console.on("messageAdded.ConsoleAgent",_onMessageAdded).on("messageRepeatCountUpdated.ConsoleAgent",_onMessageRepeatCountUpdated).on("messagesCleared.ConsoleAgent",_onMessagesCleared)}function unload(){Inspector.Console.off(".ConsoleAgent")}exports.enable=enable;exports.load=load;exports.unload=unload});