'use strict';const vnopts=require('vnopts');const leven=require('leven');const chalk=require('chalk');const getLast=require('../utils/get-last.js');const cliDescriptor={'key':_0x32f761=>_0x32f761['length']===0x1?'-'+_0x32f761:'--'+_0x32f761,'value':_0xb6e411=>vnopts['apiDescriptor']['value'](_0xb6e411),'pair':({key,value})=>value===![]?'--no-'+key:value===!![]?cliDescriptor['key'](key):value===''?cliDescriptor['key'](key)+'\x20without\x20an\x20argument':cliDescriptor['key'](key)+'='+value};class FlagSchema extends vnopts['ChoiceSchema']{constructor({name,flags}){super({'name':name,'choices':flags});this['_flags']=[...flags]['sort']();}['preprocess'](_0x842d6f,_0x16341a){var _0x16a039={'gJqTv':function(_0x3a9a85,_0x501050){return _0x3a9a85===_0x501050;},'DDSnA':function(_0x329d88,_0x31d25a){return _0x329d88>_0x31d25a;}};if(_0x16a039['gJqTv'](typeof _0x842d6f,'string')&&_0x16a039['DDSnA'](_0x842d6f['length'],0x0)&&!this['_flags']['includes'](_0x842d6f)){const _0xc81b64=this['_flags']['find'](_0x5d9ddb=>leven(_0x5d9ddb,_0x842d6f)<0x3);if(_0xc81b64){_0x16341a['logger']['warn'](['Unknown flag '+chalk['yellow'](_0x16341a['descriptor']['value'](_0x842d6f))+',','did you mean '+chalk['blue'](_0x16341a['descriptor']['value'](_0xc81b64))+'?']['join']('\x20'));return _0xc81b64;}}return _0x842d6f;}['expected'](){var _0x1b82b7={'CbiRt':'a flag'};return _0x1b82b7['CbiRt'];}}let hasDeprecationWarned;function normalizeOptions(_0x2450a8,_0x17793e,{logger,isCLI=![],passThrough=![]}={}){var _0x586510={'EqTYK':function(_0x3156c7,_0x517081,_0x287324){return _0x3156c7(_0x517081,_0x287324);},'ABXlH':function(_0x2f7791,_0x34e745){return _0x2f7791!==_0x34e745;},'yaypL':function(_0x28ce92,_0x1b61d5){return _0x28ce92&&_0x1b61d5;},'tGMwT':function(_0x4e7273,_0x436313){return _0x4e7273===_0x436313;},'eDsEC':'lDhaq'};const _0x2791c5=!passThrough?(_0x2aa5f2,_0x2263f1,_0x2450a8)=>{const {_,..._0x4f074c}=_0x2450a8['schemas'];return vnopts['levenUnknownHandler'](_0x2aa5f2,_0x2263f1,{..._0x2450a8,'schemas':_0x4f074c});}:Array['isArray'](passThrough)?(_0x16313e,_0x2ad54b)=>!passThrough['includes'](_0x16313e)?undefined:{[_0x16313e]:_0x2ad54b}:(_0x4db918,_0x1889ed)=>({[_0x4db918]:_0x1889ed});const _0x5dfbe2=isCLI?cliDescriptor:vnopts['apiDescriptor'];const _0x427ccc=_0x586510['EqTYK'](optionInfosToSchemas,_0x17793e,{'isCLI':isCLI});const _0x558d60=new vnopts[('Normalizer')](_0x427ccc,{'logger':logger,'unknown':_0x2791c5,'descriptor':_0x5dfbe2});const _0x5e9b0b=_0x586510['ABXlH'](logger,![]);if(_0x586510['yaypL'](_0x5e9b0b,hasDeprecationWarned)){if(_0x586510['tGMwT'](_0x586510['eDsEC'],_0x586510['eDsEC'])){_0x558d60['_hasDeprecationWarned']=hasDeprecationWarned;}else{return'a\x20flag';}}const _0x45b03c=_0x558d60['normalize'](_0x2450a8);if(_0x5e9b0b){hasDeprecationWarned=_0x558d60['_hasDeprecationWarned'];}return _0x45b03c;}function optionInfosToSchemas(_0xcacabb,{isCLI}){var _0x2427d5={'igOSS':function(_0x23b25b,_0x23b39e){return _0x23b25b!==_0x23b39e;},'vbdZK':'JxsFw'};const _0x40dd2a=[];if(isCLI){_0x40dd2a['push'](vnopts['AnySchema']['create']({'name':'_'}));}for(const _0x1d0b02 of _0xcacabb){_0x40dd2a['push'](optionInfoToSchema(_0x1d0b02,{'isCLI':isCLI,'optionInfos':_0xcacabb}));if(_0x1d0b02['alias']&&isCLI){if(_0x2427d5['igOSS']('JxsFw',_0x2427d5['vbdZK'])){parameters['preprocess']=_0x2d2bfb=>Number(_0x2d2bfb);}else{_0x40dd2a['push'](vnopts['AliasSchema']['create']({'name':_0x1d0b02['alias'],'sourceName':_0x1d0b02['name']}));}}}return _0x40dd2a;}function optionInfoToSchema(_0xc9529d,{isCLI,optionInfos}){var _0x5ed560={'Jnedc':'int','TKYtG':function(_0x2b1824,_0x43a00a){return _0x2b1824===_0x43a00a;},'SdMJy':'Iiksg','ZylxI':'string','NTqVt':'boolean','RBGaT':'flag','UjJXx':'path','PXlMT':function(_0x399def,_0x98c62c){return _0x399def!==_0x98c62c;},'XAybL':'bwGZX','LtHyl':'HkHiZ','MgJAo':function(_0x6eaaf0,_0x5c4be0){return _0x6eaaf0!==_0x5c4be0;},'KuyDR':'GirfJ','izgsL':'qhOkX'};let _0x1a3754;const _0xe2b083={'name':_0xc9529d['name']};const _0x5585d5={};switch(_0xc9529d['type']){case _0x5ed560['Jnedc']:_0x1a3754=vnopts['IntegerSchema'];if(isCLI){if(_0x5ed560['TKYtG'](_0x5ed560['SdMJy'],_0x5ed560['SdMJy'])){_0xe2b083['preprocess']=_0x303f75=>Number(_0x303f75);}else{const _0x32719f=this['_flags']['find'](_0x2dc776=>leven(_0x2dc776,value)<0x3);if(_0x32719f){utils['logger']['warn'](['Unknown flag '+chalk['yellow'](utils['descriptor']['value'](value))+',','did\x20you\x20mean\x20'+chalk['blue'](utils['descriptor']['value'](_0x32719f))+'?']['join']('\x20'));return _0x32719f;}}}break;case _0x5ed560['ZylxI']:_0x1a3754=vnopts['StringSchema'];break;case 'choice':_0x1a3754=vnopts['ChoiceSchema'];_0xe2b083['choices']=_0xc9529d['choices']['map'](_0x2097d8=>typeof _0x2097d8==='object'&&_0x2097d8['redirect']?{..._0x2097d8,'redirect':{'to':{'key':_0xc9529d['name'],'value':_0x2097d8['redirect']}}}:_0x2097d8);break;case _0x5ed560['NTqVt']:_0x1a3754=vnopts['BooleanSchema'];break;case _0x5ed560['RBGaT']:_0x1a3754=FlagSchema;_0xe2b083['flags']=optionInfos['flatMap'](_0xc9529d=>[_0xc9529d['alias'],_0xc9529d['description']&&_0xc9529d['name'],_0xc9529d['oppositeDescription']&&'no-'+_0xc9529d['name']]['filter'](Boolean));break;case _0x5ed560['UjJXx']:_0x1a3754=vnopts['StringSchema'];break;default:throw new Error('Unexpected type '+_0xc9529d['type']);}if(_0xc9529d['exception']){_0xe2b083['validate']=(_0x401601,_0x451010,_0x5a7dad)=>_0xc9529d['exception'](_0x401601)||_0x451010['validate'](_0x401601,_0x5a7dad);}else{if(_0x5ed560['PXlMT'](_0x5ed560['XAybL'],_0x5ed560['LtHyl'])){_0xe2b083['validate']=(_0x573df6,_0x19e4e6,_0x3fa3f2)=>_0x573df6===undefined||_0x19e4e6['validate'](_0x573df6,_0x3fa3f2);}else{_0xe2b083['validate']=(_0x4c3732,_0x4c61f8,_0x2c03e6)=>_0xc9529d['exception'](_0x4c3732)||_0x4c61f8['validate'](_0x4c3732,_0x2c03e6);}}if(_0xc9529d['redirect']){_0x5585d5['redirect']=_0x319752=>!_0x319752?undefined:{'to':{'key':_0xc9529d['redirect']['option'],'value':_0xc9529d['redirect']['value']}};}if(_0xc9529d['deprecated']){_0x5585d5['deprecated']=!![];}if(isCLI&&!_0xc9529d['array']){if(_0x5ed560['MgJAo'](_0x5ed560['KuyDR'],_0x5ed560['izgsL'])){const _0x5d83fd=_0xe2b083['preprocess']||(_0x3b4af9=>_0x3b4af9);_0xe2b083['preprocess']=(_0x57f673,_0x33b4b3,_0x33a26c)=>_0x33b4b3['preprocess'](_0x5d83fd(Array['isArray'](_0x57f673)?getLast(_0x57f673):_0x57f673),_0x33a26c);}else{const _0x52faae=[];if(isCLI){_0x52faae['push'](vnopts['AnySchema']['create']({'name':'_'}));}for(const _0x5d541a of optionInfos){_0x52faae['push'](optionInfoToSchema(_0x5d541a,{'isCLI':isCLI,'optionInfos':optionInfos}));if(_0x5d541a['alias']&&isCLI){_0x52faae['push'](vnopts['AliasSchema']['create']({'name':_0x5d541a['alias'],'sourceName':_0x5d541a['name']}));}}return _0x52faae;}}return _0xc9529d['array']?vnopts['ArraySchema']['create']({...isCLI?{'preprocess':_0x2003bc=>Array['isArray'](_0x2003bc)?_0x2003bc:[_0x2003bc]}:{},..._0x5585d5,'valueSchema':_0x1a3754['create'](_0xe2b083)}):_0x1a3754['create']({..._0xe2b083,..._0x5585d5});}function normalizeApiOptions(_0x1799d8,_0x53c7de,_0x3c9854){var _0x2968e2={'kpomJ':function(_0x5b9c76,_0x315e31,_0x5d577b,_0x2d45db){return _0x5b9c76(_0x315e31,_0x5d577b,_0x2d45db);}};return _0x2968e2['kpomJ'](normalizeOptions,_0x1799d8,_0x53c7de,_0x3c9854);}function normalizeCliOptions(_0x119708,_0x469035,_0x2977a7){return normalizeOptions(_0x119708,_0x469035,{'isCLI':!![],..._0x2977a7});}module['exports']={'normalizeApiOptions':normalizeApiOptions,'normalizeCliOptions':normalizeCliOptions};