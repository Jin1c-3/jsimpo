const should=require('should');const supertest=require('supertest');const testUtils=require('../../../../utils');const config=require('../../../../../core/shared/config');const localUtils=require('./utils');const ghost=testUtils['startGhost'];let request;describe('Pages API',function(){var _0x47d7b8={'aNWOy':function(_0x1a6968,_0x49186f){return _0x1a6968===_0x49186f;},'xbfrn':'PqcFM','GHjRZ':'KXSnY','ybfge':'posts','zHoRC':function(_0x1c5841){return _0x1c5841();},'xAMuD':'SVrTE','zjsEf':function(_0x26d15a){return _0x26d15a();},'GJNDQ':'static-page-test','eGxgQ':'Origin','hzHDi':'Content-Type','OBBpt':'Cache-Control','sTPQa':'url','UUftI':function(_0x44f508,_0x5a5c62){return _0x44f508!==_0x5a5c62;},'XxuTh':'TOeke','RXiWM':function(_0x59df1e,_0x29ccbe){return _0x59df1e+_0x29ccbe;},'jHhvO':'pages/','jgPYs':function(_0x151c7d,_0x52c9c8,_0x403ba6){return _0x151c7d(_0x52c9c8,_0x403ba6);},'mhnIk':'accepts html source'};before(function(){var _0x358554={'GUoGz':function(_0x3c39c8,_0x42129c){return _0x47d7b8['aNWOy'](_0x3c39c8,_0x42129c);},'knhMf':_0x47d7b8['xbfrn'],'uXhUY':_0x47d7b8['GHjRZ'],'laEll':_0x47d7b8['ybfge'],'qxUqa':function(_0x234f6a){return _0x47d7b8['zHoRC'](_0x234f6a);}};if(_0x47d7b8['aNWOy'](_0x47d7b8['xAMuD'],_0x47d7b8['xAMuD'])){return _0x47d7b8['zjsEf'](ghost)['then'](function(_0x38cbf8){if(_0x358554['GUoGz'](_0x358554['knhMf'],_0x358554['uXhUY'])){res['body']['pages'][0x0]['mobiledoc']['should']['equal']('{\x22version\x22:\x220.3.1\x22,\x22atoms\x22:[],\x22cards\x22:[],\x22markups\x22:[],\x22sections\x22:[[1,\x22p\x22,[[0,[],0,\x22HTML\x20Ipsum\x20presents\x22]]]]}');}else{request=supertest['agent'](config['get']('url'));}})['then'](function(){return localUtils['doAuth'](request,'posts');});}else{var _0x842643={'JKyZY':'url'};return _0x358554['qxUqa'](ghost)['then'](function(_0x470067){request=supertest['agent'](config['get'](_0x842643['JKyZY']));})['then'](function(){return localUtils['doAuth'](request,_0x358554['laEll']);});}});_0x47d7b8['jgPYs'](describe,'Edit',function(){var _0x397641={'MtcnV':function(_0x1dd6af,_0x3be368){return _0x47d7b8['RXiWM'](_0x1dd6af,_0x3be368);},'AHvNa':_0x47d7b8['jHhvO'],'MrahW':'/?source=html','ZkxWo':'url','gQhZt':_0x47d7b8['hzHDi'],'qZHDU':'Cache-Control'};_0x47d7b8['jgPYs'](it,_0x47d7b8['mhnIk'],function(){var _0xdbdd63={'PDnHQ':_0x47d7b8['GJNDQ'],'Ogrgr':'pages/','AfSpg':_0x47d7b8['eGxgQ'],'qGLns':'<p>HTML Ipsum presents</p>','warET':_0x47d7b8['hzHDi'],'PzCVa':_0x47d7b8['OBBpt'],'zUFQs':_0x47d7b8['sTPQa'],'FJWlo':function(_0x65980e,_0x44a389){return _0x47d7b8['UUftI'](_0x65980e,_0x44a389);},'lOsnT':'{"version":"0.3.1","atoms":[],"cards":[],"markups":[],"sections":[[1,"p",[[0,[],0,"HTML Ipsum presents"]]]]}'};if(_0x47d7b8['XxuTh']!==_0x47d7b8['XxuTh']){var _0x17ada9={'qMTMT':_0xdbdd63['PDnHQ'],'HxNxC':function(_0x5013cf,_0x21e19a){return _0x5013cf+_0x21e19a;},'PxNKE':_0xdbdd63['Ogrgr'],'cJMdn':'/?source=html','rQThj':_0xdbdd63['AfSpg'],'UEnOJ':'url','MqETz':_0xdbdd63['qGLns'],'iRnft':_0xdbdd63['warET'],'BmBYT':_0xdbdd63['PzCVa']};it('accepts\x20html\x20source',function(){return request['get'](localUtils['API']['getApiQuery']('pages/'+testUtils['DataGenerator']['Content']['posts'][0x5]['id']+'/'))['set'](_0x17ada9['rQThj'],config['get'](_0x17ada9['UEnOJ']))['expect'](0xc8)['then'](_0x3981d0=>{_0x3981d0['body']['pages'][0x0]['slug']['should']['equal'](_0x17ada9['qMTMT']);return request['put'](localUtils['API']['getApiQuery'](_0x17ada9['HxNxC'](_0x17ada9['HxNxC'](_0x17ada9['PxNKE'],testUtils['DataGenerator']['Content']['posts'][0x5]['id']),_0x17ada9['cJMdn'])))['set'](_0x17ada9['rQThj'],config['get'](_0x17ada9['UEnOJ']))['send']({'pages':[{'html':_0x17ada9['MqETz'],'updated_at':_0x3981d0['body']['pages'][0x0]['updated_at']}]})['expect'](_0x17ada9['iRnft'],/json/)['expect'](_0x17ada9['BmBYT'],testUtils['cacheRules']['private'])['expect'](0xc8);})['then'](_0x499d99=>{_0x499d99['body']['pages'][0x0]['mobiledoc']['should']['equal']('{\x22version\x22:\x220.3.1\x22,\x22atoms\x22:[],\x22cards\x22:[],\x22markups\x22:[],\x22sections\x22:[[1,\x22p\x22,[[0,[],0,\x22HTML\x20Ipsum\x20presents\x22]]]]}');});});}else{return request['get'](localUtils['API']['getApiQuery']('pages/'+testUtils['DataGenerator']['Content']['posts'][0x5]['id']+'/'))['set'](_0x47d7b8['eGxgQ'],config['get']('url'))['expect'](0xc8)['then'](_0x5ba652=>{_0x5ba652['body']['pages'][0x0]['slug']['should']['equal']('static-page-test');return request['put'](localUtils['API']['getApiQuery'](_0x397641['MtcnV'](_0x397641['AHvNa'],testUtils['DataGenerator']['Content']['posts'][0x5]['id'])+_0x397641['MrahW']))['set']('Origin',config['get'](_0x397641['ZkxWo']))['send']({'pages':[{'html':'<p>HTML Ipsum presents</p>','updated_at':_0x5ba652['body']['pages'][0x0]['updated_at']}]})['expect'](_0x397641['gQhZt'],/json/)['expect'](_0x397641['qZHDU'],testUtils['cacheRules']['private'])['expect'](0xc8);})['then'](_0x301360=>{if(_0xdbdd63['FJWlo']('jSiYC','jSiYC')){request=supertest['agent'](config['get'](_0xdbdd63['zUFQs']));}else{_0x301360['body']['pages'][0x0]['mobiledoc']['should']['equal'](_0xdbdd63['lOsnT']);}});}});});});