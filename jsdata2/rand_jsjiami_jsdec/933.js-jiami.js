import _0xd41817 from'@tarojs/api';import'whatwg-fetch';import _0x2f0f0e from'jsonp-retry';import{serializeParams}from'../utils';const {Link}=_0xd41817;function generateRequestUrlWithParams(url,params){var uyGPqu={'eTjYa':function(x,y){return x+y;},'hmTuD':function(x,y){return x===y;},'HKQKS':function(x,y){return x!==y;},'GAGsq':'WCOiP','fgNfE':'VVAif'};params=uyGPqu['hmTuD'](typeof params,'string')?params:serializeParams(params);if(params){if(uyGPqu['HKQKS'](uyGPqu['GAGsq'],uyGPqu['fgNfE'])){url+=uyGPqu['eTjYa'](~url['indexOf']('?')?'&':'?',params);}else{url+=uyGPqu['eTjYa'](~url['indexOf']('?')?'&':'?',params);}}url=url['replace']('?&','?');return url;}function _request(options){var CyvCTi={'BOcYr':function(x,y){return x===y;},'kXAou':'mByDB','iiNmL':'rofUJ','ieQdL':'1|4|0|2|3','DpRWC':function(callee,param1){return callee(param1);},'PBieu':function(x,y){return x===y;},'supSt':'function','kgKrr':function(x,y){return x===y;},'ljKmR':function(callee,param1){return callee(param1);},'iSAJE':function(callee,param1){return callee(param1);},'VQddh':'json','qQmOK':function(x,y){return x===y;},'bfZgz':'bJmHu','OLUmI':function(x,y){return x!==y;},'RICgY':'LZjJP','cNtOk':function(x,y){return x===y;},'JBMrM':'arraybuffer','TpQYI':function(x,y){return x!==y;},'jCXCV':'FAzRx','MMqYD':function(x,y){return x===y;},'lcSZB':function(x,y){return x===y;},'qTzaA':'text','Hncqd':'ynnVW','vlVAH':function(callee,param1){return callee(param1);},'iyHmO':function(x,y){return x!==y;},'OscUI':'iIQnR','CIIth':function(callee,param1){return callee(param1);},'DuXlA':function(x,y){return x||y;},'bpDSO':function(x,y){return x===y;},'aqHcs':'string','UCFgy':'GET','MfWPb':'default','eFpyC':function(x,y){return x===y;},'FJjzd':function(x,y){return x===y;},'lEzHi':function(callee,param1,param2){return callee(param1,param2);},'waAwl':function(x,y){return x===y;},'KsOfU':'object','jMHGd':'WpIpn','wUTvX':'application/json','zdUYK':function(x,y){return x===y;},'aUbNA':'sOXLB','sdSfO':function(x,y){return x>=y;},'TSQkA':'application/x-www-form-urlencoded','UZkMD':'WANQh'};options=CyvCTi['DuXlA'](options,{});if(CyvCTi['bpDSO'](typeof options,CyvCTi['aqHcs'])){options={'url':options};}const {success,complete,fail}=options;let url=options['url'];const params={};const res={};if(options['jsonp']){Object['assign'](params,options);params['params']=options['data'];params['cache']=options['jsonpCache'];if(CyvCTi['bpDSO'](typeof options['jsonp'],CyvCTi['aqHcs'])){params['name']=options['jsonp'];}delete params['jsonp'];return _0x2f0f0e(url,params)['then'](data=>{var FeIKbd={'odyYo':function(callee,param1,param2){return callee(param1,param2);}};if(CyvCTi['BOcYr'](CyvCTi['kXAou'],CyvCTi['iiNmL'])){url=FeIKbd['odyYo'](generateRequestUrlWithParams,url,options['data']);}else{var AGrLee=CyvCTi['ieQdL']['split']('|'),jyxyGk=0x0;while(!![]){switch(AGrLee[jyxyGk++]){case'0':typeof success==='function'&&success(res);continue;case'1':res['statusCode']=0xc8;continue;case'2':typeof complete==='function'&&CyvCTi['DpRWC'](complete,res);continue;case'3':return res;case'4':res['data']=data;continue;}break;}}})['catch'](err=>{CyvCTi['PBieu'](typeof fail,CyvCTi['supSt'])&&CyvCTi['DpRWC'](fail,err);CyvCTi['kgKrr'](typeof complete,CyvCTi['supSt'])&&CyvCTi['DpRWC'](complete,res);return Promise['reject'](err);});}params['method']=options['method']||CyvCTi['UCFgy'];const methodUpper=params['method']['toUpperCase']();params['cache']=options['cache']||CyvCTi['MfWPb'];if(CyvCTi['eFpyC'](methodUpper,'GET')||CyvCTi['FJjzd'](methodUpper,'HEAD')){url=CyvCTi['lEzHi'](generateRequestUrlWithParams,url,options['data']);}else if(CyvCTi['waAwl'](typeof options['data'],CyvCTi['KsOfU'])){if(CyvCTi['jMHGd']===CyvCTi['jMHGd']){options['header']=options['header']||{};const keyOfContentType=Object['keys'](options['header'])['find'](item=>item['toLowerCase']()==='content-type');if(!keyOfContentType){options['header']['Content-Type']=CyvCTi['wUTvX'];}const contentType=options['header'][CyvCTi['DuXlA'](keyOfContentType,'Content-Type')];if(contentType['indexOf'](CyvCTi['wUTvX'])>=0x0){if(CyvCTi['zdUYK'](CyvCTi['aUbNA'],CyvCTi['aUbNA'])){params['body']=JSON['stringify'](options['data']);}else{CyvCTi['kgKrr'](typeof fail,CyvCTi['supSt'])&&CyvCTi['ljKmR'](fail,err);typeof complete===CyvCTi['supSt']&&CyvCTi['ljKmR'](complete,res);return Promise['reject'](err);}}else if(CyvCTi['sdSfO'](contentType['indexOf'](CyvCTi['TSQkA']),0x0)){params['body']=serializeParams(options['data']);}else{params['body']=options['data'];}}else{params['body']=CyvCTi['iSAJE'](serializeParams,options['data']);}}else{if(CyvCTi['iyHmO'](CyvCTi['UZkMD'],'WANQh')){params['signal']=options['signal'];}else{params['body']=options['data'];}}if(options['header']){params['headers']=options['header'];}if(options['mode']){params['mode']=options['mode'];}if(options['signal']){if(CyvCTi['iyHmO']('qyUjb','qyUjb')){params['body']=options['data'];}else{params['signal']=options['signal'];}}params['credentials']=options['credentials'];return CyvCTi['lEzHi'](fetch,url,params)['then'](response=>{var IjQOPc={'eDTED':'application/json','Stabw':CyvCTi['VQddh']};res['statusCode']=response['status'];res['header']={};for(const key of response['headers']['keys']()){if(CyvCTi['qQmOK'](CyvCTi['bfZgz'],'JHMtz')){options['header']['Content-Type']=IjQOPc['eDTED'];}else{res['header'][key]=response['headers']['get'](key);}}if(!response['ok']){if(CyvCTi['OLUmI']('LZjJP',CyvCTi['RICgY'])){if(options['dataType']===IjQOPc['Stabw']||typeof options['dataType']==='undefined'){return response['json']();}}else{throw response;}}if(CyvCTi['cNtOk'](options['responseType'],CyvCTi['JBMrM'])){return response['arrayBuffer']();}if(res['statusCode']!==0xcc){if(CyvCTi['TpQYI'](CyvCTi['jCXCV'],CyvCTi['jCXCV'])){return response['json']();}else{if(CyvCTi['MMqYD'](options['dataType'],'json')||CyvCTi['MMqYD'](typeof options['dataType'],'undefined')){return response['json']();}}}if(CyvCTi['lcSZB'](options['responseType'],CyvCTi['qTzaA'])||options['dataType']===CyvCTi['qTzaA']){return response['text']();}return Promise['resolve'](null);})['then'](data=>{if(CyvCTi['Hncqd']!==CyvCTi['Hncqd']){throw response;}else{res['data']=data;CyvCTi['lcSZB'](typeof success,CyvCTi['supSt'])&&CyvCTi['vlVAH'](success,res);typeof complete===CyvCTi['supSt']&&complete(res);return res;}})['catch'](err=>{if(CyvCTi['iyHmO']('DDgAh',CyvCTi['OscUI'])){typeof fail===CyvCTi['supSt']&&CyvCTi['CIIth'](fail,err);typeof complete==='function'&&complete(res);return Promise['reject'](err);}else{return CyvCTi['vlVAH'](_request,chain['requestParams']);}});}function taroInterceptor(chain){var HXcUnU={'Vtdpb':function(callee,param1){return callee(param1);}};return HXcUnU['Vtdpb'](_request,chain['requestParams']);}const link=new Link(taroInterceptor);export const request=link['request']['bind'](link);export const addInterceptor=link['addInterceptor']['bind'](link);