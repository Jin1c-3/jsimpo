import _0x4b1504 from'cheerio';import'flat-map-polyfill';import{pathExists,readdir,readFile,readJSON,remove}from'fs-extra';import{check,File,findPort,killApp,launchApp,nextBuild,nextStart,renderViaHTTP,waitFor}from'next-test-utils';import _0x381845 from'next-webdriver';import{join}from'path';jest['setTimeout'](0x3e8*0x3c*0x2);const fixturesDir=join(__dirname,'../..','css-fixtures');describe('CSS\x20Support',()=>{var GmMxfb={'gJoOC':function(x,y){return x!==y;},'TSfKu':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'JjVBX':function(callee,param1,param2){return callee(param1,param2);},'QIeJc':'.next/static/css','SwTEd':function(callee,param1){return callee(param1);},'jlJfZ':function(callee,param1,param2){return callee(param1,param2);},'auuWQ':'utf8','KrQwq':'color:red','UDedH':function(callee,param1){return callee(param1);},'SDIwX':'.next','QsKje':function(callee,param1,param2){return callee(param1,param2);},'OGvDe':function(callee,param1){return callee(param1);},'sLEEv':'should compile successfully','ljmQa':function(callee,param1,param2){return callee(param1,param2);},'nvdMW':function(callee,param1){return callee(param1);},'nZEzH':function(callee,param1,param2){return callee(param1,param2);},'mGJkD':function(callee,param1,param2){return callee(param1,param2);},'pWvme':function(callee,param1){return callee(param1);},'CxnKc':function(callee,param1,param2){return callee(param1,param2);},'RmjMF':function(callee,param1,param2){return callee(param1,param2);},'JcZdo':function(x,y){return x===y;},'aBnQg':'OAhpN','PxlrB':'gPauR','EoGHe':function(callee,param1){return callee(param1);},'ymUPl':function(callee,param1){return callee(param1);},'uWpwI':'NZElE','mnrUG':function(x,y){return x in y;},'jvlxn':function(x,y){return x!==y;},'sRDzw':'CqftO','KceCR':function(callee,param1){return callee(param1);},'TVkUV':'multi-global','LeinI':function(callee,param1,param2){return callee(param1,param2);},'fWeTi':'YHEBw','YsWaa':function(callee,param1){return callee(param1);},'UhPyA':function(callee,param1){return callee(param1);},'sWoqX':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'vwcZK':function(callee,param1,param2){return callee(param1,param2);},'SClEY':'nested-global','Ngxkv':'cjaLH','DIgII':'YJWRk','gYeuq':'Missing build manifest','TBwYn':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'dVpOz':function(x,y){return x!==y;},'GqyGN':'PDZGx','SYmSi':'compilation-and-prefixing','XBoEk':function(callee,param1,param2){return callee(param1,param2);},'ZwApk':function(callee,param1,param2){return callee(param1,param2);},'Jjcyq':'multi-global-reversed','ALJNv':function(callee,param1){return callee(param1);},'LGIpA':'#link-other','dTvCJ':'#red-title','pSHqQ':function(callee,param1){return callee(param1);},'fpDVC':function(callee,param1){return callee(param1);},'VCevJ':function(callee,param1){return callee(param1);},'kjTce':function(callee,param1,param2){return callee(param1,param2);},'Bocin':'should have the correct color on mount after navigation','pmkTy':function(callee,param1,param2){return callee(param1,param2);},'uSyLw':'transition-react','TTgqH':function(callee,param1,param2){return callee(param1,param2);},'nLqzj':'should\x20have\x20compiled\x20successfully','Yplix':function(callee,param1,param2){return callee(param1,param2);},'dCFEj':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'KgivJ':function(callee,param1){return callee(param1);},'HSccP':'Failed to compile','XjMmx':'styles.module.css','fXTgL':function(callee,param1){return callee(param1);},'oejoC':function(callee,param1){return callee(param1);},'khKuE':function(callee,param1){return callee(param1);},'JKYhV':function(callee,param1,param2){return callee(param1,param2);},'TyHsk':function(callee,param1){return callee(param1);},'EhyTH':function(callee,param1,param2){return callee(param1,param2);},'ZNcOI':'should fail to build','niwZQ':function(callee,param1){return callee(param1);},'Gxhnf':function(callee,param1,param2){return callee(param1,param2);},'MnOFL':function(callee,param1){return callee(param1);},'CekNf':'styles/global.css','OnBBY':'invalid-global','jSJQp':function(callee,param1,param2){return callee(param1,param2);},'HFeEf':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'lwtrw':function(callee,param1){return callee(param1);},'iSrbm':'import-global-from-module','QjDDx':function(callee,param1){return callee(param1);},'KhVtN':function(callee,param1){return callee(param1);},'pkFhF':function(callee,param1){return callee(param1);},'qbaVq':'invalid-global-with-app','cQwef':function(callee,param1){return callee(param1);},'hlnVS':function(callee,param1){return callee(param1);},'rIALu':'Please\x20move\x20all\x20first-party\x20global\x20CSS\x20imports','HweOK':'valid-and-invalid-global','jpWhj':function(callee){return callee();},'FzOIH':'/page1','SZosW':'hello world','uuBWD':function(callee,param1){return callee(param1);},'SVxXD':'text-input','IaVzQ':function(callee,param1,param2){return callee(param1,param2);},'KxotT':'styles/global1.css','uwBNp':'color: red','zMxey':'rgb(128,\x200,\x20128)','phaVf':function(callee,param1){return callee(param1);},'IbbpX':function(callee,param1,param2){return callee(param1,param2);},'Wcowd':function(callee,param1){return callee(param1);},'HFihS':function(callee,param1){return callee(param1);},'bzVgO':function(callee,param1,param2){return callee(param1,param2);},'KbGIr':'should update CSS color without remounting <input>','tUKvu':function(callee,param1){return callee(param1);},'fYYZg':function(callee,param1){return callee(param1);},'KFDNf':'/page2','nUKKX':function(callee,param1){return callee(param1);},'nLGmq':function(callee,param1,param2){return callee(param1,param2);},'IbkzE':function(callee,param1,param2){return callee(param1,param2);},'hEMsr':'multi-page','EHYhh':function(callee,param1){return callee(param1);},'wjsmX':function(callee,param1){return callee(param1);},'LTzKC':function(callee){return callee();},'DbuIt':function(callee,param1,param2){return callee(param1,param2);},'IHtir':function(callee,param1){return callee(param1);},'FXuqs':'block','pvQqj':'unused','kDsov':function(callee,param1){return callee(param1);},'UfTJU':function(callee,param1,param2){return callee(param1,param2);},'RQeRa':'should\x20have\x20body\x20visible','yJfjU':function(callee,param1){return callee(param1);},'IlOde':'<div>','vhfvm':function(callee,param1,param2){return callee(param1,param2);},'LRkVz':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'OFweL':function(callee,param1){return callee(param1);},'vWSpf':'link[rel="stylesheet"]','BQtZL':'href','zwzjS':'link[rel="preload"]','GvfIc':function(callee,param1,param2){return callee(param1,param2);},'hRtIo':function(callee,param1){return callee(param1);},'YSNrM':'should\x20have\x20CSS\x20for\x20page','WTIYv':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'lfJJY':function(callee,param1,param2){return callee(param1,param2);},'QWwUl':function(callee,param1,param2){return callee(param1,param2);},'ZAZQH':function(callee,param1){return callee(param1);},'tlVRI':function(callee,param1,param2){return callee(param1,param2);},'nwoJh':function(callee,param1){return callee(param1);},'xAkNk':'url-global','ynHIq':function(callee,param1){return callee(param1);},'YXhDh':function(callee,param1,param2){return callee(param1,param2);},'AhmZn':function(callee,param1,param2){return callee(param1,param2);},'SGgHu':'.next/static/media','xYdSv':function(callee,param1,param2){return callee(param1,param2);},'drcnY':'url-global-asset-prefix-1','RjEKo':function(callee,param1){return callee(param1);},'AhiNw':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'WtTDE':function(callee,param1){return callee(param1);},'gKWYY':function(callee,param1,param2){return callee(param1,param2);},'nYXdE':function(callee,param1,param2){return callee(param1,param2);},'lUcXJ':function(callee,param1){return callee(param1);},'ssyAL':function(callee,param1){return callee(param1);},'MWexV':function(callee,param1,param2){return callee(param1,param2);},'PCHrp':'url-global-asset-prefix-2','pYxlL':function(callee,param1,param2){return callee(param1,param2);},'jmiDq':function(callee,param1,param2){return callee(param1,param2);},'NrCAd':function(callee,param1,param2){return callee(param1,param2);},'Rolxw':function(callee,param1,param2){return callee(param1,param2);},'rKAvO':function(callee,param1){return callee(param1);},'EzfUV':'npm-import','GyYMb':function(callee,param1){return callee(param1);},'WNfXK':function(callee,param1,param2){return callee(param1,param2);},'hXgzb':'npm-import-nested','ERvQF':function(callee,param1,param2){return callee(param1,param2);},'wbJhM':function(callee,param1,param2){return callee(param1,param2);},'ztBTw':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'Iejyt':function(callee,param1){return callee(param1);},'CdNVh':function(callee,param1){return callee(param1);},'GzWsh':function(callee,param1){return callee(param1);},'GezHQ':function(callee,param1,param2){return callee(param1,param2);},'onkhD':'npm-import-bad','DdVol':function(callee,param1){return callee(param1);},'ZWYAk':function(callee,param1,param2){return callee(param1,param2);},'lrmuE':'should fail the build','aufIb':function(callee,param1,param2){return callee(param1,param2);},'NudWv':function(callee,param1){return callee(param1);},'bXRIa':function(callee,param1,param2){return callee(param1,param2);},'JIHwO':'should\x20have\x20the\x20correct\x20color\x20(css\x20ordering)','jtnQq':function(callee,param1){return callee(param1);},'gZvNY':function(callee,param1,param2){return callee(param1,param2);},'UnUmn':function(callee,param1,param2){return callee(param1,param2);},'RWNgo':function(callee,param1){return callee(param1);},'jfpBf':function(callee,param1,param2){return callee(param1,param2);},'JoBxc':function(callee,param1){return callee(param1);},'ZqijO':function(callee,param1){return callee(param1);},'bZfRp':function(callee,param1,param2){return callee(param1,param2);},'pMIzh':function(callee){return callee();},'XdJZc':'script','SDkza':function(x,y){return x in y;},'DHGaP':function(callee,param1){return callee(param1);},'EFnDs':function(callee,param1){return callee(param1);},'LjDxL':'global-and-module-ordering','bhnBu':function(callee,param1){return callee(param1);},'wpRfw':'should not execute scripts in any order','GuzNV':function(callee,param1,param2){return callee(param1,param2);},'rLVxu':function(callee,param1,param2){return callee(param1,param2);},'cxZin':function(callee,param1){return callee(param1);},'hKARY':function(callee,param1,param2){return callee(param1,param2);},'BmLqN':function(callee,param1){return callee(param1);},'GSCxc':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'bzyGo':function(callee,param1){return callee(param1);},'vewin':function(callee,param1){return callee(param1);},'cVIvX':function(callee,param1,param2){return callee(param1,param2);},'SNRVu':function(callee,param1,param2){return callee(param1,param2);},'BXTLI':'next-issue-15468','mPyPs':'should\x20have\x20the\x20border\x20width\x20(property\x20ordering)','uhKOH':function(callee,param1,param2){return callee(param1,param2);},'VHsvO':function(callee,param1){return callee(param1);},'gWRwT':function(callee,param1,param2){return callee(param1,param2);},'Amlwb':function(callee,param1){return callee(param1);},'VowRI':function(callee,param1){return callee(param1);},'pDYrC':function(callee,param1,param2){return callee(param1,param2);},'rYSyr':'with-tailwindcss','Dhevi':function(callee,param1){return callee(param1);},'lkzno':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'Vjxae':function(callee,param1,param2){return callee(param1,param2);},'xbNZm':function(callee,param1,param2){return callee(param1,param2);},'nMhuD':function(callee,param1,param2){return callee(param1,param2);},'TPlGS':'with-tailwindcss-and-purgecss','gziMO':function(callee,param1,param2){return callee(param1,param2);},'Lvidk':function(callee,param1,param2){return callee(param1,param2);},'amJaz':function(callee,param1,param2){return callee(param1,param2);},'ZTSLU':'#green-title','oCjbg':'#blue-title','Xupmo':'rgb(0, 0, 255)','nePUv':'should\x20have\x20correct\x20color\x20on\x20index\x20page\x20(on\x20load)','PsjdR':'should\x20have\x20correct\x20color\x20on\x20index\x20page\x20(on\x20hover)','qzwrK':'should not change color on hover','rojbv':function(callee,param1,param2){return callee(param1,param2);},'hKuuM':'should have correct CSS injection order','hWJCR':'should\x20have\x20correct\x20color\x20on\x20index\x20page\x20(on\x20nav\x20from\x20index)','bUhXm':'should\x20have\x20correct\x20color\x20on\x20index\x20page\x20(on\x20nav\x20from\x20other)','kgkEz':'2|4|3|0|1','MTXeq':function(callee,param1){return callee(param1);},'DYWBJ':function(callee,param1,param2){return callee(param1,param2);},'DzYfm':'VmVyY2Vs','szHLS':function(callee,param1){return callee(param1);},'MwudT':'#link-index','rvgoi':function(callee,param1){return callee(param1);},'aWDTg':function(callee,param1){return callee(param1);},'QxqWg':function(callee){return callee();},'IWACy':function(callee,param1,param2){return callee(param1,param2);},'FxzwH':'csp-style-src-nonce','nYxmT':function(callee,param1,param2){return callee(param1,param2);},'EqgQl':'Production Mode','WoDMU':'rgb(255, 0, 0)','qGGFi':function(callee,param1,param2){return callee(param1,param2);},'TvNZO':function(callee,param1){return callee(param1);},'arqFQ':'/other','GFbWK':function(callee,param1,param2){return callee(param1,param2);},'IIbTM':function(callee,param1,param2){return callee(param1,param2);},'vmgRD':function(callee,param1,param2){return callee(param1,param2);},'iqeVf':function(callee,param1){return callee(param1);},'wXdvC':'1|2|4|0|3','ddxkb':function(callee,param1){return callee(param1);},'WHHcI':function(callee){return callee();},'AjwQf':'#black-title','qMbqy':'composes-ordering','csMlK':function(callee,param1,param2){return callee(param1,param2);},'hlRpb':'Development Mode','ouEuF':function(callee,param1,param2){return callee(param1,param2);},'BNzyv':function(callee){return callee();},'njoWj':function(callee,param1){return callee(param1);},'RZlWi':function(callee,param1){return callee(param1);},'svkiU':'not have intermediary page styles on error rendering','mTUXC':function(callee,param1,param2){return callee(param1,param2);},'AZWut':function(callee){return callee();},'VsFGa':function(callee,param1){return callee(param1);},'EjWPv':'transition-cleanup','hxEFI':function(callee,param1){return callee(param1);},'mvDDg':function(callee){return callee();},'cOTiS':function(callee,param1){return callee(param1);},'mswdZ':'rgb(17,\x2017,\x2017)','jnwfv':function(callee,param1){return callee(param1);},'cywUU':function(callee,param1){return callee(param1);},'ERQET':function(callee,param1,param2){return callee(param1,param2);},'pbgjO':'build-manifest.json','lfTDe':function(x,y){return x<y;},'oQLrZ':function(callee,param1){return callee(param1);},'pnJwk':'transition-reload','qdGDW':function(callee,param1,param2){return callee(param1,param2);},'mawWZ':'mounted','MOlyJ':'should hydrate red without dependencies manifest','TKBfM':function(callee,param1,param2){return callee(param1,param2);},'BufTS':function(callee){return callee();},'kLiKp':function(callee,param1,param2,param3,param4){return callee(param1,param2,param3,param4);},'iwmTf':'.next/static/','uaRJn':function(callee,param1){return callee(param1);},'rlciO':function(callee){return callee();},'ipXZP':function(callee,param1,param2){return callee(param1,param2);},'hoKGn':'/client','CMjjT':function(callee,param1){return callee(param1);},'BNcIf':function(callee,param1,param2){return callee(param1,param2);},'cGsqI':'2|4|0|3|1','PvQsL':function(callee,param1,param2){return callee(param1,param2);},'ScvsX':function(callee,param1){return callee(param1);},'hLXKi':'rgb(255, 105, 180)','tafKM':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'OlMPG':'4|2|0|3|1','KiGWw':function(callee,param1){return callee(param1);},'SkMRd':'next-issue-12343','SgeGb':'.css.map','BVWbn':function(callee,param1,param2){return callee(param1,param2);},'hThVw':function(callee,param1){return callee(param1);},'iJidE':function(callee,param1,param2){return callee(param1,param2);},'DshLL':'unresolved-css-url','iHeQt':function(callee,param1,param2){return callee(param1,param2);},'yvibo':'should build correctly','faiar':function(callee,param1,param2){return callee(param1,param2);},'BauRb':'should have correct file references in CSS output','xzcGc':function(callee,param1,param2){return callee(param1,param2);},'cptbQ':'Basic\x20Global\x20Support','rxtVS':function(callee,param1,param2){return callee(param1,param2);},'EYHKk':'Basic Global Support with src/ dir','nguKm':function(callee,param1,param2){return callee(param1,param2);},'vhngg':'CSS\x20Compilation\x20and\x20Prefixing','ERxRy':'Multi Global Support (reversed)','EJLtI':'React Lifecyce Order (production)','gFOqM':'Invalid CSS in _document','iscXP':'Invalid\x20Global\x20CSS','VvLdk':'Valid Global CSS from npm','ABbyi':'Invalid Global CSS with Custom App','BTXdt':function(callee,param1,param2){return callee(param1,param2);},'ajUAk':'Valid and Invalid Global CSS with Custom App','TvSVc':'Can hot reload CSS without losing state','LZZfz':function(callee,param1,param2){return callee(param1,param2);},'lCVsW':function(callee,param1,param2){return callee(param1,param2);},'aQqPi':'Body\x20is\x20not\x20hidden\x20when\x20unused\x20in\x20Development','HuiTo':'Body\x20is\x20not\x20hidden\x20when\x20broken\x20in\x20Development','ebIyE':'Has CSS in computed styles in Production','dFSdN':'CSS\x20URL\x20via\x20`file-loader`','VDQar':'CSS URL via `file-loader` and asset prefix (1)','uwazn':'CSS URL via `file-loader` and asset prefix (2)','FqEEr':'Good\x20CSS\x20Import\x20from\x20node_modules','URgPu':function(callee,param1,param2){return callee(param1,param2);},'PAIpN':'Good Nested CSS Import from node_modules','vxIet':'CSS\x20Import\x20from\x20node_modules','nDSjc':'Ordering with styled-jsx (prod)','VnGtG':function(callee,param1,param2){return callee(param1,param2);},'bqpNk':'Ordering with Global CSS and Modules (prod)','IIkMp':'CSS Property Ordering','fUjpj':'CSS page transition inject <style> with nonce so it works with CSP header','Duhpb':'Page reload on CSS missing','RdEwU':function(callee,param1,param2){return callee(param1,param2);},'KBSAm':'Page\x20hydrates\x20with\x20CSS\x20and\x20not\x20waiting\x20on\x20dependencies','IlDbr':'Basic CSS Modules Ordering','Anpgi':'should handle unresolved files gracefully'};GmMxfb['xzcGc'](describe,GmMxfb['cptbQ'],()=>{var KXJLHa={'XVLQy':function(callee,param1){return GmMxfb['UDedH'](callee,param1);},'nfRPX':function(callee,param1,param2){return GmMxfb['jlJfZ'](callee,param1,param2);},'Lqzdt':GmMxfb['SDIwX']};const appDir=GmMxfb['QsKje'](join,fixturesDir,'single-global');GmMxfb['OGvDe'](beforeAll,async()=>{await KXJLHa['XVLQy'](remove,KXJLHa['nfRPX'](join,appDir,KXJLHa['Lqzdt']));});it(GmMxfb['sLEEv'],async()=>{if(GmMxfb['gJoOC']('OKPoG','OKPoG')){cssFile['restore']();}else{const {code,stdout}=await GmMxfb['TSfKu'](nextBuild,appDir,[],{'stdout':!![]});expect(code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);}});GmMxfb['ljmQa'](it,'should\x27ve\x20emitted\x20a\x20single\x20CSS\x20file',async()=>{const cssFolder=GmMxfb['JjVBX'](join,appDir,GmMxfb['QIeJc']);const files=await GmMxfb['SwTEd'](readdir,cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));GmMxfb['SwTEd'](expect,cssFiles['length'])['toBe'](0x1);expect(await GmMxfb['jlJfZ'](readFile,join(cssFolder,cssFiles[0x0]),GmMxfb['auuWQ']))['toContain'](GmMxfb['KrQwq']);});});GmMxfb['rxtVS'](describe,GmMxfb['EYHKk'],()=>{var UnLcTW={'QLUcH':function(callee,param1){return GmMxfb['pWvme'](callee,param1);}};const appDir=GmMxfb['mGJkD'](join,fixturesDir,'single-global-src');beforeAll(async()=>{await GmMxfb['nvdMW'](remove,GmMxfb['nZEzH'](join,appDir,GmMxfb['SDIwX']));});GmMxfb['CxnKc'](it,GmMxfb['sLEEv'],async()=>{const {code,stdout}=await nextBuild(appDir,[],{'stdout':!![]});expect(code)['toBe'](0x0);UnLcTW['QLUcH'](expect,stdout)['toMatch'](/Compiled successfully/);});GmMxfb['RmjMF'](it,'should\'ve emitted a single CSS file',async()=>{const cssFolder=GmMxfb['nZEzH'](join,appDir,'.next/static/css');const files=await readdir(cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));expect(cssFiles['length'])['toBe'](0x1);GmMxfb['nvdMW'](expect,await GmMxfb['mGJkD'](readFile,join(cssFolder,cssFiles[0x0]),'utf8'))['toContain'](GmMxfb['KrQwq']);});});GmMxfb['rxtVS'](describe,'Multi Global Support',()=>{var uYUMoC={'qAEyd':function(callee,param1){return callee(param1);},'wxQTu':GmMxfb['uWpwI'],'NgSXb':GmMxfb['SDIwX'],'UCvvb':function(x,y){return GmMxfb['mnrUG'](x,y);},'eRGoq':function(x,y){return GmMxfb['jvlxn'](x,y);},'JvCaP':GmMxfb['sRDzw'],'nbcwz':function(callee,param1,param2){return GmMxfb['RmjMF'](callee,param1,param2);},'wwSjZ':GmMxfb['QIeJc'],'WbSAY':function(callee,param1){return GmMxfb['KceCR'](callee,param1);},'FfUad':function(callee,param1){return GmMxfb['KceCR'](callee,param1);}};const appDir=join(fixturesDir,GmMxfb['TVkUV']);GmMxfb['KceCR'](beforeAll,async()=>{if('NZElE'===uYUMoC['wxQTu']){await remove(join(appDir,uYUMoC['NgSXb']));}else{uYUMoC['qAEyd'](expect,code)['toBe'](0x0);uYUMoC['qAEyd'](expect,stdout)['toMatch'](/Compiled successfully/);}});GmMxfb['RmjMF'](it,GmMxfb['sLEEv'],async()=>{var tYucpN={'PLzQK':function(callee,param1){return GmMxfb['pWvme'](callee,param1);}};if(GmMxfb['JcZdo'](GmMxfb['aBnQg'],GmMxfb['PxlrB'])){expect(code)['toBe'](0x0);tYucpN['PLzQK'](expect,stdout)['toMatch'](/Compiled successfully/);}else{const {code,stdout}=await GmMxfb['TSfKu'](nextBuild,appDir,[],{'stdout':!![]});GmMxfb['EoGHe'](expect,code)['toBe'](0x0);GmMxfb['ymUPl'](expect,stdout)['toMatch'](/Compiled successfully/);}});GmMxfb['LeinI'](it,'should\'ve emitted a single CSS file',async()=>{var gsnGdp={'sBqgJ':function(x,y){return uYUMoC['UCvvb'](x,y);},'gcIwm':'async'};if(uYUMoC['eRGoq']('CqftO',uYUMoC['JvCaP'])){++totalCount;if(gsnGdp['sBqgJ'](gsnGdp['gcIwm'],script['attribs'])){++asyncCount;}}else{const cssFolder=uYUMoC['nbcwz'](join,appDir,uYUMoC['wwSjZ']);const files=await uYUMoC['WbSAY'](readdir,cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));uYUMoC['FfUad'](expect,cssFiles['length'])['toBe'](0x1);const cssContent=await readFile(join(cssFolder,cssFiles[0x0]),'utf8');uYUMoC['FfUad'](expect,cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatchInlineSnapshot']('".red-text{color:red}.blue-text{color:blue}"');}});});GmMxfb['nguKm'](describe,'Nested @import() Global Support',()=>{var LKATeb={'scMjm':function(callee,param1,param2,param3){return GmMxfb['sWoqX'](callee,param1,param2,param3);},'rcNfk':function(callee,param1){return GmMxfb['UhPyA'](callee,param1);},'ChNEZ':function(callee,param1){return GmMxfb['UhPyA'](callee,param1);}};const appDir=GmMxfb['vwcZK'](join,fixturesDir,GmMxfb['SClEY']);GmMxfb['UhPyA'](beforeAll,async()=>{await GmMxfb['KceCR'](remove,GmMxfb['LeinI'](join,appDir,'.next'));});GmMxfb['vwcZK'](it,'should compile successfully',async()=>{const {code,stdout}=await LKATeb['scMjm'](nextBuild,appDir,[],{'stdout':!![]});LKATeb['rcNfk'](expect,code)['toBe'](0x0);LKATeb['ChNEZ'](expect,stdout)['toMatch'](/Compiled successfully/);});it('should\'ve emitted a single CSS file',async()=>{if('YHEBw'!==GmMxfb['fWeTi']){LKATeb['ChNEZ'](expect,code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);}else{const cssFolder=join(appDir,'.next/static/css');const files=await readdir(cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));GmMxfb['YsWaa'](expect,cssFiles['length'])['toBe'](0x1);const cssContent=await readFile(GmMxfb['LeinI'](join,cssFolder,cssFiles[0x0]),'utf8');GmMxfb['UhPyA'](expect,cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatchInlineSnapshot']('\x22.red-text{color:purple;font-weight:bolder;color:red}.blue-text{color:orange;font-weight:bolder;color:blue}\x22');}});});GmMxfb['nguKm'](describe,GmMxfb['vhngg'],()=>{var TOJYLo={'yhJtL':function(callee,param1){return GmMxfb['UhPyA'](callee,param1);},'LTWGa':GmMxfb['gYeuq'],'KhqMd':function(x,y){return x===y;},'lgAsg':'mjRxf','UdqfD':function(callee,param1,param2,param3){return GmMxfb['TBwYn'](callee,param1,param2,param3);},'RvXYq':function(callee,param1,param2){return GmMxfb['vwcZK'](callee,param1,param2);},'ZQIol':'.next/static/css','veIbt':function(callee,param1){return GmMxfb['UhPyA'](callee,param1);},'TGGZG':'utf8'};if(GmMxfb['dVpOz'](GmMxfb['GqyGN'],GmMxfb['GqyGN'])){expect(code)['toBe'](0x0);GmMxfb['UhPyA'](expect,stdout)['toMatch'](/Compiled successfully/);}else{const appDir=GmMxfb['vwcZK'](join,fixturesDir,GmMxfb['SYmSi']);GmMxfb['UhPyA'](beforeAll,async()=>{if(GmMxfb['JcZdo']('FjPUD','cNlRe')){expect(code)['toBe'](0x0);TOJYLo['yhJtL'](expect,stdout)['toMatch'](/Compiled successfully/);}else{await remove(GmMxfb['vwcZK'](join,appDir,GmMxfb['SDIwX']));}});GmMxfb['XBoEk'](it,'should compile successfully',async()=>{if(TOJYLo['KhqMd'](TOJYLo['lgAsg'],TOJYLo['lgAsg'])){const {code,stdout}=await TOJYLo['UdqfD'](nextBuild,appDir,[],{'stdout':!![]});TOJYLo['yhJtL'](expect,code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);}else{throw new Error(TOJYLo['LTWGa']);}});GmMxfb['XBoEk'](it,'should\x27ve\x20compiled\x20and\x20prefixed',async()=>{const cssFolder=TOJYLo['RvXYq'](join,appDir,TOJYLo['ZQIol']);const files=await TOJYLo['veIbt'](readdir,cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));expect(cssFiles['length'])['toBe'](0x1);const cssContent=await TOJYLo['RvXYq'](readFile,TOJYLo['RvXYq'](join,cssFolder,cssFiles[0x0]),TOJYLo['TGGZG']);TOJYLo['veIbt'](expect,cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatchInlineSnapshot']('"@media (min-width:480px) and (max-width:767px){::-moz-placeholder{color:green}:-ms-input-placeholder{color:green}::placeholder{color:green}}.flex-parsing{flex:0 0 calc(50% - var(--vertical-gutter))}.transform-parsing{transform:translate3d(0,0)}.css-grid-shorthand{grid-column:span 2}.g-docs-sidenav .filter::-webkit-input-placeholder{opacity:80%}"');expect(cssContent)['toMatch'](/\/\*#\s*sourceMappingURL=(.+\.map)\s*\*\//);});GmMxfb['XBoEk'](it,'should\x27ve\x20emitted\x20a\x20source\x20map',async()=>{if(GmMxfb['JcZdo'](GmMxfb['Ngxkv'],GmMxfb['DIgII'])){cssFile['restore']();}else{const cssFolder=GmMxfb['vwcZK'](join,appDir,GmMxfb['QIeJc']);const files=await GmMxfb['UhPyA'](readdir,cssFolder);const cssMapFiles=files['filter'](f=>/\.css\.map$/['test'](f));expect(cssMapFiles['length'])['toBe'](0x1);const cssMapContent=(await GmMxfb['vwcZK'](readFile,GmMxfb['vwcZK'](join,cssFolder,cssMapFiles[0x0]),'utf8'))['trim']();const {version,mappings,sourcesContent}=JSON['parse'](cssMapContent);GmMxfb['UhPyA'](expect,{'version':version,'mappings':mappings,'sourcesContent':sourcesContent})['toMatchInlineSnapshot']('\n        Object {\n          "mappings": "AAAA,+CACE,mBACE,WACF,CAFA,uBACE,WACF,CAFA,cACE,WACF,CACF,CAEA,cACE,2CACF,CAEA,mBACE,0BACF,CAEA,oBACE,kBACF,CAEA,mDACE,WACF",\n          "sourcesContent": Array [\n            "@media (480px <= width < 768px) {\n          ::placeholder {\n            color: green;\n          }\n        }\n\n        .flex-parsing {\n          flex: 0 0 calc(50% - var(--vertical-gutter));\n        }\n\n        .transform-parsing {\n          transform: translate3d(0px, 0px);\n        }\n\n        .css-grid-shorthand {\n          grid-column: span 2;\n        }\n\n        .g-docs-sidenav .filter::-webkit-input-placeholder {\n          opacity: 80%;\n        }\n        ",\n          ],\n          "version": 3,\n        }\n      ');}});}});describe(GmMxfb['ERxRy'],()=>{var WOuCzB={'xWSSj':function(callee,param1){return GmMxfb['UhPyA'](callee,param1);},'pTYde':function(x,y){return GmMxfb['dVpOz'](x,y);},'UnMzS':'fKrNG','qdKex':function(callee,param1,param2){return callee(param1,param2);},'NtimX':'.next/static/css','TsmVm':function(callee,param1,param2){return callee(param1,param2);},'zNBkL':function(callee,param1,param2){return callee(param1,param2);}};const appDir=GmMxfb['ZwApk'](join,fixturesDir,GmMxfb['Jjcyq']);GmMxfb['ALJNv'](beforeAll,async()=>{await remove(join(appDir,GmMxfb['SDIwX']));});it(GmMxfb['sLEEv'],async()=>{const {code,stdout}=await nextBuild(appDir,[],{'stdout':!![]});WOuCzB['xWSSj'](expect,code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);});it('should\x27ve\x20emitted\x20a\x20single\x20CSS\x20file',async()=>{if(WOuCzB['pTYde'](WOuCzB['UnMzS'],'fKrNG')){++asyncCount;}else{const cssFolder=WOuCzB['qdKex'](join,appDir,WOuCzB['NtimX']);const files=await readdir(cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));expect(cssFiles['length'])['toBe'](0x1);const cssContent=await WOuCzB['TsmVm'](readFile,WOuCzB['zNBkL'](join,cssFolder,cssFiles[0x0]),'utf8');WOuCzB['xWSSj'](expect,cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatchInlineSnapshot']('".blue-text{color:blue}.red-text{color:red}"');}});});describe('React Lifecyce Order (dev)',()=>{var BHGwTA={'LPrmy':function(callee,param1,param2){return callee(param1,param2);}};const appDir=GmMxfb['ZwApk'](join,fixturesDir,'transition-react');GmMxfb['fpDVC'](beforeAll,async()=>{await GmMxfb['ALJNv'](remove,join(appDir,GmMxfb['SDIwX']));});let appPort;let app;GmMxfb['VCevJ'](beforeAll,async()=>{appPort=await findPort();app=await BHGwTA['LPrmy'](launchApp,appDir,appPort);});GmMxfb['VCevJ'](afterAll,async()=>{await GmMxfb['ALJNv'](killApp,app);});GmMxfb['kjTce'](it,GmMxfb['Bocin'],async()=>{let browser;try{browser=await GmMxfb['ZwApk'](_0x381845,appPort,'/');await browser['waitForElementByCss'](GmMxfb['LGIpA'])['click']();const text=await browser['waitForElementByCss'](GmMxfb['dTvCJ'])['text']();GmMxfb['pSHqQ'](expect,text)['toMatchInlineSnapshot']('"rgb(255, 0, 0)"');}finally{if(browser){await browser['close']();}}});});GmMxfb['nguKm'](describe,GmMxfb['EJLtI'],()=>{var NqQNlC={'XpeYX':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'Xzbet':function(callee){return callee();},'Jomkm':function(callee,param1,param2){return GmMxfb['pmkTy'](callee,param1,param2);},'CNWte':function(callee,param1){return GmMxfb['VCevJ'](callee,param1);},'xzCyY':'#link-other','RoJJM':GmMxfb['dTvCJ']};const appDir=join(fixturesDir,GmMxfb['uSyLw']);GmMxfb['VCevJ'](beforeAll,async()=>{await remove(GmMxfb['pmkTy'](join,appDir,GmMxfb['SDIwX']));});let appPort;let app;let code;let stdout;GmMxfb['VCevJ'](beforeAll,async()=>{;({code,stdout}=await NqQNlC['XpeYX'](nextBuild,appDir,[],{'stdout':!![]}));appPort=await NqQNlC['Xzbet'](findPort);app=await NqQNlC['Jomkm'](nextStart,appDir,appPort);});afterAll(async()=>{await NqQNlC['CNWte'](killApp,app);});GmMxfb['TTgqH'](it,GmMxfb['nLqzj'],()=>{expect(code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);});GmMxfb['Yplix'](it,'should\x20have\x20the\x20correct\x20color\x20on\x20mount\x20after\x20navigation',async()=>{let browser;try{browser=await NqQNlC['Jomkm'](_0x381845,appPort,'/');await browser['waitForElementByCss'](NqQNlC['xzCyY'])['click']();const text=await browser['waitForElementByCss'](NqQNlC['RoJJM'])['text']();expect(text)['toMatchInlineSnapshot']('"rgb(255, 0, 0)"');}finally{if(browser){await browser['close']();}}});});describe(GmMxfb['gFOqM'],()=>{var MQJmen={'nExYM':function(callee,param1){return GmMxfb['khKuE'](callee,param1);},'jJDvZ':GmMxfb['SDIwX']};const appDir=GmMxfb['JKYhV'](join,fixturesDir,'invalid-module-document');GmMxfb['TyHsk'](beforeAll,async()=>{await MQJmen['nExYM'](remove,join(appDir,MQJmen['jJDvZ']));});GmMxfb['EhyTH'](it,GmMxfb['ZNcOI'],async()=>{const {code,stderr}=await GmMxfb['dCFEj'](nextBuild,appDir,[],{'stderr':!![]});GmMxfb['VCevJ'](expect,code)['not']['toBe'](0x0);GmMxfb['KgivJ'](expect,stderr)['toContain'](GmMxfb['HSccP']);expect(stderr)['toContain'](GmMxfb['XjMmx']);GmMxfb['fXTgL'](expect,stderr)['toMatch'](/CSS.*cannot.*be imported within.*pages[\\\/]_document\.js/);GmMxfb['oejoC'](expect,stderr)['toMatch'](/Location:.*pages[\\\/]_document\.js/);});});GmMxfb['nguKm'](describe,GmMxfb['iscXP'],()=>{var AlzKpf={'DnzcQ':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'jdzju':function(callee,param1){return GmMxfb['MnOFL'](callee,param1);},'bijbR':function(callee,param1){return callee(param1);},'sctVk':GmMxfb['HSccP'],'crHJz':GmMxfb['CekNf']};const appDir=GmMxfb['Gxhnf'](join,fixturesDir,GmMxfb['OnBBY']);beforeAll(async()=>{await GmMxfb['niwZQ'](remove,GmMxfb['Gxhnf'](join,appDir,GmMxfb['SDIwX']));});GmMxfb['jSJQp'](it,GmMxfb['ZNcOI'],async()=>{const {code,stderr}=await AlzKpf['DnzcQ'](nextBuild,appDir,[],{'stderr':!![]});AlzKpf['jdzju'](expect,code)['not']['toBe'](0x0);AlzKpf['bijbR'](expect,stderr)['toContain'](AlzKpf['sctVk']);AlzKpf['bijbR'](expect,stderr)['toContain'](AlzKpf['crHJz']);expect(stderr)['toMatch'](/Please move all first-party global CSS imports.*?pages(\/|\\)_app/);AlzKpf['bijbR'](expect,stderr)['toMatch'](/Location:.*pages[\\\/]index\.js/);});});GmMxfb['nguKm'](describe,GmMxfb['VvLdk'],()=>{var lQOSqd={'UKsGO':function(callee,param1,param2,param3){return GmMxfb['HFeEf'](callee,param1,param2,param3);},'iyjXo':function(callee,param1){return GmMxfb['lwtrw'](callee,param1);},'PYXxI':function(callee,param1,param2){return callee(param1,param2);},'RZRac':function(callee,param1,param2){return GmMxfb['jSJQp'](callee,param1,param2);},'hzuad':function(callee,param1,param2){return GmMxfb['jSJQp'](callee,param1,param2);},'uPsiH':GmMxfb['auuWQ']};const appDir=join(fixturesDir,GmMxfb['iSrbm']);GmMxfb['QjDDx'](beforeAll,async()=>{await GmMxfb['MnOFL'](remove,GmMxfb['jSJQp'](join,appDir,GmMxfb['SDIwX']));});GmMxfb['jSJQp'](it,'should compile successfully',async()=>{const {code,stdout}=await lQOSqd['UKsGO'](nextBuild,appDir,[],{'stdout':!![]});lQOSqd['iyjXo'](expect,code)['toBe'](0x0);lQOSqd['iyjXo'](expect,stdout)['toMatch'](/Compiled successfully/);});it('should\'ve emitted a single CSS file',async()=>{const cssFolder=lQOSqd['PYXxI'](join,appDir,'.next/static/css');const files=await lQOSqd['iyjXo'](readdir,cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));lQOSqd['iyjXo'](expect,cssFiles['length'])['toBe'](0x1);const cssContent=await lQOSqd['RZRac'](readFile,lQOSqd['hzuad'](join,cssFolder,cssFiles[0x0]),lQOSqd['uPsiH']);expect(cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatchInlineSnapshot']('".red-text{color:\"red\"}"');});});GmMxfb['nguKm'](describe,GmMxfb['ABbyi'],()=>{var DNIdHX={'iAriG':function(callee,param1){return callee(param1);},'IzEvT':'.next'};const appDir=join(fixturesDir,GmMxfb['qbaVq']);beforeAll(async()=>{await DNIdHX['iAriG'](remove,join(appDir,DNIdHX['IzEvT']));});it(GmMxfb['ZNcOI'],async()=>{const {code,stderr}=await nextBuild(appDir,[],{'stderr':!![]});expect(code)['not']['toBe'](0x0);GmMxfb['KhVtN'](expect,stderr)['toContain']('Failed to compile');GmMxfb['KhVtN'](expect,stderr)['toContain'](GmMxfb['CekNf']);GmMxfb['KhVtN'](expect,stderr)['toMatch'](/Please move all first-party global CSS imports.*?pages(\/|\\)_app/);GmMxfb['pkFhF'](expect,stderr)['toMatch'](/Location:.*pages[\\\/]index\.js/);});});GmMxfb['BTXdt'](describe,GmMxfb['ajUAk'],()=>{var YUVOOC={'UKEfL':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'elJcI':GmMxfb['HSccP'],'EBCvw':function(callee,param1){return GmMxfb['hlnVS'](callee,param1);},'XLmkX':'styles/global.css','rGLDO':GmMxfb['rIALu']};const appDir=GmMxfb['jSJQp'](join,fixturesDir,GmMxfb['HweOK']);GmMxfb['hlnVS'](beforeAll,async()=>{await GmMxfb['cQwef'](remove,GmMxfb['jSJQp'](join,appDir,GmMxfb['SDIwX']));});it('should fail to build',async()=>{const {code,stderr}=await YUVOOC['UKEfL'](nextBuild,appDir,[],{'stderr':!![]});expect(code)['not']['toBe'](0x0);expect(stderr)['toContain'](YUVOOC['elJcI']);YUVOOC['EBCvw'](expect,stderr)['toContain'](YUVOOC['XLmkX']);expect(stderr)['toContain'](YUVOOC['rGLDO']);YUVOOC['EBCvw'](expect,stderr)['toMatch'](/Location:.*pages[\\\/]index\.js/);});});describe(GmMxfb['TvSVc'],()=>{var dOMtYy={'LQpqf':function(callee,param1,param2){return GmMxfb['IaVzQ'](callee,param1,param2);},'wuQWT':GmMxfb['SDIwX'],'wEqFw':function(callee,param1){return GmMxfb['phaVf'](callee,param1);}};const appDir=GmMxfb['IbbpX'](join,fixturesDir,'multi-page');GmMxfb['Wcowd'](beforeAll,async()=>{await remove(dOMtYy['LQpqf'](join,appDir,dOMtYy['wuQWT']));});let appPort;let app;GmMxfb['HFihS'](beforeAll,async()=>{appPort=await GmMxfb['jpWhj'](findPort);app=await launchApp(appDir,appPort);});afterAll(async()=>{await dOMtYy['wEqFw'](killApp,app);});GmMxfb['bzVgO'](it,GmMxfb['KbGIr'],async()=>{let browser;try{browser=await GmMxfb['jSJQp'](_0x381845,appPort,GmMxfb['FzOIH']);const desiredText=GmMxfb['SZosW'];await browser['elementById']('text-input')['type'](desiredText);GmMxfb['uuBWD'](expect,await browser['elementById'](GmMxfb['SVxXD'])['getValue']())['toBe'](desiredText);const currentColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'.red-text\')).color');expect(currentColor)['toMatchInlineSnapshot']('"rgb(255, 0, 0)"');const cssFile=new File(GmMxfb['IaVzQ'](join,appDir,GmMxfb['KxotT']));try{cssFile['replace'](GmMxfb['uwBNp'],'color:\x20purple');await check(()=>browser['eval']('window.getComputedStyle(document.querySelector(\x27.red-text\x27)).color'),GmMxfb['zMxey']);GmMxfb['uuBWD'](expect,await browser['elementById'](GmMxfb['SVxXD'])['getValue']())['toBe'](desiredText);}finally{cssFile['restore']();}}finally{if(browser){await browser['close']();}}});});GmMxfb['LZZfz'](describe,'Has\x20CSS\x20in\x20computed\x20styles\x20in\x20Development',()=>{var LKBYZk={'SqwgO':function(callee,param1,param2){return GmMxfb['nLGmq'](callee,param1,param2);}};const appDir=GmMxfb['IbkzE'](join,fixturesDir,GmMxfb['hEMsr']);GmMxfb['EHYhh'](beforeAll,async()=>{await GmMxfb['tUKvu'](remove,join(appDir,GmMxfb['SDIwX']));});let appPort;let app;GmMxfb['EHYhh'](beforeAll,async()=>{appPort=await findPort();app=await LKBYZk['SqwgO'](launchApp,appDir,appPort);});GmMxfb['wjsmX'](afterAll,async()=>{await GmMxfb['fYYZg'](killApp,app);});it('should have CSS for page',async()=>{let browser;try{browser=await GmMxfb['bzVgO'](_0x381845,appPort,GmMxfb['KFDNf']);const currentColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'.blue-text\')).color');GmMxfb['nUKKX'](expect,currentColor)['toMatchInlineSnapshot']('\x22rgb(0,\x200,\x20255)\x22');}finally{if(browser){await browser['close']();}}});});GmMxfb['lCVsW'](describe,GmMxfb['aQqPi'],()=>{var rPpRKW={'CJElz':function(callee,param1){return callee(param1);},'IseJo':GmMxfb['SDIwX'],'quhzW':function(callee,param1){return GmMxfb['IHtir'](callee,param1);},'xsvTD':GmMxfb['FXuqs']};const appDir=GmMxfb['DbuIt'](join,fixturesDir,GmMxfb['pvQqj']);GmMxfb['kDsov'](beforeAll,async()=>{await rPpRKW['CJElz'](remove,join(appDir,rPpRKW['IseJo']));});let appPort;let app;beforeAll(async()=>{appPort=await GmMxfb['LTzKC'](findPort);app=await GmMxfb['DbuIt'](launchApp,appDir,appPort);});GmMxfb['kDsov'](afterAll,async()=>{await GmMxfb['IHtir'](killApp,app);});GmMxfb['UfTJU'](it,GmMxfb['RQeRa'],async()=>{let browser;try{browser=await _0x381845(appPort,'/');const currentDisplay=await browser['eval']('window.getComputedStyle(document.querySelector(\'body\')).display');rPpRKW['quhzW'](expect,currentDisplay)['toBe'](rPpRKW['xsvTD']);}finally{if(browser){await browser['close']();}}});});GmMxfb['lCVsW'](describe,GmMxfb['HuiTo'],()=>{var xTHTpN={'LeRVU':GmMxfb['IlOde'],'Jpsis':function(callee,param1){return callee(param1);}};const appDir=GmMxfb['UfTJU'](join,fixturesDir,GmMxfb['pvQqj']);let appPort;let app;GmMxfb['yJfjU'](beforeAll,async()=>{await GmMxfb['yJfjU'](remove,GmMxfb['UfTJU'](join,appDir,GmMxfb['SDIwX']));appPort=await findPort();app=await GmMxfb['UfTJU'](launchApp,appDir,appPort);});afterAll(async()=>{await killApp(app);});GmMxfb['vhfvm'](it,'should have body visible',async()=>{const pageFile=new File(join(appDir,'pages/index.js'));let browser;try{pageFile['replace']('<div />',xTHTpN['LeRVU']);await waitFor(0x7d0);browser=await _0x381845(appPort,'/');const currentDisplay=await browser['eval']('window.getComputedStyle(document.querySelector(\'body\')).display');xTHTpN['Jpsis'](expect,currentDisplay)['toBe']('block');}finally{pageFile['restore']();if(browser){await browser['close']();}}});});describe(GmMxfb['ebIyE'],()=>{var TDhRbx={'SnUTN':function(callee,param1){return callee(param1);},'nNczJ':function(callee,param1,param2){return GmMxfb['vhfvm'](callee,param1,param2);},'oMysu':GmMxfb['SDIwX'],'BRDqV':function(callee,param1,param2,param3){return GmMxfb['LRkVz'](callee,param1,param2,param3);},'lQZKu':function(callee,param1){return GmMxfb['OFweL'](callee,param1);},'glxRt':GmMxfb['vWSpf'],'cKkeL':GmMxfb['BQtZL'],'wZyId':GmMxfb['zwzjS']};const appDir=GmMxfb['GvfIc'](join,fixturesDir,'multi-page');let appPort;let app;let stdout;let code;GmMxfb['hRtIo'](beforeAll,async()=>{await TDhRbx['SnUTN'](remove,TDhRbx['nNczJ'](join,appDir,TDhRbx['oMysu']));({code,stdout}=await TDhRbx['BRDqV'](nextBuild,appDir,[],{'stdout':!![]}));appPort=await findPort();app=await nextStart(appDir,appPort);});GmMxfb['hRtIo'](afterAll,async()=>{await killApp(app);});GmMxfb['GvfIc'](it,GmMxfb['nLqzj'],()=>{GmMxfb['yJfjU'](expect,code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);});it(GmMxfb['YSNrM'],async()=>{const browser=await _0x381845(appPort,GmMxfb['KFDNf']);const currentColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'.blue-text\')).color');GmMxfb['yJfjU'](expect,currentColor)['toMatchInlineSnapshot']('"rgb(0, 0, 255)"');});GmMxfb['GvfIc'](it,'should\'ve preloaded the CSS file and injected it in <head>',async()=>{const content=await TDhRbx['nNczJ'](renderViaHTTP,appPort,'/page2');const $=_0x4b1504['load'](content);const cssPreload=TDhRbx['SnUTN']($,'link[rel=\x22preload\x22][as=\x22style\x22]');TDhRbx['SnUTN'](expect,cssPreload['length'])['toBe'](0x1);TDhRbx['SnUTN'](expect,cssPreload['attr']('href'))['toMatch'](/^\/_next\/static\/css\/.*\.css$/);const cssSheet=TDhRbx['lQZKu']($,TDhRbx['glxRt']);TDhRbx['lQZKu'](expect,cssSheet['length'])['toBe'](0x1);TDhRbx['lQZKu'](expect,cssSheet['attr'](TDhRbx['cKkeL']))['toMatch'](/^\/_next\/static\/css\/.*\.css$/);const allPreloads=[]['slice']['call'](TDhRbx['lQZKu']($,TDhRbx['wZyId']));const styleIndexes=allPreloads['flatMap']((p,i)=>p['attribs']['as']==='style'?i:[]);expect(styleIndexes)['toEqual']([0x0]);});});GmMxfb['lCVsW'](describe,GmMxfb['dFSdN'],()=>{const appDir=join(fixturesDir,GmMxfb['xAkNk']);GmMxfb['ynHIq'](beforeAll,async()=>{await remove(join(appDir,GmMxfb['SDIwX']));});GmMxfb['YXhDh'](it,GmMxfb['sLEEv'],async()=>{const {code,stdout}=await GmMxfb['WTIYv'](nextBuild,appDir,[],{'stdout':!![]});GmMxfb['hRtIo'](expect,code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);});it('should\'ve emitted expected files',async()=>{const cssFolder=GmMxfb['lfJJY'](join,appDir,'.next/static/css');const mediaFolder=GmMxfb['QWwUl'](join,appDir,'.next/static/media');const files=await GmMxfb['ZAZQH'](readdir,cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));expect(cssFiles['length'])['toBe'](0x1);const cssContent=await GmMxfb['QWwUl'](readFile,GmMxfb['tlVRI'](join,cssFolder,cssFiles[0x0]),GmMxfb['auuWQ']);GmMxfb['ZAZQH'](expect,cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatch'](/^\.red-text\{color:red;background-image:url\(\/_next\/static\/media\/dark\.[a-z0-9]{32}\.svg\) url\(\/_next\/static\/media\/dark2\.[a-z0-9]{32}\.svg\)\}\.blue-text\{color:orange;font-weight:bolder;background-image:url\(\/_next\/static\/media\/light\.[a-z0-9]{32}\.svg\);color:blue\}$/);const mediaFiles=await GmMxfb['nwoJh'](readdir,mediaFolder);expect(mediaFiles['length'])['toBe'](0x3);expect(mediaFiles['map'](fileName=>/^(.+?)\..{32}\.(.+?)$/['exec'](fileName)['slice'](0x1)['join']('.'))['sort']())['toMatchInlineSnapshot']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20Array\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22dark.svg\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22dark2.svg\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22light.svg\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20');});});GmMxfb['lCVsW'](describe,GmMxfb['VDQar'],()=>{var SPzdYw={'Yobkc':function(callee,param1){return callee(param1);},'neHrb':function(callee,param1,param2){return callee(param1,param2);},'sQJCu':GmMxfb['SDIwX']};const appDir=join(fixturesDir,GmMxfb['drcnY']);GmMxfb['RjEKo'](beforeAll,async()=>{await SPzdYw['Yobkc'](remove,SPzdYw['neHrb'](join,appDir,SPzdYw['sQJCu']));});GmMxfb['xYdSv'](it,GmMxfb['sLEEv'],async()=>{const {code,stdout}=await nextBuild(appDir,[],{'stdout':!![]});expect(code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);});it('should\'ve emitted expected files',async()=>{const cssFolder=GmMxfb['AhmZn'](join,appDir,'.next/static/css');const mediaFolder=GmMxfb['AhmZn'](join,appDir,GmMxfb['SGgHu']);const files=await readdir(cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));expect(cssFiles['length'])['toBe'](0x1);const cssContent=await GmMxfb['xYdSv'](readFile,join(cssFolder,cssFiles[0x0]),GmMxfb['auuWQ']);GmMxfb['ynHIq'](expect,cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatch'](/^\.red-text\{color:red;background-image:url\(\/foo\/_next\/static\/media\/dark\.[a-z0-9]{32}\.svg\) url\(\/foo\/_next\/static\/media\/dark2\.[a-z0-9]{32}\.svg\)\}\.blue-text\{color:orange;font-weight:bolder;background-image:url\(\/foo\/_next\/static\/media\/light\.[a-z0-9]{32}\.svg\);color:blue\}$/);const mediaFiles=await GmMxfb['ynHIq'](readdir,mediaFolder);expect(mediaFiles['length'])['toBe'](0x3);GmMxfb['ynHIq'](expect,mediaFiles['map'](fileName=>/^(.+?)\..{32}\.(.+?)$/['exec'](fileName)['slice'](0x1)['join']('.'))['sort']())['toMatchInlineSnapshot']('\n        Array [\n          "dark.svg",\n          "dark2.svg",\n          "light.svg",\n        ]\n      ');});});describe(GmMxfb['uwazn'],()=>{const appDir=GmMxfb['MWexV'](join,fixturesDir,GmMxfb['PCHrp']);GmMxfb['ssyAL'](beforeAll,async()=>{await GmMxfb['RjEKo'](remove,join(appDir,GmMxfb['SDIwX']));});GmMxfb['pYxlL'](it,GmMxfb['sLEEv'],async()=>{const {code,stdout}=await GmMxfb['AhiNw'](nextBuild,appDir,[],{'stdout':!![]});GmMxfb['RjEKo'](expect,code)['toBe'](0x0);GmMxfb['WtTDE'](expect,stdout)['toMatch'](/Compiled successfully/);});GmMxfb['jmiDq'](it,'should\x27ve\x20emitted\x20expected\x20files',async()=>{const cssFolder=GmMxfb['xYdSv'](join,appDir,GmMxfb['QIeJc']);const mediaFolder=GmMxfb['xYdSv'](join,appDir,GmMxfb['SGgHu']);const files=await readdir(cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));expect(cssFiles['length'])['toBe'](0x1);const cssContent=await GmMxfb['gKWYY'](readFile,GmMxfb['nYXdE'](join,cssFolder,cssFiles[0x0]),'utf8');GmMxfb['WtTDE'](expect,cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatch'](/^\.red-text\{color:red;background-image:url\(\/foo\/_next\/static\/media\/dark\.[a-z0-9]{32}\.svg\) url\(\/foo\/_next\/static\/media\/dark2\.[a-z0-9]{32}\.svg\)\}\.blue-text\{color:orange;font-weight:bolder;background-image:url\(\/foo\/_next\/static\/media\/light\.[a-z0-9]{32}\.svg\);color:blue\}$/);const mediaFiles=await GmMxfb['lUcXJ'](readdir,mediaFolder);expect(mediaFiles['length'])['toBe'](0x3);GmMxfb['ssyAL'](expect,mediaFiles['map'](fileName=>/^(.+?)\..{32}\.(.+?)$/['exec'](fileName)['slice'](0x1)['join']('.'))['sort']())['toMatchInlineSnapshot']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20Array\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22dark.svg\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22dark2.svg\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22light.svg\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20');});});describe(GmMxfb['FqEEr'],()=>{var QvvoQy={'sbnfC':function(callee,param1){return GmMxfb['ssyAL'](callee,param1);},'aMLQY':function(callee,param1,param2){return GmMxfb['NrCAd'](callee,param1,param2);},'ZDSaG':function(callee,param1,param2){return GmMxfb['Rolxw'](callee,param1,param2);},'AgscP':function(callee,param1){return GmMxfb['ssyAL'](callee,param1);},'ClIOi':function(callee,param1){return GmMxfb['rKAvO'](callee,param1);},'PuZZr':function(callee,param1,param2){return callee(param1,param2);},'hRMma':GmMxfb['auuWQ'],'aXgXA':function(callee,param1){return callee(param1);}};const appDir=GmMxfb['Rolxw'](join,fixturesDir,GmMxfb['EzfUV']);GmMxfb['rKAvO'](beforeAll,async()=>{await QvvoQy['sbnfC'](remove,QvvoQy['aMLQY'](join,appDir,'.next'));});GmMxfb['Rolxw'](it,GmMxfb['sLEEv'],async()=>{const {code,stdout}=await GmMxfb['AhiNw'](nextBuild,appDir,[],{'stdout':!![]});expect(code)['toBe'](0x0);GmMxfb['ssyAL'](expect,stdout)['toMatch'](/Compiled successfully/);});GmMxfb['Rolxw'](it,'should\x27ve\x20emitted\x20a\x20single\x20CSS\x20file',async()=>{const cssFolder=QvvoQy['ZDSaG'](join,appDir,'.next/static/css');const files=await QvvoQy['AgscP'](readdir,cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));QvvoQy['ClIOi'](expect,cssFiles['length'])['toBe'](0x1);const cssContent=await QvvoQy['PuZZr'](readFile,join(cssFolder,cssFiles[0x0]),QvvoQy['hRMma']);QvvoQy['aXgXA'](expect,cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatch'](/nprogress/);});});GmMxfb['URgPu'](describe,GmMxfb['PAIpN'],()=>{var VdEjTX={'MzkAo':function(callee,param1){return GmMxfb['GyYMb'](callee,param1);},'GNYqo':function(callee,param1,param2){return callee(param1,param2);},'RXoxk':GmMxfb['QIeJc'],'JyTuc':function(callee,param1){return GmMxfb['GyYMb'](callee,param1);},'gGJUR':function(callee,param1,param2){return GmMxfb['WNfXK'](callee,param1,param2);},'vLziS':GmMxfb['auuWQ'],'EVkQH':function(callee,param1){return GmMxfb['GyYMb'](callee,param1);}};const appDir=GmMxfb['WNfXK'](join,fixturesDir,GmMxfb['hXgzb']);beforeAll(async()=>{await VdEjTX['MzkAo'](remove,VdEjTX['GNYqo'](join,appDir,'.next'));});GmMxfb['ERvQF'](it,GmMxfb['sLEEv'],async()=>{const {code,stdout}=await nextBuild(appDir,[],{'stdout':!![]});GmMxfb['GyYMb'](expect,code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);});GmMxfb['wbJhM'](it,'should\'ve emitted a single CSS file',async()=>{const cssFolder=VdEjTX['GNYqo'](join,appDir,VdEjTX['RXoxk']);const files=await readdir(cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));VdEjTX['JyTuc'](expect,cssFiles['length'])['toBe'](0x1);const cssContent=await VdEjTX['gGJUR'](readFile,join(cssFolder,cssFiles[0x0]),VdEjTX['vLziS']);VdEjTX['EVkQH'](expect,cssContent['replace'](/\/\*.*?\*\//g,'')['trim']())['toMatchInlineSnapshot']('".other{color:blue}.test{color:red}"');});});describe(GmMxfb['vxIet'],()=>{var OSTCNR={'YWzvA':function(callee,param1,param2){return GmMxfb['GezHQ'](callee,param1,param2);},'VbvRO':'.next'};const appDir=join(fixturesDir,GmMxfb['onkhD']);GmMxfb['DdVol'](beforeAll,async()=>{await remove(OSTCNR['YWzvA'](join,appDir,OSTCNR['VbvRO']));});GmMxfb['ZWYAk'](it,GmMxfb['lrmuE'],async()=>{const {code,stderr}=await GmMxfb['ztBTw'](nextBuild,appDir,[],{'stderr':!![]});GmMxfb['Iejyt'](expect,code)['toBe'](0x0);GmMxfb['CdNVh'](expect,stderr)['not']['toMatch'](/Can't resolve '[^']*?nprogress[^']*?'/);GmMxfb['GzWsh'](expect,stderr)['not']['toMatch'](/Build error occurred/);});});GmMxfb['URgPu'](describe,'Ordering with styled-jsx (dev)',()=>{var JzfCoF={'eWvTF':function(callee,param1){return GmMxfb['NudWv'](callee,param1);},'tETds':function(callee,param1,param2){return GmMxfb['aufIb'](callee,param1,param2);},'eNBAX':'.next','SmvlG':function(callee){return GmMxfb['LTzKC'](callee);},'hCXCK':function(callee,param1,param2){return GmMxfb['bXRIa'](callee,param1,param2);}};const appDir=GmMxfb['bXRIa'](join,fixturesDir,'with-styled-jsx');let appPort;let app;beforeAll(async()=>{await JzfCoF['eWvTF'](remove,JzfCoF['tETds'](join,appDir,JzfCoF['eNBAX']));appPort=await JzfCoF['SmvlG'](findPort);app=await JzfCoF['hCXCK'](launchApp,appDir,appPort);});GmMxfb['NudWv'](afterAll,async()=>{await JzfCoF['eWvTF'](killApp,app);});GmMxfb['bXRIa'](it,GmMxfb['JIHwO'],async()=>{const browser=await GmMxfb['aufIb'](_0x381845,appPort,'/');const currentColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'.my-text\')).color');GmMxfb['DdVol'](expect,currentColor)['toMatchInlineSnapshot']('"rgb(0, 128, 0)"');});});describe(GmMxfb['nDSjc'],()=>{var crmRei={'bvcDp':function(callee,param1){return GmMxfb['RWNgo'](callee,param1);}};const appDir=GmMxfb['jfpBf'](join,fixturesDir,'with-styled-jsx');let appPort;let app;let stdout;let code;GmMxfb['JoBxc'](beforeAll,async()=>{await GmMxfb['jtnQq'](remove,GmMxfb['bXRIa'](join,appDir,GmMxfb['SDIwX']));({code,stdout}=await GmMxfb['ztBTw'](nextBuild,appDir,[],{'stdout':!![]}));appPort=await findPort();app=await GmMxfb['gZvNY'](nextStart,appDir,appPort);});GmMxfb['ZqijO'](afterAll,async()=>{await crmRei['bvcDp'](killApp,app);});GmMxfb['jfpBf'](it,GmMxfb['nLqzj'],()=>{expect(code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);});GmMxfb['bZfRp'](it,GmMxfb['JIHwO'],async()=>{const browser=await GmMxfb['UnUmn'](_0x381845,appPort,'/');const currentColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'.my-text\')).color');GmMxfb['jtnQq'](expect,currentColor)['toMatchInlineSnapshot']('\x22rgb(0,\x20128,\x200)\x22');});});describe('Ordering with Global CSS and Modules (dev)',()=>{var omijfy={'wbRQS':function(callee,param1,param2){return GmMxfb['bZfRp'](callee,param1,param2);},'qvBlC':function(callee){return GmMxfb['pMIzh'](callee);},'lqrIR':function(callee,param1){return GmMxfb['ZqijO'](callee,param1);},'HCeCt':GmMxfb['XdJZc'],'mLubz':function(x,y){return GmMxfb['SDkza'](x,y);},'wthkC':function(callee,param1){return GmMxfb['DHGaP'](callee,param1);},'Uijuu':function(callee,param1,param2){return GmMxfb['bZfRp'](callee,param1,param2);},'tFYWy':function(callee,param1){return GmMxfb['EFnDs'](callee,param1);},'xzpND':function(callee,param1){return callee(param1);},'sZOlb':'pages/index.module.css','PZYmM':'color:\x20rgb(1,\x201,\x201);','bACJG':'rgb(0, 0, 255)'};const appDir=join(fixturesDir,GmMxfb['LjDxL']);let appPort;let app;beforeAll(async()=>{await remove(omijfy['wbRQS'](join,appDir,'.next'));appPort=await omijfy['qvBlC'](findPort);app=await omijfy['wbRQS'](launchApp,appDir,appPort);});GmMxfb['bhnBu'](afterAll,async()=>{await GmMxfb['ZqijO'](killApp,app);});it(GmMxfb['wpRfw'],async()=>{const content=await renderViaHTTP(appPort,'/');const $=_0x4b1504['load'](content);let asyncCount=0x0;let totalCount=0x0;for(const script of omijfy['lqrIR']($,omijfy['HCeCt'])['toArray']()){++totalCount;if(omijfy['mLubz']('async',script['attribs'])){++asyncCount;}}omijfy['wthkC'](expect,asyncCount)['toBe'](0x0);expect(totalCount)['not']['toBe'](0x0);});GmMxfb['GuzNV'](it,GmMxfb['JIHwO'],async()=>{const browser=await omijfy['Uijuu'](_0x381845,appPort,'/');const currentColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#blueText\')).color');omijfy['tFYWy'](expect,currentColor)['toMatchInlineSnapshot']('"rgb(0, 0, 255)"');});GmMxfb['GuzNV'](it,'should have the correct color (css ordering) during hot reloads',async()=>{let browser;try{browser=await _0x381845(appPort,'/');const blueColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#blueText\')).color');omijfy['tFYWy'](expect,blueColor)['toMatchInlineSnapshot']('\x22rgb(0,\x200,\x20255)\x22');const yellowColor=await browser['eval']('window.getComputedStyle(document.querySelector(\x27#yellowText\x27)).color');omijfy['xzpND'](expect,yellowColor)['toMatchInlineSnapshot']('"rgb(255, 255, 0)"');const cssFile=new File(omijfy['Uijuu'](join,appDir,omijfy['sZOlb']));try{cssFile['replace']('color: yellow;',omijfy['PZYmM']);await omijfy['Uijuu'](check,()=>browser['eval']('window.getComputedStyle(document.querySelector(\'#yellowText\')).color'),'rgb(1, 1, 1)');await omijfy['Uijuu'](check,()=>browser['eval']('window.getComputedStyle(document.querySelector(\'#blueText\')).color'),omijfy['bACJG']);}finally{cssFile['restore']();}}finally{if(browser){await browser['close']();}}});});GmMxfb['VnGtG'](describe,GmMxfb['bqpNk'],()=>{var jaGqUj={'XnKar':function(callee,param1){return GmMxfb['bhnBu'](callee,param1);},'KAZXP':function(callee,param1,param2){return GmMxfb['rLVxu'](callee,param1,param2);},'OabhB':GmMxfb['SDIwX'],'zJRTe':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'HpGWl':function(callee){return callee();},'siITQ':function(callee,param1){return callee(param1);}};const appDir=GmMxfb['rLVxu'](join,fixturesDir,GmMxfb['LjDxL']);let appPort;let app;let stdout;let code;GmMxfb['cxZin'](beforeAll,async()=>{await jaGqUj['XnKar'](remove,jaGqUj['KAZXP'](join,appDir,jaGqUj['OabhB']));({code,stdout}=await jaGqUj['zJRTe'](nextBuild,appDir,[],{'stdout':!![]}));appPort=await jaGqUj['HpGWl'](findPort);app=await nextStart(appDir,appPort);});afterAll(async()=>{await jaGqUj['siITQ'](killApp,app);});GmMxfb['hKARY'](it,'should\x20have\x20compiled\x20successfully',()=>{expect(code)['toBe'](0x0);GmMxfb['bhnBu'](expect,stdout)['toMatch'](/Compiled successfully/);});GmMxfb['hKARY'](it,'should have the correct color (css ordering)',async()=>{const browser=await _0x381845(appPort,'/');const currentColor=await browser['eval']('window.getComputedStyle(document.querySelector(\x27#blueText\x27)).color');expect(currentColor)['toMatchInlineSnapshot']('"rgb(0, 0, 255)"');});});describe(GmMxfb['IIkMp'],()=>{var eKGqcx={'PGLNi':function(callee,param1){return GmMxfb['vewin'](callee,param1);},'magLt':function(callee,param1,param2){return GmMxfb['cVIvX'](callee,param1,param2);},'mVPke':function(callee,param1){return GmMxfb['vewin'](callee,param1);}};const appDir=GmMxfb['SNRVu'](join,fixturesDir,GmMxfb['BXTLI']);let appPort;let app;let stdout;let code;GmMxfb['vewin'](beforeAll,async()=>{await GmMxfb['BmLqN'](remove,GmMxfb['hKARY'](join,appDir,GmMxfb['SDIwX']));({code,stdout}=await GmMxfb['GSCxc'](nextBuild,appDir,[],{'stdout':!![]}));appPort=await findPort();app=await GmMxfb['hKARY'](nextStart,appDir,appPort);});afterAll(async()=>{await eKGqcx['PGLNi'](killApp,app);});GmMxfb['SNRVu'](it,GmMxfb['nLqzj'],()=>{GmMxfb['bzyGo'](expect,code)['toBe'](0x0);expect(stdout)['toMatch'](/Compiled successfully/);});GmMxfb['SNRVu'](it,GmMxfb['mPyPs'],async()=>{const browser=await eKGqcx['magLt'](_0x381845,appPort,'/');const width1=await browser['eval']('window.getComputedStyle(document.querySelector(\x27.test1\x27)).borderWidth');eKGqcx['mVPke'](expect,width1)['toMatchInlineSnapshot']('\x220px\x22');const width2=await browser['eval']('window.getComputedStyle(document.querySelector(\'.test2\')).borderWidth');eKGqcx['mVPke'](expect,width2)['toMatchInlineSnapshot']('\x225px\x22');});});GmMxfb['VnGtG'](describe,'Basic Tailwind CSS',()=>{var ehLKah={'eWjfj':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'cUdtB':function(callee,param1){return GmMxfb['VowRI'](callee,param1);},'dAOev':function(callee,param1,param2){return GmMxfb['gWRwT'](callee,param1,param2);},'wlDxE':'.next/static/css'};const appDir=GmMxfb['pDYrC'](join,fixturesDir,GmMxfb['rYSyr']);GmMxfb['VowRI'](beforeAll,async()=>{await GmMxfb['vewin'](remove,GmMxfb['SNRVu'](join,appDir,'.next'));});it('should compile successfully',async()=>{const {code,stdout}=await ehLKah['eWjfj'](nextBuild,appDir,[],{'stdout':!![]});expect(code)['toBe'](0x0);ehLKah['cUdtB'](expect,stdout)['toMatch'](/Compiled successfully/);ehLKah['cUdtB'](expect,stdout)['toContain']('.css');});GmMxfb['pDYrC'](it,'should\x27ve\x20compiled\x20and\x20prefixed',async()=>{const cssFolder=GmMxfb['uhKOH'](join,appDir,GmMxfb['QIeJc']);const files=await GmMxfb['VHsvO'](readdir,cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));GmMxfb['VHsvO'](expect,cssFiles['length'])['toBe'](0x1);const cssContent=await GmMxfb['gWRwT'](readFile,join(cssFolder,cssFiles[0x0]),GmMxfb['auuWQ']);expect(cssContent)['toMatch'](/object-right-bottom/);GmMxfb['Amlwb'](expect,cssContent)['not']['toMatch'](/tailwind/);GmMxfb['Amlwb'](expect,cssContent)['toMatch'](/\/\*#\s*sourceMappingURL=(.+\.map)\s*\*\//);});GmMxfb['pDYrC'](it,'should\x27ve\x20emitted\x20a\x20source\x20map',async()=>{const cssFolder=ehLKah['dAOev'](join,appDir,ehLKah['wlDxE']);const files=await ehLKah['cUdtB'](readdir,cssFolder);const cssMapFiles=files['filter'](f=>/\.css\.map$/['test'](f));ehLKah['cUdtB'](expect,cssMapFiles['length'])['toBe'](0x1);});});GmMxfb['VnGtG'](describe,'Tailwind and Purge CSS',()=>{var zEhnJo={'xdahz':function(callee,param1,param2,param3){return GmMxfb['lkzno'](callee,param1,param2,param3);},'asYUW':function(callee,param1){return callee(param1);},'pUBhM':function(callee,param1){return callee(param1);},'cQrYI':function(callee,param1,param2){return GmMxfb['Vjxae'](callee,param1,param2);},'kWtCM':GmMxfb['QIeJc'],'hjxnx':function(callee,param1){return GmMxfb['Dhevi'](callee,param1);},'yNFHn':function(callee,param1,param2){return GmMxfb['xbNZm'](callee,param1,param2);},'YQWrn':GmMxfb['auuWQ'],'AwgOZ':function(callee,param1){return callee(param1);}};const appDir=GmMxfb['nMhuD'](join,fixturesDir,GmMxfb['TPlGS']);beforeAll(async()=>{await GmMxfb['Dhevi'](remove,GmMxfb['pDYrC'](join,appDir,GmMxfb['SDIwX']));});GmMxfb['gziMO'](it,GmMxfb['sLEEv'],async()=>{const {code,stdout}=await zEhnJo['xdahz'](nextBuild,appDir,[],{'stdout':!![]});zEhnJo['asYUW'](expect,code)['toBe'](0x0);zEhnJo['pUBhM'](expect,stdout)['toMatch'](/Compiled successfully/);});GmMxfb['Lvidk'](it,'should\x27ve\x20compiled\x20and\x20prefixed',async()=>{const cssFolder=zEhnJo['cQrYI'](join,appDir,zEhnJo['kWtCM']);const files=await zEhnJo['pUBhM'](readdir,cssFolder);const cssFiles=files['filter'](f=>/\.css$/['test'](f));zEhnJo['hjxnx'](expect,cssFiles['length'])['toBe'](0x1);const cssContent=await zEhnJo['cQrYI'](readFile,zEhnJo['yNFHn'](join,cssFolder,cssFiles[0x0]),zEhnJo['YQWrn']);expect(cssContent)['not']['toMatch'](/object-right-bottom/);expect(cssContent)['toMatch'](/text-blue-500/);zEhnJo['AwgOZ'](expect,cssContent)['not']['toMatch'](/tailwind/);zEhnJo['AwgOZ'](expect,cssContent)['toMatch'](/\/\*#\s*sourceMappingURL=(.+\.map)\s*\*\//);});GmMxfb['amJaz'](it,'should\'ve emitted a source map',async()=>{const cssFolder=GmMxfb['pDYrC'](join,appDir,GmMxfb['QIeJc']);const files=await GmMxfb['Dhevi'](readdir,cssFolder);const cssMapFiles=files['filter'](f=>/\.css\.map$/['test'](f));GmMxfb['Dhevi'](expect,cssMapFiles['length'])['toBe'](0x1);});});GmMxfb['VnGtG'](describe,GmMxfb['fUjpj'],()=>{var TirTrN={'QSwbI':function(callee,param1,param2){return GmMxfb['DYWBJ'](callee,param1,param2);},'nviuZ':function(callee,param1){return GmMxfb['MTXeq'](callee,param1);},'maqrW':function(callee,param1){return callee(param1);},'rTwRo':function(callee,param1,param2){return GmMxfb['DYWBJ'](callee,param1,param2);},'Foulb':'#link-other','pYaep':GmMxfb['DzYfm'],'irmMz':function(callee,param1){return GmMxfb['szHLS'](callee,param1);},'zYTVe':GmMxfb['MwudT'],'BBSmX':function(callee,param1){return GmMxfb['rvgoi'](callee,param1);},'dkwmz':function(callee,param1){return GmMxfb['aWDTg'](callee,param1);},'Yocjx':function(callee,param1){return GmMxfb['aWDTg'](callee,param1);},'PsmcF':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'DXVRR':function(callee){return GmMxfb['QxqWg'](callee);}};const appDir=GmMxfb['IWACy'](join,fixturesDir,GmMxfb['FxzwH']);let app,appPort;function tests(){var zfqCYo={'yikax':GmMxfb['ZTSLU'],'rBQRG':function(callee,param1){return GmMxfb['Dhevi'](callee,param1);},'xQmwn':GmMxfb['oCjbg'],'adrKZ':GmMxfb['Xupmo'],'yarHq':function(callee,param1,param2){return GmMxfb['amJaz'](callee,param1,param2);},'IDobQ':GmMxfb['LGIpA'],'DkuGt':function(callee,param1){return GmMxfb['Dhevi'](callee,param1);}};async function checkGreenTitle(browser){await browser['waitForElementByCss'](zfqCYo['yikax']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#green-title\')).color');zfqCYo['rBQRG'](expect,titleColor)['toBe']('rgb(0, 128, 0)');}async function checkBlueTitle(browser){await browser['waitForElementByCss'](zfqCYo['xQmwn']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#blue-title\')).color');zfqCYo['rBQRG'](expect,titleColor)['toBe'](zfqCYo['adrKZ']);}GmMxfb['amJaz'](it,GmMxfb['nePUv'],async()=>{const browser=await TirTrN['QSwbI'](_0x381845,appPort,'/');try{await checkGreenTitle(browser);}finally{await browser['close']();}});it(GmMxfb['PsjdR'],async()=>{const browser=await TirTrN['QSwbI'](_0x381845,appPort,'/');try{await checkGreenTitle(browser);await browser['waitForElementByCss']('#link-other')['moveTo']();await TirTrN['nviuZ'](waitFor,0x7d0);await TirTrN['maqrW'](checkGreenTitle,browser);}finally{await browser['close']();}});GmMxfb['amJaz'](it,GmMxfb['qzwrK'],async()=>{const browser=await zfqCYo['yarHq'](_0x381845,appPort,'/');try{await zfqCYo['rBQRG'](checkGreenTitle,browser);await browser['waitForElementByCss'](zfqCYo['IDobQ'])['moveTo']();await zfqCYo['rBQRG'](waitFor,0x7d0);await zfqCYo['DkuGt'](checkGreenTitle,browser);}finally{await browser['close']();}});GmMxfb['rojbv'](it,GmMxfb['hKuuM'],async()=>{const browser=await TirTrN['rTwRo'](_0x381845,appPort,'/');try{await checkGreenTitle(browser);const prevSiblingHref=await browser['eval']('document.querySelector(\'link[rel=stylesheet][data-n-p]\').previousSibling.getAttribute(\'href\')');const currentPageHref=await browser['eval']('document.querySelector(\'link[rel=stylesheet][data-n-p]\').getAttribute(\'href\')');TirTrN['maqrW'](expect,prevSiblingHref)['toBeDefined']();expect(prevSiblingHref)['toBe'](currentPageHref);await browser['waitForElementByCss'](TirTrN['Foulb'])['click']();await TirTrN['maqrW'](checkBlueTitle,browser);const newPrevSibling=await browser['eval']('document.querySelector(\x27style[data-n-href]\x27).previousSibling.getAttribute(\x27data-n-css\x27)');const newPageHref=await browser['eval']('document.querySelector(\x27style[data-n-href]\x27).getAttribute(\x27data-n-href\x27)');TirTrN['maqrW'](expect,newPrevSibling)['toBe'](TirTrN['pYaep']);TirTrN['irmMz'](expect,newPageHref)['toBeDefined']();TirTrN['irmMz'](expect,newPageHref)['not']['toBe'](currentPageHref);await browser['waitForElementByCss'](TirTrN['zYTVe'])['click']();await checkGreenTitle(browser);const newPrevSibling2=await browser['eval']('document.querySelector(\x27style[data-n-href]\x27).previousSibling.getAttribute(\x27data-n-css\x27)');const newPageHref2=await browser['eval']('document.querySelector(\'style[data-n-href]\').getAttribute(\'data-n-href\')');TirTrN['BBSmX'](expect,newPrevSibling2)['toBeTruthy']();TirTrN['dkwmz'](expect,newPageHref2)['toBeDefined']();expect(newPageHref2)['toBe'](currentPageHref);}finally{await browser['close']();}});GmMxfb['rojbv'](it,GmMxfb['hWJCR'],async()=>{const browser=await TirTrN['rTwRo'](_0x381845,appPort,'/');try{var aCJSFI='0|4|2|1|3|5'['split']('|'),nkImhV=0x0;while(!![]){switch(aCJSFI[nkImhV++]){case'0':await checkGreenTitle(browser);continue;case'1':await TirTrN['dkwmz'](checkBlueTitle,browser);continue;case'2':await browser['waitForElementByCss'](TirTrN['zYTVe']);continue;case'3':await browser['waitForElementByCss']('#link-index')['click']();continue;case'4':await browser['waitForElementByCss'](TirTrN['Foulb'])['click']();continue;case'5':await TirTrN['dkwmz'](checkGreenTitle,browser);continue;}break;}}finally{await browser['close']();}});GmMxfb['rojbv'](it,GmMxfb['bUhXm'],async()=>{const browser=await _0x381845(appPort,'/other');try{await checkBlueTitle(browser);await browser['waitForElementByCss']('#link-index')['click']();await browser['waitForElementByCss'](TirTrN['Foulb']);await TirTrN['Yocjx'](checkGreenTitle,browser);await browser['waitForElementByCss'](TirTrN['Foulb'])['click']();await TirTrN['Yocjx'](checkBlueTitle,browser);}finally{await browser['close']();}});}GmMxfb['nYxmT'](describe,GmMxfb['EqgQl'],()=>{var ijtUon=GmMxfb['kgkEz']['split']('|'),kckXQN=0x0;while(!![]){switch(ijtUon[kckXQN++]){case'0':GmMxfb['Dhevi'](afterAll,async()=>{await killApp(app);});continue;case'1':GmMxfb['pMIzh'](tests);continue;case'2':var zBssvL={'PECyf':function(callee,param1){return callee(param1);},'QoKri':function(callee,param1,param2){return callee(param1,param2);},'OWmuI':'.next'};continue;case'3':GmMxfb['MTXeq'](beforeAll,async()=>{await TirTrN['PsmcF'](nextBuild,appDir,[],{});appPort=await TirTrN['DXVRR'](findPort);app=await TirTrN['rTwRo'](nextStart,appDir,appPort);});continue;case'4':beforeAll(async()=>{await zBssvL['PECyf'](remove,zBssvL['QoKri'](join,appDir,zBssvL['OWmuI']));});continue;}break;}});});GmMxfb['VnGtG'](describe,'CSS\x20Modules\x20Composes\x20Ordering',()=>{var CuVzYp={'tVygi':GmMxfb['AjwQf'],'BSHST':function(callee,param1){return callee(param1);},'RLaNG':'rgb(17, 17, 17)','cqoLE':function(callee,param1,param2){return GmMxfb['vmgRD'](callee,param1,param2);},'vMBip':function(callee,param1){return GmMxfb['ddxkb'](callee,param1);},'Ucshz':GmMxfb['LGIpA'],'uPcUo':'.next','GJMLy':function(callee){return GmMxfb['WHHcI'](callee);},'iugRy':function(callee,param1,param2,param3){return GmMxfb['lkzno'](callee,param1,param2,param3);},'hKdUg':function(callee){return GmMxfb['WHHcI'](callee);},'itiOy':function(callee,param1,param2){return callee(param1,param2);}};const appDir=GmMxfb['vmgRD'](join,fixturesDir,GmMxfb['qMbqy']);let app,appPort;function tests(isDev=![]){var qNiImu={'OhzdY':GmMxfb['dTvCJ'],'aEWtG':GmMxfb['WoDMU'],'gsRaa':function(callee,param1,param2){return GmMxfb['qGGFi'](callee,param1,param2);},'cdYsk':function(callee,param1){return GmMxfb['aWDTg'](callee,param1);},'aAXDX':'#link-other','Dpsfs':function(callee,param1){return callee(param1);},'yWJpy':function(callee,param1){return GmMxfb['TvNZO'](callee,param1);},'gChrV':function(callee,param1){return callee(param1);},'cfzKt':GmMxfb['MwudT'],'raddK':function(callee,param1){return GmMxfb['TvNZO'](callee,param1);},'RtXig':function(callee,param1,param2){return GmMxfb['qGGFi'](callee,param1,param2);},'UHkQW':GmMxfb['arqFQ'],'dncJd':'4|1|2|5|3|0'};async function checkBlackTitle(browser){await browser['waitForElementByCss'](CuVzYp['tVygi']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#black-title\')).color');CuVzYp['BSHST'](expect,titleColor)['toBe'](CuVzYp['RLaNG']);}async function checkRedTitle(browser){await browser['waitForElementByCss'](qNiImu['OhzdY']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\x27#red-title\x27)).color');expect(titleColor)['toBe'](qNiImu['aEWtG']);}GmMxfb['GFbWK'](it,GmMxfb['nePUv'],async()=>{const browser=await qNiImu['gsRaa'](_0x381845,appPort,'/');try{await qNiImu['cdYsk'](checkBlackTitle,browser);}finally{await browser['close']();}});GmMxfb['IIbTM'](it,GmMxfb['PsjdR'],async()=>{const browser=await CuVzYp['cqoLE'](_0x381845,appPort,'/');try{await CuVzYp['vMBip'](checkBlackTitle,browser);await browser['waitForElementByCss'](CuVzYp['Ucshz'])['moveTo']();await CuVzYp['vMBip'](waitFor,0x7d0);await CuVzYp['vMBip'](checkBlackTitle,browser);}finally{await browser['close']();}});if(!isDev){it(GmMxfb['qzwrK'],async()=>{const browser=await qNiImu['gsRaa'](_0x381845,appPort,'/');try{await qNiImu['cdYsk'](checkBlackTitle,browser);await browser['waitForElementByCss'](qNiImu['aAXDX'])['moveTo']();await qNiImu['cdYsk'](waitFor,0x7d0);await qNiImu['Dpsfs'](checkBlackTitle,browser);}finally{await browser['close']();}});GmMxfb['IIbTM'](it,'should\x20have\x20correct\x20CSS\x20injection\x20order',async()=>{const browser=await _0x381845(appPort,'/');try{await qNiImu['Dpsfs'](checkBlackTitle,browser);const prevSiblingHref=await browser['eval']('document.querySelector(\'link[rel=stylesheet][data-n-p]\').previousSibling.getAttribute(\'href\')');const currentPageHref=await browser['eval']('document.querySelector(\x27link[rel=stylesheet][data-n-p]\x27).getAttribute(\x27href\x27)');expect(prevSiblingHref)['toBeDefined']();qNiImu['yWJpy'](expect,prevSiblingHref)['toBe'](currentPageHref);await browser['waitForElementByCss'](qNiImu['aAXDX'])['click']();await qNiImu['yWJpy'](checkRedTitle,browser);const newPrevSibling=await browser['eval']('document.querySelector(\x27style[data-n-href]\x27).previousSibling.getAttribute(\x27data-n-css\x27)');const newPageHref=await browser['eval']('document.querySelector(\'style[data-n-href]\').getAttribute(\'data-n-href\')');qNiImu['yWJpy'](expect,newPrevSibling)['toBe']('');expect(newPageHref)['toBeDefined']();expect(newPageHref)['not']['toBe'](currentPageHref);await browser['waitForElementByCss']('#link-index')['click']();await checkBlackTitle(browser);const newPrevSibling2=await browser['eval']('document.querySelector(\x27style[data-n-href]\x27).previousSibling.getAttribute(\x27data-n-css\x27)');const newPageHref2=await browser['eval']('document.querySelector(\'style[data-n-href]\').getAttribute(\'data-n-href\')');qNiImu['yWJpy'](expect,newPrevSibling2)['toBe']('');qNiImu['gChrV'](expect,newPageHref2)['toBeDefined']();qNiImu['gChrV'](expect,newPageHref2)['toBe'](currentPageHref);}finally{await browser['close']();}});}GmMxfb['vmgRD'](it,GmMxfb['hWJCR'],async()=>{const browser=await _0x381845(appPort,'/');try{var wlwuNP='1|4|0|2|5|3'['split']('|'),fqXpXz=0x0;while(!![]){switch(wlwuNP[fqXpXz++]){case'0':await browser['waitForElementByCss'](qNiImu['cfzKt']);continue;case'1':await qNiImu['raddK'](checkBlackTitle,browser);continue;case'2':await checkRedTitle(browser);continue;case'3':await qNiImu['raddK'](checkBlackTitle,browser);continue;case'4':await browser['waitForElementByCss']('#link-other')['click']();continue;case'5':await browser['waitForElementByCss'](qNiImu['cfzKt'])['click']();continue;}break;}}finally{await browser['close']();}});GmMxfb['vmgRD'](it,'should have correct color on index page (on nav from other)',async()=>{const browser=await qNiImu['RtXig'](_0x381845,appPort,qNiImu['UHkQW']);try{var WsMAPb=qNiImu['dncJd']['split']('|'),KLOHWx=0x0;while(!![]){switch(WsMAPb[KLOHWx++]){case'0':await checkRedTitle(browser);continue;case'1':await browser['waitForElementByCss'](qNiImu['cfzKt'])['click']();continue;case'2':await browser['waitForElementByCss'](qNiImu['aAXDX']);continue;case'3':await browser['waitForElementByCss'](qNiImu['aAXDX'])['click']();continue;case'4':await checkRedTitle(browser);continue;case'5':await qNiImu['raddK'](checkBlackTitle,browser);continue;}break;}}finally{await browser['close']();}});}GmMxfb['csMlK'](describe,GmMxfb['hlRpb'],()=>{GmMxfb['TvNZO'](beforeAll,async()=>{await remove(CuVzYp['cqoLE'](join,appDir,CuVzYp['uPcUo']));});beforeAll(async()=>{appPort=await CuVzYp['GJMLy'](findPort);app=await launchApp(appDir,appPort);});GmMxfb['iqeVf'](afterAll,async()=>{await killApp(app);});tests(!![]);});GmMxfb['ouEuF'](describe,'Production Mode',()=>{var JHXYCQ=GmMxfb['wXdvC']['split']('|'),wvmhJf=0x0;while(!![]){switch(JHXYCQ[wvmhJf++]){case'0':afterAll(async()=>{await TbiHwl['ZKblP'](killApp,app);});continue;case'1':var TbiHwl={'ZKblP':function(callee,param1){return GmMxfb['ddxkb'](callee,param1);},'AniMw':function(callee,param1,param2){return callee(param1,param2);}};continue;case'2':GmMxfb['ddxkb'](beforeAll,async()=>{await TbiHwl['ZKblP'](remove,TbiHwl['AniMw'](join,appDir,'.next'));});continue;case'3':GmMxfb['WHHcI'](tests);continue;case'4':beforeAll(async()=>{await CuVzYp['iugRy'](nextBuild,appDir,[],{});appPort=await CuVzYp['hKdUg'](findPort);app=await CuVzYp['itiOy'](nextStart,appDir,appPort);});continue;}break;}});});describe('CSS Cleanup on Render Failure',()=>{var Jkyfoi={'drKse':function(callee,param1,param2){return callee(param1,param2);},'IhNkB':function(callee,param1){return callee(param1);},'ggyYz':function(callee,param1){return GmMxfb['njoWj'](callee,param1);},'nKRGN':function(callee,param1,param2,param3){return GmMxfb['lkzno'](callee,param1,param2,param3);},'JtWNo':function(callee,param1){return GmMxfb['njoWj'](callee,param1);},'IcHsU':GmMxfb['AjwQf'],'KCKPo':function(callee,param1){return GmMxfb['RZlWi'](callee,param1);},'cKhPb':function(callee,param1,param2){return GmMxfb['ouEuF'](callee,param1,param2);},'lzZUO':GmMxfb['svkiU'],'kDDdf':function(callee,param1){return callee(param1);},'HXeXm':function(callee,param1,param2){return GmMxfb['mTUXC'](callee,param1,param2);},'RDaQG':GmMxfb['SDIwX'],'RstoU':function(callee){return GmMxfb['AZWut'](callee);},'MoZgK':function(callee,param1,param2){return callee(param1,param2);},'GAqCl':function(callee,param1){return GmMxfb['VsFGa'](callee,param1);}};const appDir=GmMxfb['mTUXC'](join,fixturesDir,GmMxfb['EjWPv']);let app,appPort;function tests(){var zFgtvU={'EXUEF':Jkyfoi['IcHsU'],'XvbYS':function(callee,param1){return Jkyfoi['KCKPo'](callee,param1);},'PjaRk':'rgb(17, 17, 17)'};async function checkBlackTitle(browser){await browser['waitForElementByCss'](zFgtvU['EXUEF']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#black-title\')).color');zFgtvU['XvbYS'](expect,titleColor)['toBe'](zFgtvU['PjaRk']);}Jkyfoi['cKhPb'](it,Jkyfoi['lzZUO'],async()=>{const browser=await Jkyfoi['drKse'](_0x381845,appPort,'/');try{await Jkyfoi['IhNkB'](checkBlackTitle,browser);const currentPageStyles=await browser['eval']('document.querySelector(\x27link[rel=stylesheet][data-n-p]\x27)');Jkyfoi['ggyYz'](expect,currentPageStyles)['toBeDefined']();await browser['waitForElementByCss']('#link-other')['click']();await Jkyfoi['nKRGN'](check,()=>browser['eval']('document.body.innerText'),'Application error: a client-side exception has occurred (see the browser console for more information).',!![]);const newPageStyles=await browser['eval']('document.querySelector(\'link[rel=stylesheet][data-n-p]\')');Jkyfoi['ggyYz'](expect,newPageStyles)['toBeFalsy']();const allPageStyles=await browser['eval']('document.querySelector(\'link[rel=stylesheet]\')');Jkyfoi['JtWNo'](expect,allPageStyles)['toBeFalsy']();}finally{await browser['close']();}});}describe('Production\x20Mode',()=>{GmMxfb['ddxkb'](beforeAll,async()=>{await Jkyfoi['kDDdf'](remove,Jkyfoi['HXeXm'](join,appDir,Jkyfoi['RDaQG']));});beforeAll(async()=>{await Jkyfoi['nKRGN'](nextBuild,appDir,[],{});appPort=await Jkyfoi['RstoU'](findPort);app=await Jkyfoi['MoZgK'](nextStart,appDir,appPort);});afterAll(async()=>{await Jkyfoi['GAqCl'](killApp,app);});GmMxfb['BNzyv'](tests);});});describe(GmMxfb['Duhpb'],()=>{var YoExrh={'gtVEP':'#black-title','xhMGM':function(callee,param1){return GmMxfb['cOTiS'](callee,param1);},'UAUCe':GmMxfb['mswdZ'],'iqvaC':function(callee,param1){return GmMxfb['jnwfv'](callee,param1);},'gIaZW':GmMxfb['LGIpA'],'JcEoq':function(callee,param1){return GmMxfb['cywUU'](callee,param1);},'OPCEg':function(callee,param1,param2){return GmMxfb['ERQET'](callee,param1,param2);},'Bxpvk':GmMxfb['SDIwX'],'nBOel':GmMxfb['pbgjO'],'DhOfF':'pages','ptiOI':function(x,y){return GmMxfb['lfTDe'](x,y);},'rWTnS':function(callee,param1){return GmMxfb['oQLrZ'](callee,param1);}};const appDir=GmMxfb['ERQET'](join,fixturesDir,GmMxfb['pnJwk']);let app,appPort;function tests(){async function checkBlackTitle(browser){await browser['waitForElementByCss'](YoExrh['gtVEP']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#black-title\')).color');YoExrh['xhMGM'](expect,titleColor)['toBe'](YoExrh['UAUCe']);}YoExrh['OPCEg'](it,'should fall back to server-side transition on missing CSS',async()=>{const browser=await _0x381845(appPort,'/');try{await YoExrh['iqvaC'](checkBlackTitle,browser);await browser['eval']('window.__priorNavigatePageState = \'OOF\';');await browser['waitForElementByCss'](YoExrh['gIaZW'])['click']();await browser['waitForElementByCss']('#link-index');const state=await browser['eval']('window.__priorNavigatePageState');YoExrh['JcEoq'](expect,state)['toBeFalsy']();}finally{await browser['close']();}});}GmMxfb['qdGDW'](describe,GmMxfb['EqgQl'],()=>{var DbgqAx={'ogfUj':function(callee,param1){return GmMxfb['hxEFI'](callee,param1);},'MlLjo':function(callee,param1,param2){return GmMxfb['mTUXC'](callee,param1,param2);},'ciIaF':'.next'};GmMxfb['hxEFI'](beforeAll,async()=>{await DbgqAx['ogfUj'](remove,DbgqAx['MlLjo'](join,appDir,DbgqAx['ciIaF']));});beforeAll(async()=>{await nextBuild(appDir,[],{});appPort=await findPort();app=await YoExrh['OPCEg'](nextStart,appDir,appPort);const manifest=await readJSON(join(appDir,YoExrh['Bxpvk'],YoExrh['nBOel']));const files=manifest[YoExrh['DhOfF']]['/other']['filter'](e=>e['endsWith']('.css'));if(YoExrh['ptiOI'](files['length'],0x1))throw new Error();await Promise['all'](files['map'](f=>remove(join(appDir,'.next',f))));});GmMxfb['hxEFI'](afterAll,async()=>{await YoExrh['rWTnS'](killApp,app);});GmMxfb['mvDDg'](tests);});});GmMxfb['RdEwU'](describe,GmMxfb['KBSAm'],()=>{var QOnoRo={'HaSgI':function(callee,param1,param2){return GmMxfb['ipXZP'](callee,param1,param2);},'eslFr':GmMxfb['mawWZ'],'KLgAi':GmMxfb['hoKGn'],'ngrWW':function(callee,param1){return GmMxfb['CMjjT'](callee,param1);},'yJMmO':function(callee,param1){return GmMxfb['CMjjT'](callee,param1);}};const appDir=GmMxfb['ipXZP'](join,fixturesDir,'hydrate-without-deps');let app,appPort;function tests(){var MneMkB={'uNCFa':GmMxfb['AjwQf'],'eJjaE':function(callee,param1){return callee(param1);},'LDzvw':GmMxfb['dTvCJ'],'xEyop':function(callee,param1,param2){return GmMxfb['qdGDW'](callee,param1,param2);},'xOuDG':GmMxfb['mawWZ']};async function checkBlackTitle(browser){await browser['waitForElementByCss'](MneMkB['uNCFa']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#black-title\')).color');MneMkB['eJjaE'](expect,titleColor)['toBe']('rgb(17, 17, 17)');}async function checkRedTitle(browser){await browser['waitForElementByCss'](MneMkB['LDzvw']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#red-title\')).color');MneMkB['eJjaE'](expect,titleColor)['toBe']('rgb(255, 0, 0)');}GmMxfb['qdGDW'](it,'should\x20hydrate\x20black\x20without\x20dependencies\x20manifest',async()=>{const browser=await QOnoRo['HaSgI'](_0x381845,appPort,'/');try{await checkBlackTitle(browser);await check(()=>browser['eval']('document.querySelector(\x27p\x27).innerText'),QOnoRo['eslFr']);}finally{await browser['close']();}});GmMxfb['qdGDW'](it,GmMxfb['MOlyJ'],async()=>{const browser=await QOnoRo['HaSgI'](_0x381845,appPort,QOnoRo['KLgAi']);try{await QOnoRo['ngrWW'](checkRedTitle,browser);await check(()=>browser['eval']('document.querySelector(\'p\').innerText'),QOnoRo['eslFr']);}finally{await browser['close']();}});GmMxfb['TKBfM'](it,'should route from black to red without dependencies',async()=>{const browser=await MneMkB['xEyop'](_0x381845,appPort,'/');try{var nzRWuz='3|1|4|2|0'['split']('|'),vHuPFJ=0x0;while(!![]){switch(nzRWuz[vHuPFJ++]){case'0':await check(()=>browser['eval']('document.querySelector(\'p\').innerText'),MneMkB['xOuDG']);continue;case'1':await MneMkB['xEyop'](check,()=>browser['eval']('document.querySelector(\'p\').innerText'),MneMkB['xOuDG']);continue;case'2':await MneMkB['eJjaE'](checkRedTitle,browser);continue;case'3':await MneMkB['eJjaE'](checkBlackTitle,browser);continue;case'4':await browser['eval']('document.querySelector(\'#link-client\').click()');continue;}break;}}finally{await browser['close']();}});}GmMxfb['BNcIf'](describe,GmMxfb['EqgQl'],()=>{var NgiRql={'HPFnG':function(callee){return GmMxfb['BufTS'](callee);},'Wvikg':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'ntcXQ':GmMxfb['SDIwX'],'neTAl':GmMxfb['auuWQ'],'QKZYc':function(callee,param1,param2,param3,param4){return GmMxfb['kLiKp'](callee,param1,param2,param3,param4);},'cTiIf':GmMxfb['iwmTf'],'FkDQi':function(callee,param1){return GmMxfb['uaRJn'](callee,param1);},'DGnXF':GmMxfb['gYeuq']};GmMxfb['uaRJn'](beforeAll,async()=>{await QOnoRo['yJMmO'](remove,QOnoRo['HaSgI'](join,appDir,'.next'));});GmMxfb['uaRJn'](beforeAll,async()=>{await nextBuild(appDir,[],{});appPort=await NgiRql['HPFnG'](findPort);app=await nextStart(appDir,appPort);const buildId=(await readFile(NgiRql['Wvikg'](join,appDir,NgiRql['ntcXQ'],'BUILD_ID'),NgiRql['neTAl']))['trim']();const fileName=NgiRql['QKZYc'](join,appDir,NgiRql['cTiIf'],buildId,'_buildManifest.js');if(!(await NgiRql['FkDQi'](pathExists,fileName))){throw new Error(NgiRql['DGnXF']);}await NgiRql['FkDQi'](remove,fileName);});GmMxfb['uaRJn'](afterAll,async()=>{await NgiRql['FkDQi'](killApp,app);});GmMxfb['rlciO'](tests);});});GmMxfb['RdEwU'](describe,GmMxfb['IlDbr'],()=>{var TmuACB={'YmtnA':GmMxfb['LGIpA'],'ccnly':'rgb(0, 255, 0)','JlJfT':GmMxfb['MwudT'],'dVFaV':function(callee,param1){return GmMxfb['ScvsX'](callee,param1);},'NXphz':GmMxfb['hLXKi'],'anzzE':function(callee,param1,param2){return callee(param1,param2);},'GiUnd':function(callee,param1,param2){return callee(param1,param2);},'QqfjB':function(callee,param1){return GmMxfb['ScvsX'](callee,param1);},'mCnmw':function(callee,param1){return callee(param1);},'NrUCE':function(callee,param1,param2){return callee(param1,param2);},'dUXsp':GmMxfb['nePUv'],'jPEKK':GmMxfb['PsjdR'],'maeUg':'should\x20have\x20correct\x20color\x20on\x20index\x20page\x20(on\x20nav)','kTMaQ':function(callee,param1,param2,param3){return GmMxfb['tafKM'](callee,param1,param2,param3);},'QBZDm':function(callee){return callee();},'Zagfe':GmMxfb['OlMPG'],'EXdIe':function(callee,param1){return GmMxfb['KiGWw'](callee,param1);},'TyqWE':function(callee,param1){return GmMxfb['KiGWw'](callee,param1);},'kBoXn':function(callee,param1){return GmMxfb['KiGWw'](callee,param1);}};const appDir=join(fixturesDir,GmMxfb['SkMRd']);let app,appPort;function tests(){var syMkVK={'wkTlD':function(callee,param1,param2){return TmuACB['GiUnd'](callee,param1,param2);},'spxDV':function(callee,param1){return TmuACB['QqfjB'](callee,param1);},'XMOTD':function(callee,param1){return TmuACB['mCnmw'](callee,param1);},'ghkWh':TmuACB['YmtnA']};async function checkGreenButton(browser){await browser['waitForElementByCss'](TmuACB['YmtnA']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#link-other\')).backgroundColor');expect(titleColor)['toBe'](TmuACB['ccnly']);}async function checkPinkButton(browser){await browser['waitForElementByCss'](TmuACB['JlJfT']);const titleColor=await browser['eval']('window.getComputedStyle(document.querySelector(\'#link-index\')).backgroundColor');TmuACB['dVFaV'](expect,titleColor)['toBe'](TmuACB['NXphz']);}TmuACB['NrUCE'](it,TmuACB['dUXsp'],async()=>{const browser=await syMkVK['wkTlD'](_0x381845,appPort,'/');try{await syMkVK['spxDV'](checkGreenButton,browser);}finally{await browser['close']();}});TmuACB['NrUCE'](it,TmuACB['jPEKK'],async()=>{const browser=await syMkVK['wkTlD'](_0x381845,appPort,'/');try{await syMkVK['XMOTD'](checkGreenButton,browser);await browser['waitForElementByCss'](syMkVK['ghkWh'])['moveTo']();await waitFor(0x7d0);await syMkVK['XMOTD'](checkGreenButton,browser);}finally{await browser['close']();}});it(TmuACB['maeUg'],async()=>{const browser=await TmuACB['anzzE'](_0x381845,appPort,'/');try{await checkGreenButton(browser);await browser['waitForElementByCss'](TmuACB['YmtnA'])['click']();await browser['waitForElementByCss'](TmuACB['JlJfT']);await checkPinkButton(browser);await browser['waitForElementByCss'](TmuACB['JlJfT'])['click']();await TmuACB['dVFaV'](checkGreenButton,browser);}finally{await browser['close']();}});}GmMxfb['PvQsL'](describe,'Development Mode',()=>{var vcTiGL=GmMxfb['cGsqI']['split']('|'),wrLYIs=0x0;while(!![]){switch(vcTiGL[wrLYIs++]){case'0':GmMxfb['CMjjT'](beforeAll,async()=>{appPort=await dWPOWy['VwNLk'](findPort);app=await launchApp(appDir,appPort);});continue;case'1':tests();continue;case'2':var dWPOWy={'sEOaM':function(callee,param1){return callee(param1);},'PYIJN':function(callee,param1,param2){return GmMxfb['PvQsL'](callee,param1,param2);},'otJmN':GmMxfb['SDIwX'],'VwNLk':function(callee){return callee();}};continue;case'3':GmMxfb['ScvsX'](afterAll,async()=>{await dWPOWy['sEOaM'](killApp,app);});continue;case'4':beforeAll(async()=>{await dWPOWy['sEOaM'](remove,dWPOWy['PYIJN'](join,appDir,dWPOWy['otJmN']));});continue;}break;}});GmMxfb['PvQsL'](describe,GmMxfb['EqgQl'],()=>{var bVloBg=TmuACB['Zagfe']['split']('|'),VWCEpC=0x0;while(!![]){switch(bVloBg[VWCEpC++]){case'0':TmuACB['EXdIe'](beforeAll,async()=>{await TmuACB['kTMaQ'](nextBuild,appDir,[],{});appPort=await TmuACB['QBZDm'](findPort);app=await nextStart(appDir,appPort);});continue;case'1':tests();continue;case'2':TmuACB['TyqWE'](beforeAll,async()=>{await KJeBZt['QhQLk'](remove,join(appDir,'.next'));});continue;case'3':TmuACB['kBoXn'](afterAll,async()=>{await KJeBZt['HMaJq'](killApp,app);});continue;case'4':var KJeBZt={'QhQLk':function(callee,param1){return TmuACB['kBoXn'](callee,param1);},'HMaJq':function(callee,param1){return callee(param1);}};continue;}break;}});});GmMxfb['RdEwU'](describe,GmMxfb['Anpgi'],()=>{var MkXfKg={'fLcNP':function(callee,param1){return GmMxfb['KiGWw'](callee,param1);},'KYuUi':GmMxfb['QIeJc'],'OZjgU':GmMxfb['SgeGb'],'OKKgR':function(callee,param1,param2){return GmMxfb['BVWbn'](callee,param1,param2);},'AZTvm':function(callee,param1,param2,param3){return GmMxfb['tafKM'](callee,param1,param2,param3);},'sLVmP':function(callee,param1){return GmMxfb['hThVw'](callee,param1);},'yftdc':function(callee,param1){return GmMxfb['hThVw'](callee,param1);}};const workDir=GmMxfb['iJidE'](join,fixturesDir,GmMxfb['DshLL']);GmMxfb['iHeQt'](it,GmMxfb['yvibo'],async()=>{await GmMxfb['KiGWw'](remove,join(workDir,'.next'));const {code}=await GmMxfb['KiGWw'](nextBuild,workDir);GmMxfb['KiGWw'](expect,code)['toBe'](0x0);});GmMxfb['faiar'](it,GmMxfb['BauRb'],async()=>{const cssFiles=await MkXfKg['fLcNP'](readdir,join(workDir,MkXfKg['KYuUi']));for(const file of cssFiles){if(file['endsWith'](MkXfKg['OZjgU']))continue;const content=await MkXfKg['OKKgR'](readFile,MkXfKg['AZTvm'](join,workDir,MkXfKg['KYuUi'],file),'utf8');console['log'](file,content);const howMany=content['includes']('p{')||content['includes']('p,')?0x2:0x1;MkXfKg['sLVmP'](expect,content['match'](/\(\/vercel\.svg/g)['length'])['toBe'](howMany);MkXfKg['yftdc'](expect,content['match'](/\(\/_next\/static\/media/g)['length'])['toBe'](0x1);MkXfKg['yftdc'](expect,content['match'](/\(https:\/\//g)['length'])['toBe'](howMany);}});});});