// In this benchmark, we connect a client to the server, and write
// as many bytes as we can in the specified time (default = 10s)
'use strict';const common=require('../common.js');const util=require('util');const bench=common['createBenchmark'](main,{'len':[0x19000,0x400*0x400*0x10],'type':['utf','asc','buf'],'dur':[0x5]},{'test':{'len':0x400},'flags':['--expose-internals','--no-warnings']});function main({dur,len,type}){var _0x37ec29={'cpOgQ':function(_0x4fc1d6,_0x8f46fb,_0x16fb29){return _0x4fc1d6(_0x8f46fb,_0x16fb29);},'DLEaD':'write','TAlsI':function(_0x20caf1,_0x24c241){return _0x20caf1(_0x24c241);},'kxfmq':'read','pIKVi':'connect','rgbzZ':function(_0x4eedeb,_0x153e93){return _0x4eedeb(_0x153e93);},'OFmaK':function(_0x3ecc89,_0x51543d){return _0x3ecc89===_0x51543d;},'FuVXP':function(_0x39d690){return _0x39d690();},'zqQbt':function(_0x5c215d,_0x5b68f6){return _0x5c215d*_0x5b68f6;},'jPClM':function(_0x344f95,_0x5c7438){return _0x344f95!==_0x5c7438;},'dRckM':'ANXsS','LBQfQ':'alnhW','CkpZc':function(_0x52ccf4,_0x3b1db9){return _0x52ccf4/_0x3b1db9;},'yXtqN':function(_0x48130e,_0x1e24d8){return _0x48130e*_0x1e24d8;},'lMCso':'utf','CYkZJ':'asc','ARjDu':function(_0x1588a3,_0x2d3ad0,_0x416bee){return _0x1588a3(_0x2d3ad0,_0x416bee);},'KGmua':function(_0x59ae0c,_0x3c495b){return _0x59ae0c===_0x3c495b;},'UUYci':function(_0x180118){return _0x180118();},'lcrXy':'tcp_wrap','zZMtG':'stream_wrap','gPdrr':function(_0x269371,_0x2f0ee5,_0x12bf8c){return _0x269371(_0x2f0ee5,_0x12bf8c);},'OJFuX':'bind','kdJbT':'buf','SyxMo':function(_0x2dd11a,_0x2f252a){return _0x2dd11a/_0x2f252a;},'baFvk':'127.0.0.1'};const {TCP,TCPConnectWrap,constants:TCPConstants}=common['binding'](_0x37ec29['lcrXy']);const {WriteWrap}=common['binding'](_0x37ec29['zZMtG']);const _0x4ab903=common['PORT'];function _0x2e3613(_0x11602f,_0x5ec779){throw util['_errnoException'](_0x11602f,_0x5ec779);}const _0x1be7fe=new TCP(TCPConstants['SERVER']);let _0xac98aa=_0x1be7fe['bind']('127.0.0.1',_0x4ab903);if(_0xac98aa)_0x37ec29['gPdrr'](_0x2e3613,_0xac98aa,_0x37ec29['OJFuX']);_0xac98aa=_0x1be7fe['listen'](0x1ff);if(_0xac98aa)_0x2e3613(_0xac98aa,'listen');_0x1be7fe['onconnection']=function(_0xac98aa,_0xf70505){var _0x4bc4c6={'AcbEm':function(_0x52023c,_0x1fad77,_0x5b3a7d){return _0x37ec29['cpOgQ'](_0x52023c,_0x1fad77,_0x5b3a7d);},'tdFSD':_0x37ec29['DLEaD'],'uMXXI':function(_0x5cb312,_0x48eb97){return _0x37ec29['TAlsI'](_0x5cb312,_0x48eb97);},'NBrGF':_0x37ec29['kxfmq'],'uqIat':function(_0x1c456d,_0x4369e2,_0x228261){return _0x1c456d(_0x4369e2,_0x228261);}};if(_0xac98aa)_0x2e3613(_0xac98aa,_0x37ec29['pIKVi']);_0xf70505['onread']=function(_0x408d4d){if(!_0x408d4d)_0x4bc4c6['uMXXI'](_0x2e3613,_0x4bc4c6['NBrGF']);const _0x4c2d9b=new WriteWrap();_0x4c2d9b['async']=![];_0xac98aa=_0xf70505['writeBuffer'](_0x4c2d9b,Buffer['from'](_0x408d4d));if(_0xac98aa)_0x4bc4c6['uqIat'](_0x2e3613,_0xac98aa,_0x4bc4c6['tdFSD']);_0x4c2d9b['oncomplete']=function(_0x29dc22,_0x1db227,_0xac98aa){if(_0xac98aa)_0x4bc4c6['AcbEm'](_0x2e3613,_0xac98aa,_0x4bc4c6['tdFSD']);};};_0xf70505['readStart']();};let _0x5a0307;switch(type){case _0x37ec29['kdJbT']:_0x5a0307=Buffer['alloc'](len,'x');break;case 'utf':_0x5a0307='Ã¼'['repeat'](_0x37ec29['SyxMo'](len,0x2));break;case _0x37ec29['CYkZJ']:_0x5a0307='x'['repeat'](len);break;default:throw new Error('invalid type: '+type);}const _0x296275=new TCP(TCPConstants['SOCKET']);const _0x3eaf57=new TCPConnectWrap();let _0x3b294a=0x0;_0xac98aa=_0x296275['connect'](_0x3eaf57,_0x37ec29['baFvk'],_0x4ab903);if(_0xac98aa)_0x2e3613(_0xac98aa,_0x37ec29['pIKVi']);_0x296275['onread']=function(_0x1324a1){if(!_0x1324a1)_0x37ec29['rgbzZ'](_0x2e3613,'read');_0x3b294a+=_0x1324a1['byteLength'];};_0x3eaf57['oncomplete']=function(_0xac98aa){if(_0xac98aa)_0x37ec29['cpOgQ'](_0x2e3613,_0xac98aa,_0x37ec29['pIKVi']);bench['start']();_0x296275['readStart']();setTimeout(()=>{var _0x3ae38a={'XvYaG':'4|2|1|5|3|0','ZRqMb':function(_0x1b7a7a,_0x271450){return _0x37ec29['OFmaK'](_0x1b7a7a,_0x271450);},'UdjTG':function(_0x1a85da){return _0x37ec29['FuVXP'](_0x1a85da);},'nXEUy':function(_0xa8540a,_0x225fe0,_0x5d8113){return _0x37ec29['cpOgQ'](_0xa8540a,_0x225fe0,_0x5d8113);},'tdEkq':_0x37ec29['pIKVi'],'qGijC':function(_0x202fc0,_0x319fff,_0x145249){return _0x37ec29['cpOgQ'](_0x202fc0,_0x319fff,_0x145249);},'UOlFm':function(_0x304113,_0xb88455){return _0x37ec29['zqQbt'](_0x304113,_0xb88455);},'VVOsY':function(_0x24a75a,_0x25dff9){return _0x37ec29['zqQbt'](_0x24a75a,_0x25dff9);}};if(_0x37ec29['jPClM'](_0x37ec29['dRckM'],_0x37ec29['LBQfQ'])){bench['end'](_0x37ec29['CkpZc'](0x2*(_0x3b294a*0x8),_0x37ec29['yXtqN'](_0x37ec29['yXtqN'](0x400,0x400),0x400)));process['exit'](0x0);}else{var _0x49c36a=_0x3ae38a['XvYaG']['split']('|'),_0x29e220=0x0;while(!![]){switch(_0x49c36a[_0x29e220++]){case'0':while(_0x3ae38a['ZRqMb'](_0x296275['writeQueueSize'],0x0))_0x3ae38a['UdjTG'](_0x15a9dd);continue;case'1':bench['start']();continue;case'2':if(_0xac98aa)_0x3ae38a['nXEUy'](_0x2e3613,_0xac98aa,_0x3ae38a['tdEkq']);continue;case'3':_0x3ae38a['qGijC'](setTimeout,()=>{bench['end'](_0x5021b7['ZNcxi'](0x2*(_0x3b294a*0x8),_0x5021b7['xyimO'](_0x5021b7['AJdSf'](0x400,0x400),0x400)));process['exit'](0x0);},_0x3ae38a['UOlFm'](dur,0x3e8));continue;case'4':var _0x5021b7={'ZNcxi':function(_0xd6db3a,_0x511945){return _0xd6db3a/_0x511945;},'xyimO':function(_0x39b221,_0x59e730){return _0x3ae38a['UOlFm'](_0x39b221,_0x59e730);},'AJdSf':function(_0x5f5244,_0x12d4b2){return _0x3ae38a['VVOsY'](_0x5f5244,_0x12d4b2);}};continue;case'5':_0x296275['readStart']();continue;}break;}}},_0x37ec29['yXtqN'](dur,0x3e8));while(_0x296275['writeQueueSize']===0x0)_0x15a9dd();};function _0x15a9dd(){const _0x3db14a=new WriteWrap();_0x3db14a['oncomplete']=_0xef72e2;let _0xac98aa;switch(type){case 'buf':_0xac98aa=_0x296275['writeBuffer'](_0x3db14a,_0x5a0307);break;case _0x37ec29['lMCso']:_0xac98aa=_0x296275['writeUtf8String'](_0x3db14a,_0x5a0307);break;case _0x37ec29['CYkZJ']:_0xac98aa=_0x296275['writeAsciiString'](_0x3db14a,_0x5a0307);break;}if(_0xac98aa)_0x2e3613(_0xac98aa,_0x37ec29['DLEaD']);}function _0xef72e2(_0xac98aa,_0x154866){if(_0xac98aa)_0x37ec29['ARjDu'](_0x2e3613,_0xac98aa,'write');while(_0x37ec29['KGmua'](_0x296275['writeQueueSize'],0x0))_0x37ec29['UUYci'](_0x15a9dd);}}