const errors=require('@tryghost/errors');const tpl=require('@tryghost/tpl');const messages={'missingContext':'missing\x20context'};module['exports']=function(_0x30fca9){var _0x4a4ffd={'JmkFM':'integration','ZqCBW':'critical','RgEaW':function(_0x53c2ab,_0x351774){return _0x53c2ab===_0x351774;},'bLpxU':function(_0x4f6dda,_0x42d43b){return _0x4f6dda!==_0x42d43b;},'MISnZ':'MRawq','eKLZM':'jixvh','TnZcc':function(_0x2482e1,_0x23d267){return _0x2482e1===_0x23d267;}};_0x30fca9['Model']=_0x30fca9['Model']['extend']({'getActor'(_0x4d234d={'context':{}}){if(_0x4d234d['context']&&_0x4d234d['context']['integration']){return{'id':_0x4d234d['context']['integration']['id'],'type':_0x4a4ffd['JmkFM']};}if(_0x4d234d['context']&&_0x4d234d['context']['user']){return{'id':_0x4d234d['context']['user'],'type':'user'};}return null;},'contextUser':function contextUser(_0x450088){_0x450088=_0x450088||{};_0x450088['context']=_0x450088['context']||{};if(_0x450088['context']['user']||_0x30fca9['Model']['isExternalUser'](_0x450088['context']['user'])){return _0x450088['context']['user'];}else if(_0x450088['context']['integration']){return _0x30fca9['Model']['internalUser'];}else if(_0x450088['context']['internal']){return _0x30fca9['Model']['internalUser'];}else if(this['get']('id')){return this['get']('id');}else if(_0x450088['context']['external']){return _0x30fca9['Model']['externalUser'];}else{throw new errors[('NotFoundError')]({'message':tpl(messages['missingContext']),'level':_0x4a4ffd['ZqCBW']});}}},{'internalUser':0x1,'externalUser':0x0,'isInternalUser':function isInternalUser(_0x651bba){return _0x4a4ffd['RgEaW'](_0x651bba,_0x30fca9['Model']['internalUser'])||_0x4a4ffd['RgEaW'](_0x651bba,_0x30fca9['Model']['internalUser']['toString']());},'isExternalUser':function isExternalUser(_0x43fb4e){if(_0x4a4ffd['bLpxU'](_0x4a4ffd['MISnZ'],_0x4a4ffd['eKLZM'])){return _0x4a4ffd['TnZcc'](_0x43fb4e,_0x30fca9['Model']['externalUser'])||_0x4a4ffd['TnZcc'](_0x43fb4e,_0x30fca9['Model']['externalUser']['toString']());}else{return this['get']('id');}}});};