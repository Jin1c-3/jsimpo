utils['load']('test/inspector/wasm-inspector-test.js');const {session,contextGroup,Protocol}=InspectorTest['start']('Test\x20conditional\x20breakpoints\x20in\x20wasm.');session['setupScriptMap']();const builder=new WasmModuleBuilder();const fib_body=[kExprLocalGet,0x0,kExprLocalGet,0x0,kExprI32Const,0x2,kExprI32LeS,kExprBrIf,0x0,kExprI32Const,0x1,kExprI32Sub,kExprCallFunction,0x0,kExprLocalGet,0x0,kExprI32Const,0x2,kExprI32Sub,kExprCallFunction,0x0,kExprI32Add];const fib=builder['addFunction']('fib',kSig_i_i)['addBody'](fib_body)['exportFunc']();const module_bytes=builder['toArray']();const find_offset=_0x4e13e3=>fib['body_offset']+fib_body['indexOf'](_0x4e13e3);const breakpoints=[{'loc':find_offset(kExprLocalGet),'cond':'false'},{'loc':find_offset(kExprBrIf),'cond':'true'},{'loc':find_offset(kExprCallFunction),'cond':'$var0.value==3'}];Protocol['Debugger']['onPaused'](async _0x4efa48=>{var _0x348757={'aBmga':'local'};var _0x1b371d=_0x4efa48['params']['callFrames'];await session['logSourceLocation'](_0x1b371d[0x0]['location']);var _0x1356d4=_0x4efa48['params']['callFrames'][0x0];for(var _0x1df778 of _0x1356d4['scopeChain']){if(_0x1df778['type']!=_0x348757['aBmga'])continue;var _0xa4521c=await Protocol['Runtime']['getProperties']({'objectId':_0x1df778['object']['objectId']});for(var {name,value}of _0xa4521c['result']['result']){value=await WasmInspectorTest['getWasmValue'](value);InspectorTest['log'](name+':\x20'+value);}}Protocol['Debugger']['resume']();});InspectorTest['runAsyncTestSuite']([async function test(){var _0x22a62a={'aXEOg':'Instantiating.','wRzgS':'Waiting for wasm script.','tWsgt':'instance.exports.fib(5)','bEajZ':'runWasm','ibmzK':'fib\x20returned!'};await Protocol['Runtime']['enable']();await Protocol['Debugger']['enable']();InspectorTest['log'](_0x22a62a['aXEOg']);WasmInspectorTest['instantiate'](module_bytes);InspectorTest['log'](_0x22a62a['wRzgS']);const [,{params:wasm_script}]=await Protocol['Debugger']['onceScriptParsed'](0x2);InspectorTest['log']('Got wasm script: '+wasm_script['url']);for(let _0x1e55cc of breakpoints){InspectorTest['log']('Setting breakpoint at offset '+_0x1e55cc['loc']+', condition "'+_0x1e55cc['cond']+'\x22');InspectorTest['logMessage'](await Protocol['Debugger']['setBreakpoint']({'location':{'scriptId':wasm_script['scriptId'],'lineNumber':0x0,'columnNumber':_0x1e55cc['loc']},'condition':_0x1e55cc['cond']}));}InspectorTest['log']('Calling fib(5)');await WasmInspectorTest['evalWithUrl'](_0x22a62a['tWsgt'],_0x22a62a['bEajZ']);InspectorTest['log'](_0x22a62a['ibmzK']);}]);