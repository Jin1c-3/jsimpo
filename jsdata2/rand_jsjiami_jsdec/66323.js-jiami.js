'use strict';const URL=require('url')['URL'];const Arborist=require('@npmcli/arborist');function normalizeFunding(_0x21be14){const _0x4899d5=_0x47953d=>typeof _0x47953d==='string'?{'url':_0x47953d}:_0x47953d;const _0x433cb2=[]['concat'](_0x21be14||[])['map'](_0x4899d5);return Array['isArray'](_0x21be14)?_0x433cb2:_0x433cb2[0x0];}function isValidFunding(_0x36427c){var _0x5341d9={'XnVKF':function(_0x4adef9,_0x5ed5b7){return _0x4adef9!==_0x5ed5b7;},'iGaRh':'https:','xUYOl':function(_0x3cd41a,_0x299403){return _0x3cd41a!==_0x299403;},'LyzYC':'http:','SpYWl':function(_0x535bc2,_0xdb7229){return _0x535bc2(_0xdb7229);}};if(!_0x36427c)return![];if(Array['isArray'](_0x36427c))return _0x36427c['every'](_0x14ff5d=>!Array['isArray'](_0x14ff5d)&&isValidFunding(_0x14ff5d));try{var _0x6bba35=new URL(_0x36427c['url']||_0x36427c);}catch(_0x1f39b7){return![];}if(_0x5341d9['XnVKF'](_0x6bba35['protocol'],_0x5341d9['iGaRh'])&&_0x5341d9['xUYOl'](_0x6bba35['protocol'],_0x5341d9['LyzYC']))return![];return _0x5341d9['SpYWl'](Boolean,_0x6bba35['host']);}const empty=()=>Object['create'](null);function readTree(_0xde7dee,_0x1ee5b0){var _0x267aa0={'eUirC':function(_0x4c949e){return _0x4c949e();},'lUOQw':function(_0x2f3736,_0x3bcf7a){return _0x2f3736!==_0x3bcf7a;},'JDAUy':'edvUO','bBNgq':function(_0x12f45e,_0x21d0b2){return _0x12f45e(_0x21d0b2);},'gKXzP':function(_0x59232b,_0x592f5e){return _0x59232b(_0x592f5e);},'xcsjx':'ynHbY','MOhhr':function(_0x2225df){return _0x2225df();},'bslUD':function(_0x11a1a7,_0x5c5074){return _0x11a1a7!==_0x5c5074;},'Mgpog':'ekcTt','eAllE':'NRYtt','uagWD':function(_0x317df3,_0x484297){return _0x317df3(_0x484297);},'HHYFX':function(_0x2f9f8e,_0x1e8017){return _0x2f9f8e(_0x1e8017);},'STOmy':function(_0x4e9eaf){return _0x4e9eaf();},'pAekI':function(_0x4f5b86){return _0x4f5b86();},'jNDIG':function(_0x3dd556){return _0x3dd556();},'JiDIy':function(_0x1fa16d){return _0x1fa16d();},'VLcwq':'trailingDependencies','ZFWek':'uYOkw','thIXx':function(_0x1698de,_0xb4a45d){return _0x1698de!==_0xb4a45d;},'bkrbi':'vgRVA','hVwts':function(_0xa40738,_0x4a11e8){return _0xa40738(_0x4a11e8);}};let _0x16f230=0x0;const _0x1db8a9=new Set();const {countOnly}=_0x1ee5b0||{};const _0x26f5c2=_0x267aa0['HHYFX'](Symbol,_0x267aa0['VLcwq']);let _0x18f328;if(_0x1ee5b0&&_0x1ee5b0['workspaces']&&_0x1ee5b0['workspaces']['length']){if(_0x267aa0['ZFWek']==='uYOkw'){const _0x11edac=new Arborist(_0x1ee5b0);_0x18f328=_0x11edac['workspaceDependencySet'](_0xde7dee,_0x1ee5b0['workspaces']);}else{var _0x4c3dfe=new URL(funding['url']||funding);}}function _0x4ddac8(_0x5ebe4c,_0x34c613){var _0x593fea={'jZGMB':function(_0x22d105){return _0x267aa0['eUirC'](_0x22d105);}};if(_0x267aa0['lUOQw']('UZhwn',_0x267aa0['JDAUy'])){const _0xf649dd=_0x267aa0['bBNgq'](String,_0x5ebe4c)+_0x267aa0['bBNgq'](String,_0x34c613);if(_0x1db8a9['has'](_0xf649dd))return!![];_0x1db8a9['add'](_0xf649dd);}else{const _0xa91f60=dependencies[_0x26f5c2];if(_0xa91f60){return Object['assign'](_0x593fea['jZGMB'](empty),dependencies,_0xa91f60);}return dependencies;}}function _0x238381(_0x216e3d){const _0x631207=_0x216e3d[_0x26f5c2];if(_0x631207){if(_0x267aa0['lUOQw'](_0x267aa0['xcsjx'],_0x267aa0['xcsjx'])){if(funding&&_0x267aa0['gKXzP'](isValidFunding,funding)){target['funding']=_0x267aa0['gKXzP'](normalizeFunding,funding);_0x16f230++;}}else{return Object['assign'](_0x267aa0['MOhhr'](empty),_0x216e3d,_0x631207);}}return _0x216e3d;}function _0x1926ef(_0x3c8466){return _0x3c8466&&(Object['keys'](_0x3c8466)['length']||_0x3c8466[_0x26f5c2]);}function _0x22a63d(_0x3deb2c,_0x550626){if(_0x550626&&_0x267aa0['gKXzP'](isValidFunding,_0x550626)){if(_0x267aa0['bslUD'](_0x267aa0['Mgpog'],_0x267aa0['Mgpog'])){const _0x15b602=_0xde7dee&&_0xde7dee['package']&&_0xde7dee['package']['name']||_0xde7dee&&_0xde7dee['name'];_0x55caf7['name']=_0x15b602||_0xde7dee&&_0xde7dee['path'];if(_0xde7dee&&_0xde7dee['package']&&_0xde7dee['package']['version'])_0x55caf7['version']=_0xde7dee['package']['version'];if(_0xde7dee&&_0xde7dee['package']&&_0xde7dee['package']['funding'])_0x55caf7['funding']=normalizeFunding(_0xde7dee['package']['funding']);_0x55caf7['dependencies']=_0x267aa0['gKXzP'](_0x238381,_0x224d8f);}else{_0x3deb2c['funding']=normalizeFunding(_0x550626);_0x16f230++;}}}function _0x1a40ab(_0xde7dee){var _0x26f5f3={'gzjwa':function(_0x2d9d7d,_0x3da799){return _0x2d9d7d!==_0x3da799;},'siavH':_0x267aa0['eAllE'],'AUEJK':function(_0xcc43bb){return _0x267aa0['MOhhr'](_0xcc43bb);},'iCter':function(_0xcade42,_0x49a1c0,_0xa203a3){return _0xcade42(_0x49a1c0,_0xa203a3);},'CuEOI':function(_0x51b6d9,_0x3c132b){return _0x51b6d9===_0x3c132b;},'OJkrj':function(_0x37d3d2,_0x3037ac){return _0x37d3d2>_0x3037ac;},'AUyCw':function(_0x41f31f,_0x2f5a00){return _0x41f31f(_0x2f5a00);},'CDVmO':function(_0x9aa5a8,_0x214151){return _0x267aa0['gKXzP'](_0x9aa5a8,_0x214151);},'kGtVz':function(_0x565d23,_0x5aaf18){return _0x267aa0['uagWD'](_0x565d23,_0x5aaf18);},'qhLgu':function(_0x40af51,_0x12b444){return _0x267aa0['HHYFX'](_0x40af51,_0x12b444);},'TKqma':function(_0x3064a2){return _0x267aa0['STOmy'](_0x3064a2);}};const _0x296acf=_0xde7dee&&_0xde7dee['edgesOut']&&_0xde7dee['edgesOut']['values']();if(!_0x296acf)return _0x267aa0['pAekI'](empty);const _0x52bf60=Array['from'](_0x296acf)['map'](_0xc768ab=>{var _0x2312a9={'ZQhlY':function(_0x250f06,_0x1ccf17){return _0x250f06+_0x1ccf17;}};if(_0x26f5f3['gzjwa'](_0x26f5f3['siavH'],_0x26f5f3['siavH'])){const _0xc5396d=_0x2312a9['ZQhlY'](String(name),String(version));if(_0x1db8a9['has'](_0xc5396d))return!![];_0x1db8a9['add'](_0xc5396d);}else{if(!_0xc768ab||!_0xc768ab['to'])return _0x26f5f3['AUEJK'](empty);const _0x3bb656=_0xc768ab['to']['target']||_0xc768ab['to'];if(!_0x3bb656['package'])return empty();if(_0x18f328&&_0x18f328['size']>0x0&&!_0x18f328['has'](_0x3bb656))return _0x26f5f3['AUEJK'](empty);const {name,funding,version}=_0x3bb656['package'];if(_0x4ddac8(name,version))return _0x26f5f3['AUEJK'](empty);const _0x35652f={};if(version)_0x35652f['version']=version;_0x26f5f3['iCter'](_0x22a63d,_0x35652f,funding);return{'node':_0x3bb656,'fundingItem':_0x35652f};}});return _0x52bf60['reduce']((_0x22a41b,{node,fundingItem},_0x39bb21)=>{if(!fundingItem||_0x26f5f3['CuEOI'](fundingItem['length'],0x0)||!node)return _0x22a41b;const _0x5d64ef=node['edgesOut']&&_0x26f5f3['OJkrj'](node['edgesOut']['size'],0x0)&&_0x26f5f3['AUyCw'](_0x1a40ab,node);if(countOnly)return null;if(_0x26f5f3['CDVmO'](_0x1926ef,_0x5d64ef)){fundingItem['dependencies']=_0x26f5f3['CDVmO'](_0x238381,_0x5d64ef);}if(_0x26f5f3['kGtVz'](isValidFunding,fundingItem['funding']))_0x22a41b[node['package']['name']]=fundingItem;else if(_0x26f5f3['qhLgu'](_0x1926ef,fundingItem['dependencies'])){_0x22a41b[_0x26f5c2]=Object['assign'](_0x26f5f3['TKqma'](empty),_0x22a41b[_0x26f5c2],fundingItem['dependencies']);}return _0x22a41b;},countOnly?null:_0x267aa0['jNDIG'](empty));}const _0x224d8f=_0x267aa0['HHYFX'](_0x1a40ab,_0xde7dee);const _0x55caf7={'length':_0x16f230};if(!countOnly){if(_0x267aa0['thIXx']('vgRVA',_0x267aa0['bkrbi'])){return Object['assign'](_0x267aa0['JiDIy'](empty),dependencies,trailing);}else{const _0x23cf78=_0xde7dee&&_0xde7dee['package']&&_0xde7dee['package']['name']||_0xde7dee&&_0xde7dee['name'];_0x55caf7['name']=_0x23cf78||_0xde7dee&&_0xde7dee['path'];if(_0xde7dee&&_0xde7dee['package']&&_0xde7dee['package']['version'])_0x55caf7['version']=_0xde7dee['package']['version'];if(_0xde7dee&&_0xde7dee['package']&&_0xde7dee['package']['funding'])_0x55caf7['funding']=_0x267aa0['HHYFX'](normalizeFunding,_0xde7dee['package']['funding']);_0x55caf7['dependencies']=_0x267aa0['hVwts'](_0x238381,_0x224d8f);}}return _0x55caf7;}async function read(_0x3fc6ab){const _0x3ea652=new Arborist(_0x3fc6ab);const _0x1ebcb3=await _0x3ea652['loadActual'](_0x3fc6ab);return readTree(_0x1ebcb3,_0x3fc6ab);}module['exports']={'read':read,'readTree':readTree,'normalizeFunding':normalizeFunding,'isValidFunding':isValidFunding};