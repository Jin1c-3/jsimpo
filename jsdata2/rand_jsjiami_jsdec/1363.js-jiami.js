'use strict';const path=require('path');const {BlobServiceClient}=require('@azure/storage-blob');module['exports']=function upload(_0x293768,_0x5adf43,_0xfcb416){var _0x2f7996={'zKOth':function(_0x2279aa,_0x191607){return _0x2279aa!==_0x191607;},'jWxoE':'gjOzz','YyuoF':function(_0x502016,_0x4a9a05){return _0x502016(_0x4a9a05);},'fbvbS':function(_0x515b3c,_0x35c5b3){return _0x515b3c!==_0x35c5b3;},'EsLLo':'zJiJx','ogCTo':function(_0x345fe1,_0x1ac0ef){return _0x345fe1===_0x1ac0ef;},'Hareq':'THLDN','MODLV':function(_0x54d88d,_0x186fec){return _0x54d88d===_0x186fec;},'mvLhG':'FOUTE','GQGLp':'jSHhu','GcPWH':'Kiyfz','HMBhd':function(_0x18a82d,_0x3bba29){return _0x18a82d===_0x3bba29;},'rGUgv':'ScQQP','AJmiz':'atom-build','JAsha':function(_0x1164cc){return _0x1164cc();}};const _0x25ecec=BlobServiceClient['fromConnectionString'](_0x293768);const _0x133690=_0x2f7996['AJmiz'];const _0x17c353=_0x25ecec['getContainerClient'](_0x133690);async function _0x54cf46(){if(_0x2f7996['zKOth'](_0x2f7996['jWxoE'],'gjOzz')){forawait(const _0x3aa166 of existingAssets){console['log']('Deleting blob '+_0x3aa166['name']);_0x17c353['deleteBlob'](_0x3aa166['name']);}return Promise['resolve'](!![]);}else{return _0x17c353['listBlobsFlat']({'prefix':_0x5adf43});}}async function _0x3d1608(_0x404369=[]){var _0x596152={'MNRPg':function(_0x587768,_0x2510c1){return _0x2f7996['YyuoF'](_0x587768,_0x2510c1);}};if(_0x2f7996['fbvbS'](_0x2f7996['EsLLo'],_0x2f7996['EsLLo'])){return _0x17c353['listBlobsFlat']({'prefix':_0x5adf43});}else{try{if(_0x2f7996['ogCTo'](_0x2f7996['Hareq'],'THLDN')){forawait(const _0x540c66 of _0x404369){console['log']('Deleting\x20blob\x20'+_0x540c66['name']);_0x17c353['deleteBlob'](_0x540c66['name']);}return Promise['resolve'](!![]);}else{_0x596152['MNRPg'](reject,ex['message']);}}catch(_0x438221){return Promise['reject'](_0x438221['message']);}}}function _0x52a425(_0xfcb416){return _0xfcb416['reduce'](function(_0x1e4585,_0x158480){return _0x1e4585['then'](()=>_0xe0ee(_0x158480));},Promise['resolve']());}function _0xe0ee(_0x5d130c){if(_0x2f7996['HMBhd'](_0x2f7996['rGUgv'],'ScQQP')){return new Promise(async(_0x1b8b4b,_0x423371)=>{if(_0x2f7996['MODLV']('UStHI','UStHI')){try{if(_0x2f7996['mvLhG']==='FOUTE'){console['info']('Uploading '+_0x5d130c);const _0x434ce9=_0x17c353['getBlockBlobClient'](path['join'](_0x5adf43,path['basename'](_0x5d130c)));const _0xd6e5cf=await _0x434ce9['uploadFile'](_0x5d130c);_0x1b8b4b(_0xd6e5cf);}else{return promise['then'](()=>_0xe0ee(asset));}}catch(_0x79f89b){if(_0x2f7996['fbvbS'](_0x2f7996['GQGLp'],_0x2f7996['GcPWH'])){_0x423371(_0x79f89b['message']);}else{try{forawait(const _0x2bfaa1 of existingAssets){console['log']('Deleting blob '+_0x2bfaa1['name']);_0x17c353['deleteBlob'](_0x2bfaa1['name']);}return Promise['resolve'](!![]);}catch(_0x4a2a2f){return Promise['reject'](_0x4a2a2f['message']);}}}}else{return _0xfcb416['reduce'](function(_0x48486f,_0x3f9d47){return _0x48486f['then'](()=>_0xe0ee(_0x3f9d47));},Promise['resolve']());}});}else{console['log']('Deleting blob '+asset['name']);_0x17c353['deleteBlob'](asset['name']);}}return _0x2f7996['JAsha'](_0x54cf46)['then'](_0x3d1608)['then'](()=>_0x52a425(_0xfcb416));};