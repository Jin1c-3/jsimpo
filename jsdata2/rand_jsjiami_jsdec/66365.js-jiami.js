'use strict';var expect=require('expect.js');var promiseRetry=require('../');var promiseDelay=require('sleep-promise');describe('promise-retry',function(){var _0x1114e0={'ladWm':function(_0x44d9a6,_0x4a8ad5){return _0x44d9a6<=_0x4a8ad5;},'OjPjq':'final','GZJGh':function(_0x1da053,_0x7dbf06){return _0x1da053(_0x7dbf06);},'UBfBj':function(_0x3ffe66){return _0x3ffe66();},'lvcZi':function(_0x1a711c,_0x41b35c){return _0x1a711c(_0x41b35c);},'eqCKC':function(_0x13e98c,_0x5c6e3e){return _0x13e98c(_0x5c6e3e);},'nvxgC':function(_0x6f4cfd,_0x3862d5){return _0x6f4cfd(_0x3862d5);},'PkBhg':function(_0x492942,_0x4855d0){return _0x492942===_0x4855d0;},'uEngh':'HWqCF','Osilm':function(_0x2b7844,_0x46ecd9,_0x896bfb){return _0x2b7844(_0x46ecd9,_0x896bfb);},'rDZoT':function(_0x15447e,_0x1ca4ad){return _0x15447e===_0x1ca4ad;},'UnOhz':'LYsUL','XhJpg':function(_0x5612c9,_0x1bbe5e){return _0x5612c9(_0x1bbe5e);},'RfKPb':function(_0x2221d7,_0x1c4091){return _0x2221d7!==_0x1c4091;},'SNqNU':'eEVAa','LJqXM':'vWRzm','KPyxl':'should not fail','QRrfU':'oBhqE','lleFT':function(_0x42e8b4,_0x5950ab){return _0x42e8b4(_0x5950ab);},'jjgZz':function(_0x203251,_0x3a5b39){return _0x203251(_0x3a5b39);},'ARBdg':'cjzat','VZzwa':function(_0x180bad,_0x55a523,_0x3f19e2){return _0x180bad(_0x55a523,_0x3f19e2);},'xEQXO':'KmnNm','SSzQE':'XsWjD','KzzEE':function(_0x439a26,_0x9bbb0a){return _0x439a26(_0x9bbb0a);},'OkQRv':'should not succeed','KCjBV':'oSDwQ','efeur':function(_0x223233,_0x1ce4c9){return _0x223233(_0x1ce4c9);},'sCYEL':function(_0x5aa053,_0x67fe00){return _0x5aa053(_0x67fe00);},'CAfva':function(_0x4ccce9,_0x2b84e9,_0x11b86f){return _0x4ccce9(_0x2b84e9,_0x11b86f);},'QFZNx':function(_0x2d7be8){return _0x2d7be8();},'fTRdY':'lyPAU','xGDkt':'foo','nansY':function(_0x36e4ae,_0x5154c0){return _0x36e4ae!==_0x5154c0;},'rRgQC':'efiRw','HYiIp':'AJceU','Wiqfs':function(_0x552853,_0x90b64f){return _0x552853!==_0x90b64f;},'unjCN':'QCAQH','mXstR':'dAIWI','THkEd':function(_0x25f580,_0x2d8cdc){return _0x25f580===_0x2d8cdc;},'xcmlq':'rMdVH','RVUoF':'lBUHP','vkHiW':function(_0x2049ca,_0x1f2ebc){return _0x2049ca(_0x1f2ebc);},'TSZFp':function(_0x49d862,_0x45f720){return _0x49d862(_0x45f720);},'ybqOP':function(_0x3257e4,_0x515c55){return _0x3257e4(_0x515c55);},'yPrgy':function(_0x3c333c,_0x321d0f){return _0x3c333c!==_0x321d0f;},'fMKvE':'Lfxyj','EWrKT':function(_0x348e1f,_0x2b1e90){return _0x348e1f===_0x2b1e90;},'HqRIv':'XzpSl','fzRDn':function(_0x2a6986,_0xa24a74,_0x3e6f34){return _0x2a6986(_0xa24a74,_0x3e6f34);},'dKKYQ':function(_0x356910,_0x2b3c82){return _0x356910!==_0x2b3c82;},'CJPSa':'tFnKQ','tBtmf':function(_0x5c0f15,_0x56b9f3){return _0x5c0f15(_0x56b9f3);},'kFfAz':function(_0x417397,_0x324b0d,_0x4f9812){return _0x417397(_0x324b0d,_0x4f9812);},'SmWok':'LFPKf','aUKBM':function(_0x7e2a87,_0x3ee734){return _0x7e2a87===_0x3ee734;},'oGtgm':'LrQog','dfLCu':function(_0x1dfcc2,_0x12fd1a){return _0x1dfcc2(_0x12fd1a);},'gdOTw':function(_0x18ed08,_0x5e842f,_0x4d95b1){return _0x18ed08(_0x5e842f,_0x4d95b1);},'IjIqQ':function(_0x160e40,_0x1be964){return _0x160e40!==_0x1be964;},'NHOFe':'MGYwW','aWvOk':'pPnWD','ykffG':'znPjl','WZSkE':'FPwcL','tjhOu':function(_0x21030d){return _0x21030d();},'Grjsx':'dnfuX','OEQKz':function(_0x4e5c65,_0xf84e8d){return _0x4e5c65===_0xf84e8d;},'FxZvt':function(_0x17e73c,_0x1ebdd8){return _0x17e73c!==_0x1ebdd8;},'PFrZs':'fWcEZ','rxogk':function(_0x4afe97,_0x320a67){return _0x4afe97(_0x320a67);},'MSsed':'TWRCE','GKksD':'should call fn again if retry was called','IcFYl':function(_0x367c55,_0x653e45,_0x5bc84a){return _0x367c55(_0x653e45,_0x5bc84a);},'zeJao':'should call fn with the attempt number','oyOAb':'should\x20not\x20retry\x20on\x20fulfillment\x20if\x20retry\x20was\x20not\x20called','omMrO':'should not retry on rejection if nr of retries is 0','iHcuK':'should pass options to the underlying retry module','lAjog':function(_0xc94007,_0x3bb06a,_0x304cee){return _0xc94007(_0x3bb06a,_0x304cee);},'MzIGm':'should convert direct fulfillments into promises','tWwgI':'should\x20convert\x20direct\x20rejections\x20into\x20promises','MjmIW':function(_0x2f21ca,_0x490d7a,_0x336a13){return _0x2f21ca(_0x490d7a,_0x336a13);},'iCZhY':'should retry if retry() was called with undefined','HtgXZ':'should work with several retries in the same chain','ukXDY':'should allow options to be passed first'};_0x1114e0['gdOTw'](it,_0x1114e0['GKksD'],function(){var _0x5f46ee={'yckOi':_0x1114e0['OjPjq'],'Zvuam':function(_0x4bcc7f,_0x2d4936){return _0x1114e0['PkBhg'](_0x4bcc7f,_0x2d4936);},'PEIVx':'zTgbt','JyfEm':'dxpzN','TPeCv':function(_0x38d61d,_0x59e3f5){return _0x38d61d(_0x59e3f5);}};if('HWqCF'!==_0x1114e0['uEngh']){if(_0x1114e0['ladWm'](_0x5537b9,0x2)){retry();}return _0x1114e0['OjPjq'];}else{var _0x5537b9=0x0;return _0x1114e0['Osilm'](promiseRetry,function(_0x57e55c){var _0x3573e1={'FkXSl':function(_0x22dd03,_0x1ba9d5){return _0x1114e0['GZJGh'](_0x22dd03,_0x1ba9d5);},'EuRgL':function(_0x2c64d7){return _0x1114e0['UBfBj'](_0x2c64d7);},'VauBr':_0x1114e0['OjPjq'],'GYqbD':function(_0x7437d6,_0x28a482){return _0x1114e0['lvcZi'](_0x7437d6,_0x28a482);},'JgsjK':function(_0xd3d70d,_0x39d321){return _0x1114e0['eqCKC'](_0xd3d70d,_0x39d321);},'nTxGP':function(_0x36b4ba,_0x3670ed){return _0x1114e0['ladWm'](_0x36b4ba,_0x3670ed);},'LMHBy':'oyjIs','pijBK':'foo'};_0x5537b9+=0x1;return _0x1114e0['nvxgC'](promiseDelay,0xa)['then'](function(){var _0x19ce84={'pOOiU':function(_0x4f84bd,_0x5d7809){return _0x4f84bd<=_0x5d7809;},'MyMXO':function(_0x3b2353){return _0x3573e1['EuRgL'](_0x3b2353);},'ToVxy':_0x3573e1['VauBr'],'IBkne':function(_0x2ef0c7,_0x10444f){return _0x3573e1['GYqbD'](_0x2ef0c7,_0x10444f);},'FtfrU':function(_0x5aeec1,_0x18d483){return _0x3573e1['JgsjK'](_0x5aeec1,_0x18d483);}};if('KSThl'!=='xuEGv'){if(_0x3573e1['nTxGP'](_0x5537b9,0x2)){if(_0x3573e1['LMHBy']!=='oyjIs'){_0x5537b9+=0x1;return _0x3573e1['FkXSl'](promiseDelay,0xa)['then'](function(){if(_0x19ce84['pOOiU'](_0x5537b9,0x2)){_0x19ce84['MyMXO'](_0x57e55c);}return _0x19ce84['ToVxy'];});}else{_0x57e55c(new Error(_0x3573e1['pijBK']));}}return 'final';}else{_0x19ce84['IBkne'](expect,value)['to']['be'](_0x19ce84['ToVxy']);_0x19ce84['FtfrU'](expect,_0x5537b9)['to']['be'](0x3);}});},{'factor':0x1})['then'](function(_0x3cd9cd){if(_0x5f46ee['Zvuam'](_0x5f46ee['PEIVx'],_0x5f46ee['JyfEm'])){return _0x5f46ee['yckOi'];}else{_0x5f46ee['TPeCv'](expect,_0x3cd9cd)['to']['be'](_0x5f46ee['yckOi']);_0x5f46ee['TPeCv'](expect,_0x5537b9)['to']['be'](0x3);}},function(){throw new Error('should\x20not\x20fail');});}});_0x1114e0['IcFYl'](it,_0x1114e0['zeJao'],function(){var _0x49120c={'NsjBo':'foo','mEeah':_0x1114e0['QRrfU'],'FuZCx':function(_0x391213,_0x15ae70){return _0x1114e0['lleFT'](_0x391213,_0x15ae70);},'tWakK':function(_0x5380bd,_0x26a22d){return _0x1114e0['jjgZz'](_0x5380bd,_0x26a22d);},'pdpvC':function(_0x5d33d6,_0x255954){return _0x1114e0['jjgZz'](_0x5d33d6,_0x255954);}};if('cjzat'===_0x1114e0['ARBdg']){var _0x2b1c25=0x0;return _0x1114e0['VZzwa'](promiseRetry,function(_0x50d976,_0x2d5053){var _0x1674ba={'oVQOw':_0x49120c['NsjBo'],'PxNBu':function(_0x100825,_0x596f72){return _0x100825===_0x596f72;},'XCFbp':_0x49120c['mEeah'],'AHUKf':function(_0x566bf3,_0x265a06){return _0x566bf3(_0x265a06);}};_0x2b1c25+=0x1;_0x49120c['FuZCx'](expect,_0x2b1c25)['to']['equal'](_0x2d5053);return _0x49120c['tWakK'](promiseDelay,0xa)['then'](function(){var _0x302e39={'lNuKO':_0x1674ba['oVQOw']};if(_0x2b1c25<=0x2){if(_0x1674ba['PxNBu'](_0x1674ba['XCFbp'],_0x1674ba['XCFbp'])){_0x1674ba['AHUKf'](_0x50d976,new Error(_0x1674ba['oVQOw']));}else{_0x2b1c25+=0x1;return promiseDelay(0xa)['then'](function(){throw new Error(_0x302e39['lNuKO']);});}}return 'final';});},{'factor':0x1})['then'](function(_0x274a95){var _0x2ea1cd={'dCkCq':_0x1114e0['OjPjq'],'vjfIg':'should\x20not\x20fail'};if(_0x1114e0['rDZoT'](_0x1114e0['UnOhz'],_0x1114e0['UnOhz'])){expect(_0x274a95)['to']['be'](_0x1114e0['OjPjq']);_0x1114e0['XhJpg'](expect,_0x2b1c25)['to']['be'](0x3);}else{return promiseRetry(function(){return _0x2ea1cd['dCkCq'];},{'factor':0x1})['then'](function(_0x35668a){expect(_0x35668a)['to']['be']('final');},function(){throw new Error(_0x2ea1cd['vjfIg']);});}},function(){if(_0x1114e0['RfKPb'](_0x1114e0['SNqNU'],_0x1114e0['LJqXM'])){throw new Error(_0x1114e0['KPyxl']);}else{_0x49120c['pdpvC'](expect,err)['to']['be'](undefined);}});}else{_0x1114e0['XhJpg'](expect,value)['to']['be'](_0x1114e0['OjPjq']);_0x1114e0['XhJpg'](expect,_0x2b1c25)['to']['be'](0x3);}});it(_0x1114e0['oyOAb'],function(){var _0xfb08c6={'ZNXWP':_0x1114e0['OkQRv'],'VrRkL':function(_0x496ab4,_0x30ff47){return _0x496ab4===_0x30ff47;},'zaszy':'kaoGx','LJBFG':function(_0x5a4462,_0x5877cb){return _0x1114e0['KzzEE'](_0x5a4462,_0x5877cb);}};if(_0x1114e0['rDZoT'](_0x1114e0['KCjBV'],'oSDwQ')){var _0x1cf635=0x0;return _0x1114e0['efeur'](promiseRetry,function(){var _0x46b0f1={'qZlyV':_0x1114e0['OjPjq'],'Srlnx':'foo'};if(_0x1114e0['RfKPb'](_0x1114e0['xEQXO'],_0x1114e0['SSzQE'])){_0x1cf635+=0x1;return _0x1114e0['KzzEE'](promiseDelay,0xa)['then'](function(){return _0x46b0f1['qZlyV'];});}else{if(_0x1cf635<=0x2){retry(new Error(_0x46b0f1['Srlnx']));}return _0x46b0f1['qZlyV'];}})['then'](function(_0xf3b5e5){if(_0xfb08c6['VrRkL'](_0xfb08c6['zaszy'],_0xfb08c6['zaszy'])){_0xfb08c6['LJBFG'](expect,_0xf3b5e5)['to']['be']('final');expect(_0x1cf635)['to']['be'](0x1);}else{throw new Error(_0xfb08c6['ZNXWP']);}},function(){throw new Error(_0x1114e0['KPyxl']);});}else{retry(new Error('foo'));}});_0x1114e0['IcFYl'](it,'should\x20not\x20retry\x20on\x20rejection\x20if\x20retry\x20was\x20not\x20called',function(){var _0x2c98ac={'xGHYz':function(_0x401d07,_0x5634b3){return _0x1114e0['sCYEL'](_0x401d07,_0x5634b3);},'oJXGk':function(_0xb497ae,_0x2a167f){return _0xb497ae!==_0x2a167f;},'OOBNZ':function(_0x1936b3,_0x4411cf,_0xe8850c){return _0x1114e0['CAfva'](_0x1936b3,_0x4411cf,_0xe8850c);},'HcQkG':function(_0x28a3bb){return _0x1114e0['QFZNx'](_0x28a3bb);},'ClsSD':function(_0x5bd470,_0x3bb287){return _0x1114e0['rDZoT'](_0x5bd470,_0x3bb287);},'SioDM':_0x1114e0['fTRdY'],'MdYSm':_0x1114e0['xGDkt']};var _0x5814a6=0x0;return promiseRetry(function(){var _0x178aef={'rqoOg':function(_0x7ba199,_0x3b7e81){return _0x2c98ac['xGHYz'](_0x7ba199,_0x3b7e81);},'XfXvb':function(_0x4bd037,_0x3c19d6){return _0x2c98ac['oJXGk'](_0x4bd037,_0x3c19d6);},'kOGYh':'XuShl','YaEro':'foo'};_0x5814a6+=0x1;return promiseDelay(0xa)['then'](function(){if(_0x178aef['XfXvb'](_0x178aef['kOGYh'],'XuShl')){_0x5814a6+=0x1;return _0x178aef['rqoOg'](promiseDelay,0xa)['then'](function(){return'final';});}else{throw new Error(_0x178aef['YaEro']);}});})['then'](function(){throw new Error('should not succeed');},function(_0x590914){var _0x10ba98={'MhKDd':function(_0x2fd996){return _0x2c98ac['HcQkG'](_0x2fd996);}};if(_0x2c98ac['ClsSD'](_0x2c98ac['SioDM'],'wvNWh')){return _0x2c98ac['OOBNZ'](promiseRetry,function(_0x1d0e7f){_0x10ba98['MhKDd'](_0x1d0e7f);},{'retries':0x1,'factor':0x1});}else{_0x2c98ac['xGHYz'](expect,_0x590914['message'])['to']['be'](_0x2c98ac['MdYSm']);_0x2c98ac['xGHYz'](expect,_0x5814a6)['to']['be'](0x1);}});});it(_0x1114e0['omMrO'],function(){var _0x39a409={'IVhVC':_0x1114e0['xGDkt'],'DqdGs':function(_0x2a9de6,_0x4081b2){return _0x2a9de6(_0x4081b2);},'FgjaI':function(_0xd190cf,_0x4d23a8){return _0xd190cf!==_0x4d23a8;},'pXgbL':_0x1114e0['HYiIp'],'kYLGG':function(_0x151f44,_0x16ec8f){return _0x1114e0['sCYEL'](_0x151f44,_0x16ec8f);},'CPLAp':function(_0x51e1f5,_0x47ea67){return _0x1114e0['sCYEL'](_0x51e1f5,_0x47ea67);}};var _0x30c94e=0x0;return promiseRetry(function(_0x4906b5){if(_0x39a409['FgjaI'](_0x39a409['pXgbL'],_0x39a409['pXgbL'])){expect(err['message'])['to']['be'](_0x39a409['IVhVC']);_0x39a409['DqdGs'](expect,_0x30c94e)['to']['be'](0x3);}else{_0x30c94e+=0x1;return _0x39a409['DqdGs'](promiseDelay,0xa)['then'](function(){throw new Error('foo');})['catch'](_0x4906b5);}},{'retries':0x0})['then'](function(){if(_0x1114e0['nansY'](_0x1114e0['rRgQC'],_0x1114e0['rRgQC'])){throw new Error(_0x39a409['IVhVC']);}else{throw new Error(_0x1114e0['OkQRv']);}},function(_0x492358){_0x39a409['kYLGG'](expect,_0x492358['message'])['to']['be']('foo');_0x39a409['CPLAp'](expect,_0x30c94e)['to']['be'](0x1);});});it('should reject the promise if the retries were exceeded',function(){var _0x5a55ae={'vDBNQ':function(_0xdafb38,_0x1eb1eb){return _0xdafb38(_0x1eb1eb);},'dHRVs':'should not fail'};var _0x1f3608=0x0;return _0x1114e0['CAfva'](promiseRetry,function(_0x5d55fa){var _0x4c13d5={'aRbhw':'foo'};_0x1f3608+=0x1;return _0x5a55ae['vDBNQ'](promiseDelay,0xa)['then'](function(){throw new Error(_0x4c13d5['aRbhw']);})['catch'](_0x5d55fa);},{'retries':0x2,'factor':0x1})['then'](function(){var _0x2f1b44={'IpsFT':function(_0x3621b3,_0x2a4854){return _0x3621b3(_0x2a4854);},'iSUse':_0x1114e0['OjPjq']};if(_0x1114e0['Wiqfs'](_0x1114e0['unjCN'],_0x1114e0['mXstR'])){throw new Error('should\x20not\x20succeed');}else{_0x2f1b44['IpsFT'](expect,value)['to']['be'](_0x2f1b44['iSUse']);}},function(_0x1be9b1){if(_0x1114e0['THkEd'](_0x1114e0['xcmlq'],_0x1114e0['RVUoF'])){throw new Error(_0x5a55ae['dHRVs']);}else{_0x1114e0['vkHiW'](expect,_0x1be9b1['message'])['to']['be'](_0x1114e0['xGDkt']);_0x1114e0['vkHiW'](expect,_0x1f3608)['to']['be'](0x3);}});});_0x1114e0['IcFYl'](it,_0x1114e0['iHcuK'],function(){var _0x4d5991={'pLSVA':_0x1114e0['OkQRv'],'dwZts':function(_0x4461c5,_0x57305b){return _0x1114e0['yPrgy'](_0x4461c5,_0x57305b);},'MXGJE':_0x1114e0['fMKvE'],'sGcrd':function(_0x10674e,_0x5d1b03){return _0x10674e<_0x5d1b03;},'kZfam':function(_0x181a4f,_0xef201e){return _0x1114e0['ybqOP'](_0x181a4f,_0xef201e);},'ywFFW':_0x1114e0['xGDkt'],'aKMRO':function(_0x20617a,_0x354a98){return _0x20617a<=_0x354a98;},'OIMJe':_0x1114e0['OjPjq'],'jfqcn':function(_0x2933e0,_0x470306){return _0x2933e0(_0x470306);},'GfAfK':function(_0x350202,_0x52b63e){return _0x1114e0['EWrKT'](_0x350202,_0x52b63e);},'WBlNR':_0x1114e0['HqRIv']};var _0x1f5587=0x0;return _0x1114e0['fzRDn'](promiseRetry,function(_0x4830a1){return _0x1114e0['TSZFp'](promiseDelay,0xa)['then'](function(){var _0x441bb3={'URmrw':_0x4d5991['pLSVA'],'RjUkF':'foo'};if(_0x4d5991['dwZts'](_0x4d5991['MXGJE'],'Pvdgl')){if(_0x4d5991['sGcrd'](_0x1f5587,0x2)){_0x1f5587+=0x1;_0x4d5991['kZfam'](_0x4830a1,new Error(_0x4d5991['ywFFW']));}return 'final';}else{var _0x3b2dd3={'ViERJ':'foo'};promiseRetry(function(){throw new Error(_0x3b2dd3['ViERJ']);},{'retries':0x1,'factor':0x1})['then'](function(){throw new Error(_0x441bb3['URmrw']);},function(_0x368a02){expect(_0x368a02['message'])['to']['be'](_0x441bb3['RjUkF']);});}});},{'retries':0x1,'factor':0x1})['then'](function(){if(_0x4d5991['GfAfK'](_0x4d5991['WBlNR'],_0x4d5991['WBlNR'])){throw new Error(_0x4d5991['pLSVA']);}else{var _0x1bacad={'jreWs':function(_0x572b7e,_0x54d1a6){return _0x4d5991['aKMRO'](_0x572b7e,_0x54d1a6);},'yYltj':function(_0x14a389,_0x4feb74){return _0x4d5991['kZfam'](_0x14a389,_0x4feb74);},'INGXf':_0x4d5991['ywFFW'],'UbxQa':_0x4d5991['OIMJe']};_0x1f5587+=0x1;_0x4d5991['kZfam'](expect,_0x1f5587)['to']['equal'](number);return _0x4d5991['jfqcn'](promiseDelay,0xa)['then'](function(){if(_0x1bacad['jreWs'](_0x1f5587,0x2)){_0x1bacad['yYltj'](retry,new Error(_0x1bacad['INGXf']));}return _0x1bacad['UbxQa'];});}},function(_0x57ae15){_0x1114e0['ybqOP'](expect,_0x57ae15['message'])['to']['be'](_0x1114e0['xGDkt']);});});_0x1114e0['lAjog'](it,_0x1114e0['MzIGm'],function(){var _0x2510c2={'slWqk':function(_0x430575,_0x3c5677){return _0x1114e0['ybqOP'](_0x430575,_0x3c5677);},'eQUav':_0x1114e0['xGDkt'],'oWJxq':_0x1114e0['OjPjq'],'TXUoy':function(_0x152d6c,_0x4ee7a1){return _0x1114e0['dKKYQ'](_0x152d6c,_0x4ee7a1);},'EsRWL':_0x1114e0['CJPSa'],'RrSnY':'mdWPH','DJZaf':function(_0x11c608,_0xd0a7db){return _0x1114e0['tBtmf'](_0x11c608,_0xd0a7db);},'WqdAV':_0x1114e0['KPyxl']};return _0x1114e0['kFfAz'](promiseRetry,function(){var _0x3c38c9={'CuWZY':function(_0x179e3d,_0x320882){return _0x2510c2['slWqk'](_0x179e3d,_0x320882);},'MbgmV':_0x2510c2['eQUav'],'jAhln':_0x2510c2['oWJxq']};if(_0x2510c2['TXUoy'](_0x2510c2['EsRWL'],_0x2510c2['RrSnY'])){return _0x2510c2['oWJxq'];}else{if(count<0x2){count+=0x1;_0x3c38c9['CuWZY'](retry,new Error(_0x3c38c9['MbgmV']));}return _0x3c38c9['jAhln'];}},{'factor':0x1})['then'](function(_0x406f28){_0x2510c2['DJZaf'](expect,_0x406f28)['to']['be']('final');},function(){throw new Error(_0x2510c2['WqdAV']);});});_0x1114e0['lAjog'](it,_0x1114e0['tWwgI'],function(){var _0x3e1077={'NZVtA':'should\x20not\x20succeed','ufJsR':function(_0x1d5a59,_0x451896){return _0x1d5a59(_0x451896);},'AKFoY':_0x1114e0['xGDkt']};if(_0x1114e0['dKKYQ']('uOpTA','HyYuy')){promiseRetry(function(){var _0x5329e7={'xsjgm':function(_0x542daa,_0x20ea8f){return _0x542daa(_0x20ea8f);}};if(_0x1114e0['dKKYQ'](_0x1114e0['SmWok'],_0x1114e0['SmWok'])){_0x5329e7['xsjgm'](retry,err);}else{throw new Error(_0x1114e0['xGDkt']);}},{'retries':0x1,'factor':0x1})['then'](function(){if(_0x1114e0['EWrKT']('MoqAT','MoqAT')){throw new Error(_0x1114e0['OkQRv']);}else{throw new Error(_0x3e1077['NZVtA']);}},function(_0x790e36){_0x3e1077['ufJsR'](expect,_0x790e36['message'])['to']['be'](_0x3e1077['AKFoY']);});}else{throw new Error(_0x1114e0['xGDkt']);}});_0x1114e0['MjmIW'](it,'should not crash on undefined rejections',function(){var _0xdc0f74={'tfwgM':function(_0x51227c,_0x3d5bfc){return _0x51227c(_0x3d5bfc);},'SEXVE':function(_0x2fb5c5,_0x26b52b){return _0x1114e0['IjIqQ'](_0x2fb5c5,_0x26b52b);},'fAWKF':_0x1114e0['NHOFe'],'Afbqq':_0x1114e0['aWvOk'],'fjGSJ':'should\x20not\x20succeed','lkDuF':_0x1114e0['ykffG']};return _0x1114e0['gdOTw'](promiseRetry,function(){throw undefined;},{'retries':0x1,'factor':0x1})['then'](function(){var _0x546526={'tLGsD':function(_0x19a6c7){return _0x1114e0['QFZNx'](_0x19a6c7);}};if(_0x1114e0['aUKBM'](_0x1114e0['oGtgm'],'LrQog')){throw new Error('should not succeed');}else{_0x546526['tLGsD'](retry);}},function(_0x1a1a21){_0x1114e0['dfLCu'](expect,_0x1a1a21)['to']['be'](undefined);})['then'](function(){return _0x1114e0['gdOTw'](promiseRetry,function(_0x4ac713){_0x4ac713();},{'retries':0x1,'factor':0x1});})['then'](function(){if(_0xdc0f74['SEXVE'](_0xdc0f74['fAWKF'],_0xdc0f74['Afbqq'])){throw new Error(_0xdc0f74['fjGSJ']);}else{_0xdc0f74['tfwgM'](expect,err['message'])['to']['be']('foo');expect(count)['to']['be'](0x2);}},function(_0x4e486b){var _0x28e953={'coapB':function(_0x5632c7,_0x2456e8){return _0xdc0f74['tfwgM'](_0x5632c7,_0x2456e8);}};if('FlKqw'===_0xdc0f74['lkDuF']){count+=0x1;return _0x28e953['coapB'](promiseDelay,0xa)['then'](function(){_0x28e953['coapB'](retry,new Error('foo'));})['catch'](function(_0x2ecc28){retry(_0x2ecc28);});}else{_0xdc0f74['tfwgM'](expect,_0x4e486b)['to']['be'](undefined);}});});it(_0x1114e0['iCZhY'],function(){var _0x44fcc2={'AcSeq':function(_0xb8f7b4,_0x38b0e6){return _0x1114e0['dfLCu'](_0xb8f7b4,_0x38b0e6);},'cJBrI':_0x1114e0['xGDkt'],'mvdgD':function(_0x3bc18f,_0x53f98c){return _0x3bc18f!==_0x53f98c;},'oKbFM':_0x1114e0['WZSkE'],'iubwM':'final','NvNxE':function(_0x4f13b6,_0x468302){return _0x1114e0['dfLCu'](_0x4f13b6,_0x468302);}};var _0x1d3e7=0x0;return _0x1114e0['gdOTw'](promiseRetry,function(_0x40e850){var _0x42deaf={'ayxhD':_0x1114e0['OjPjq']};_0x1d3e7+=0x1;return _0x1114e0['dfLCu'](promiseDelay,0xa)['then'](function(){if(_0x1d3e7<=0x2){_0x40e850();}return _0x42deaf['ayxhD'];});},{'factor':0x1})['then'](function(_0x47040e){if(_0x44fcc2['mvdgD'](_0x44fcc2['oKbFM'],'FPwcL')){_0x44fcc2['AcSeq'](retry,new Error(_0x44fcc2['cJBrI']));}else{expect(_0x47040e)['to']['be'](_0x44fcc2['iubwM']);_0x44fcc2['NvNxE'](expect,_0x1d3e7)['to']['be'](0x3);}},function(){throw new Error(_0x1114e0['KPyxl']);});});_0x1114e0['MjmIW'](it,_0x1114e0['HtgXZ'],function(){var _0x330906={'kbOgk':function(_0x725974,_0x4bd5ad){return _0x725974!==_0x4bd5ad;},'gfpUj':'XdzlF','LRIVd':_0x1114e0['Grjsx'],'EBqDq':_0x1114e0['xGDkt'],'KblUD':function(_0x1746f0,_0x149573){return _0x1114e0['OEQKz'](_0x1746f0,_0x149573);},'cdCjH':'eQscD','cxzGa':'should not succeed'};if(_0x1114e0['FxZvt'](_0x1114e0['PFrZs'],'fWcEZ')){_0x1114e0['tjhOu'](retry);}else{var _0x2ee6a8=0x0;return _0x1114e0['gdOTw'](promiseRetry,function(_0x13b37d){_0x2ee6a8+=0x1;return promiseDelay(0xa)['then'](function(){if(_0x330906['kbOgk'](_0x330906['gfpUj'],_0x330906['LRIVd'])){_0x13b37d(new Error(_0x330906['EBqDq']));}else{throw new Error('should not succeed');}})['catch'](function(_0x3993b6){if(_0x330906['KblUD'](_0x330906['cdCjH'],_0x330906['cdCjH'])){_0x13b37d(_0x3993b6);}else{expect(value)['to']['be']('final');expect(_0x2ee6a8)['to']['be'](0x3);}});},{'retries':0x1,'factor':0x1})['then'](function(){if('Huybj'!=='Huybj'){throw new Error(_0x330906['cxzGa']);}else{throw new Error(_0x330906['cxzGa']);}},function(_0x441c52){expect(_0x441c52['message'])['to']['be'](_0x1114e0['xGDkt']);_0x1114e0['dfLCu'](expect,_0x2ee6a8)['to']['be'](0x2);});}});it(_0x1114e0['ukXDY'],function(){var _0x8e55cc={'SGVGJ':function(_0x298cdb,_0x56644f){return _0x1114e0['ladWm'](_0x298cdb,_0x56644f);},'PGvfJ':function(_0x1b89f7,_0x39ad61){return _0x1114e0['FxZvt'](_0x1b89f7,_0x39ad61);},'fwdxd':_0x1114e0['MSsed'],'pgiIP':_0x1114e0['OjPjq'],'doyRV':function(_0x283d38,_0x5f5234){return _0x1114e0['rxogk'](_0x283d38,_0x5f5234);}};var _0x206fc1=0x0;return promiseRetry({'factor':0x1},function(_0x397ee6){var _0x2ee168={'SLqac':'should not fail'};_0x206fc1+=0x1;return _0x8e55cc['doyRV'](promiseDelay,0xa)['then'](function(){if(_0x8e55cc['SGVGJ'](_0x206fc1,0x2)){if(_0x8e55cc['PGvfJ']('TWRCE',_0x8e55cc['fwdxd'])){throw new Error(_0x2ee168['SLqac']);}else{_0x397ee6(new Error('foo'));}}return _0x8e55cc['pgiIP'];});})['then'](function(_0x84426f){_0x1114e0['rxogk'](expect,_0x84426f)['to']['be']('final');_0x1114e0['rxogk'](expect,_0x206fc1)['to']['be'](0x3);},function(){throw new Error('should not fail');});});});