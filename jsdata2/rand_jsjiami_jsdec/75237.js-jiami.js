import'babel-polyfill';import _0x3fcd1f from'assert';import{MentionsParser}from'../lib/MentionsParser';let mentionsParser;beforeEach(function functionName(){var QfyuEn={'iZnXw':'[0-9a-zA-Z-_.]+'};mentionsParser=new MentionsParser({'pattern':QfyuEn['iZnXw'],'me':()=>'me'});});describe('Mention',function(){var ymcYmf={'ynjnw':'HtyLu','cMeCQ':function(callee,param1,param2){return callee(param1,param2);},'JmkwD':'kAjRV','acGzk':function(callee,param1){return callee(param1);},'ehvpK':function(callee,param1,param2){return callee(param1,param2);},'dsFRa':'by const','awDEr':function(callee,param1,param2){return callee(param1,param2);},'UyDui':function(callee,param1,param2){return callee(param1,param2);},'YtjDu':'should be true','zedrV':'#rocket.cat','jfAeZ':'hello rocket.cat how are you?','wjwDs':'LZLpM','VXdtv':function(x,y){return x===y;},'txuHs':'DZKVT','qCXEa':function(callee,param1){return callee(param1);},'EbVdv':function(callee,param1,param2){return callee(param1,param2);},'PZYkU':'by function','lGavB':function(callee,param1,param2){return callee(param1,param2);},'GmlAl':'#general','NyJGd':'http://localhost/#general #general','Scnoz':'KSemx','evDnA':'AeDao','rrIsb':'KWkTj','tFrmg':'hello\x20@me','OekgM':'hello\x20@unknow','eOTyu':'PAKeN','DcUBx':function(x,y){return x===y;},'VodGg':'QZTsg','jIUNc':'@rocket.cat.','ozqMZ':'@rocket.cat','BrLfw':'hello @rocket.cat','TBJbX':'@rocket.cat, hello','kRjlO':'@rocket.cat,hello','SKPsQ':'hello @rocket.cat how are you?','KqXuW':'should return without the "_" from "@rocket.cat_"','wKDGb':'should\x20return\x20without\x20the\x20\x22-\x22\x20from\x20\x22@rocket.cat-\x22','FCZyJ':'@all','qOqvc':'@rocket.cat @all','VtOvQ':'\x20@rocket.cat\x20@all\x20','KUYNz':'@rocket.cat,\x20hello\x20@all','vPFSP':'hello\x20@rocket.cat\x20and\x20@all\x20how\x20are\x20you?','DFGjg':function(callee,param1,param2){return callee(param1,param2);},'gUKPT':'RjQRf','uXmnV':function(callee,param1,param2){return callee(param1,param2);},'YQoXu':'for simple text, no mentions','ZLGle':'for one user','RTrmT':'for\x20two\x20users','JUpEb':function(x,y){return x!==y;},'eEuEM':'ovtpJ','XmNIm':function(callee,param1,param2){return callee(param1,param2);},'qJJfG':'xmsFW','FSPNC':'Rpbcq','tWvAS':'#general-','qGmrV':'jrqBF','lHYrh':'aCaXm','ifOnF':'vQGFv','uwebS':'pkMhV','OmDiF':'#general.','vmFTo':function(x,y){return x!==y;},'xtDCD':'rjMxN','MaDVi':'#general_','HspVE':'\x20#general\x20','dxtFu':'hello\x20#general,\x20how\x20are\x20you?','dJBLh':'should return without the "." from "#general."','TDfIr':'should\x20return\x20without\x20the\x20\x22_\x22\x20from\x20\x22#general_\x22','xUhrI':'WghFZ','BfswV':'#general, hello #other','nEXDG':'http://localhost/#general','lOsxg':function(callee,param1,param2){return callee(param1,param2);},'kPeRz':function(callee,param1,param2){return callee(param1,param2);},'CKMyx':'for two channels','oADwj':function(callee,param1,param2){return callee(param1,param2);},'FOKAS':'for messages with url and channels','dObyR':'get pattern','CRZTo':function(callee,param1,param2){return callee(param1,param2);},'TwHLQ':'get\x20useRealName','Npmsd':'get me','kagmb':'getUserMentions'};describe(ymcYmf['dObyR'],()=>{var KjsAOQ={'netRo':'#general.','fkSPV':function(x,y){return x===y;},'TZFVk':'OorMW','Pdgtz':ymcYmf['JmkwD']};const regexp='[0-9a-zA-Z-_.]+';ymcYmf['acGzk'](beforeEach,()=>{mentionsParser['pattern']=()=>regexp;});describe('by function',function functionName(){if(ymcYmf['ynjnw']==='HtyLu'){it('should be equal to '+regexp,()=>{_0x3fcd1f['equal'](regexp,mentionsParser['pattern']);});}else{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](KjsAOQ['netRo']));}});ymcYmf['ehvpK'](describe,ymcYmf['dsFRa'],function functionName(){ymcYmf['cMeCQ'](it,'should be equal to '+regexp,()=>{if(KjsAOQ['fkSPV'](KjsAOQ['TZFVk'],KjsAOQ['Pdgtz'])){const _0x4f275e=mentionsParser['replaceChannels'](str2,message);_0x3fcd1f['equal'](_0x4f275e,'<a class="mention-link mention-link--room" data-channel="169">'+str2+'</a>');}else{_0x3fcd1f['equal'](regexp,mentionsParser['pattern']);}});});});ymcYmf['CRZTo'](describe,ymcYmf['TwHLQ'],()=>{var gaygUi={'JRGwr':ymcYmf['zedrV'],'cyrWR':ymcYmf['jfAeZ'],'HAMej':ymcYmf['wjwDs'],'egcml':function(callee,param1,param2){return ymcYmf['UyDui'](callee,param1,param2);}};if(ymcYmf['VXdtv'](ymcYmf['txuHs'],'IjSBO')){ymcYmf['awDEr'](it,'should return "'+JSON['stringify'](result)+'\x22\x20from\x20\x22'+text+'\x22',()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](text));});}else{ymcYmf['qCXEa'](beforeEach,()=>{mentionsParser['useRealName']=()=>!![];});ymcYmf['EbVdv'](describe,ymcYmf['PZYkU'],function functionName(){var rwMxEL={'SefrF':function(callee,param1,param2){return callee(param1,param2);},'wicdh':gaygUi['JRGwr'],'HsYku':gaygUi['cyrWR'],'uWTMh':'divPB','meHxd':gaygUi['HAMej']};gaygUi['egcml'](it,'should\x20be\x20true',()=>{var lVqlWP={'NDugJ':function(callee,param1,param2){return rwMxEL['SefrF'](callee,param1,param2);},'RStih':rwMxEL['wicdh'],'gSYKv':rwMxEL['HsYku']};if(rwMxEL['uWTMh']!==rwMxEL['meHxd']){_0x3fcd1f['equal'](!![],mentionsParser['useRealName']);}else{var NvyLWP={'tsRpA':function(callee,param1,param2){return lVqlWP['NDugJ'](callee,param1,param2);}};const _0x3284f0=[];[lVqlWP['RStih'],lVqlWP['gSYKv']]['forEach'](_0x543497=>{NvyLWP['tsRpA'](it,'should return "'+JSON['stringify'](_0x3284f0)+'" from "'+_0x543497+'\x22',()=>{_0x3fcd1f['deepEqual'](_0x3284f0,mentionsParser['getUserMentions'](_0x543497));});});}});});ymcYmf['lGavB'](describe,ymcYmf['dsFRa'],function functionName(){ymcYmf['UyDui'](it,ymcYmf['YtjDu'],()=>{_0x3fcd1f['equal'](!![],mentionsParser['useRealName']);});});}});ymcYmf['CRZTo'](describe,ymcYmf['Npmsd'],()=>{var QPnRmE={'YgmFe':function(callee,param1){return callee(param1);},'uXncM':ymcYmf['GmlAl'],'zbdGq':ymcYmf['NyJGd'],'uWlIC':function(callee,param1,param2){return callee(param1,param2);},'qPLxL':function(x,y){return ymcYmf['VXdtv'](x,y);},'agTrL':ymcYmf['Scnoz'],'IZRTW':function(callee,param1,param2){return ymcYmf['lGavB'](callee,param1,param2);}};if(ymcYmf['evDnA']!==ymcYmf['rrIsb']){const me='me';ymcYmf['lGavB'](describe,ymcYmf['PZYkU'],function functionName(){QPnRmE['YgmFe'](beforeEach,()=>{mentionsParser['me']=()=>me;});it('should be equal to '+me,()=>{_0x3fcd1f['equal'](me,mentionsParser['me']);});});describe(ymcYmf['dsFRa'],function functionName(){var PuGDHu={'oiGJt':function(callee,param1,param2){return QPnRmE['uWlIC'](callee,param1,param2);}};if(QPnRmE['qPLxL']('KSemx',QPnRmE['agTrL'])){beforeEach(()=>{mentionsParser['me']=me;});QPnRmE['IZRTW'](it,'should be equal to '+me,()=>{_0x3fcd1f['equal'](me,mentionsParser['me']);});}else{const _0x2410b2=[QPnRmE['uXncM']];[QPnRmE['zbdGq']]['forEach'](_0x1dec52=>{PuGDHu['oiGJt'](it,'should return "'+JSON['stringify'](_0x2410b2)+'" from "'+_0x1dec52+'\x22',()=>{_0x3fcd1f['deepEqual'](_0x2410b2,mentionsParser['getChannelMentions'](_0x1dec52));});});}});}else{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions']('@rocket.cat_'));}});describe(ymcYmf['kagmb'],function functionName(){var ulBnJm={'lOHai':function(callee,param1,param2){return ymcYmf['DFGjg'](callee,param1,param2);},'RnQtM':function(x,y){return x===y;},'iifXj':function(x,y){return x===y;},'Oagde':ymcYmf['gUKPT'],'rwuKp':'#rocket.cat','XDzcm':'hello\x20rocket.cat\x20how\x20are\x20you?'};ymcYmf['uXmnV'](describe,ymcYmf['YQoXu'],()=>{var cwoRnC={'mXjhb':function(callee,param1,param2){return ulBnJm['lOHai'](callee,param1,param2);},'sscZm':function(x,y){return ulBnJm['RnQtM'](x,y);},'kepEq':'gTpYb','GIWIE':'WEjPg','WLDgs':function(callee,param1,param2){return ulBnJm['lOHai'](callee,param1,param2);}};if(ulBnJm['iifXj']('whWIe',ulBnJm['Oagde'])){_0x3fcd1f['deepEqual'](result,mentionsParser['getChannelMentions'](text));}else{const result=[];[ulBnJm['rwuKp'],ulBnJm['XDzcm']]['forEach'](text=>{if(cwoRnC['sscZm'](cwoRnC['kepEq'],cwoRnC['GIWIE'])){cwoRnC['mXjhb'](it,'should\x20return\x20\x22'+JSON['stringify'](result)+'" from "'+text+'\x22',()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](text));});}else{cwoRnC['WLDgs'](it,'should return "'+JSON['stringify'](result)+'" from "'+text+'\x22',()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](text));});}});}});ymcYmf['uXmnV'](describe,ymcYmf['ZLGle'],()=>{var MHacGU={'fkrtC':ymcYmf['tFrmg'],'zHfyI':ymcYmf['OekgM'],'JIrqz':function(x,y){return x!==y;},'TNzeM':ymcYmf['eOTyu'],'eZsHQ':function(x,y){return ymcYmf['DcUBx'](x,y);},'qtVmI':ymcYmf['VodGg'],'prGvF':function(callee,param1,param2){return callee(param1,param2);},'tbKYC':ymcYmf['jIUNc'],'kHPkY':'@rocket.cat_','JkEFg':'@rocket.cat-'};const result=[ymcYmf['ozqMZ']];[ymcYmf['ozqMZ'],' @rocket.cat ',ymcYmf['BrLfw'],ymcYmf['TBJbX'],ymcYmf['kRjlO'],ymcYmf['SKPsQ']]['forEach'](text=>{if(MHacGU['eZsHQ'](MHacGU['qtVmI'],'meoAh')){const _0x54ed22=mentionsParser['replaceUsers'](MHacGU['fkrtC'],message,'me');_0x3fcd1f['equal'](_0x54ed22,'hello <a class="mention-link mention-link--me mention-link--user" data-username="me" title="me">Me</a>');}else{MHacGU['prGvF'](it,'should return "'+JSON['stringify'](result)+'\x22\x20from\x20\x22'+text+'\x22',()=>{var qXFKwB={'BGWuq':MHacGU['zHfyI']};if(MHacGU['JIrqz']('gnxNG',MHacGU['TNzeM'])){_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](text));}else{const _0x593243=mentionsParser['replaceUsers'](qXFKwB['BGWuq'],message,'me');_0x3fcd1f['equal'](_0x593243,qXFKwB['BGWuq']);}});}});it['skip']('should return without the "." from "@rocket.cat."',()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](MHacGU['tbKYC']));});it['skip'](ymcYmf['KqXuW'],()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](MHacGU['kHPkY']));});it['skip'](ymcYmf['wKDGb'],()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](MHacGU['JkEFg']));});});describe(ymcYmf['RTrmT'],()=>{var xdTGze={'hFmvJ':function(callee,param1,param2){return ymcYmf['lGavB'](callee,param1,param2);}};const result=['@rocket.cat',ymcYmf['FCZyJ']];[ymcYmf['qOqvc'],ymcYmf['VtOvQ'],'hello\x20@rocket.cat\x20and\x20@all',ymcYmf['KUYNz'],ymcYmf['vPFSP']]['forEach'](text=>{xdTGze['hFmvJ'](it,'should\x20return\x20\x22'+JSON['stringify'](result)+'" from "'+text+'\x22',()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](text));});});});});ymcYmf['CRZTo'](describe,'getChannelMentions',function functionName(){var CpIQpI={'svaiX':ymcYmf['tWvAS'],'iYpWe':ymcYmf['qGmrV'],'oSPxo':function(x,y){return ymcYmf['DcUBx'](x,y);},'YzkJE':ymcYmf['lHYrh'],'GmMTn':ymcYmf['ifOnF'],'OenYd':ymcYmf['ozqMZ'],'EaBZE':ymcYmf['jfAeZ'],'FfRWE':ymcYmf['uwebS'],'RbVcm':ymcYmf['OmDiF'],'xGnBK':function(callee,param1,param2){return ymcYmf['XmNIm'](callee,param1,param2);},'RCxrl':function(x,y){return ymcYmf['vmFTo'](x,y);},'nxUgY':ymcYmf['xtDCD'],'iTSIj':ymcYmf['MaDVi'],'jlkhk':ymcYmf['GmlAl'],'nPDIk':ymcYmf['HspVE'],'Ngypi':'hello #general','QzHrG':ymcYmf['dxtFu'],'MZHLP':ymcYmf['dJBLh'],'cCcsN':ymcYmf['TDfIr'],'rJUPv':'should return without the "-" from "#general."','bIyHg':ymcYmf['xUhrI'],'kfGFy':function(callee,param1,param2){return callee(param1,param2);},'nXcwE':'onzlT','hisBa':'#other','VrVnL':'#general #other','BpuwU':'\x20#general\x20#other','oxepM':ymcYmf['BfswV'],'sbBzT':'hello #general #other, how are you?','mXgdl':ymcYmf['nEXDG']};ymcYmf['XmNIm'](describe,ymcYmf['YQoXu'],()=>{var cMNNXs={'YYtNF':function(x,y){return x===y;},'SiWeY':CpIQpI['iYpWe']};if(CpIQpI['oSPxo'](CpIQpI['YzkJE'],CpIQpI['GmMTn'])){_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](CpIQpI['svaiX']));}else{const result=[];[CpIQpI['OenYd'],CpIQpI['EaBZE']]['forEach'](text=>{it('should\x20return\x20\x22'+JSON['stringify'](result)+'" from "'+text+'\x22',()=>{var pQVzGR={'UcCIw':function(callee,param1){return callee(param1);}};if(cMNNXs['YYtNF']('RMygM',cMNNXs['SiWeY'])){pQVzGR['UcCIw'](beforeEach,()=>{mentionsParser['me']=()=>me;});it('should be equal to '+me,()=>{_0x3fcd1f['equal'](me,mentionsParser['me']);});}else{_0x3fcd1f['deepEqual'](result,mentionsParser['getChannelMentions'](text));}});});}});ymcYmf['lOsxg'](describe,'for one channel',()=>{var CDlJex={'GgRfA':function(callee,param1,param2){return CpIQpI['xGnBK'](callee,param1,param2);},'sWnvZ':function(x,y){return CpIQpI['RCxrl'](x,y);},'YuXGp':CpIQpI['nxUgY'],'duuWl':CpIQpI['iTSIj']};const result=[CpIQpI['jlkhk']];[CpIQpI['jlkhk'],CpIQpI['nPDIk'],CpIQpI['Ngypi'],'#general, hello',CpIQpI['QzHrG']]['forEach'](text=>{CDlJex['GgRfA'](it,'should return "'+JSON['stringify'](result)+'" from "'+text+'\x22',()=>{var jPPxLa={'yOJRN':function(callee,param1,param2){return CDlJex['GgRfA'](callee,param1,param2);}};if(CDlJex['sWnvZ'](CDlJex['YuXGp'],CDlJex['YuXGp'])){jPPxLa['yOJRN'](it,'should be equal to '+regexp,()=>{_0x3fcd1f['equal'](regexp,mentionsParser['pattern']);});}else{_0x3fcd1f['deepEqual'](result,mentionsParser['getChannelMentions'](text));}});});it['skip'](CpIQpI['MZHLP'],()=>{if(CpIQpI['FfRWE']===CpIQpI['FfRWE']){_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](CpIQpI['RbVcm']));}else{const _0x553146=mentionsParser['replaceChannels']('hello '+str2,message);_0x3fcd1f['equal'](_0x553146,'hello <a class="mention-link mention-link--room" data-channel="169">'+str2+'</a>');}});it['skip'](CpIQpI['cCcsN'],()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](CDlJex['duuWl']));});it['skip'](CpIQpI['rJUPv'],()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](CpIQpI['svaiX']));});});ymcYmf['kPeRz'](describe,ymcYmf['CKMyx'],()=>{var vPDLiP={'djdTL':CpIQpI['iTSIj'],'JzpHO':function(callee,param1,param2){return callee(param1,param2);}};if(CpIQpI['RCxrl'](CpIQpI['nXcwE'],CpIQpI['nXcwE'])){_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](vPDLiP['djdTL']));}else{const result=[CpIQpI['jlkhk'],CpIQpI['hisBa']];[CpIQpI['VrVnL'],CpIQpI['BpuwU'],'hello\x20#general\x20and\x20#other',CpIQpI['oxepM'],CpIQpI['sbBzT']]['forEach'](text=>{if(CpIQpI['bIyHg']!==CpIQpI['bIyHg']){vPDLiP['JzpHO'](it,'should return "'+JSON['stringify'](result)+'" from "'+text+'\x22',()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getChannelMentions'](text));});}else{CpIQpI['kfGFy'](it,'should\x20return\x20\x22'+JSON['stringify'](result)+'" from "'+text+'\x22',()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getChannelMentions'](text));});}});}});describe('for url with fragments',()=>{const result=[];[CpIQpI['mXgdl']]['forEach'](text=>{var VjngBn={'FZMhd':'#general','GqEXL':'IiXct'};CpIQpI['kfGFy'](it,'should return nothing from "'+text+'\x22',()=>{if('shBSH'!==VjngBn['GqEXL']){_0x3fcd1f['deepEqual'](result,mentionsParser['getChannelMentions'](text));}else{const _0xf3e42e=mentionsParser['replaceChannels'](VjngBn['FZMhd'],message);_0x3fcd1f['equal']('<a class="mention-link mention-link--room" data-channel="42">#general</a>',_0xf3e42e);}});});});ymcYmf['oADwj'](describe,ymcYmf['FOKAS'],()=>{var EjHDvH={'BTfjC':function(x,y){return ymcYmf['JUpEb'](x,y);},'AiIpw':ymcYmf['eEuEM'],'INisX':function(callee,param1,param2){return ymcYmf['XmNIm'](callee,param1,param2);}};if(ymcYmf['JUpEb'](ymcYmf['qJJfG'],ymcYmf['FSPNC'])){const result=[ymcYmf['GmlAl']];[ymcYmf['NyJGd']]['forEach'](text=>{if(EjHDvH['BTfjC'](EjHDvH['AiIpw'],EjHDvH['AiIpw'])){_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](text));}else{EjHDvH['INisX'](it,'should return "'+JSON['stringify'](result)+'" from "'+text+'\x22',()=>{_0x3fcd1f['deepEqual'](result,mentionsParser['getChannelMentions'](text));});}});}else{_0x3fcd1f['equal'](regexp,mentionsParser['pattern']);}});});});const message={'mentions':[{'username':'rocket.cat','name':'Rocket.Cat'},{'username':'admin','name':'Admin'},{'username':'me','name':'Me'},{'username':'specialchars','name':'<img\x20onerror=alert(hello)>'}],'channels':[{'name':'general','_id':'42'},{'name':'rocket.cat','_id':'169'}]};describe('replace methods',function(){var LzlPRw={'BfdpO':function(x,y){return x===y;},'WDaqL':'yAXaH','jqoxe':'izNhr','qghRX':function(x,y){return x!==y;},'jNZSY':'dJUQa','goZbj':function(x,y){return x===y;},'SGYJG':'XOftg','IPHzn':'rfdWT','JuSxo':'hello @unknow','whEye':'ySiVU','yUvCe':'pLVES','tFznz':'hello @me','trIAb':'simple\x20text','LBCAr':function(x,y){return x===y;},'MrIGY':'TdIco','tkhCN':function(callee,param1,param2){return callee(param1,param2);},'KSfjR':'should render for @all','CBuVt':'rocket.cat','dmENP':'should render for unknow/private user "hello @unknow"','gfuni':function(callee,param1,param2){return callee(param1,param2);},'Bfmso':'should\x20render\x20for\x20me','jmSGU':'WFTfS','kFxwY':'kfzNd','MdjRW':'@all','aEQMu':'ZBLHn','FlSxV':function(x,y){return x!==y;},'anYHk':function(callee,param1){return callee(param1);},'rPLxZ':function(x,y){return x!==y;},'FGYgA':'NWtWf','tpXxc':'Rocket.Cat','hcdyV':'specialchars','qHCgt':'&lt;img onerror=alert(hello)&gt;','JTgYw':function(callee,param1,param2){return callee(param1,param2);},'RNRjM':function(callee,param1,param2){return callee(param1,param2);},'bMyWk':'#general','oruwk':'<a\x20class=\x22mention-link\x20mention-link--room\x22\x20data-channel=\x2242\x22>#general</a>','CLCdf':'aSvTo','POxgS':'[0-9a-zA-Z-_.]+','uAxYd':function(x,y){return x!==y;},'VLaGS':'SQAre','wVNaI':'#rocket.cat','kLCmb':'should\x20render\x20for\x20unknow/private\x20channel\x20\x22hello\x20#unknow\x22','GxFkR':'#general and @rocket.cat','IFYmx':'<a class="mention-link mention-link--room" data-channel="42">#general</a> and <a class="mention-link mention-link--user" data-username="rocket.cat" title="rocket.cat">rocket.cat</a>','wOirS':'should render for #general','DlVIV':function(callee,param1,param2){return callee(param1,param2);},'ZuzZa':'should\x20render\x20for\x20\x22#general\x20and\x20@rocket.cat','YfvCt':'should render for "simple text','ZYzKu':'<a class="mention-link mention-link--room" data-channel="42">#general</a> and <a class="mention-link mention-link--user" data-username="rocket.cat" title="rocket.cat">Rocket.Cat</a>','hMpfd':'LebKb','BoEWy':'@rocket.cat','zcKuo':function(callee,param1,param2){return callee(param1,param2);},'MwgzC':'eQLje','gujzu':function(callee,param1,param2){return callee(param1,param2);},'HZPLt':'should render for "','UbLis':function(callee,param1,param2){return callee(param1,param2);},'HqnFJ':'replaceUsers','xdJLT':function(callee,param1,param2){return callee(param1,param2);},'ODgUr':'replaceUsers\x20(RealNames)','UxmGI':'replaceChannels','jToxI':function(callee,param1,param2){return callee(param1,param2);},'VZayV':'parse all (RealNames)'};LzlPRw['UbLis'](describe,LzlPRw['HqnFJ'],()=>{var rhMwVb={'DCtLP':'#general\x20and\x20@rocket.cat','XHjjJ':'@rocket.cat.'};if(LzlPRw['LBCAr'](LzlPRw['MrIGY'],LzlPRw['MrIGY'])){LzlPRw['tkhCN'](it,LzlPRw['KSfjR'],()=>{if(LzlPRw['BfdpO'](LzlPRw['WDaqL'],LzlPRw['jqoxe'])){_0x3fcd1f['deepEqual'](result,mentionsParser['getChannelMentions'](text));}else{const result=mentionsParser['replaceUsers']('@all',message,'me');_0x3fcd1f['equal'](result,'<a class="mention-link mention-link--all mention-link--group" data-group="all">all</a>');}});const str2=LzlPRw['CBuVt'];it('should render for "@'+str2+'\x22',()=>{if(LzlPRw['qghRX'](LzlPRw['jNZSY'],LzlPRw['jNZSY'])){message['html']=rhMwVb['DCtLP'];const _0x3745f1=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](_0x3745f1['html'],'<a class="mention-link mention-link--room" data-channel="42">#general</a> and <a class="mention-link mention-link--user" data-username="rocket.cat" title="rocket.cat">Rocket.Cat</a>');}else{const result=mentionsParser['replaceUsers']('@'+str2,message,'me');_0x3fcd1f['equal'](result,'<a class="mention-link mention-link--user" data-username="'+str2+'" title="'+str2+'\x22>'+str2+'</a>');}});LzlPRw['tkhCN'](it,'should\x20render\x20for\x20\x22hello\x20'+str2+'\x22',()=>{if(LzlPRw['goZbj'](LzlPRw['SGYJG'],LzlPRw['IPHzn'])){_0x3fcd1f['deepEqual'](result,mentionsParser['getUserMentions'](rhMwVb['XHjjJ']));}else{const result=mentionsParser['replaceUsers']('hello @'+str2,message,'me');_0x3fcd1f['equal'](result,'hello <a class="mention-link mention-link--user" data-username="'+str2+'" title="'+str2+'\x22>'+str2+'</a>');}});LzlPRw['tkhCN'](it,LzlPRw['dmENP'],()=>{const result=mentionsParser['replaceUsers'](LzlPRw['JuSxo'],message,'me');_0x3fcd1f['equal'](result,LzlPRw['JuSxo']);});LzlPRw['gfuni'](it,LzlPRw['Bfmso'],()=>{if(LzlPRw['whEye']!==LzlPRw['yUvCe']){const result=mentionsParser['replaceUsers'](LzlPRw['tFznz'],message,'me');_0x3fcd1f['equal'](result,'hello <a class="mention-link mention-link--me mention-link--user" data-username="me" title="me">me</a>');}else{message['html']='';const _0x496f38=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](_0x496f38['html'],'');}});}else{message['html']=LzlPRw['trIAb'];const _0x5486f8=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](_0x5486f8['html'],LzlPRw['trIAb']);}});LzlPRw['xdJLT'](describe,LzlPRw['ODgUr'],()=>{var NsZPFT={'gEKwy':function(x,y){return LzlPRw['FlSxV'](x,y);},'dzIQC':'koJgs','ofBXR':function(callee,param1){return LzlPRw['anYHk'](callee,param1);},'vGTWz':function(callee,param1,param2){return LzlPRw['gfuni'](callee,param1,param2);},'ILwug':LzlPRw['JuSxo']};if(LzlPRw['rPLxZ'](LzlPRw['FGYgA'],LzlPRw['FGYgA'])){message['html']=LzlPRw['trIAb'];const _0xd5722d=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](_0xd5722d['html'],LzlPRw['trIAb']);}else{beforeEach(()=>{mentionsParser['useRealName']=()=>!![];});LzlPRw['gfuni'](it,'should render for @all',()=>{if(LzlPRw['jmSGU']!==LzlPRw['kFxwY']){const result=mentionsParser['replaceUsers'](LzlPRw['MdjRW'],message,'me');_0x3fcd1f['equal'](result,'<a\x20class=\x22mention-link\x20mention-link--all\x20mention-link--group\x22\x20data-group=\x22all\x22>all</a>');}else{_0x3fcd1f['equal'](regexp,mentionsParser['pattern']);}});const str2=LzlPRw['CBuVt'];const str2Name=LzlPRw['tpXxc'];LzlPRw['gfuni'](it,'should render for "@'+str2+'\x22',()=>{const result=mentionsParser['replaceUsers']('@'+str2,message,'me');_0x3fcd1f['equal'](result,'<a class="mention-link mention-link--user" data-username="'+str2+'" title="'+str2+'\x22>'+str2Name+'</a>');});LzlPRw['gfuni'](it,'should\x20render\x20for\x20\x22hello\x20@'+str2+'\x22',()=>{var yNiWvP={'wKsfg':'http://localhost/#general'};if(NsZPFT['gEKwy'](NsZPFT['dzIQC'],'koJgs')){var cJLVEV={'jQGIi':function(callee,param1,param2){return callee(param1,param2);}};const _0x3dc60f=[];[yNiWvP['wKsfg']]['forEach'](_0x1bafa9=>{cJLVEV['jQGIi'](it,'should return nothing from "'+_0x1bafa9+'\x22',()=>{_0x3fcd1f['deepEqual'](_0x3dc60f,mentionsParser['getChannelMentions'](_0x1bafa9));});});}else{const result=mentionsParser['replaceUsers']('hello @'+str2,message,'me');_0x3fcd1f['equal'](result,'hello\x20<a\x20class=\x22mention-link\x20mention-link--user\x22\x20data-username=\x22'+str2+'" title="'+str2+'\x22>'+str2Name+'</a>');}});const specialchars=LzlPRw['hcdyV'];const specialcharsName=LzlPRw['qHCgt'];it('should\x20escape\x20special\x20characters\x20in\x20\x22hello\x20@'+specialchars+'\x22',()=>{const result=mentionsParser['replaceUsers']('hello @'+specialchars,message,'me');_0x3fcd1f['equal'](result,'hello <a class="mention-link mention-link--user" data-username="'+specialchars+'" title="'+specialchars+'\x22>'+specialcharsName+'</a>');});LzlPRw['gfuni'](it,'should\x20render\x20for\x20\x22hello<br>@'+str2+' <br>"',()=>{if(LzlPRw['aEQMu']!=='YbVCA'){const result=mentionsParser['replaceUsers']('hello<br>@'+str2+' <br>',message,'me');_0x3fcd1f['equal'](result,'hello<br><a class="mention-link mention-link--user" data-username="'+str2+'" title="'+str2+'\x22>'+str2Name+'</a> <br>');}else{NsZPFT['ofBXR'](beforeEach,()=>{mentionsParser['me']=me;});NsZPFT['vGTWz'](it,'should be equal to '+me,()=>{_0x3fcd1f['equal'](me,mentionsParser['me']);});}});LzlPRw['JTgYw'](it,'should render for unknow/private user "hello @unknow"',()=>{const result=mentionsParser['replaceUsers'](NsZPFT['ILwug'],message,'me');_0x3fcd1f['equal'](result,'hello\x20@unknow');});LzlPRw['RNRjM'](it,LzlPRw['Bfmso'],()=>{const result=mentionsParser['replaceUsers'](LzlPRw['tFznz'],message,'me');_0x3fcd1f['equal'](result,'hello\x20<a\x20class=\x22mention-link\x20mention-link--me\x20mention-link--user\x22\x20data-username=\x22me\x22\x20title=\x22me\x22>Me</a>');});}});LzlPRw['xdJLT'](describe,LzlPRw['UxmGI'],()=>{var JYBLoW={'domIG':'hello\x20#unknow'};it('should render for #general',()=>{const result=mentionsParser['replaceChannels'](LzlPRw['bMyWk'],message);_0x3fcd1f['equal'](LzlPRw['oruwk'],result);});const str2=LzlPRw['wVNaI'];LzlPRw['RNRjM'](it,'should render for '+str2,()=>{if(LzlPRw['rPLxZ'](LzlPRw['CLCdf'],'ghlse')){const result=mentionsParser['replaceChannels'](str2,message);_0x3fcd1f['equal'](result,'<a\x20class=\x22mention-link\x20mention-link--room\x22\x20data-channel=\x22169\x22>'+str2+'</a>');}else{mentionsParser['me']=()=>me;}});it('should\x20render\x20for\x20\x22hello\x20'+str2+'\x22',()=>{var pPmBix={'JHGOa':LzlPRw['POxgS']};if(LzlPRw['uAxYd'](LzlPRw['VLaGS'],LzlPRw['VLaGS'])){mentionsParser=new MentionsParser({'pattern':pPmBix['JHGOa'],'me':()=>'me'});}else{const result=mentionsParser['replaceChannels']('hello\x20'+str2,message);_0x3fcd1f['equal'](result,'hello\x20<a\x20class=\x22mention-link\x20mention-link--room\x22\x20data-channel=\x22169\x22>'+str2+'</a>');}});it(LzlPRw['kLCmb'],()=>{const result=mentionsParser['replaceChannels'](JYBLoW['domIG'],message);_0x3fcd1f['equal'](result,JYBLoW['domIG']);});});describe('parse\x20all',()=>{var eJjxqg={'Kjzmi':'simple text'};LzlPRw['RNRjM'](it,LzlPRw['wOirS'],()=>{message['html']=LzlPRw['bMyWk'];const result=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](result['html'],LzlPRw['oruwk']);});LzlPRw['DlVIV'](it,LzlPRw['ZuzZa'],()=>{message['html']=LzlPRw['GxFkR'];const result=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](result['html'],LzlPRw['IFYmx']);});it('should render for "',()=>{message['html']='';const result=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](result['html'],'');});LzlPRw['DlVIV'](it,LzlPRw['YfvCt'],()=>{message['html']='simple text';const result=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](result['html'],eJjxqg['Kjzmi']);});});LzlPRw['jToxI'](describe,LzlPRw['VZayV'],()=>{var bbGMOa={'EDgcY':function(x,y){return LzlPRw['uAxYd'](x,y);},'tRsZH':LzlPRw['hMpfd'],'WolBR':LzlPRw['BoEWy'],'qjeyX':'hello rocket.cat how are you?','ersNH':function(callee,param1,param2){return LzlPRw['zcKuo'](callee,param1,param2);},'xEfqP':LzlPRw['MwgzC']};LzlPRw['anYHk'](beforeEach,()=>{mentionsParser['useRealName']=()=>!![];});LzlPRw['gujzu'](it,LzlPRw['wOirS'],()=>{if(bbGMOa['EDgcY'](bbGMOa['tRsZH'],bbGMOa['tRsZH'])){const _0x459434=mentionsParser['replaceUsers']('hello\x20@'+str2,message,'me');_0x3fcd1f['equal'](_0x459434,'hello <a class="mention-link mention-link--user" data-username="'+str2+'" title="'+str2+'\x22>'+str2+'</a>');}else{message['html']='#general';const result=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](result['html'],'<a class="mention-link mention-link--room" data-channel="42">#general</a>');}});LzlPRw['gujzu'](it,LzlPRw['ZuzZa'],()=>{message['html']=LzlPRw['GxFkR'];const result=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](result['html'],LzlPRw['ZYzKu']);});it(LzlPRw['HZPLt'],()=>{var FOMqAa={'nztUI':function(callee,param1,param2){return bbGMOa['ersNH'](callee,param1,param2);}};if(bbGMOa['xEfqP']!==bbGMOa['xEfqP']){const _0x5811dc=[];[bbGMOa['WolBR'],bbGMOa['qjeyX']]['forEach'](_0x177848=>{FOMqAa['nztUI'](it,'should return "'+JSON['stringify'](_0x5811dc)+'" from "'+_0x177848+'\x22',()=>{_0x3fcd1f['deepEqual'](_0x5811dc,mentionsParser['getChannelMentions'](_0x177848));});});}else{message['html']='';const result=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](result['html'],'');}});LzlPRw['gujzu'](it,LzlPRw['YfvCt'],()=>{message['html']=LzlPRw['trIAb'];const result=mentionsParser['parse'](message,'me');_0x3fcd1f['equal'](result['html'],'simple\x20text');});});});