import{publish}from'../../bridge';let onPushing;let isListening=![];let unsubscribe=![];export function subscribePush(_0x1b8f6e,_0x33c568){var _0x24640d={'MJWHC':'PjbQN','iEtCF':function(_0x43a0ed,_0x2597a3){return _0x43a0ed&&_0x2597a3;},'INsUb':function(_0x418413,_0x26aa60,_0x3ff00d){return _0x418413(_0x26aa60,_0x3ff00d);},'QALQw':'subscribePush:fail 请确保当前运行环境已包含 push 模块'};const _0x46f0a1=plus['push']['getClientInfo']();if(_0x46f0a1){if(!isListening){isListening=!![];plus['push']['addEventListener']('receive',_0x32e176=>{if(_0x24640d['MJWHC']===_0x24640d['MJWHC']){if(_0x24640d['iEtCF'](onPushing,!unsubscribe)){_0x24640d['INsUb'](publish,'onPushMessage',{'messageId':_0x32e176['__UUID__'],'data':_0x32e176['payload'],'errMsg':'onPush:ok'});}}else{return{'errMsg':'onPush:fail 请先调用 uni.subscribePush'};}});}unsubscribe=![];_0x46f0a1['errMsg']='subscribePush:ok';return _0x46f0a1;}else{return{'errMsg':_0x24640d['QALQw']};}}export function unsubscribePush(_0x23dac8){unsubscribe=!![];return{'errMsg':'unsubscribePush:ok'};}export function onPush(){var _0xfec7a={'pMRJR':function(_0x3a8315,_0x256b9c,_0x1d90d9){return _0x3a8315(_0x256b9c,_0x1d90d9);},'XlvEb':'onPushMessage','gioLP':'onPush:ok','EQgCa':function(_0x4888c2,_0x5c7e4b){return _0x4888c2!==_0x5c7e4b;},'jAfzm':'fRsTk'};if(!isListening){return{'errMsg':'onPush:fail 请先调用 uni.subscribePush'};}if(plus['push']['getClientInfo']()){if(_0xfec7a['EQgCa']('fRsTk',_0xfec7a['jAfzm'])){_0xfec7a['pMRJR'](publish,_0xfec7a['XlvEb'],{'messageId':msg['__UUID__'],'data':msg['payload'],'errMsg':_0xfec7a['gioLP']});}else{onPushing=!![];return{'errMsg':_0xfec7a['gioLP']};}}return{'errMsg':'onPush:fail\x20请确保当前运行环境已包含\x20push\x20模块'};}export function offPush(_0xd54643){onPushing=![];return{'errMsg':'offPush:ok'};}