import{Meteor}from'meteor/meteor';import{Blaze}from'meteor/blaze';import{roomTypes}from'../../utils/client';import{Rooms,Subscriptions}from'../../models';import{MessageAction}from'../../ui-utils';import{messageArgs}from'../../ui-utils/client/lib/messageArgs';import{EmojiPicker}from'../../emoji';import{tooltip}from'../../ui/client/components/tooltip';export const EmojiEvents={'click .add-reaction'(event){var MQGAVj={'IFCyF':'setReaction','xRWjE':'data-emoji','PlbVj':function(callee,param1){return callee(param1);},'yVYod':function(x,y){return x!==y;},'zYSAe':'NVTay'};event['preventDefault']();event['stopPropagation']();const data=Blaze['getData'](event['currentTarget']);const {msg:{rid,_id:mid,private:isPrivate}}=MQGAVj['PlbVj'](messageArgs,data);const user=Meteor['user']();const room=Rooms['findOne']({'_id':rid});if(!room){return![];}if(!Subscriptions['findOne']({'rid':rid})){return![];}if(isPrivate){if(MQGAVj['yVYod'](MQGAVj['zYSAe'],MQGAVj['zYSAe'])){event['preventDefault']();const _0x30431e=Blaze['getData'](event['currentTarget']);const {msg:{_id:mid}}=messageArgs(_0x30431e);Meteor['call'](MQGAVj['IFCyF'],$(event['currentTarget'])['attr'](MQGAVj['xRWjE']),mid,()=>{tooltip['hide']();});}else{return![];}}if(roomTypes['readOnly'](room['_id'],user['_id'])&&!room['reactWhenReadOnly']){return![];}EmojiPicker['open'](event['currentTarget'],emoji=>{Meteor['call'](MQGAVj['IFCyF'],':'+emoji+':',mid);});},'click .reactions > li:not(.add-reaction)'(event){var uEyDNf={'sXPJb':function(callee,param1){return callee(param1);},'VWCBC':'setReaction','dyidj':'data-emoji'};event['preventDefault']();const data=Blaze['getData'](event['currentTarget']);const {msg:{_id:mid}}=uEyDNf['sXPJb'](messageArgs,data);Meteor['call'](uEyDNf['VWCBC'],uEyDNf['sXPJb']($,event['currentTarget'])['attr'](uEyDNf['dyidj']),mid,()=>{tooltip['hide']();});},'mouseenter .reactions > li:not(.add-reaction)'(event){event['stopPropagation']();tooltip['showElement']($(event['currentTarget'])['find']('.people')['get'](0x0),event['currentTarget']);},'mouseleave .reactions > li:not(.add-reaction)'(event){event['stopPropagation']();tooltip['hide']();}};Meteor['startup'](function(){var qSsIWY={'hAAAP':function(x,y){return x!==y;},'mxgcV':'jvNZH','MGZEg':function(x,y){return x===y;},'IrHTG':'OFrUi','aAdOM':'reaction-message','sQXQD':'Add_Reaction','nPcIf':'message','skGyf':'message-mobile','zvfCd':'threads','BcwEV':'menu'};MessageAction['addButton']({'id':qSsIWY['aAdOM'],'icon':'add-reaction','label':qSsIWY['sQXQD'],'context':[qSsIWY['nPcIf'],qSsIWY['skGyf'],qSsIWY['zvfCd']],'action'(event){if(qSsIWY['hAAAP'](qSsIWY['mxgcV'],qSsIWY['mxgcV'])){return![];}else{event['stopPropagation']();const {msg}=messageArgs(this);EmojiPicker['open'](event['currentTarget'],emoji=>Meteor['call']('setReaction',':'+emoji+':',msg['_id']));}},'condition'({msg:message,u:user,room,subscription}){if(!room){return![];}if(!subscription){if(qSsIWY['MGZEg']('dLoSs',qSsIWY['IrHTG'])){event['stopPropagation']();const {msg}=messageArgs(this);EmojiPicker['open'](event['currentTarget'],_0x5e5b5e=>Meteor['call']('setReaction',':'+_0x5e5b5e+':',msg['_id']));}else{return![];}}if(message['private']){return![];}if(roomTypes['readOnly'](room['_id'],user['_id'])&&!room['reactWhenReadOnly']){return![];}const isLivechatRoom=roomTypes['isLivechatRoom'](room['t']);if(isLivechatRoom){return![];}return!![];},'order':-0x2,'group':['message',qSsIWY['BcwEV']]});});