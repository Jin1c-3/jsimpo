'use strict';require('../common');const assert=require('assert');const util=require('util');function findInGraph(_0x2bef79,_0x1166e3,_0x376e3b){var _0x567cff={'HXOUb':function(_0x31d0ee,_0x2b09b5){return _0x31d0ee===_0x2b09b5;}};let _0x35476f=0x0;for(let _0x1f3c8d=0x0;_0x1f3c8d<_0x2bef79['length'];_0x1f3c8d++){const _0x31029a=_0x2bef79[_0x1f3c8d];if(_0x567cff['HXOUb'](_0x31029a['type'],_0x1166e3))_0x35476f++;if(_0x35476f===_0x376e3b)return _0x31029a;}}function pruneTickObjects(_0x40bc5b){var _0x300db9={'yPXjK':function(_0x393910,_0x219799){return _0x393910===_0x219799;},'LtlRY':function(_0x31b46d,_0x1d984b){return _0x31b46d===_0x1d984b;},'pfcfj':function(_0x34752e,_0x5acc01){return _0x34752e>=_0x5acc01;},'dWaBB':function(_0x2892a3,_0x111464){return _0x2892a3<_0x111464;},'WWGxp':'fNlPz','fxEmj':function(_0x2db5db,_0x388fd8){return _0x2db5db===_0x388fd8;},'dCVGw':'TickObject','wHJlc':function(_0x4b8a34,_0x3f4099){return _0x4b8a34!==_0x3f4099;},'ebhwu':'nDeyN','EFxyc':'HhNtN','rzHtU':'Yuxoo'};const _0x212f93={'found':!![],'index':null,'data':null};if(!Array['isArray'](_0x40bc5b))return _0x40bc5b;while(_0x212f93['found']){for(let _0x2b09b4=0x0;_0x300db9['dWaBB'](_0x2b09b4,_0x40bc5b['length']);_0x2b09b4++){if('pjMnb'!==_0x300db9['WWGxp']){if(_0x300db9['fxEmj'](_0x40bc5b[_0x2b09b4]['type'],_0x300db9['dCVGw'])){if(_0x300db9['wHJlc'](_0x300db9['ebhwu'],_0x300db9['ebhwu'])){_0x212f93['found']=![];}else{_0x212f93['index']=_0x2b09b4;break;}}else if(_0x2b09b4+0x1>=_0x40bc5b['length']){if(_0x300db9['wHJlc'](_0x300db9['EFxyc'],_0x300db9['EFxyc'])){const _0x3101cf=graph[_0x2b09b4];if(_0x300db9['yPXjK'](_0x3101cf['type'],type))found++;if(found===n)return _0x3101cf;}else{_0x212f93['found']=![];}}}else{var _0x11249b={'nyvjB':function(_0x59cf5a,_0x2b6d8e){return _0x300db9['LtlRY'](_0x59cf5a,_0x2b6d8e);}};_0x212f93['data']=_0x40bc5b[_0x212f93['index']];const _0x49761b={'new':_0x212f93['data']['triggerAsyncId'],'old':_0x212f93['data']['uid']};_0x40bc5b['forEach'](function repointTriggerId(_0x40a418){if(_0x11249b['nyvjB'](_0x40a418['triggerAsyncId'],_0x49761b['old']))_0x40a418['triggerAsyncId']=_0x49761b['new'];});_0x40bc5b['splice'](_0x212f93['index'],0x1);}}if(_0x212f93['found']){if(_0x300db9['fxEmj']('WlRbf',_0x300db9['rzHtU'])){assert['ok'](_0x300db9['pfcfj'](typeSeen[type],expTypes[type]),'Type \''+type+'\x27:\x20expecting:\x20'+expTypes[type]+'\x20'+('found: '+typeSeen[type]));}else{_0x212f93['data']=_0x40bc5b[_0x212f93['index']];const _0x48773b={'new':_0x212f93['data']['triggerAsyncId'],'old':_0x212f93['data']['uid']};_0x40bc5b['forEach'](function repointTriggerId(_0x3d5b61){if(_0x3d5b61['triggerAsyncId']===_0x48773b['old'])_0x3d5b61['triggerAsyncId']=_0x48773b['new'];});_0x40bc5b['splice'](_0x212f93['index'],0x1);}}}return _0x40bc5b;}module['exports']=function verifyGraph(_0x4349cb,_0x85c06d){var _0x2b542f={'hxGWM':function(_0x56a031,_0x760a71,_0x5c7021,_0x45c859){return _0x56a031(_0x760a71,_0x5c7021,_0x45c859);},'pjfdP':function(_0x2093c2,_0x5208fa){return _0x2093c2==_0x5208fa;},'dpESq':function(_0x156572,_0x1062c1){return _0x156572==_0x1062c1;},'kQZTy':function(_0x1ca03e,_0x2a4b85){return _0x1ca03e===_0x2a4b85;},'Wvuqm':function(_0x110a53,_0x5bcc23){return _0x110a53(_0x5bcc23);},'ZnJhA':function(_0x28f53a,_0x1b4951){return _0x28f53a(_0x1b4951);},'qVaDE':function(_0x27455a,_0x5cdf0b){return _0x27455a!==_0x5cdf0b;},'IWKYO':'wOlLU','IncUJ':function(_0x202867,_0x1671b6){return _0x202867<_0x1671b6;},'zalAz':'MCGrY','ZPvtN':function(_0x7ac1be,_0x2a05f4){return _0x7ac1be>=_0x2a05f4;},'BLvGm':function(_0x340daa,_0x191ca6){return _0x340daa+_0x191ca6;}};_0x2b542f['Wvuqm'](pruneTickObjects,_0x4349cb);const _0x4d6183={};const _0x39c7cf={};const _0x5c3158={};const _0xd631d5=[];const _0xd7ddac=_0x2b542f['ZnJhA'](pruneTickObjects,_0x4349cb['activities']);_0xd7ddac['forEach'](_0x12a20c);function _0x12a20c(_0x19bd3d){if(!_0x5c3158[_0x19bd3d['type']])_0x5c3158[_0x19bd3d['type']]=0x0;_0x5c3158[_0x19bd3d['type']]++;const _0x1935a5=_0x2b542f['hxGWM'](findInGraph,_0x85c06d,_0x19bd3d['type'],_0x5c3158[_0x19bd3d['type']]);if(_0x2b542f['pjfdP'](_0x1935a5,null))return;_0x4d6183[_0x1935a5['id']]=_0x19bd3d['uid'];_0x39c7cf[_0x19bd3d['uid']]=_0x1935a5['id'];if(_0x2b542f['dpESq'](_0x1935a5['triggerAsyncId'],null))return;const _0x44b5dd=_0x4d6183[_0x1935a5['triggerAsyncId']];if(_0x19bd3d['triggerAsyncId']===_0x44b5dd)return;_0xd631d5['push']({'id':_0x1935a5['id'],'expectedTid':_0x1935a5['triggerAsyncId'],'actualTid':_0x39c7cf[_0x19bd3d['triggerAsyncId']]});}if(_0xd631d5['length']){if(_0x2b542f['qVaDE'](_0x2b542f['IWKYO'],_0x2b542f['IWKYO'])){const _0x4c1e10=x['type']['replace'](/WRAP/,'')['toLowerCase']();if(!ids[_0x4c1e10])ids[_0x4c1e10]=0x1;const _0x4448b9=_0x4c1e10+':'+ids[_0x4c1e10]++;_0x39c7cf[x['uid']]=_0x4448b9;const _0x599e60=_0x39c7cf[x['triggerAsyncId']]||null;_0x85c06d['push']({'type':x['type'],'id':_0x4448b9,'triggerAsyncId':_0x599e60});}else{_0xd631d5['forEach'](_0x3c7f43=>console['error']('\x27'+_0x3c7f43['id']+'\' expected to be triggered by \''+_0x3c7f43['expectedTid']+'\x27,\x20'+('but was triggered by \''+_0x3c7f43['actualTid']+'\' instead.')));}}assert['strictEqual'](_0xd631d5['length'],0x0);const _0x4d1b98=Object['create'](null);for(let _0x5edbab=0x0;_0x2b542f['IncUJ'](_0x5edbab,_0x85c06d['length']);_0x5edbab++){if(_0x4d1b98[_0x85c06d[_0x5edbab]['type']]==null)_0x4d1b98[_0x85c06d[_0x5edbab]['type']]=0x0;_0x4d1b98[_0x85c06d[_0x5edbab]['type']]++;}for(const _0x44d474 in _0x4d1b98){if(_0x2b542f['zalAz']==='dhzKa'){if(_0x2b542f['kQZTy'](x['triggerAsyncId'],triggerId['old']))x['triggerAsyncId']=triggerId['new'];}else{assert['ok'](_0x2b542f['ZPvtN'](_0x5c3158[_0x44d474],_0x4d1b98[_0x44d474]),_0x2b542f['BLvGm']('Type\x20\x27'+_0x44d474+'\x27:\x20expecting:\x20'+_0x4d1b98[_0x44d474]+'\x20','found: '+_0x5c3158[_0x44d474]));}}};function inspect(_0x506367,_0x4ad661){var _0x3f87ef={'EeUOz':function(_0x17aaea,_0x269e6c){return _0x17aaea||_0x269e6c;}};console['error'](util['inspect'](_0x506367,![],_0x3f87ef['EeUOz'](_0x4ad661,0x5),!![]));}module['exports']['printGraph']=function printGraph(_0xbdc881){var _0x309a4d={'kauvX':function(_0x27f82d,_0x33577a){return _0x27f82d==_0x33577a;},'PDrEK':'meXkt','itTDt':'oWfao'};const _0x360934={};const _0x56ee62={};const _0x2332b2=pruneTickObjects(_0xbdc881['activities']);const _0x262384=[];_0x2332b2['forEach'](_0x266701);function _0x266701(_0x4e091f){var _0x88888={'vMhMi':function(_0x13d59f,_0x1cc94d,_0x5b63af,_0xca56e2){return _0x13d59f(_0x1cc94d,_0x5b63af,_0xca56e2);},'LasTH':function(_0x4e091f,_0x507de3){return _0x309a4d['kauvX'](_0x4e091f,_0x507de3);},'ZIohI':function(_0x4e091f,_0x5562bb){return _0x4e091f===_0x5562bb;}};if(_0x309a4d['PDrEK']===_0x309a4d['itTDt']){if(!typeSeen[_0x4e091f['type']])typeSeen[_0x4e091f['type']]=0x0;typeSeen[_0x4e091f['type']]++;const _0x4c8c8d=_0x88888['vMhMi'](findInGraph,_0x262384,_0x4e091f['type'],typeSeen[_0x4e091f['type']]);if(_0x4c8c8d==null)return;idtouid[_0x4c8c8d['id']]=_0x4e091f['uid'];_0x56ee62[_0x4e091f['uid']]=_0x4c8c8d['id'];if(_0x88888['LasTH'](_0x4c8c8d['triggerAsyncId'],null))return;const _0x443f9b=idtouid[_0x4c8c8d['triggerAsyncId']];if(_0x88888['ZIohI'](_0x4e091f['triggerAsyncId'],_0x443f9b))return;errors['push']({'id':_0x4c8c8d['id'],'expectedTid':_0x4c8c8d['triggerAsyncId'],'actualTid':_0x56ee62[_0x4e091f['triggerAsyncId']]});}else{const _0x1eb8ae=_0x4e091f['type']['replace'](/WRAP/,'')['toLowerCase']();if(!_0x360934[_0x1eb8ae])_0x360934[_0x1eb8ae]=0x1;const _0x1a5f35=_0x1eb8ae+':'+_0x360934[_0x1eb8ae]++;_0x56ee62[_0x4e091f['uid']]=_0x1a5f35;const _0x46f386=_0x56ee62[_0x4e091f['triggerAsyncId']]||null;_0x262384['push']({'type':_0x4e091f['type'],'id':_0x1a5f35,'triggerAsyncId':_0x46f386});}}inspect(_0x262384);};