/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
'use strict';loadSubScript('chrome://juggler/content/content/Runtime.js');loadSubScript('chrome://juggler/content/SimpleChannel.js');const channel=new SimpleChannel('worker::worker');const eventListener=_0x59c3aa=>channel['_onMessage'](JSON['parse'](_0x59c3aa['data']));this['addEventListener']('message',eventListener);channel['setTransport']({'sendMessage':_0x55cf74=>postMessage(JSON['stringify'](_0x55cf74)),'dispose':()=>this['removeEventListener']('message',eventListener)});const runtime=new Runtime(!![]);(()=>{var _0x36f9da={'COodw':function(_0x28626b,_0x28506e){return _0x28626b===_0x28506e;},'FtIwY':'EXhoC'};const _0x4a8cff=new Debugger(global);if(_0x4a8cff['findScripts']({'global':global})['length']){if(_0x36f9da['COodw'](_0x36f9da['FtIwY'],_0x36f9da['FtIwY'])){runtime['createExecutionContext'](null,global,{});}else{_0x4a8cff['onNewScript']=undefined;_0x4a8cff['removeAllDebuggees']();runtime['createExecutionContext'](null,global,{});}}else{_0x4a8cff['onNewScript']=function(_0x5f4599){_0x4a8cff['onNewScript']=undefined;_0x4a8cff['removeAllDebuggees']();runtime['createExecutionContext'](null,global,{});};}})();class RuntimeAgent{constructor(_0x3569f3,_0x26b8ac){var _0x5373ab={'soNMp':'runtime'};this['_runtime']=_0x3569f3;this['_browserRuntime']=_0x26b8ac['connect'](_0x5373ab['soNMp']);for(const _0x334474 of this['_runtime']['executionContexts']())this['_onExecutionContextCreated'](_0x334474);this['_eventListeners']=[this['_runtime']['events']['onConsoleMessage'](_0x33441c=>this['_browserRuntime']['emit']('runtimeConsole',_0x33441c)),this['_runtime']['events']['onExecutionContextCreated'](this['_onExecutionContextCreated']['bind'](this)),this['_runtime']['events']['onExecutionContextDestroyed'](this['_onExecutionContextDestroyed']['bind'](this)),_0x26b8ac['register'](_0x5373ab['soNMp'],{'evaluate':this['_runtime']['evaluate']['bind'](this['_runtime']),'callFunction':this['_runtime']['callFunction']['bind'](this['_runtime']),'getObjectProperties':this['_runtime']['getObjectProperties']['bind'](this['_runtime']),'disposeObject':this['_runtime']['disposeObject']['bind'](this['_runtime'])})];}['_onExecutionContextCreated'](_0x29e225){var _0x1b2592={'SbawJ':'runtimeExecutionContextCreated'};this['_browserRuntime']['emit'](_0x1b2592['SbawJ'],{'executionContextId':_0x29e225['id'](),'auxData':_0x29e225['auxData']()});}['_onExecutionContextDestroyed'](_0x9db425){this['_browserRuntime']['emit']('runtimeExecutionContextDestroyed',{'executionContextId':_0x9db425['id']()});}['dispose'](){var _0x995e70={'BexeG':function(_0x53844d){return _0x53844d();}};for(const _0xc0cd87 of this['_eventListeners'])_0x995e70['BexeG'](_0xc0cd87);this['_eventListeners']=[];}}new RuntimeAgent(runtime,channel);