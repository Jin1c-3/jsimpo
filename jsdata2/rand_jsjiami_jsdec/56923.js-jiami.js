'use strict';const common=require('../common');if(!common['hasCrypto'])common['skip']('missing\x20crypto');const assert=require('assert');const fs=require('fs');const fixtures=require('../common/fixtures');const tls=require('tls');function filenamePEM(_0x38d9a7){var _0x426055={'onEwY':'keys'};return fixtures['path'](_0x426055['onEwY'],_0x38d9a7+'.pem');}function loadPEM(_0x27d3ef){var _0x4a52b2={'PdeAM':function(_0xf3db83,_0x265972){return _0xf3db83(_0x265972);}};return fs['readFileSync'](_0x4a52b2['PdeAM'](filenamePEM,_0x27d3ef));}const caCert=loadPEM('ca1-cert');const opts={'host':'www.nodejs.org','port':0x1bb,'rejectUnauthorized':!![]};tls['connect'](opts,common['mustCall'](end));opts['ca']=caCert;tls['connect'](opts,fail)['on']('error',common['mustCall'](_0x3070c6=>{var _0x254af2={'BhaId':'unable\x20to\x20get\x20local\x20issuer\x20certificate'};assert['strictEqual'](_0x3070c6['message'],_0x254af2['BhaId']);}));function fail(){var _0x1be27e={'ArFui':'should fail to connect'};assert['fail'](_0x1be27e['ArFui']);}opts['secureContext']=tls['createSecureContext']();tls['connect'](opts,common['mustCall'](end));opts['secureContext']['context']['addCACert'](caCert);tls['connect'](opts,common['mustCall'](end));function end(){this['end']();}