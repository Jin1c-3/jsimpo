'use strict';// Based on: https://raw.github.com/imathis/octopress/master/plugins/code_block.rb
const {escapeHTML}=require('hexo-util');let highlight,prismHighlight;const rCaptionUrlTitle=/(\S[\S\s]*)\s+(https?:\/\/\S+)\s+(.+)/i;const rCaptionUrl=/(\S[\S\s]*)\s+(https?:\/\/\S+)/i;const rCaption=/\S[\S\s]*/;function parseArgs(_0x495790){var _0x49d3c8={'kiNJS':function(_0x32b7ca,_0xaf3ad7){return _0x32b7ca!==_0xaf3ad7;},'JrMKs':'undefined','JtyOD':function(_0x39ff4e,_0x355472){return _0x39ff4e(_0x355472);},'DTQgL':function(_0x920d3d,_0x1504df){return _0x920d3d===_0x1504df;},'lKqsj':function(_0x2014bd,_0x327558){return _0x2014bd===_0x327558;},'piLcl':function(_0x6f2d22,_0x2b9fc5){return _0x6f2d22+_0x2b9fc5;},'SoZwN':'lang','iXcHH':'line_number','miyss':function(_0x513f1e,_0x5081c1){return _0x513f1e===_0x5081c1;},'hbwzh':'wrap','qABoz':function(_0x5317aa,_0x2fc6cc){return _0x5317aa===_0x2fc6cc;},'KxLwj':'true','sfndQ':'mark','ExXru':'QBCDJ','FJUgi':'FdmBJ','nRZgy':'RchTI','lRPeX':function(_0x6ae67d,_0x446cb8){return _0x6ae67d!==_0x446cb8;},'mhqyU':function(_0x5c9fbe,_0x24493a){return _0x5c9fbe<_0x24493a;},'HlMDi':'nQqqV','CUzxA':function(_0x5bd45b,_0x2f0189){return _0x5bd45b<=_0x2f0189;},'iceQB':'gTaMv','PFORq':'ccoKn','QoGvm':function(_0x23f86d,_0x58582c){return _0x23f86d!=_0x58582c;}};const _0x5b55c2=[];const _0x41a834=_0x495790['length'];let _0x3f1ce6,_0x28b74e,_0x4e1f05;let _0x9d5ccf=0x1;const _0x1f483b=[];for(let _0x52e509=0x0;_0x52e509<_0x41a834;_0x52e509++){const _0x442b0b=_0x495790[_0x52e509]['indexOf'](':');if(_0x49d3c8['lKqsj'](_0x442b0b,-0x1)){_0x5b55c2['push'](_0x495790[_0x52e509]);continue;}const _0x430442=_0x495790[_0x52e509]['slice'](0x0,_0x442b0b);const _0x4df68b=_0x495790[_0x52e509]['slice'](_0x49d3c8['piLcl'](_0x442b0b,0x1));switch(_0x430442){case _0x49d3c8['SoZwN']:_0x3f1ce6=_0x4df68b;break;case _0x49d3c8['iXcHH']:_0x28b74e=_0x49d3c8['miyss'](_0x4df68b,'true');break;case 'first_line':if(!isNaN(_0x4df68b))_0x9d5ccf=+_0x4df68b;break;case _0x49d3c8['hbwzh']:_0x4e1f05=_0x49d3c8['qABoz'](_0x4df68b,_0x49d3c8['KxLwj']);break;case _0x49d3c8['sfndQ']:{if(_0x49d3c8['ExXru']!==_0x49d3c8['ExXru']){_0x1f483b['push'](a);}else{for(const _0x3e475d of _0x4df68b['split'](',')){if(_0x49d3c8['kiNJS'](_0x49d3c8['FJUgi'],_0x49d3c8['nRZgy'])){const _0x114745=_0x3e475d['indexOf']('-');if(_0x49d3c8['lRPeX'](_0x114745,-0x1)){let _0x105579=+_0x3e475d['substr'](0x0,_0x114745);let _0x426fef=+_0x3e475d['substr'](_0x114745+0x1);if(Number['isNaN'](_0x105579)||Number['isNaN'](_0x426fef))continue;if(_0x49d3c8['mhqyU'](_0x426fef,_0x105579)){if(_0x49d3c8['HlMDi']===_0x49d3c8['HlMDi']){const _0x3732bb=_0x105579;_0x105579=_0x426fef;_0x426fef=_0x3732bb;}else{const _0x52bf07={'lang':_0x3f1ce6,'firstLine':_0x9d5ccf,'caption':_0x130e76,'lineNumber':_0x49d3c8['kiNJS'](typeof _0x28b74e,_0x49d3c8['JrMKs'])?_0x28b74e:prismjsCfg['line_number'],'mark':_0x1f483b,'tab':prismjsCfg['tab_replace'],'isPreprocess':prismjsCfg['preprocess']};if(!prismHighlight)prismHighlight=_0x49d3c8['JtyOD'](require,'hexo-util')['prismHighlight'];content=prismHighlight(content,_0x52bf07);}}for(;_0x49d3c8['CUzxA'](_0x105579,_0x426fef);_0x105579++){if(_0x49d3c8['lRPeX'](_0x49d3c8['iceQB'],'gTaMv')){const _0x45794f=_0x495790[index];const _0xc9267f=_0x45794f['slice'](0xa);enableHighlight=_0x49d3c8['DTQgL'](_0xc9267f,'true');_0x495790['splice'](index,0x1);}else{_0x1f483b['push'](_0x105579);}}}if(!isNaN(_0x3e475d))_0x1f483b['push'](+_0x3e475d);}else{_0x5b55c2['push'](_0x495790[_0x52e509]);}}break;}}default:{if(_0x49d3c8['qABoz'](_0x49d3c8['PFORq'],'lHUQj')){_0x130e76='<span>'+_0x50ccce[0x0]+'</span>';}else{_0x5b55c2['push'](_0x495790[_0x52e509]);}}}}const _0x3f1bd5=_0x5b55c2['join']('\x20');let _0x50ccce,_0x130e76='';if(_0x49d3c8['QoGvm'](_0x50ccce=_0x3f1bd5['match'](rCaptionUrlTitle),null)){_0x130e76='<span>'+_0x50ccce[0x1]+'</span><a href="'+_0x50ccce[0x2]+'\x22>'+_0x50ccce[0x3]+'</a>';}else if(_0x49d3c8['QoGvm'](_0x50ccce=_0x3f1bd5['match'](rCaptionUrl),null)){_0x130e76='<span>'+_0x50ccce[0x1]+'</span><a href="'+_0x50ccce[0x2]+'">link</a>';}else if((_0x50ccce=_0x3f1bd5['match'](rCaption))!=null){_0x130e76='<span>'+_0x50ccce[0x0]+'</span>';}return{'lang':_0x3f1ce6,'firstLine':_0x9d5ccf,'caption':_0x130e76,'line_number':_0x28b74e,'mark':_0x1f483b,'wrap':_0x4e1f05};}module['exports']=_0x28da11=>function codeTag(_0x433dc,_0xb6d91d){var _0x27f3ef={'AXuAR':function(_0x4e8a46,_0x4a7238){return _0x4e8a46!==_0x4a7238;},'fFYlX':'undefined','GNTLr':function(_0x3aeaf6,_0x5e0862){return _0x3aeaf6!==_0x5e0862;},'YRIKp':'boolean','nXmHI':function(_0x2b543d,_0x4f5b0e){return _0x2b543d(_0x4f5b0e);},'KsqfD':'hexo-util','UWVsq':function(_0x3b1231,_0x1efd28,_0x1f18ef){return _0x3b1231(_0x1efd28,_0x1f18ef);},'souDc':function(_0x28071c,_0xab56e0){return _0x28071c===_0xab56e0;},'ezFtX':'true','excFm':function(_0x3c2862,_0x310644){return _0x3c2862(_0x310644);},'TPmDf':function(_0x587fc5,_0x4bbfef){return _0x587fc5(_0x4bbfef);},'EXyZX':'TJjKj','tQWpz':'ZxHPK','sdsNS':function(_0x3a9d15,_0x2afa3c){return _0x3a9d15(_0x2afa3c);},'RklPF':function(_0x457a97,_0x2b0b69){return _0x457a97!==_0x2b0b69;},'GwQPu':function(_0x30fa80,_0x47f30d){return _0x30fa80!==_0x47f30d;},'wqFPM':function(_0x422a7f,_0x249097){return _0x422a7f!==_0x249097;},'nZRZN':function(_0x3e618f,_0x4e650c){return _0x3e618f===_0x4e650c;},'emKVT':function(_0x2e6dd1,_0x369449){return _0x2e6dd1(_0x369449);},'lJCBP':function(_0x221cd8,_0x21d528,_0x1e900f){return _0x221cd8(_0x21d528,_0x1e900f);},'japDA':'&#123;'};const _0x1271fa=_0x28da11['config']['highlight']||{};const _0x1efd58=_0x28da11['config']['prismjs']||{};if(!_0x1271fa['enable']&&!_0x1efd58['enable']){return '<pre><code>'+_0x27f3ef['nXmHI'](escapeHTML,_0xb6d91d)+'</code></pre>';}let _0x314950;let _0x24a3c2=!![];if((_0x314950=_0x433dc['findIndex'](_0x5283c4=>_0x5283c4['startsWith']('highlight:')))!==-0x1){const _0x38a16e=_0x433dc[_0x314950];const _0x9ce865=_0x38a16e['slice'](0xa);_0x24a3c2=_0x27f3ef['souDc'](_0x9ce865,_0x27f3ef['ezFtX']);_0x433dc['splice'](_0x314950,0x1);}if(!_0x24a3c2){return'<pre><code>'+_0x27f3ef['excFm'](escapeHTML,_0xb6d91d)+'</code></pre>';}const {lang,firstLine,caption,line_number,mark,wrap}=_0x27f3ef['TPmDf'](parseArgs,_0x433dc);if(_0x1efd58['enable']){if(_0x27f3ef['GNTLr'](_0x27f3ef['EXyZX'],_0x27f3ef['tQWpz'])){const _0x303e39={'lang':lang,'firstLine':firstLine,'caption':caption,'lineNumber':typeof line_number!==_0x27f3ef['fFYlX']?line_number:_0x1efd58['line_number'],'mark':mark,'tab':_0x1efd58['tab_replace'],'isPreprocess':_0x1efd58['preprocess']};if(!prismHighlight)prismHighlight=_0x27f3ef['sdsNS'](require,_0x27f3ef['KsqfD'])['prismHighlight'];_0xb6d91d=prismHighlight(_0xb6d91d,_0x303e39);}else{caption='<span>'+match[0x1]+'</span><a\x20href=\x22'+match[0x2]+'\x22>link</a>';}}else{if(_0x27f3ef['RklPF']('ngkZK','pLKPm')){const _0x3ab9a3={'lang':_0x27f3ef['GwQPu'](typeof lang,_0x27f3ef['fFYlX'])?lang:'','firstLine':firstLine,'caption':caption,'gutter':_0x27f3ef['wqFPM'](typeof line_number,_0x27f3ef['fFYlX'])?line_number:_0x1271fa['line_number'],'hljs':_0x1271fa['hljs'],'mark':mark,'tab':_0x1271fa['tab_replace'],'autoDetect':_0x1271fa['auto_detect'],'wrap':_0x27f3ef['nZRZN'](typeof wrap,'boolean')?wrap:_0x1271fa['wrap']};if(!highlight)highlight=_0x27f3ef['emKVT'](require,'hexo-util')['highlight'];_0xb6d91d=_0x27f3ef['lJCBP'](highlight,_0xb6d91d,_0x3ab9a3);}else{const _0x3bac6d={'lang':_0x27f3ef['AXuAR'](typeof lang,_0x27f3ef['fFYlX'])?lang:'','firstLine':firstLine,'caption':caption,'gutter':_0x27f3ef['GNTLr'](typeof line_number,_0x27f3ef['fFYlX'])?line_number:_0x1271fa['line_number'],'hljs':_0x1271fa['hljs'],'mark':mark,'tab':_0x1271fa['tab_replace'],'autoDetect':_0x1271fa['auto_detect'],'wrap':typeof wrap===_0x27f3ef['YRIKp']?wrap:_0x1271fa['wrap']};if(!highlight)highlight=_0x27f3ef['nXmHI'](require,_0x27f3ef['KsqfD'])['highlight'];_0xb6d91d=_0x27f3ef['UWVsq'](highlight,_0xb6d91d,_0x3bac6d);}}return _0xb6d91d['replace'](/{/g,_0x27f3ef['japDA'])['replace'](/}/g,'&#125;');};