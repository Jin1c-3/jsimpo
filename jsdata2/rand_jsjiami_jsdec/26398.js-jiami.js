const path=require('path');const fse=require('fs-extra');const glob=require('fast-glob');const packagePath=process['cwd']();const buildPath=path['join'](packagePath,'./build');const srcPath=path['join'](packagePath,'./src');async function includeFileInBuild(_0x3f2631){const _0xf0243a=path['resolve'](packagePath,_0x3f2631);const _0x39607c=path['resolve'](buildPath,path['basename'](_0x3f2631));await fse['copy'](_0xf0243a,_0x39607c);console['log']('Copied '+_0xf0243a+' to '+_0x39607c);}async function createModulePackages({from,to}){var _0x48b942={'UYfnJ':'package.json','pHxSd':'../esm','ALhFW':'index.js','hxdOX':'./index.js','NdBCX':'./index.d.ts','xzakt':function(_0x27eea3,_0x1a8a5b){return _0x27eea3>_0x1a8a5b;},'swEbq':function(_0x17a1e8,_0x3ff6b1){return _0x17a1e8!==_0x3ff6b1;},'WoTLn':'jsihQ'};const _0x545d30=glob['sync']('*/index.{js,ts,tsx}',{'cwd':from})['map'](path['dirname']);await Promise['all'](_0x545d30['map'](async _0x1334fe=>{if('DbRcc'==='CnaNA'){console['error'](err);process['exit'](0x1);}else{const _0x7ad56c=path['join'](to,_0x1334fe,_0x48b942['UYfnJ']);const _0x3e94ee=await fse['pathExists'](path['resolve'](path['dirname'](_0x7ad56c),_0x48b942['pHxSd']));const _0x2cdf7a={'sideEffects':![],'module':_0x3e94ee?path['posix']['join'](_0x48b942['pHxSd'],_0x1334fe,_0x48b942['ALhFW']):_0x48b942['hxdOX'],'main':_0x3e94ee?_0x48b942['hxdOX']:path['posix']['join']('../node',_0x1334fe,_0x48b942['ALhFW']),'types':_0x48b942['NdBCX']};const [_0x4b278d,_0x3c8257,_0x46c51a]=await Promise['all']([fse['pathExists'](path['resolve'](path['dirname'](_0x7ad56c),_0x2cdf7a['types'])),fse['pathExists'](path['resolve'](path['dirname'](_0x7ad56c),_0x2cdf7a['module'])),fse['pathExists'](path['resolve'](path['dirname'](_0x7ad56c),_0x2cdf7a['main'])),fse['writeFile'](_0x7ad56c,JSON['stringify'](_0x2cdf7a,null,0x2))]);const _0x4159dc=[];if(!_0x4b278d){_0x4159dc['push']('\'types\' entry \''+_0x2cdf7a['types']+'\x27\x20does\x20not\x20exist');}if(!_0x3c8257){_0x4159dc['push']('\'module\' entry \''+_0x2cdf7a['module']+'\' does not exist');}if(!_0x46c51a){_0x4159dc['push']('\x27main\x27\x20entry\x20\x27'+_0x2cdf7a['main']+'\x27\x20does\x20not\x20exist');}if(_0x48b942['xzakt'](_0x4159dc['length'],0x0)){if(_0x48b942['swEbq'](_0x48b942['WoTLn'],'jsihQ')){_0x4159dc['push']('\'main\' entry \''+_0x2cdf7a['main']+'\x27\x20does\x20not\x20exist');}else{throw new Error(_0x7ad56c+':\x0a'+_0x4159dc['join']('\x0a'));}}return _0x7ad56c;}}));}async function typescriptCopy({from,to}){var _0xa491b7={'nxEPL':function(_0x53f82d,_0x2ac4f1,_0x3d6d18){return _0x53f82d(_0x2ac4f1,_0x3d6d18);}};if(!(await fse['pathExists'](to))){console['warn']('path '+to+'\x20does\x20not\x20exists');return[];}const _0x4585bc=await _0xa491b7['nxEPL'](glob,'**/*.d.ts',{'cwd':from});const _0x29b950=_0x4585bc['map'](_0x3a2bc1=>fse['copy'](path['resolve'](from,_0x3a2bc1),path['resolve'](to,_0x3a2bc1)));return Promise['all'](_0x29b950);}async function createPackageFile(){var _0x2e6455={'zOydv':'utf8','eKgpM':'./node/index.js','RVIkZ':'./index.js','PTybj':'./esm/index.js','bJbUv':'./index.d.ts'};const _0x2d49c3=await fse['readFile'](path['resolve'](packagePath,'./package.json'),_0x2e6455['zOydv']);const {nyc,scripts,devDependencies,workspaces,..._0x3f8a33}=JSON['parse'](_0x2d49c3);const _0x581c73={..._0x3f8a33,'private':![],..._0x3f8a33['main']?{'main':fse['existsSync'](path['resolve'](buildPath,_0x2e6455['eKgpM']))?_0x2e6455['eKgpM']:_0x2e6455['RVIkZ'],'module':fse['existsSync'](path['resolve'](buildPath,_0x2e6455['PTybj']))?_0x2e6455['PTybj']:'./index.js'}:{},'types':_0x2e6455['bJbUv']};const _0x45768d=path['resolve'](buildPath,'./package.json');await fse['writeFile'](_0x45768d,JSON['stringify'](_0x581c73,null,0x2),_0x2e6455['zOydv']);console['log']('Created\x20package.json\x20in\x20'+_0x45768d);return _0x581c73;}async function prepend(_0x883f4e,_0x270b1f){var _0x422a92={'lMPtL':function(_0x49f542,_0x25b603){return _0x49f542+_0x25b603;}};const _0x3daa1a=await fse['readFile'](_0x883f4e,'utf8');await fse['writeFile'](_0x883f4e,_0x422a92['lMPtL'](_0x270b1f,_0x3daa1a),'utf8');}async function addLicense(_0x4831d7){var _0x36d0b0={'INXfd':function(_0x4da7f,_0x180b55,_0x1703d0){return _0x4da7f(_0x180b55,_0x1703d0);},'iLQNg':function(_0x131ca9,_0xac8e3c){return _0x131ca9===_0xac8e3c;},'WrLPB':'ENOENT','OVTCc':'Nbexq','FwwPx':'dRGnL','HgeSI':'./index.js','skUCe':'./legacy/index.js','CVpQy':'./node/index.js','jrmhU':'./umd/material-ui.development.js'};const _0x2c1e8a='/** @license Material-UI v'+_0x4831d7['version']+'\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n';await Promise['all']([_0x36d0b0['HgeSI'],_0x36d0b0['skUCe'],'./modern/index.js',_0x36d0b0['CVpQy'],_0x36d0b0['jrmhU'],'./umd/material-ui.production.min.js']['map'](async _0x40b69b=>{try{await _0x36d0b0['INXfd'](prepend,path['resolve'](buildPath,_0x40b69b),_0x2c1e8a);}catch(_0x549c3f){if(_0x36d0b0['iLQNg'](_0x549c3f['code'],_0x36d0b0['WrLPB'])){console['log']('Skipped license for '+_0x40b69b);}else{if(_0x36d0b0['OVTCc']===_0x36d0b0['FwwPx']){manifestErrorMessages['push']('\x27types\x27\x20entry\x20\x27'+packageJson['types']+'\x27\x20does\x20not\x20exist');}else{throw _0x549c3f;}}}}));}async function run(){var _0xdcbc65={'cOkXa':function(_0x2945f5){return _0x2945f5();},'EIcaH':'./README.md','aKrbG':'../../CHANGELOG.md','gijmK':function(_0x4ba55b,_0x1c316f){return _0x4ba55b(_0x1c316f);},'popae':function(_0x521ff0,_0x24bb00){return _0x521ff0(_0x24bb00);}};try{const _0x396b2c=await _0xdcbc65['cOkXa'](createPackageFile);await Promise['all']([_0x396b2c['name']==='@material-ui/core'?'../../README.md':_0xdcbc65['EIcaH'],_0xdcbc65['aKrbG'],'../../LICENSE']['map'](_0x576d6a=>includeFileInBuild(_0x576d6a)));await _0xdcbc65['gijmK'](addLicense,_0x396b2c);await typescriptCopy({'from':srcPath,'to':buildPath});await _0xdcbc65['popae'](createModulePackages,{'from':srcPath,'to':buildPath});}catch(_0x3a134e){console['error'](_0x3a134e);process['exit'](0x1);}}run();