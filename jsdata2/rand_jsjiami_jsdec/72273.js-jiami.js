/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Jason Anderson @diurnalist
*/
'use strict';const {basename,extname}=require('path');const util=require('util');const Chunk=require('./Chunk');const Module=require('./Module');const {parseResource}=require('./util/identifier');const REGEXP=/\[\\*([\w:]+)\\*\]/gi;const prepareId=_0x55213c=>{var _0xc005dc={'OcfyY':'string'};if(typeof _0x55213c!==_0xc005dc['OcfyY'])return _0x55213c;if(/^"\s\+*.*\+\s*"$/['test'](_0x55213c)){const _0x5e8096=/^"\s\+*\s*(.*)\s*\+\s*"$/['exec'](_0x55213c);return '" + ('+_0x5e8096[0x1]+'\x20+\x20\x22\x22).replace(/(^[.-]|[^a-zA-Z0-9_-])+/g,\x20\x22_\x22)\x20+\x20\x22';}return _0x55213c['replace'](/(^[.-]|[^a-zA-Z0-9_-])+/g,'_');};const hashLength=(_0x1e5b4c,_0xe3dcde,_0x5150d5,_0x49ef09)=>{var _0x4b41df={'pHDTg':function(_0x1fb3d7,_0x54dde2,_0x5744ae,_0x1fcdfc,_0x2fc29a){return _0x1fb3d7(_0x54dde2,_0x5744ae,_0x1fcdfc,_0x2fc29a);},'czxax':'hash','TPEBu':function(_0x17ffb8,_0x5cc8d7,_0xdb18b5,_0x1b6f07){return _0x17ffb8(_0x5cc8d7,_0xdb18b5,_0x1b6f07);},'FHRam':'[hash] is now [fullhash] (also consider using [chunkhash] or [contenthash], see documentation for details)','aYAWv':'DEP_WEBPACK_TEMPLATE_PATH_PLUGIN_REPLACE_PATH_VARIABLES_HASH','wrqSI':function(_0x387c8f,_0x4d6f60){return _0x387c8f(_0x4d6f60);},'qjNlC':function(_0x433386,_0x345e40){return _0x433386 instanceof _0x345e40;},'XhkEy':'chunkhash','sAVpm':function(_0x5641fd,_0x2680a6){return _0x5641fd(_0x2680a6);},'sUmDw':'contentHashWithLength','QYwJy':'contenthash','gIgrW':'name','OPvWY':function(_0x298f1e,_0x18e2ec){return _0x298f1e&&_0x18e2ec;},'zfUIQ':function(_0x44e317,_0x11de81){return _0x44e317===_0x11de81;},'GDDGA':'fBonq','ADLBV':function(_0x40ec18,_0x26f49b){return _0x40ec18(_0x26f49b);},'zxQMj':function(_0x911996,_0x5d8af5){return _0x911996!==_0x5d8af5;},'sBvZK':'ckNxq'};const _0x25efa4=(_0x41ea83,_0x3e0f26,_0x299c7f)=>{var _0x1f8478={'yRTAx':function(_0x23ac78,_0x19659d){return _0x4b41df['wrqSI'](_0x23ac78,_0x19659d);},'Onpod':function(_0x3e3fd9,_0x349b0b){return _0x4b41df['qjNlC'](_0x3e3fd9,_0x349b0b);},'vNkYa':'hashWithLength','TQyuz':_0x4b41df['XhkEy'],'gjrmx':function(_0x559da3,_0x8da8aa){return _0x4b41df['sAVpm'](_0x559da3,_0x8da8aa);},'lnjRQ':function(_0x5eca2f,_0x16cf15){return _0x5eca2f in _0x16cf15;},'dFeML':_0x4b41df['sUmDw'],'VFWYv':_0x4b41df['QYwJy'],'pzmXI':_0x4b41df['gIgrW']};let _0x425fd2;const _0x8340ad=_0x3e0f26&&parseInt(_0x3e0f26,0xa);if(_0x4b41df['OPvWY'](_0x8340ad,_0xe3dcde)){if(_0x4b41df['zfUIQ']('fBonq',_0x4b41df['GDDGA'])){_0x425fd2=_0x4b41df['ADLBV'](_0xe3dcde,_0x8340ad);}else{const _0x1a75b8=data['chunk'];const _0x160fd0=data['contentHashType'];const _0x571148=_0x1e5b4c(_0x1a75b8['id']);const _0x319981=_0x1f8478['yRTAx'](_0x1e5b4c,_0x1a75b8['name']||_0x1a75b8['id']);const _0x4abd45=hashLength(_0x1f8478['yRTAx'](_0x1e5b4c,_0x1f8478['Onpod'](_0x1a75b8,Chunk)?_0x1a75b8['renderedHash']:_0x1a75b8['hash']),_0x1f8478['vNkYa']in _0x1a75b8?_0x1a75b8['hashWithLength']:undefined,_0x5150d5,_0x1f8478['TQyuz']);const _0x23ec7a=hashLength(_0x1f8478['gjrmx'](_0x1e5b4c,data['contentHash']||_0x160fd0&&_0x1a75b8['contentHash']&&_0x1a75b8['contentHash'][_0x160fd0]),data['contentHashWithLength']||(_0x1f8478['lnjRQ'](_0x1f8478['dFeML'],_0x1a75b8)&&_0x1a75b8['contentHashWithLength']?_0x1a75b8['contentHashWithLength'][_0x160fd0]:undefined),_0x5150d5,_0x1f8478['VFWYv']);replacements['set']('id',_0x571148);replacements['set'](_0x1f8478['pzmXI'],_0x319981);replacements['set'](_0x1f8478['TQyuz'],_0x4abd45);replacements['set'](_0x1f8478['VFWYv'],_0x23ec7a);}}else{const _0xc280e1=_0x4b41df['TPEBu'](_0x1e5b4c,_0x41ea83,_0x3e0f26,_0x299c7f);_0x425fd2=_0x8340ad?_0xc280e1['slice'](0x0,_0x8340ad):_0xc280e1;}if(_0x5150d5){_0x5150d5['immutable']=!![];if(Array['isArray'](_0x5150d5[_0x49ef09])){_0x5150d5[_0x49ef09]=[..._0x5150d5[_0x49ef09],_0x425fd2];}else if(_0x5150d5[_0x49ef09]){_0x5150d5[_0x49ef09]=[_0x5150d5[_0x49ef09],_0x425fd2];}else{if(_0x4b41df['zxQMj'](_0x4b41df['sBvZK'],_0x4b41df['sBvZK'])){const _0x444d3e=_0x4b41df['pHDTg'](hashLength,_0x1e5b4c(data['hash']),data['hashWithLength'],_0x5150d5,'fullhash');replacements['set']('fullhash',_0x444d3e);replacements['set'](_0x4b41df['czxax'],_0x4b41df['TPEBu'](deprecated,_0x444d3e,_0x4b41df['FHRam'],_0x4b41df['aYAWv']));}else{_0x5150d5[_0x49ef09]=_0x425fd2;}}}return _0x425fd2;};return _0x25efa4;};const replacer=(_0x2dcfc1,_0x196573)=>{var _0x29bb69={'NzLOD':function(_0x441350,_0x4c8d20){return _0x441350===_0x4c8d20;},'qaLyn':'function','FjCIj':function(_0x2d5eaa,_0x21c5a6){return _0x2d5eaa===_0x21c5a6;},'LSaoX':function(_0x19d200,_0x5aa31){return _0x19d200===_0x5aa31;},'BkFSU':function(_0x3d40b0,_0x31bb57){return _0x3d40b0===_0x31bb57;},'jnuui':'RFPLd','YgsWg':'JDRuS'};const _0x4f3845=(_0x2b6e5e,_0x32f7d4,_0x31cec2)=>{if(_0x29bb69['NzLOD'](typeof _0x2dcfc1,_0x29bb69['qaLyn'])){_0x2dcfc1=_0x2dcfc1();}if(_0x29bb69['FjCIj'](_0x2dcfc1,null)||_0x29bb69['LSaoX'](_0x2dcfc1,undefined)){if(_0x29bb69['BkFSU']('RFPLd',_0x29bb69['jnuui'])){if(!_0x196573){if(_0x29bb69['BkFSU'](_0x29bb69['YgsWg'],_0x29bb69['YgsWg'])){throw new Error('Path variable '+_0x2b6e5e+' not implemented in this context: '+_0x31cec2);}else{return'['+_0x2b6e5e['slice'](0x2,-0x2)+']';}}return'';}else{d=util['deprecate'](deprecatedFunction,message,code);deprecationCache['set'](message,d);}}else{return''+_0x2dcfc1;}};return _0x4f3845;};const deprecationCache=new Map();const deprecatedFunction=(()=>()=>{})();const deprecated=(_0x1db78e,_0x1e789f,_0x4a46c8)=>{var _0x436b79={'BMqvN':function(_0x32a0e4){return _0x32a0e4();},'lhMks':function(_0x2e5a50,_0x167b2c){return _0x2e5a50(_0x167b2c);}};let _0x521c39=deprecationCache['get'](_0x1e789f);if(_0x521c39===undefined){_0x521c39=util['deprecate'](deprecatedFunction,_0x1e789f,_0x4a46c8);deprecationCache['set'](_0x1e789f,_0x521c39);}return(..._0x3968a6)=>{_0x436b79['BMqvN'](_0x521c39);return _0x436b79['lhMks'](_0x1db78e,..._0x3968a6);};};const replacePathVariables=(_0x20f240,_0x37bc2f,_0xfe224b)=>{var _0x10c6d8={'OuAgc':function(_0x2cdd58){return _0x2cdd58();},'fgSqN':function(_0x2a17b0,_0x30766f){return _0x2a17b0(_0x30766f);},'pkdVJ':function(_0x27ef21,_0x1e46b2){return _0x27ef21===_0x1e46b2;},'yeBaa':function(_0x3c7bb8,_0xd2cce6){return _0x3c7bb8+_0xd2cce6;},'hyjJh':function(_0x2e6636,_0x214c1c,_0x44ee8d,_0x509efa){return _0x2e6636(_0x214c1c,_0x44ee8d,_0x509efa);},'ANWPi':'fokXs','vQpPI':function(_0x1a1075,_0x532d43){return _0x1a1075===_0x532d43;},'FPVms':'string','YKzoQ':function(_0x32090e,_0x31808a){return _0x32090e(_0x31808a);},'dYOQr':function(_0x4d1f22,_0x4787d6){return _0x4d1f22(_0x4787d6);},'NOifR':function(_0xe5cf1,_0x185775){return _0xe5cf1(_0x185775);},'ZXdOr':function(_0xfaf423,_0x413793){return _0xfaf423-_0x413793;},'hjIbB':'file','yhdDv':'query','bIuTh':function(_0x443931,_0x3f282c,_0x5661fd){return _0x443931(_0x3f282c,_0x5661fd);},'IkVJN':'fragment','vTKWJ':'path','GGcXz':function(_0x4e8dca,_0x1dfcef,_0x2269b3){return _0x4e8dca(_0x1dfcef,_0x2269b3);},'RPVTf':function(_0x145c07,_0x306ead){return _0x145c07(_0x306ead);},'GnjUX':'ext','niVBD':'filebase','SwySt':function(_0x47ca92,_0xeec62){return _0x47ca92(_0xeec62);},'PMDYK':'DEP_WEBPACK_TEMPLATE_PATH_PLUGIN_REPLACE_PATH_VARIABLES_FILENAME','nKniR':'fullhash','ZzSlN':'hash','IjUMy':'DEP_WEBPACK_TEMPLATE_PATH_PLUGIN_REPLACE_PATH_VARIABLES_HASH','nZlhd':function(_0x11a20b,_0x593675,_0x32994a,_0x409040,_0xfe64c){return _0x11a20b(_0x593675,_0x32994a,_0x409040,_0xfe64c);},'cSyAk':function(_0x36b4cb,_0x56a617){return _0x36b4cb instanceof _0x56a617;},'cjLZq':function(_0x13bee7,_0x43bd8e){return _0x13bee7 in _0x43bd8e;},'xdENp':'hashWithLength','DTecY':'chunkhash','dgtbP':function(_0x5d0af9,_0x59dc6f){return _0x5d0af9(_0x59dc6f);},'klife':'contentHashWithLength','uBudT':'contenthash','FKcFy':function(_0x3d7a8b,_0x43951f,_0x3b4cb1,_0x5f0c36,_0x586e1f){return _0x3d7a8b(_0x43951f,_0x3b4cb1,_0x5f0c36,_0x586e1f);},'aZGkh':function(_0xa81023,_0x21a3e6){return _0xa81023(_0x21a3e6);},'wqBhC':'modulehash','HiOQz':'moduleid','aeEfO':'[moduleid]\x20is\x20now\x20[id]','YuebV':'url','ngZXK':function(_0x56da9b,_0x240bc0){return _0x56da9b!==_0x240bc0;},'RwKOw':'ZsvMS','rBSga':'LZKQc','YZUyo':'runtime','nsmnV':function(_0x4f1a1d,_0x2f31bc){return _0x4f1a1d(_0x2f31bc);},'dxHsn':'function'};const _0x50bb1f=_0x37bc2f['chunkGraph'];const _0x5a5585=new Map();if(_0x10c6d8['vQpPI'](typeof _0x37bc2f['filename'],_0x10c6d8['FPVms'])){const {path:file,query,fragment}=_0x10c6d8['YKzoQ'](parseResource,_0x37bc2f['filename']);const _0x56e68a=_0x10c6d8['dYOQr'](extname,file);const _0x544f20=_0x10c6d8['NOifR'](basename,file);const _0x5b4acb=_0x544f20['slice'](0x0,_0x10c6d8['ZXdOr'](_0x544f20['length'],_0x56e68a['length']));const _0x20f240=file['slice'](0x0,file['length']-_0x544f20['length']);_0x5a5585['set'](_0x10c6d8['hjIbB'],replacer(file));_0x5a5585['set'](_0x10c6d8['yhdDv'],_0x10c6d8['bIuTh'](replacer,query,!![]));_0x5a5585['set'](_0x10c6d8['IkVJN'],_0x10c6d8['bIuTh'](replacer,fragment,!![]));_0x5a5585['set'](_0x10c6d8['vTKWJ'],_0x10c6d8['GGcXz'](replacer,_0x20f240,!![]));_0x5a5585['set']('base',_0x10c6d8['RPVTf'](replacer,_0x544f20));_0x5a5585['set']('name',replacer(_0x5b4acb));_0x5a5585['set'](_0x10c6d8['GnjUX'],_0x10c6d8['GGcXz'](replacer,_0x56e68a,!![]));_0x5a5585['set'](_0x10c6d8['niVBD'],deprecated(_0x10c6d8['SwySt'](replacer,_0x544f20),'[filebase] is now [base]',_0x10c6d8['PMDYK']));}if(_0x37bc2f['hash']){const _0x395353=hashLength(replacer(_0x37bc2f['hash']),_0x37bc2f['hashWithLength'],_0xfe224b,_0x10c6d8['nKniR']);_0x5a5585['set'](_0x10c6d8['nKniR'],_0x395353);_0x5a5585['set'](_0x10c6d8['ZzSlN'],deprecated(_0x395353,'[hash] is now [fullhash] (also consider using [chunkhash] or [contenthash], see documentation for details)',_0x10c6d8['IjUMy']));}if(_0x37bc2f['chunk']){if('CbwUd'==='lyLaO'){let _0x25e4db=deprecationCache['get'](message);if(_0x25e4db===undefined){_0x25e4db=util['deprecate'](deprecatedFunction,message,code);deprecationCache['set'](message,_0x25e4db);}return(..._0x595eac)=>{_0x10c6d8['OuAgc'](_0x25e4db);return _0x10c6d8['fgSqN'](fn,..._0x595eac);};}else{const _0x29432b=_0x37bc2f['chunk'];const _0x4fdc90=_0x37bc2f['contentHashType'];const _0x347712=replacer(_0x29432b['id']);const _0x495d9d=_0x10c6d8['SwySt'](replacer,_0x29432b['name']||_0x29432b['id']);const _0x5c52fa=_0x10c6d8['nZlhd'](hashLength,replacer(_0x10c6d8['cSyAk'](_0x29432b,Chunk)?_0x29432b['renderedHash']:_0x29432b['hash']),_0x10c6d8['cjLZq'](_0x10c6d8['xdENp'],_0x29432b)?_0x29432b['hashWithLength']:undefined,_0xfe224b,_0x10c6d8['DTecY']);const _0x4a26b7=hashLength(_0x10c6d8['dgtbP'](replacer,_0x37bc2f['contentHash']||_0x4fdc90&&_0x29432b['contentHash']&&_0x29432b['contentHash'][_0x4fdc90]),_0x37bc2f['contentHashWithLength']||(_0x10c6d8['cjLZq'](_0x10c6d8['klife'],_0x29432b)&&_0x29432b['contentHashWithLength']?_0x29432b['contentHashWithLength'][_0x4fdc90]:undefined),_0xfe224b,_0x10c6d8['uBudT']);_0x5a5585['set']('id',_0x347712);_0x5a5585['set']('name',_0x495d9d);_0x5a5585['set'](_0x10c6d8['DTecY'],_0x5c52fa);_0x5a5585['set'](_0x10c6d8['uBudT'],_0x4a26b7);}}if(_0x37bc2f['module']){const _0x4f4394=_0x37bc2f['module'];const _0x347712=replacer(()=>prepareId(_0x4f4394 instanceof Module?_0x50bb1f['getModuleId'](_0x4f4394):_0x4f4394['id']));const _0x17c097=_0x10c6d8['FKcFy'](hashLength,_0x10c6d8['aZGkh'](replacer,()=>_0x4f4394 instanceof Module?_0x50bb1f['getRenderedModuleHash'](_0x4f4394,_0x37bc2f['runtime']):_0x4f4394['hash']),_0x10c6d8['xdENp']in _0x4f4394?_0x4f4394['hashWithLength']:undefined,_0xfe224b,_0x10c6d8['wqBhC']);const _0x4dd473=_0x10c6d8['FKcFy'](hashLength,replacer(_0x37bc2f['contentHash']),undefined,_0xfe224b,'contenthash');_0x5a5585['set']('id',_0x347712);_0x5a5585['set'](_0x10c6d8['wqBhC'],_0x17c097);_0x5a5585['set']('contenthash',_0x4dd473);_0x5a5585['set'](_0x10c6d8['ZzSlN'],_0x37bc2f['contentHash']?_0x4dd473:_0x17c097);_0x5a5585['set'](_0x10c6d8['HiOQz'],deprecated(_0x347712,_0x10c6d8['aeEfO'],'DEP_WEBPACK_TEMPLATE_PATH_PLUGIN_REPLACE_PATH_VARIABLES_MODULE_ID'));}if(_0x37bc2f['url']){_0x5a5585['set'](_0x10c6d8['YuebV'],_0x10c6d8['aZGkh'](replacer,_0x37bc2f['url']));}if(_0x10c6d8['vQpPI'](typeof _0x37bc2f['runtime'],'string')){if(_0x10c6d8['ngZXK'](_0x10c6d8['RwKOw'],_0x10c6d8['rBSga'])){_0x5a5585['set'](_0x10c6d8['YZUyo'],replacer(()=>prepareId(_0x37bc2f['runtime'])));}else{return replacer(match,arg,_0x20f240);}}else{_0x5a5585['set']('runtime',_0x10c6d8['nsmnV'](replacer,'_'));}if(_0x10c6d8['vQpPI'](typeof _0x20f240,_0x10c6d8['dxHsn'])){_0x20f240=_0x20f240(_0x37bc2f,_0xfe224b);}_0x20f240=_0x20f240['replace'](REGEXP,(_0x5c7696,_0x4a1d68)=>{var _0x58c47d={'IebYp':function(_0xf7991b,_0xd6f205,_0x431692,_0x152c9b){return _0xf7991b(_0xd6f205,_0x431692,_0x152c9b);}};if(_0x10c6d8['pkdVJ'](_0x10c6d8['yeBaa'](_0x4a1d68['length'],0x2),_0x5c7696['length'])){const _0x310b45=/^(\w+)(?::(\w+))?$/['exec'](_0x4a1d68);if(!_0x310b45)return _0x5c7696;const [,_0x5258c2,_0x275a8b]=_0x310b45;const _0x43a6de=_0x5a5585['get'](_0x5258c2);if(_0x43a6de!==undefined){return _0x10c6d8['hyjJh'](_0x43a6de,_0x5c7696,_0x275a8b,_0x20f240);}}else if(_0x5c7696['startsWith']('[\x5c')&&_0x5c7696['endsWith']('\x5c]')){if(_0x10c6d8['ANWPi']!==_0x10c6d8['ANWPi']){if(_0x4a1d68['length']+0x2===_0x5c7696['length']){const _0x38edfb=/^(\w+)(?::(\w+))?$/['exec'](_0x4a1d68);if(!_0x38edfb)return _0x5c7696;const [,_0x144fbe,_0x5b2bdf]=_0x38edfb;const _0x557bd2=_0x5a5585['get'](_0x144fbe);if(_0x557bd2!==undefined){return _0x58c47d['IebYp'](_0x557bd2,_0x5c7696,_0x5b2bdf,_0x20f240);}}else if(_0x5c7696['startsWith']('[\x5c')&&_0x5c7696['endsWith']('\x5c]')){return'['+_0x5c7696['slice'](0x2,-0x2)+']';}return _0x5c7696;}else{return'['+_0x5c7696['slice'](0x2,-0x2)+']';}}return _0x5c7696;});return _0x20f240;};const plugin='TemplatedPathPlugin';class TemplatedPathPlugin{['apply'](_0x1abb76){_0x1abb76['hooks']['compilation']['tap'](plugin,_0x1b172b=>{_0x1b172b['hooks']['assetPath']['tap'](plugin,replacePathVariables);});}}module['exports']=TemplatedPathPlugin;