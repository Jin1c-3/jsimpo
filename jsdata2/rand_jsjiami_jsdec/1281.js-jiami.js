const CommandRegistry=require('../src/command-registry');const _=require('underscore-plus');describe('CommandRegistry',()=>{var _0x23cded={'AQcMf':'.grandchild','lYYZR':'namespace:command-1','TQktM':'namespace:command-3','CSsvQ':'some:other:incorrect:commandname','IybDb':'other','vFPgh':'Custom Command 2','mLlCL':'namespace:command-2','pIXKv':'Custom Command 3','zavZG':function(_0x95dd59,_0x43031c){return _0x95dd59===_0x43031c;},'PezuW':'YFYSs','gjFMg':'parent','fjLju':'child','QNYQc':'div','pzrtZ':'#jasmine-content','jWPku':function(_0x3c24df,_0x1cc141){return _0x3c24df(_0x1cc141);},'XIWdZ':'fuekv','DWqDE':'xPfrF','fEXle':'command','wIerj':function(_0x214fc0,_0x4f9062){return _0x214fc0(_0x4f9062);},'TzojR':function(_0x15ec11,_0x3f1986,_0x4bd426){return _0x15ec11(_0x3f1986,_0x4bd426);},'AQdfc':function(_0x1a196a,_0x301f07){return _0x1a196a===_0x301f07;},'khefs':'xVfIX','rhiIA':'.parent','DrAxE':'grandchild','mBzGw':'foo','QbxIR':'bar','fFNkg':'.foo.bar','lNPya':'.foo','KfqCW':function(_0x11238c,_0x2db14b){return _0x11238c===_0x2db14b;},'FUfBU':'slirv','kWadi':'.child','slsQR':'abortKeyBinding','jFEAY':'testing','qWPIG':function(_0x745643,_0x9b9d93){return _0x745643===_0x9b9d93;},'HSWih':'bOgRP','NkYGl':function(_0x28a4f0,_0x1bb9b3){return _0x28a4f0(_0x1bb9b3);},'RCzOa':function(_0x3807bc,_0x2fc369){return _0x3807bc(_0x2fc369);},'LmZES':'onDidDispatch','PadFZ':function(_0x2efdf7,_0x127a13){return _0x2efdf7===_0x127a13;},'ERQfG':function(_0x426c0f,_0x381ca5){return _0x426c0f(_0x381ca5);},'IyOqY':'foo:bar','cXUyu':'this should throw an error','TubZQ':function(_0xdb7f32,_0x1b1ea7){return _0xdb7f32(_0x1b1ea7);},'zgUMQ':function(_0x379d83,_0x1f5ea8){return _0x379d83===_0x1f5ea8;},'amHYE':'onWillDispatch','wBasO':function(_0x21c65a,_0x4232fb){return _0x21c65a(_0x4232fb);},'XYwKu':'child2','JotJj':'xATAn','FhRSV':function(_0x3e2c1a,_0x3ae07f){return _0x3e2c1a===_0x3ae07f;},'dcIzS':'dccNY','oLnKz':'stopPropagation','nGlZv':function(_0x18f586,_0x16af14){return _0x18f586(_0x16af14);},'XuYvg':function(_0x5aee31,_0x5f5a9c){return _0x5aee31(_0x5f5a9c);},'kBhqw':'stopImmediatePropagation','jObeW':'preventDefault','Sfaun':function(_0x507883,_0x48b09f){return _0x507883(_0x48b09f);},'QdQmB':'command-2','CBxYQ':'command-1','KPVQM':'data','SiyoA':function(_0x274891,_0x1d46c7){return _0x274891(_0x1d46c7);},'EJmzX':'invokes\x20callbacks\x20with\x20selectors\x20matching\x20the\x20target','bULyx':'invokes callbacks with selectors matching ancestors of the target','eQTiD':function(_0x1a1040,_0x4813c7,_0x42f7db){return _0x1a1040(_0x4813c7,_0x42f7db);},'bscTv':'orders multiple matching listeners for an element by selector specificity','MRHfB':'orders inline listeners by reverse registration order','yglIP':function(_0x18d1f3,_0x3734d8,_0x3ae8f7){return _0x18d1f3(_0x3734d8,_0x3ae8f7);},'mmNFa':function(_0x1b6c66,_0x14fa35,_0xb4a513){return _0x1b6c66(_0x14fa35,_0xb4a513);},'ALZMz':'copies\x20non-standard\x20properties\x20from\x20the\x20original\x20event\x20to\x20the\x20synthetic\x20event','SOFcc':function(_0x5141e2,_0x59a2e4,_0x2c1b2d){return _0x5141e2(_0x59a2e4,_0x2c1b2d);},'wEYJt':'allows listeners to be removed via a disposable returned by ::add','pTEAo':'allows\x20multiple\x20commands\x20to\x20be\x20registered\x20under\x20one\x20selector\x20when\x20called\x20with\x20an\x20object','GuyeF':'invokes callbacks registered with ::onWillDispatch and ::onDidDispatch','KECLi':'child-1','CzPFi':function(_0x5ab822,_0x3fd70b,_0x1a025a){return _0x5ab822(_0x3fd70b,_0x1a025a);},'aTWwf':function(_0x447a2e,_0x2aac3f){return _0x447a2e(_0x2aac3f);},'aIEyQ':function(_0x3c6ffb,_0x3f009e){return _0x3c6ffb!==_0x3f009e;},'SwzRv':'gpFMg','jxjXL':'LKsqP','emtUp':function(_0x769244,_0x50c88a){return _0x769244===_0x50c88a;},'zJsov':function(_0x49b378,_0x69bfd6){return _0x49b378(_0x69bfd6);},'VNRPa':'BMVIl','OQdYb':function(_0x2b22f9,_0x343665){return _0x2b22f9===_0x343665;},'darzk':'a listener without a didDispatch callback','owujh':function(_0x5b0658,_0x18eded){return _0x5b0658(_0x18eded);},'KPilp':'Listener must be a callback function or an object with a didDispatch method.','hgbEI':function(_0x418dee,_0x419e60){return _0x418dee(_0x419e60);},'LMDeU':function(_0x5e094a,_0x52c558){return _0x5e094a===_0x52c558;},'qzecB':'jXOWD','CujFX':'SQBML','ztTYN':'throws\x20an\x20error\x20when\x20called\x20with\x20an\x20invalid\x20selector','pStVb':'throws an error when called with a null callback and selector target','UNHqj':function(_0x185611,_0x2bf97b,_0x2f91ef){return _0x185611(_0x2bf97b,_0x2f91ef);},'haOlh':'throws an error when called with a null callback and object target','XrddF':'.grandchild.no-match','xRcmx':'namespace:command-4','fzAkG':'namespace:inline-command-1','LokwX':'namespace:inline-command-2','yZwak':'Namespace: Inline Command 1','SNnKp':'Namespace:\x20Command\x203','xsmam':'Namespace: Inline Command 2','cofyW':'Namespace:\x20Command\x202','QgyKf':'Namespace: Command 1','Sgruw':'returns\x20command\x20descriptors\x20that\x20can\x20be\x20invoked\x20on\x20the\x20target\x20or\x20its\x20ancestors','AImhs':function(_0x917a53,_0x4e00db,_0x16f5f7){return _0x917a53(_0x4e00db,_0x16f5f7);},'BMmHm':'returns command descriptors with arbitrary metadata if set on a listener function','XZpbu':function(_0x4f5f85,_0x5a20f5){return _0x4f5f85!==_0x5a20f5;},'GJntQ':'qYLsp','gQlgQ':'adGnQ','CwRgN':function(_0x29d27d,_0x235770){return _0x29d27d(_0x235770);},'KGSJm':'Promise','ICUXa':function(_0x4f59ac,_0x2ec950){return _0x4f59ac(_0x2ec950);},'crbky':function(_0xe6aa49,_0x521325){return _0xe6aa49!==_0x521325;},'gGkfb':'jGStS','FMOvR':'tEDqs','DOosn':function(_0x2d8fbb,_0x45f951){return _0x2d8fbb(_0x45f951);},'FpfGe':function(_0x29039d,_0x456e2b){return _0x29039d(_0x456e2b);},'kFqzh':function(_0x51c32a,_0x22828d){return _0x51c32a(_0x22828d);},'pVHVs':'UkPSK','hdPcx':'yqMkv','fdvaL':'NxqDP','UzdKb':'returns a promise if any listeners matched the command','xfXgT':'.selector','LhQwF':'diYQe','hbFnE':function(_0x147e93,_0x334f4d){return _0x147e93(_0x334f4d);},'URQLZ':function(_0x11982f,_0x6335a5){return _0x11982f(_0x6335a5);},'nCMaE':'aYNvW','ykCPe':'when a command event is dispatched on an element','wkiKy':'::add(selector, commandName, callback)','SYxKZ':'::findCommands({target})','mUltW':function(_0x55b16e,_0x22f485,_0x340b61){return _0x55b16e(_0x22f485,_0x340b61);},'PnBmN':'::dispatch(target, commandName)','OnHwq':'::getSnapshot and ::restoreSnapshot','FyIfO':function(_0x135ad0,_0x68901c,_0x2a1c47){return _0x135ad0(_0x68901c,_0x2a1c47);},'JjJrK':'::attach(rootNode)'};let _0x466a10,_0xa32cd8,_0x206c77,_0x8738c9;_0x23cded['URQLZ'](beforeEach,()=>{var _0x1c469c={'jogrr':_0x23cded['AQcMf'],'mtVrp':_0x23cded['lYYZR'],'NErWN':_0x23cded['TQktM'],'MnhCi':_0x23cded['CSsvQ'],'uGhDa':_0x23cded['IybDb'],'tOTHU':'data','LvtTN':_0x23cded['vFPgh'],'paYkU':_0x23cded['mLlCL'],'iWGqz':_0x23cded['pIXKv']};if(_0x23cded['zavZG']('qbecB',_0x23cded['PezuW'])){_0x466a10['add'](_0x1c469c['jogrr'],_0x1c469c['mtVrp'],()=>{});_0x466a10['add'](_0x1c469c['jogrr'],'namespace:command-2',{'displayName':'Custom Command 2','metadata':{'some':'other','object':'data'},'didDispatch'(){}});_0x466a10['add']('.grandchild',_0x1c469c['NErWN'],{'name':_0x1c469c['MnhCi'],'displayName':'Custom Command 3','metadata':{'some':_0x1c469c['uGhDa'],'object':_0x1c469c['tOTHU']},'didDispatch'(){}});const _0x52c78f=_0x466a10['findCommands']({'target':_0x8738c9});expect(_0x52c78f)['toEqual']([{'displayName':'Namespace: Command 1','name':_0x1c469c['mtVrp']},{'displayName':_0x1c469c['LvtTN'],'metadata':{'some':_0x1c469c['uGhDa'],'object':_0x1c469c['tOTHU']},'name':_0x1c469c['paYkU']},{'displayName':_0x1c469c['iWGqz'],'metadata':{'some':_0x1c469c['uGhDa'],'object':_0x1c469c['tOTHU']},'name':'namespace:command-3'}]);}else{var _0x1ac5e7='3|5|9|1|4|10|0|6|8|7|2'['split']('|'),_0x214e58=0x0;while(!![]){switch(_0x1ac5e7[_0x214e58++]){case'0':_0x206c77['appendChild'](_0x8738c9);continue;case'1':_0xa32cd8['classList']['add'](_0x23cded['gjFMg']);continue;case'2':_0x466a10['attach'](_0xa32cd8);continue;case'3':_0xa32cd8=document['createElement']('div');continue;case'4':_0x206c77['classList']['add'](_0x23cded['fjLju']);continue;case'5':_0x206c77=document['createElement'](_0x23cded['QNYQc']);continue;case'6':_0xa32cd8['appendChild'](_0x206c77);continue;case'7':_0x466a10=new CommandRegistry();continue;case'8':document['querySelector'](_0x23cded['pzrtZ'])['appendChild'](_0xa32cd8);continue;case'9':_0x8738c9=document['createElement'](_0x23cded['QNYQc']);continue;case'10':_0x8738c9['classList']['add']('grandchild');continue;}break;}}});_0x23cded['URQLZ'](afterEach,()=>_0x466a10['destroy']());_0x23cded['AImhs'](describe,_0x23cded['ykCPe'],()=>{var _0x4b39de={'ABDof':_0x23cded['IyOqY'],'KIWcb':'a\x20listener\x20without\x20a\x20didDispatch\x20callback','WzIwu':_0x23cded['cXUyu'],'ZWfWi':function(_0x3eacff,_0x53d385){return _0x23cded['TubZQ'](_0x3eacff,_0x53d385);},'xOsjf':function(_0x1ed413,_0x4e6f74){return _0x23cded['zgUMQ'](_0x1ed413,_0x4e6f74);},'gXNsJ':function(_0x49d953,_0x4363b6){return _0x23cded['TubZQ'](_0x49d953,_0x4363b6);},'ddzsc':_0x23cded['fjLju'],'ZhJBz':_0x23cded['kWadi'],'YDslO':_0x23cded['fEXle'],'rVjPg':function(_0x5c6b5f,_0x730ccb){return _0x23cded['TubZQ'](_0x5c6b5f,_0x730ccb);},'Iblbu':_0x23cded['AQcMf'],'JdHvY':_0x23cded['amHYE'],'Tvhqv':_0x23cded['LmZES'],'zdIrW':function(_0x453f09,_0x3878ce){return _0x23cded['wBasO'](_0x453f09,_0x3878ce);},'TWuVk':function(_0x12bb8d,_0x55f701){return _0x12bb8d(_0x55f701);},'zXJeS':function(_0x2d5202,_0x13bb63){return _0x2d5202(_0x13bb63);},'kRghL':_0x23cded['XYwKu'],'IDsnX':'child1','fDOai':_0x23cded['JotJj'],'QwaiJ':function(_0x16b522,_0x577b4d){return _0x23cded['FhRSV'](_0x16b522,_0x577b4d);},'bhnyX':_0x23cded['dcIzS'],'VQuyq':function(_0x44d0a9,_0x42cc91,_0x13a6a7){return _0x23cded['TzojR'](_0x44d0a9,_0x42cc91,_0x13a6a7);},'Cktuv':_0x23cded['oLnKz'],'RIMck':function(_0x49acf1,_0x526773){return _0x23cded['nGlZv'](_0x49acf1,_0x526773);},'OxHWs':function(_0x366265,_0x55521b){return _0x23cded['XuYvg'](_0x366265,_0x55521b);},'oYooh':_0x23cded['rhiIA'],'NUzfS':_0x23cded['kBhqw'],'OJEvO':'child-1','uXnZJ':function(_0x237d61,_0x381df2,_0x5e045c){return _0x237d61(_0x381df2,_0x5e045c);},'HJlXw':_0x23cded['jObeW'],'lXGct':function(_0x162fcc,_0x4d04db){return _0x23cded['Sfaun'](_0x162fcc,_0x4d04db);},'CbcbD':_0x23cded['QdQmB'],'KAUlk':_0x23cded['CBxYQ'],'urhsi':function(_0x287546,_0x1b93a1){return _0x287546(_0x1b93a1);},'Xldrb':_0x23cded['vFPgh'],'MJDZs':'other','daskU':_0x23cded['KPVQM'],'QCZuQ':_0x23cded['mLlCL'],'mxWkd':function(_0x378b12,_0x485398){return _0x23cded['SiyoA'](_0x378b12,_0x485398);}};if('cgOmW'!=='nvvDO'){_0x23cded['TzojR'](it,_0x23cded['EJmzX'],()=>{var _0x573ff2={'stPvV':function(_0x16b0ee,_0x3909de){return _0x23cded['jWPku'](_0x16b0ee,_0x3909de);},'PCRGN':'command'};if(_0x23cded['zavZG'](_0x23cded['XIWdZ'],_0x23cded['DWqDE'])){reject(0x3);}else{let _0x3416a6=![];_0x466a10['add'](_0x23cded['AQcMf'],_0x23cded['fEXle'],function(_0x585b94){_0x573ff2['stPvV'](expect,this)['toBe'](_0x8738c9);_0x573ff2['stPvV'](expect,_0x585b94['type'])['toBe'](_0x573ff2['PCRGN']);_0x573ff2['stPvV'](expect,_0x585b94['eventPhase'])['toBe'](Event['BUBBLING_PHASE']);expect(_0x585b94['target'])['toBe'](_0x8738c9);_0x573ff2['stPvV'](expect,_0x585b94['currentTarget'])['toBe'](_0x8738c9);_0x3416a6=!![];});_0x8738c9['dispatchEvent'](new CustomEvent(_0x23cded['fEXle'],{'bubbles':!![]}));_0x23cded['wIerj'](expect,_0x3416a6)['toBe'](!![]);}});_0x23cded['TzojR'](it,_0x23cded['bULyx'],()=>{var _0x1a0ab1={'wbPmK':function(_0x5ceaaf,_0x2b190a){return _0x5ceaaf(_0x2b190a);},'ZPYkh':function(_0x11562d,_0x46e8c8){return _0x4b39de['gXNsJ'](_0x11562d,_0x46e8c8);},'mhRIU':_0x4b39de['ddzsc']};const _0x4fccad=[];_0x466a10['add'](_0x4b39de['ZhJBz'],'command',function(_0x5afc0b){expect(this)['toBe'](_0x206c77);_0x1a0ab1['wbPmK'](expect,_0x5afc0b['target'])['toBe'](_0x8738c9);_0x1a0ab1['ZPYkh'](expect,_0x5afc0b['currentTarget'])['toBe'](_0x206c77);_0x4fccad['push'](_0x1a0ab1['mhRIU']);});_0x466a10['add']('.parent','command',function(_0x51d7ae){var _0x5c92a7={'PONRn':_0x4b39de['ABDof'],'BdfEP':_0x4b39de['KIWcb'],'FNZbU':_0x4b39de['WzIwu'],'lMxNd':function(_0x53ac54,_0x11cd41){return _0x4b39de['ZWfWi'](_0x53ac54,_0x11cd41);},'vjAkM':'Listener must be a callback function or an object with a didDispatch method.'};if(_0x4b39de['xOsjf']('eogoX','eogoX')){_0x4b39de['ZWfWi'](expect,this)['toBe'](_0xa32cd8);_0x4b39de['ZWfWi'](expect,_0x51d7ae['target'])['toBe'](_0x8738c9);_0x4b39de['gXNsJ'](expect,_0x51d7ae['currentTarget'])['toBe'](_0xa32cd8);_0x4fccad['push']('parent');}else{var _0x532071={'KgSKJ':_0x5c92a7['PONRn']};const _0x3d3fef={'title':_0x5c92a7['BdfEP'],'description':_0x5c92a7['FNZbU']};_0x5c92a7['lMxNd'](expect,()=>{_0x466a10['add'](document['body'],_0x532071['KgSKJ'],_0x3d3fef);})['toThrow'](new Error(_0x5c92a7['vjAkM']));}});_0x8738c9['dispatchEvent'](new CustomEvent(_0x4b39de['YDslO'],{'bubbles':!![]}));_0x4b39de['rVjPg'](expect,_0x4fccad)['toEqual']([_0x4b39de['ddzsc'],'parent']);});_0x23cded['TzojR'](it,'invokes inline listeners prior to listeners applied via selectors',()=>{var _0xf711f3={'yaVbv':_0x23cded['fEXle'],'FDSUP':function(_0x414586,_0x18cc7a,_0x4c85c1){return _0x23cded['TzojR'](_0x414586,_0x18cc7a,_0x4c85c1);}};if(_0x23cded['AQdfc']('tDsZC',_0x23cded['khefs'])){_0x466a10['add']('.child','command',_0x2127c6=>_0x2127c6['preventDefault']());const _0x29787d=new CustomEvent(_0xf711f3['yaVbv'],{'bubbles':!![]});_0xf711f3['FDSUP'](spyOn,_0x29787d,'preventDefault');_0x8738c9['dispatchEvent'](_0x29787d);expect(_0x29787d['preventDefault'])['toHaveBeenCalled']();}else{const _0x45057e=[];_0x466a10['add'](_0x23cded['AQcMf'],_0x23cded['fEXle'],()=>_0x45057e['push']('grandchild'));_0x466a10['add'](_0x206c77,_0x23cded['fEXle'],()=>_0x45057e['push']('child-inline'));_0x466a10['add']('.child',_0x23cded['fEXle'],()=>_0x45057e['push']('child'));_0x466a10['add'](_0x23cded['rhiIA'],_0x23cded['fEXle'],()=>_0x45057e['push']('parent'));_0x8738c9['dispatchEvent'](new CustomEvent(_0x23cded['fEXle'],{'bubbles':!![]}));expect(_0x45057e)['toEqual']([_0x23cded['DrAxE'],'child-inline',_0x23cded['fjLju'],'parent']);}});_0x23cded['eQTiD'](it,_0x23cded['bscTv'],()=>{if('cHRyi'==='cHRyi'){_0x206c77['classList']['add'](_0x23cded['mBzGw'],_0x23cded['QbxIR']);const _0x47d0a3=[];_0x466a10['add'](_0x23cded['fFNkg'],_0x23cded['fEXle'],()=>_0x47d0a3['push']('.foo.bar'));_0x466a10['add'](_0x23cded['lNPya'],_0x23cded['fEXle'],()=>_0x47d0a3['push']('.foo'));_0x466a10['add']('.bar',_0x23cded['fEXle'],()=>_0x47d0a3['push']('.bar'));_0x8738c9['dispatchEvent'](new CustomEvent('command',{'bubbles':!![]}));expect(_0x47d0a3)['toEqual'](['.foo.bar','.bar',_0x23cded['lNPya']]);}else{const _0x54f913=[];_0x466a10['onDidDispatch'](_0x3b86df=>_0x54f913['push'](['onDidDispatch',_0x3b86df]));_0x466a10['add'](_0x4b39de['Iblbu'],_0x4b39de['YDslO'],_0x36f3bf=>_0x54f913['push'](['listener',_0x36f3bf]));_0x466a10['onWillDispatch'](_0x238ebf=>_0x54f913['push'](['onWillDispatch',_0x238ebf]));_0x8738c9['dispatchEvent'](new CustomEvent(_0x4b39de['YDslO'],{'bubbles':!![]}));_0x4b39de['rVjPg'](expect,_0x54f913[0x0][0x0])['toBe'](_0x4b39de['JdHvY']);expect(_0x54f913[0x1][0x0])['toBe']('listener');expect(_0x54f913[0x2][0x0])['toBe'](_0x4b39de['Tvhqv']);_0x4b39de['zdIrW'](expect,_0x54f913[0x0][0x1]===_0x54f913[0x1][0x1]&&_0x54f913[0x1][0x1]===_0x54f913[0x2][0x1])['toBe'](!![]);_0x4b39de['zdIrW'](expect,_0x54f913[0x0][0x1]['constructor'])['toBe'](CustomEvent);_0x4b39de['TWuVk'](expect,_0x54f913[0x0][0x1]['target'])['toBe'](_0x8738c9);}});it(_0x23cded['MRHfB'],()=>{const _0x1dd953=[];_0x466a10['add'](_0x206c77,_0x4b39de['YDslO'],()=>_0x1dd953['push']('child1'));_0x466a10['add'](_0x206c77,'command',()=>_0x1dd953['push']('child2'));_0x206c77['dispatchEvent'](new CustomEvent(_0x4b39de['YDslO'],{'bubbles':!![]}));_0x4b39de['zXJeS'](expect,_0x1dd953)['toEqual']([_0x4b39de['kRghL'],'child1']);});_0x23cded['yglIP'](it,'stops bubbling through ancestors when .stopPropagation() is called on the event',()=>{var _0x470e4a={'ZSBPx':_0x4b39de['YDslO'],'epSGK':function(_0x2c585c,_0x1c053a){return _0x2c585c(_0x1c053a);},'UBULn':_0x4b39de['IDsnX'],'fHFJP':function(_0x34c6b8,_0x1a5c14){return _0x34c6b8===_0x1a5c14;},'PYyqC':_0x4b39de['fDOai']};if(_0x4b39de['QwaiJ'](_0x4b39de['bhnyX'],_0x4b39de['bhnyX'])){const _0x4675ea=[];_0x466a10['add']('.parent','command',()=>_0x4675ea['push']('parent'));_0x466a10['add'](_0x4b39de['ZhJBz'],_0x4b39de['YDslO'],()=>_0x4675ea['push']('child-2'));_0x466a10['add'](_0x4b39de['ZhJBz'],'command',_0xb28ec3=>{if(_0x470e4a['fHFJP']('xATAn',_0x470e4a['PYyqC'])){_0x4675ea['push']('child-1');_0xb28ec3['stopPropagation']();}else{const _0x38ba25=[];_0x466a10['add'](_0x206c77,'command',()=>_0x38ba25['push']('child1'));_0x466a10['add'](_0x206c77,_0x470e4a['ZSBPx'],()=>_0x38ba25['push']('child2'));_0x206c77['dispatchEvent'](new CustomEvent(_0x470e4a['ZSBPx'],{'bubbles':!![]}));_0x470e4a['epSGK'](expect,_0x38ba25)['toEqual'](['child2',_0x470e4a['UBULn']]);}});const _0x1c8a0b=new CustomEvent(_0x4b39de['YDslO'],{'bubbles':!![]});_0x4b39de['VQuyq'](spyOn,_0x1c8a0b,_0x4b39de['Cktuv']);_0x8738c9['dispatchEvent'](_0x1c8a0b);_0x4b39de['RIMck'](expect,_0x4675ea)['toEqual'](['child-1','child-2']);_0x4b39de['OxHWs'](expect,_0x1c8a0b['stopPropagation'])['toHaveBeenCalled']();}else{var _0x438670={'gfhCG':function(_0x11fb3c,_0xafb771){return _0x4b39de['zXJeS'](_0x11fb3c,_0xafb771);},'OpEGS':function(_0x562b13,_0x104cc7){return _0x562b13(_0x104cc7);},'qowWu':_0x4b39de['YDslO']};let _0x501e82=![];_0x466a10['add'](_0x4b39de['Iblbu'],_0x4b39de['YDslO'],function(_0x5b6c40){_0x438670['gfhCG'](expect,this)['toBe'](_0x8738c9);_0x438670['OpEGS'](expect,_0x5b6c40['type'])['toBe'](_0x438670['qowWu']);expect(_0x5b6c40['eventPhase'])['toBe'](Event['BUBBLING_PHASE']);_0x438670['OpEGS'](expect,_0x5b6c40['target'])['toBe'](_0x8738c9);_0x438670['OpEGS'](expect,_0x5b6c40['currentTarget'])['toBe'](_0x8738c9);_0x501e82=!![];});_0x8738c9['dispatchEvent'](new CustomEvent('command',{'bubbles':!![]}));_0x4b39de['zXJeS'](expect,_0x501e82)['toBe'](!![]);}});it('stops invoking callbacks when .stopImmediatePropagation() is called on the event',()=>{const _0x5dd7b5=[];_0x466a10['add'](_0x4b39de['oYooh'],_0x4b39de['YDslO'],()=>_0x5dd7b5['push']('parent'));_0x466a10['add'](_0x4b39de['ZhJBz'],'command',()=>_0x5dd7b5['push']('child-2'));_0x466a10['add'](_0x4b39de['ZhJBz'],_0x4b39de['YDslO'],_0x3a90f9=>{_0x5dd7b5['push']('child-1');_0x3a90f9['stopImmediatePropagation']();});const _0x11576b=new CustomEvent(_0x4b39de['YDslO'],{'bubbles':!![]});_0x4b39de['VQuyq'](spyOn,_0x11576b,_0x4b39de['NUzfS']);_0x8738c9['dispatchEvent'](_0x11576b);expect(_0x5dd7b5)['toEqual']([_0x4b39de['OJEvO']]);expect(_0x11576b['stopImmediatePropagation'])['toHaveBeenCalled']();});_0x23cded['yglIP'](it,'forwards\x20.preventDefault()\x20calls\x20from\x20the\x20synthetic\x20event\x20to\x20the\x20original',()=>{if(_0x4b39de['QwaiJ']('OeLTb','oFdLT')){_0x4b39de['OxHWs'](resolve,0x3);}else{_0x466a10['add'](_0x4b39de['ZhJBz'],_0x4b39de['YDslO'],_0x12c589=>_0x12c589['preventDefault']());const _0x12999b=new CustomEvent(_0x4b39de['YDslO'],{'bubbles':!![]});_0x4b39de['uXnZJ'](spyOn,_0x12999b,_0x4b39de['HJlXw']);_0x8738c9['dispatchEvent'](_0x12999b);_0x4b39de['lXGct'](expect,_0x12999b['preventDefault'])['toHaveBeenCalled']();}});_0x23cded['yglIP'](it,'forwards\x20.abortKeyBinding()\x20calls\x20from\x20the\x20synthetic\x20event\x20to\x20the\x20original',()=>{var _0x5d1d6b={'ccaao':_0x23cded['fEXle'],'mOZnK':function(_0xab27d3,_0x4e5a0b){return _0x23cded['wIerj'](_0xab27d3,_0x4e5a0b);},'QmwUl':function(_0x4a4e37,_0x2273ad){return _0x4a4e37(_0x2273ad);}};if(_0x23cded['KfqCW'](_0x23cded['FUfBU'],_0x23cded['FUfBU'])){_0x466a10['add'](_0x23cded['kWadi'],_0x23cded['fEXle'],_0x19d8c4=>_0x19d8c4['abortKeyBinding']());const _0x146349=new CustomEvent(_0x23cded['fEXle'],{'bubbles':!![]});_0x146349['abortKeyBinding']=jasmine['createSpy'](_0x23cded['slsQR']);_0x8738c9['dispatchEvent'](_0x146349);_0x23cded['wIerj'](expect,_0x146349['abortKeyBinding'])['toHaveBeenCalled']();}else{_0x466a10['add']('.grandchild',_0x5d1d6b['ccaao'],()=>{});expect(_0x466a10['dispatch'](_0x8738c9,_0x5d1d6b['ccaao'])['constructor']['name'])['toBe']('Promise');_0x5d1d6b['mOZnK'](expect,_0x466a10['dispatch'](_0x8738c9,'bogus'))['toBe'](null);_0x5d1d6b['QmwUl'](expect,_0x466a10['dispatch'](_0xa32cd8,'command'))['toBe'](null);}});_0x23cded['mmNFa'](it,_0x23cded['ALZMz'],()=>{var _0x1474de={'phbKD':_0x23cded['kWadi'],'ijWKc':_0x23cded['fEXle'],'CggKm':_0x23cded['jFEAY']};if(_0x23cded['qWPIG'](_0x23cded['HSWih'],_0x23cded['HSWih'])){let _0x4c8be7=null;_0x466a10['add'](_0x23cded['kWadi'],'command',_0x368a02=>_0x4c8be7=_0x368a02);const _0x54bb58=new CustomEvent(_0x23cded['fEXle'],{'bubbles':!![]});_0x54bb58['nonStandardProperty']=_0x23cded['jFEAY'];_0x8738c9['dispatchEvent'](_0x54bb58);_0x23cded['wIerj'](expect,_0x4c8be7['nonStandardProperty'])['toBe'](_0x23cded['jFEAY']);}else{let _0x5e13cb=null;_0x466a10['add'](_0x1474de['phbKD'],_0x1474de['ijWKc'],_0x4fe3d5=>_0x5e13cb=_0x4fe3d5);const _0x310d72=new CustomEvent(_0x1474de['ijWKc'],{'bubbles':!![]});_0x310d72['nonStandardProperty']=_0x1474de['CggKm'];_0x8738c9['dispatchEvent'](_0x310d72);expect(_0x5e13cb['nonStandardProperty'])['toBe'](_0x1474de['CggKm']);}});_0x23cded['SOFcc'](it,_0x23cded['wEYJt'],()=>{let _0x4d6fb0=[];const _0x2f1f12=_0x466a10['add'](_0x23cded['rhiIA'],'command',()=>_0x4d6fb0['push']('parent'));const _0x124979=_0x466a10['add']('.child',_0x23cded['fEXle'],()=>_0x4d6fb0['push']('child'));_0x2f1f12['dispose']();_0x8738c9['dispatchEvent'](new CustomEvent('command',{'bubbles':!![]}));_0x23cded['NkYGl'](expect,_0x4d6fb0)['toEqual'](['child']);_0x4d6fb0=[];_0x124979['dispose']();_0x8738c9['dispatchEvent'](new CustomEvent('command',{'bubbles':!![]}));expect(_0x4d6fb0)['toEqual']([]);});_0x23cded['SOFcc'](it,_0x23cded['pTEAo'],()=>{var _0x3d7e5a={'byZVl':_0x4b39de['KAUlk']};let _0x2013f1=[];const _0x3391b5=_0x466a10['add'](_0x4b39de['ZhJBz'],{'command-1'(){_0x2013f1['push'](_0x3d7e5a['byZVl']);},'command-2'(){_0x2013f1['push'](_0x4b39de['CbcbD']);}});_0x8738c9['dispatchEvent'](new CustomEvent(_0x4b39de['KAUlk'],{'bubbles':!![]}));_0x8738c9['dispatchEvent'](new CustomEvent(_0x4b39de['CbcbD'],{'bubbles':!![]}));_0x4b39de['urhsi'](expect,_0x2013f1)['toEqual'](['command-1',_0x4b39de['CbcbD']]);_0x2013f1=[];_0x3391b5['dispose']();_0x8738c9['dispatchEvent'](new CustomEvent(_0x4b39de['KAUlk'],{'bubbles':!![]}));_0x8738c9['dispatchEvent'](new CustomEvent(_0x4b39de['CbcbD'],{'bubbles':!![]}));_0x4b39de['urhsi'](expect,_0x2013f1)['toEqual']([]);});_0x23cded['SOFcc'](it,_0x23cded['GuyeF'],()=>{const _0x3d6253=[];_0x466a10['onDidDispatch'](_0x148be1=>_0x3d6253['push'](['onDidDispatch',_0x148be1]));_0x466a10['add']('.grandchild',_0x23cded['fEXle'],_0x4175b4=>_0x3d6253['push'](['listener',_0x4175b4]));_0x466a10['onWillDispatch'](_0x24ced8=>_0x3d6253['push'](['onWillDispatch',_0x24ced8]));_0x8738c9['dispatchEvent'](new CustomEvent('command',{'bubbles':!![]}));_0x23cded['NkYGl'](expect,_0x3d6253[0x0][0x0])['toBe']('onWillDispatch');_0x23cded['NkYGl'](expect,_0x3d6253[0x1][0x0])['toBe']('listener');_0x23cded['RCzOa'](expect,_0x3d6253[0x2][0x0])['toBe'](_0x23cded['LmZES']);expect(_0x23cded['PadFZ'](_0x3d6253[0x0][0x1],_0x3d6253[0x1][0x1])&&_0x23cded['PadFZ'](_0x3d6253[0x1][0x1],_0x3d6253[0x2][0x1]))['toBe'](!![]);_0x23cded['ERQfG'](expect,_0x3d6253[0x0][0x1]['constructor'])['toBe'](CustomEvent);_0x23cded['ERQfG'](expect,_0x3d6253[0x0][0x1]['target'])['toBe'](_0x8738c9);});}else{function _0x57d1a4(){}_0x57d1a4['displayName']=_0x4b39de['Xldrb'];_0x57d1a4['metadata']={'some':_0x4b39de['MJDZs'],'object':_0x4b39de['daskU']};_0x466a10['add'](_0x4b39de['Iblbu'],_0x4b39de['QCZuQ'],_0x57d1a4);const _0x3c148e=_0x466a10['findCommands']({'target':_0x8738c9});_0x4b39de['mxWkd'](expect,_0x3c148e)['toEqual']([{'displayName':_0x4b39de['Xldrb'],'metadata':{'some':'other','object':'data'},'name':_0x4b39de['QCZuQ']}]);}});describe(_0x23cded['wkiKy'],()=>{var _0x15ecc6={'LULXl':_0x23cded['CBxYQ'],'OvCNa':_0x23cded['IyOqY'],'VZClm':function(_0x2fa693,_0x2810d2){return _0x23cded['hgbEI'](_0x2fa693,_0x2810d2);},'dKSlF':function(_0x2eff0a,_0x4dda03){return _0x23cded['LMDeU'](_0x2eff0a,_0x4dda03);},'gvMpC':_0x23cded['qzecB'],'gRzpW':'Cannot register a command with a null listener.'};if(_0x23cded['aIEyQ'](_0x23cded['CujFX'],_0x23cded['CujFX'])){calls['push'](_0x15ecc6['LULXl']);}else{_0x23cded['CzPFi'](it,_0x23cded['ztTYN'],()=>{var _0x358daf={'iNfPs':'div','RAvPm':'grandchild','nfdPX':'child','REKtv':_0x23cded['gjFMg'],'FgTrn':_0x23cded['KECLi'],'kAfMY':'.parent','WXHWh':_0x23cded['fEXle'],'nImED':'.child','iybjx':function(_0x378d70,_0x2157d0,_0x46e16e){return _0x23cded['CzPFi'](_0x378d70,_0x2157d0,_0x46e16e);},'OIpkV':_0x23cded['oLnKz'],'jevaU':function(_0x592f87,_0x45cf29){return _0x23cded['aTWwf'](_0x592f87,_0x45cf29);},'eLnWF':'child-2'};if(_0x23cded['aIEyQ'](_0x23cded['SwzRv'],_0x23cded['jxjXL'])){const _0x46070c='<>';let _0x926928=null;try{if(_0x23cded['emtUp']('lMDSq','lMDSq')){_0x466a10['add'](_0x46070c,_0x23cded['IyOqY'],()=>{});}else{var _0x14753c='2|0|3|9|7|4|1|5|6|10|8'['split']('|'),_0x19c459=0x0;while(!![]){switch(_0x14753c[_0x19c459++]){case'0':_0x206c77=document['createElement'](_0x358daf['iNfPs']);continue;case'1':_0x206c77['appendChild'](_0x8738c9);continue;case'2':_0xa32cd8=document['createElement'](_0x358daf['iNfPs']);continue;case'3':_0x8738c9=document['createElement']('div');continue;case'4':_0x8738c9['classList']['add'](_0x358daf['RAvPm']);continue;case'5':_0xa32cd8['appendChild'](_0x206c77);continue;case'6':document['querySelector']('#jasmine-content')['appendChild'](_0xa32cd8);continue;case'7':_0x206c77['classList']['add'](_0x358daf['nfdPX']);continue;case'8':_0x466a10['attach'](_0xa32cd8);continue;case'9':_0xa32cd8['classList']['add'](_0x358daf['REKtv']);continue;case'10':_0x466a10=new CommandRegistry();continue;}break;}}}catch(_0x5530df){_0x926928=_0x5530df;}_0x23cded['zJsov'](expect,_0x926928['message'])['toContain'](_0x46070c);}else{const _0x165fb7=[];_0x466a10['add'](_0x358daf['kAfMY'],_0x358daf['WXHWh'],()=>_0x165fb7['push']('parent'));_0x466a10['add'](_0x358daf['nImED'],_0x358daf['WXHWh'],()=>_0x165fb7['push']('child-2'));_0x466a10['add']('.child',_0x358daf['WXHWh'],_0x19c6c3=>{_0x165fb7['push'](_0x358daf['FgTrn']);_0x19c6c3['stopPropagation']();});const _0x2bb073=new CustomEvent(_0x358daf['WXHWh'],{'bubbles':!![]});_0x358daf['iybjx'](spyOn,_0x2bb073,_0x358daf['OIpkV']);_0x8738c9['dispatchEvent'](_0x2bb073);_0x358daf['jevaU'](expect,_0x165fb7)['toEqual']([_0x358daf['FgTrn'],_0x358daf['eLnWF']]);_0x358daf['jevaU'](expect,_0x2bb073['stopPropagation'])['toHaveBeenCalled']();}});_0x23cded['CzPFi'](it,_0x23cded['pStVb'],()=>{var _0x25f5bc={'ibJXJ':'command','XJBlM':function(_0x56c0ae,_0x55f391){return _0x15ecc6['VZClm'](_0x56c0ae,_0x55f391);},'KcXdS':function(_0x7af8ca,_0x337ba1){return _0x7af8ca(_0x337ba1);},'PiHJv':function(_0x33b12d,_0x53e8d0){return _0x15ecc6['VZClm'](_0x33b12d,_0x53e8d0);}};if(_0x15ecc6['dKSlF']('jXOWD',_0x15ecc6['gvMpC'])){const _0x542fed=null;_0x15ecc6['VZClm'](expect,()=>{_0x466a10['add']('.selector',_0x15ecc6['OvCNa'],_0x542fed);})['toThrow'](new Error(_0x15ecc6['gRzpW']));}else{expect(this)['toBe'](_0x8738c9);expect(event['type'])['toBe'](_0x25f5bc['ibJXJ']);_0x25f5bc['XJBlM'](expect,event['eventPhase'])['toBe'](Event['BUBBLING_PHASE']);_0x25f5bc['KcXdS'](expect,event['target'])['toBe'](_0x8738c9);_0x25f5bc['PiHJv'](expect,event['currentTarget'])['toBe'](_0x8738c9);called=!![];}});_0x23cded['UNHqj'](it,_0x23cded['haOlh'],()=>{var _0x10d51a={'iEmXn':'foo:bar'};if(_0x23cded['VNRPa']==='BMVIl'){const _0x3cb43c=null;_0x23cded['zJsov'](expect,()=>{_0x466a10['add'](document['body'],_0x10d51a['iEmXn'],_0x3cb43c);})['toThrow'](new Error('Cannot\x20register\x20a\x20command\x20with\x20a\x20null\x20listener.'));}else{calls['push']('child-1');event['stopImmediatePropagation']();}});_0x23cded['UNHqj'](it,'throws an error when called with an object listener without a didDispatch method',()=>{var _0x1385de={'CduDZ':function(_0x7bbd73,_0x1ccc11){return _0x7bbd73(_0x1ccc11);},'KFKUI':_0x23cded['fjLju'],'QiKFC':_0x23cded['kWadi'],'fqaTf':_0x23cded['fEXle'],'MFFmM':function(_0x5cf7be,_0x24b380){return _0x23cded['zJsov'](_0x5cf7be,_0x24b380);},'Lkzxm':'parent','bUWNC':function(_0x38b855,_0x43400a){return _0x23cded['OQdYb'](_0x38b855,_0x43400a);},'hdqla':'pROWX','JVqUM':_0x23cded['IyOqY']};const _0x16dd09={'title':_0x23cded['darzk'],'description':'this should throw an error'};_0x23cded['owujh'](expect,()=>{var _0x5238dc={'uDSyP':function(_0x428381,_0x48860f){return _0x428381(_0x48860f);},'PARXi':'parent'};if(_0x1385de['bUWNC']('pROWX',_0x1385de['hdqla'])){_0x466a10['add'](document['body'],_0x1385de['JVqUM'],_0x16dd09);}else{var _0x1b9b06={'dGifW':function(_0x10b31f,_0x516507){return _0x10b31f(_0x516507);},'WuZkY':function(_0x3fb5d0,_0x564fdd){return _0x1385de['CduDZ'](_0x3fb5d0,_0x564fdd);},'RTLVm':_0x1385de['KFKUI']};const _0xa3de42=[];_0x466a10['add'](_0x1385de['QiKFC'],'command',function(_0x26a748){_0x1b9b06['dGifW'](expect,this)['toBe'](_0x206c77);_0x1b9b06['dGifW'](expect,_0x26a748['target'])['toBe'](_0x8738c9);_0x1b9b06['WuZkY'](expect,_0x26a748['currentTarget'])['toBe'](_0x206c77);_0xa3de42['push'](_0x1b9b06['RTLVm']);});_0x466a10['add']('.parent','command',function(_0x11084b){expect(this)['toBe'](_0xa32cd8);_0x5238dc['uDSyP'](expect,_0x11084b['target'])['toBe'](_0x8738c9);expect(_0x11084b['currentTarget'])['toBe'](_0xa32cd8);_0xa3de42['push'](_0x5238dc['PARXi']);});_0x8738c9['dispatchEvent'](new CustomEvent(_0x1385de['fqaTf'],{'bubbles':!![]}));_0x1385de['MFFmM'](expect,_0xa3de42)['toEqual']([_0x1385de['KFKUI'],_0x1385de['Lkzxm']]);}})['toThrow'](new Error(_0x23cded['KPilp']));});}});describe(_0x23cded['SYxKZ'],()=>{var _0xfac93b={'unQBQ':_0x23cded['AQcMf'],'pVqEB':_0x23cded['lYYZR'],'UADEk':_0x23cded['vFPgh'],'dBXzT':_0x23cded['IybDb'],'SGQix':'data','EDRot':_0x23cded['TQktM'],'Wdezs':_0x23cded['CSsvQ'],'OBOCx':_0x23cded['pIXKv'],'ZTzcy':function(_0x2d6df9,_0x4f4da7){return _0x2d6df9(_0x4f4da7);},'FSQah':_0x23cded['QgyKf'],'alVVa':_0x23cded['mLlCL'],'LISqn':function(_0x182fc1,_0x49ddba){return _0x23cded['hgbEI'](_0x182fc1,_0x49ddba);}};it(_0x23cded['Sgruw'],()=>{_0x466a10['add'](_0x23cded['rhiIA'],_0x23cded['lYYZR'],()=>{});_0x466a10['add'](_0x23cded['kWadi'],_0x23cded['mLlCL'],()=>{});_0x466a10['add'](_0x23cded['AQcMf'],_0x23cded['TQktM'],()=>{});_0x466a10['add'](_0x23cded['XrddF'],_0x23cded['xRcmx'],()=>{});_0x466a10['add'](_0x8738c9,_0x23cded['fzAkG'],()=>{});_0x466a10['add'](_0x206c77,_0x23cded['LokwX'],()=>{});const _0x1a58d8=_0x466a10['findCommands']({'target':_0x8738c9});const _0x299669=_['reject'](_0x1a58d8,_0x758e42=>_0x758e42['jQuery']);expect(_0x299669)['toEqual']([{'name':_0x23cded['fzAkG'],'displayName':_0x23cded['yZwak']},{'name':_0x23cded['TQktM'],'displayName':_0x23cded['SNnKp']},{'name':'namespace:inline-command-2','displayName':_0x23cded['xsmam']},{'name':_0x23cded['mLlCL'],'displayName':_0x23cded['cofyW']},{'name':_0x23cded['lYYZR'],'displayName':_0x23cded['QgyKf']}]);});it('returns command descriptors with arbitrary metadata if set in a listener object',()=>{_0x466a10['add'](_0xfac93b['unQBQ'],_0xfac93b['pVqEB'],()=>{});_0x466a10['add']('.grandchild','namespace:command-2',{'displayName':_0xfac93b['UADEk'],'metadata':{'some':_0xfac93b['dBXzT'],'object':_0xfac93b['SGQix']},'didDispatch'(){}});_0x466a10['add']('.grandchild',_0xfac93b['EDRot'],{'name':_0xfac93b['Wdezs'],'displayName':_0xfac93b['OBOCx'],'metadata':{'some':_0xfac93b['dBXzT'],'object':_0xfac93b['SGQix']},'didDispatch'(){}});const _0x874354=_0x466a10['findCommands']({'target':_0x8738c9});_0xfac93b['ZTzcy'](expect,_0x874354)['toEqual']([{'displayName':_0xfac93b['FSQah'],'name':'namespace:command-1'},{'displayName':'Custom\x20Command\x202','metadata':{'some':_0xfac93b['dBXzT'],'object':_0xfac93b['SGQix']},'name':'namespace:command-2'},{'displayName':'Custom Command 3','metadata':{'some':_0xfac93b['dBXzT'],'object':_0xfac93b['SGQix']},'name':_0xfac93b['EDRot']}]);});_0x23cded['AImhs'](it,_0x23cded['BMmHm'],()=>{function _0x16316f(){}_0x16316f['displayName']='Custom Command 2';_0x16316f['metadata']={'some':'other','object':_0xfac93b['SGQix']};_0x466a10['add'](_0xfac93b['unQBQ'],_0xfac93b['alVVa'],_0x16316f);const _0x229a32=_0x466a10['findCommands']({'target':_0x8738c9});_0xfac93b['LISqn'](expect,_0x229a32)['toEqual']([{'displayName':_0xfac93b['UADEk'],'metadata':{'some':_0xfac93b['dBXzT'],'object':_0xfac93b['SGQix']},'name':_0xfac93b['alVVa']}]);});});_0x23cded['mUltW'](describe,_0x23cded['PnBmN'],()=>{var _0x28644a={'KXysi':function(_0x1487a1,_0x2c2038){return _0x23cded['DOosn'](_0x1487a1,_0x2c2038);},'pHKXj':_0x23cded['fEXle'],'xSnFw':function(_0x2c68ea,_0x68c95e){return _0x23cded['FpfGe'](_0x2c68ea,_0x68c95e);},'LmPJC':function(_0x5597ca,_0x1cbf52,_0x31edbf){return _0x5597ca(_0x1cbf52,_0x31edbf);},'HrJTw':_0x23cded['IyOqY'],'WWOjl':function(_0xc5c5a8,_0x45e57d){return _0x23cded['kFqzh'](_0xc5c5a8,_0x45e57d);},'dfRFm':function(_0x1cee42,_0x7de1f3){return _0x1cee42(_0x7de1f3);},'frJaf':_0x23cded['pVHVs'],'fJRzW':_0x23cded['hdPcx'],'ZAzLO':function(_0x5145cf,_0x52261f){return _0x23cded['LMDeU'](_0x5145cf,_0x52261f);},'BEQCT':_0x23cded['fdvaL'],'DbLKM':_0x23cded['AQcMf']};it('simulates invocation of the given command ',()=>{var _0x2fb27e={'MektM':function(_0x8048e5,_0x479428,_0x3e5544){return _0x28644a['LmPJC'](_0x8048e5,_0x479428,_0x3e5544);}};if('xZzOZ'==='xZzOZ'){let _0x4dd5bf=![];_0x466a10['add']('.grandchild',_0x28644a['pHKXj'],function(_0x666a9){_0x28644a['KXysi'](expect,this)['toBe'](_0x8738c9);_0x28644a['KXysi'](expect,_0x666a9['type'])['toBe'](_0x28644a['pHKXj']);expect(_0x666a9['eventPhase'])['toBe'](Event['BUBBLING_PHASE']);_0x28644a['KXysi'](expect,_0x666a9['target'])['toBe'](_0x8738c9);_0x28644a['xSnFw'](expect,_0x666a9['currentTarget'])['toBe'](_0x8738c9);_0x4dd5bf=!![];});_0x466a10['dispatch'](_0x8738c9,'command');expect(_0x4dd5bf)['toBe'](!![]);}else{_0x2fb27e['MektM'](setTimeout,()=>{resolve(0x3);},0x1);}});it(_0x23cded['UzdKb'],()=>{if(_0x23cded['XZpbu'](_0x23cded['GJntQ'],_0x23cded['gQlgQ'])){_0x466a10['add']('.grandchild',_0x23cded['fEXle'],()=>{});_0x23cded['CwRgN'](expect,_0x466a10['dispatch'](_0x8738c9,'command')['constructor']['name'])['toBe'](_0x23cded['KGSJm']);expect(_0x466a10['dispatch'](_0x8738c9,'bogus'))['toBe'](null);_0x23cded['ICUXa'](expect,_0x466a10['dispatch'](_0xa32cd8,_0x23cded['fEXle']))['toBe'](null);}else{const _0x839209='<>';let _0xd6bd12=null;try{_0x466a10['add'](_0x839209,_0x28644a['HrJTw'],()=>{});}catch(_0x584eaf){_0xd6bd12=_0x584eaf;}_0x28644a['WWOjl'](expect,_0xd6bd12['message'])['toContain'](_0x839209);}});_0x23cded['AImhs'](it,'returns a promise that resolves when the listeners resolve',async()=>{var _0x3915cb={'BYSan':_0x28644a['HrJTw'],'TVSGL':function(_0x618bed,_0x45092b){return _0x28644a['dfRFm'](_0x618bed,_0x45092b);},'eSePc':function(_0x3a4703,_0x35b76d){return _0x3a4703!==_0x35b76d;},'fDJuZ':_0x28644a['frJaf'],'ZfrNs':_0x28644a['fJRzW']};if(_0x28644a['ZAzLO'](_0x28644a['BEQCT'],'zteZh')){addError=error;}else{jasmine['useRealClock']();_0x466a10['add'](_0x28644a['DbLKM'],_0x28644a['pHKXj'],()=>0x1);_0x466a10['add'](_0x28644a['DbLKM'],_0x28644a['pHKXj'],()=>Promise['resolve'](0x2));_0x466a10['add'](_0x28644a['DbLKM'],'command',()=>new Promise(_0x22caff=>{var _0x4fac99={'MYUFF':_0x3915cb['BYSan'],'xtpbY':function(_0x596c32,_0x32bb68){return _0x3915cb['TVSGL'](_0x596c32,_0x32bb68);},'tlZGV':'Cannot register a command with a null listener.'};if(_0x3915cb['eSePc'](_0x3915cb['fDJuZ'],_0x3915cb['ZfrNs'])){setTimeout(()=>{_0x22caff(0x3);},0x1);}else{var _0x4e490f={'MEiSW':_0x4fac99['MYUFF']};const _0x23444e=null;_0x4fac99['xtpbY'](expect,()=>{_0x466a10['add']('.selector',_0x4e490f['MEiSW'],_0x23444e);})['toThrow'](new Error(_0x4fac99['tlZGV']));}}));const _0x1bc895=await _0x466a10['dispatch'](_0x8738c9,_0x28644a['pHKXj']);expect(_0x1bc895)['toEqual']([0x3,0x2,0x1]);}});it('returns\x20a\x20promise\x20that\x20rejects\x20when\x20a\x20listener\x20is\x20rejected',async()=>{var _0x3332b5={'DGKRH':'foo','tZjdG':_0x23cded['QbxIR'],'JkLCs':'command','syboV':'.foo.bar','LfTVG':_0x23cded['lNPya'],'LHRLn':function(_0x53a018,_0x23fa0d){return _0x53a018(_0x23fa0d);},'qSyMB':_0x23cded['gjFMg']};if(_0x23cded['crbky'](_0x23cded['gGkfb'],_0x23cded['gGkfb'])){_0x206c77['classList']['add'](_0x3332b5['DGKRH'],_0x3332b5['tZjdG']);const _0xa6c3c8=[];_0x466a10['add']('.foo.bar','command',()=>_0xa6c3c8['push']('.foo.bar'));_0x466a10['add']('.foo',_0x3332b5['JkLCs'],()=>_0xa6c3c8['push']('.foo'));_0x466a10['add']('.bar','command',()=>_0xa6c3c8['push']('.bar'));_0x8738c9['dispatchEvent'](new CustomEvent(_0x3332b5['JkLCs'],{'bubbles':!![]}));expect(_0xa6c3c8)['toEqual']([_0x3332b5['syboV'],'.bar',_0x3332b5['LfTVG']]);}else{jasmine['useRealClock']();_0x466a10['add'](_0x23cded['AQcMf'],_0x23cded['fEXle'],()=>0x1);_0x466a10['add'](_0x23cded['AQcMf'],_0x23cded['fEXle'],()=>Promise['resolve'](0x2));_0x466a10['add'](_0x23cded['AQcMf'],'command',()=>new Promise((_0x2587d6,_0x3e9ac9)=>{var _0x1dd2ae={'BmBxF':function(_0x54da88,_0x55ddf9){return _0x54da88(_0x55ddf9);}};setTimeout(()=>{_0x1dd2ae['BmBxF'](_0x3e9ac9,0x3);},0x1);}));let _0x188f05;try{if(_0x23cded['LMDeU']('STkVq',_0x23cded['FMOvR'])){expect(this)['toBe'](_0xa32cd8);_0x3332b5['LHRLn'](expect,event['target'])['toBe'](_0x8738c9);expect(event['currentTarget'])['toBe'](_0xa32cd8);calls['push'](_0x3332b5['qSyMB']);}else{_0x188f05=await _0x466a10['dispatch'](_0x8738c9,_0x23cded['fEXle']);}}catch(_0x30d3f7){_0x188f05=_0x30d3f7;}_0x23cded['ICUXa'](expect,_0x188f05)['toBe'](0x3);}});});_0x23cded['mUltW'](describe,_0x23cded['OnHwq'],()=>it('removes all command handlers except for those in the snapshot',()=>{if(_0x23cded['LhQwF']!==_0x23cded['LhQwF']){_0x466a10['add'](_0x23cded['xfXgT'],_0x23cded['IyOqY'],badCallback);}else{_0x466a10['add'](_0x23cded['rhiIA'],_0x23cded['lYYZR'],()=>{});_0x466a10['add']('.child',_0x23cded['mLlCL'],()=>{});const _0x275b7d=_0x466a10['getSnapshot']();_0x466a10['add'](_0x23cded['AQcMf'],_0x23cded['TQktM'],()=>{});_0x23cded['hbFnE'](expect,_0x466a10['findCommands']({'target':_0x8738c9})['slice'](0x0,0x3))['toEqual']([{'name':_0x23cded['TQktM'],'displayName':'Namespace:\x20Command\x203'},{'name':_0x23cded['mLlCL'],'displayName':_0x23cded['cofyW']},{'name':'namespace:command-1','displayName':_0x23cded['QgyKf']}]);_0x466a10['restoreSnapshot'](_0x275b7d);expect(_0x466a10['findCommands']({'target':_0x8738c9})['slice'](0x0,0x2))['toEqual']([{'name':_0x23cded['mLlCL'],'displayName':_0x23cded['cofyW']},{'name':_0x23cded['lYYZR'],'displayName':'Namespace: Command 1'}]);_0x466a10['add'](_0x23cded['AQcMf'],'namespace:command-3',()=>{});_0x466a10['restoreSnapshot'](_0x275b7d);_0x23cded['URQLZ'](expect,_0x466a10['findCommands']({'target':_0x8738c9})['slice'](0x0,0x2))['toEqual']([{'name':_0x23cded['mLlCL'],'displayName':_0x23cded['cofyW']},{'name':_0x23cded['lYYZR'],'displayName':_0x23cded['QgyKf']}]);}}));_0x23cded['FyIfO'](describe,_0x23cded['JjJrK'],()=>it('adds\x20event\x20listeners\x20for\x20any\x20previously-added\x20commands',()=>{if(_0x23cded['LMDeU']('aYNvW',_0x23cded['nCMaE'])){const _0x55bd7e=new CommandRegistry();const _0x5f282a=jasmine['createSpy']('command-callback');_0x55bd7e['add'](_0x23cded['AQcMf'],_0x23cded['CBxYQ'],_0x5f282a);_0x8738c9['dispatchEvent'](new CustomEvent('command-1',{'bubbles':!![]}));_0x23cded['URQLZ'](expect,_0x5f282a)['not']['toHaveBeenCalled']();_0x55bd7e['attach'](_0xa32cd8);_0x8738c9['dispatchEvent'](new CustomEvent('command-1',{'bubbles':!![]}));expect(_0x5f282a)['toHaveBeenCalled']();}else{value=err;}}));});