import{Meteor}from'meteor/meteor';import _0x2a0247 from'underscore';import{getRoles}from'./getRoles';import{Users,Roles}from'../../../models';export const addUserRoles=(userId,roleNames,scope)=>{var TUnTiT={'dBkmg':function(x,y){return x||y;},'FVLAn':'Invalid user','aEWzH':'RocketChat.authz.addUserRoles','xrAmq':function(callee){return callee();},'OWVet':'_id'};if(TUnTiT['dBkmg'](!userId,!roleNames)){return![];}const user=Users['db']['findOneById'](userId);if(!user){throw new Meteor[('Error')]('error-invalid-user',TUnTiT['FVLAn'],{'function':TUnTiT['aEWzH']});}roleNames=[]['concat'](roleNames);const existingRoleNames=_0x2a0247['pluck'](TUnTiT['xrAmq'](getRoles),TUnTiT['OWVet']);const invalidRoleNames=_0x2a0247['difference'](roleNames,existingRoleNames);if(!_0x2a0247['isEmpty'](invalidRoleNames)){for(const role of invalidRoleNames){Roles['createOrUpdate'](role);}}Roles['addUserRoles'](userId,roleNames,scope);return!![];};