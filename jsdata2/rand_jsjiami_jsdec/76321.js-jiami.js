import{Meteor}from'meteor/meteor';import{Tracker}from'meteor/tracker';class Notifications{constructor(...args){var sEpdCE={'mgTty':'RocketChat.Notifications: notifyRoom','nWMne':function(x,y){return x===y;},'SWpeO':'QHGWQ','HKTTi':'lnwOS','UoxYi':function(x,y){return x!==y;},'cxadg':'RocketChat.Notifications:\x20onAll','nZEQk':function(x,y){return x!==y;},'qQknD':'notify-all','CJunx':'notify-logged','CozsJ':'notify-room','TEeDt':'notify-room-users','PkUyI':'notify-user','lclol':function(x,y){return x===y;},'iQjlT':'kIwJR'};this['logged']=sEpdCE['nZEQk'](Meteor['userId'](),null);this['loginCb']=[];Tracker['autorun'](()=>{var YMwXhf={'Kgyeh':sEpdCE['mgTty']};if(sEpdCE['nWMne'](sEpdCE['SWpeO'],sEpdCE['HKTTi'])){if(this['debug']===!![]){console['log'](YMwXhf['Kgyeh'],[room,eventName,...args]);}args['unshift'](room+'/'+eventName);return this['streamRoom']['emit']['apply'](this['streamRoom'],args);}else{if(Meteor['userId']()!==null&&this['logged']===![]){this['loginCb']['forEach'](cb=>cb());}this['logged']=sEpdCE['UoxYi'](Meteor['userId'](),null);}});this['debug']=![];this['streamAll']=new Meteor[('Streamer')](sEpdCE['qQknD']);this['streamLogged']=new Meteor['Streamer'](sEpdCE['CJunx']);this['streamRoom']=new Meteor[('Streamer')](sEpdCE['CozsJ']);this['streamRoomUsers']=new Meteor['Streamer'](sEpdCE['TEeDt']);this['streamUser']=new Meteor[('Streamer')](sEpdCE['PkUyI']);if(sEpdCE['nWMne'](this['debug'],!![])){if(sEpdCE['lclol'](sEpdCE['iQjlT'],sEpdCE['iQjlT'])){this['onAll'](function(){return console['log'](sEpdCE['cxadg'],args);});this['onUser'](function(){return console['log']('RocketChat.Notifications:\x20onAll',args);});}else{return this['streamAll']['on'](eventName,callback);}}}['onLogin'](cb){var qQFcPP={'fSzJO':function(callee){return callee();}};this['loginCb']['push'](cb);if(this['logged']){return qQFcPP['fSzJO'](cb);}}['notifyRoom'](room,eventName,...args){var McbLaK={'FkeEJ':function(x,y){return x===y;},'PxhqU':'RocketChat.Notifications: notifyRoom'};if(McbLaK['FkeEJ'](this['debug'],!![])){console['log'](McbLaK['PxhqU'],[room,eventName,...args]);}args['unshift'](room+'/'+eventName);return this['streamRoom']['emit']['apply'](this['streamRoom'],args);}['notifyUser'](userId,eventName,...args){var CGqyDj={'sTYhD':function(x,y){return x===y;},'RHjOd':'RocketChat.Notifications: notifyUser'};if(CGqyDj['sTYhD'](this['debug'],!![])){console['log'](CGqyDj['RHjOd'],[userId,eventName,...args]);}args['unshift'](userId+'/'+eventName);return this['streamUser']['emit']['apply'](this['streamUser'],args);}['notifyUsersOfRoom'](room,eventName,...args){var hSQtPm={'TggYI':function(x,y){return x===y;},'FPLGi':'NdeAA','lAikw':'RocketChat.Notifications: notifyUsersOfRoom'};if(hSQtPm['TggYI'](this['debug'],!![])){if(hSQtPm['FPLGi']!==hSQtPm['FPLGi']){return console['log']('RocketChat.Notifications: onAll',args);}else{console['log'](hSQtPm['lAikw'],[room,eventName,...args]);}}args['unshift'](room+'/'+eventName);return this['streamRoomUsers']['emit']['apply'](this['streamRoomUsers'],args);}['onAll'](eventName,callback){return this['streamAll']['on'](eventName,callback);}['onLogged'](eventName,callback){return this['onLogin'](()=>this['streamLogged']['on'](eventName,callback));}['onRoom'](room,eventName,callback){var jcexjl={'WyfHL':function(x,y){return x===y;}};if(jcexjl['WyfHL'](this['debug'],!![])){this['streamRoom']['on'](room,function(){return console['log']('RocketChat.Notifications: onRoom '+room,[room,eventName,callback]);});}return this['streamRoom']['on'](room+'/'+eventName,callback);}async['onUser'](eventName,callback){await this['streamUser']['on'](Meteor['userId']()+'/'+eventName,callback);return()=>this['unUser'](eventName,callback);}['unAll'](callback){var zegAKE={'TVTQl':'notify'};return this['streamAll']['removeListener'](zegAKE['TVTQl'],callback);}['unLogged'](callback){var qutadD={'PjZLe':'notify'};return this['streamLogged']['removeListener'](qutadD['PjZLe'],callback);}['unRoom'](room,eventName,callback){return this['streamRoom']['removeListener'](room+'/'+eventName,callback);}['unUser'](eventName,callback){return this['streamUser']['removeListener'](Meteor['userId']()+'/'+eventName,callback);}}export default new Notifications();