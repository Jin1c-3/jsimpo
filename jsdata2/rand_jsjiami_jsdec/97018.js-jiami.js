'use strict';const http2Server=require('http2');const httpServer=require('http-server');const {existsSync,statSync,createReadStream}=require('fs');const {join}=require('path');const argv=require('minimist')(process['argv']['slice'](0x2));const mime=require('mime');function sendFile(_0x1e85d2,_0x12fd67){var _0x44ac5b={'HbCEV':'finish'};_0x12fd67['setHeader']('Content-Type',mime['lookup'](_0x1e85d2));_0x12fd67['writeHead'](0xc8);const _0x2ad6af=createReadStream(_0x1e85d2);_0x2ad6af['pipe'](_0x12fd67);_0x2ad6af['on'](_0x44ac5b['HbCEV'],_0x12fd67['end']);}function createHTTP2Server(_0x421869){var _0x104309={'uCkhp':function(_0xb2f3dc,_0xd3343e,_0x2f12ff,_0x5c6472,_0xa5be63){return _0xb2f3dc(_0xd3343e,_0x2f12ff,_0x5c6472,_0xa5be63);},'xkEfZ':'benchmarks','EOOTc':function(_0x4c6adf,_0x6a47ba,_0x22de46){return _0x4c6adf(_0x6a47ba,_0x22de46);},'bGeLG':function(_0x2af7f7,_0x1f74a5,_0xb64d45){return _0x2af7f7(_0x1f74a5,_0xb64d45);},'WBUZw':'index.html'};const _0x4ddc34=http2Server['createServer']({},(_0x399b92,_0xb2e495)=>{const _0x227180=_0x104309['uCkhp'](join,__dirname,_0x104309['xkEfZ'],_0x421869,_0x399b92['url'])['replace'](/\?.*/g,'');if(existsSync(_0x227180)&&statSync(_0x227180)['isFile']()){_0x104309['EOOTc'](sendFile,_0x227180,_0xb2e495);}else{const _0x56425f=_0x104309['bGeLG'](join,_0x227180,_0x104309['WBUZw']);if(existsSync(_0x56425f)){_0x104309['bGeLG'](sendFile,_0x56425f,_0xb2e495);}else{_0xb2e495['writeHead'](0x194);_0xb2e495['end']();}}});_0x4ddc34['listen'](0x1f90);return _0x4ddc34;}function createHTTPServer(){var _0x11a5a2={'Udjyz':function(_0x4254af,_0x47e82b,_0x5d7dbb){return _0x4254af(_0x47e82b,_0x5d7dbb);},'QDTyC':'no-store','YjOEn':'true'};const _0x421bf2=httpServer['createServer']({'root':_0x11a5a2['Udjyz'](join,__dirname,'benchmarks'),'robots':!![],'cache':_0x11a5a2['QDTyC'],'headers':{'Access-Control-Allow-Origin':'*','Access-Control-Allow-Credentials':_0x11a5a2['YjOEn']}});_0x421bf2['listen'](0x1f90);return _0x421bf2;}function serveBenchmark(_0x45c3d6,_0x184e92){var _0x3437e9={'jKxzB':function(_0x4b7f40,_0x2e5ea6,_0x87bbf2){return _0x4b7f40(_0x2e5ea6,_0x87bbf2);},'CLxDh':function(_0x389358,_0x244295){return _0x389358(_0x244295);},'ZclEf':function(_0x202317,_0x57c3c4){return _0x202317===_0x57c3c4;},'CsxnD':'NXTSm','mLolI':function(_0x3bc7bc){return _0x3bc7bc();}};if(_0x184e92){return _0x3437e9['CLxDh'](createHTTP2Server,_0x45c3d6);}else{if(_0x3437e9['ZclEf']('yWlEA',_0x3437e9['CsxnD'])){const _0xf51dc=_0x3437e9['jKxzB'](join,filename,'index.html');if(_0x3437e9['CLxDh'](existsSync,_0xf51dc)){sendFile(_0xf51dc,response);}else{response['writeHead'](0x194);response['end']();}}else{return _0x3437e9['mLolI'](createHTTPServer);}}}if(require['main']===module){const benchmarkInput=argv['_'][0x0];if(benchmarkInput){serveBenchmark(benchmarkInput);}else{console['error']('Please specify a benchmark directory to serve!');process['exit'](0x1);}}module['exports']=serveBenchmark;