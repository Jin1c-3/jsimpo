const vip = 'vip.v6';
const _0x5736 = ['vip.v6', 'McOLV8O6wpzCt8KxKEg=', 'wpNwwqjCg8K8wrlaI1jDiMOiYRV6acOoPMKWw6LCkA==', 'RU7DlFvCucO5GsKWwo7CkVVJE1fDlcKYw6Q6wpTDhcOKecK6w45B', 'wqPDimPCnMOySR9iwo7CinPCmsOEw5PCnSgb', 'wqJSHE/DlsOuCMKoAMO6bMO9', 'FsKHO8KIQMOGMg==', 'w4A6MMKYCsKHwobCnUhoJWzChVhxw47CmsOdHsOFwqJNw6fDqcKgw4bCvVVowoDDt2l+w7TCkDHCgjrCoSYYwoHCscKdwqrCtnF/w5jDosO4acKNOMK5', 'w5rDjcKiwpTDvsOUwpTCpyXCoV7CjQHCmWs5wrZkTcKjw7LDtW/DgmzDh8Kew6TDtmDDnHTCscKIw7zDj8OyBS7CvU0NXMKdwrQ7wrDCiQ==', 'woTDm2XCtsOgQxR4wog=', 'wpIqJcOpw5I=', 'w7MMw6AzfA==', 'w5Zwcg==', 'w6PDrjUAHg==', 'wro6w5sGHyzDkVZ5Rw==', 'wrDDoMKWwqVew7/CoMKuGcOFZAzCkk7CjhhaYjBqw7LDugnDhHvCtsKUw4FRPgNbwqzDmwvChmkcRTgDw7bDpsOFWcONwrlLEQ==', 'woTCi8OcWx3Cj8Knw7fCvMKvwptNwo5S', 'LMOZXA==', 'wpXChsOeUQXCssKxw5XCnMKpwphYwp9F', 'w5NsZw==', 'XgnDpMOVV8ORR8KLXMOiW8O/wojCggvCs8KUw6HDkA==', 'eWHCuQ==', 'jviSpLITU.v6NjOLsDMHjwU=='];
(function (_0x419428, _0x2349d8, _0x168399) {
  const _0x1dedcc = function (_0x21ad69, _0x1e76d8, _0x182a0b, _0x24388c, _0x131e1e) {
    _0x1e76d8 = _0x1e76d8 >> 0x8, _0x131e1e = 'po';const _0x24a171 = 'shift';
    const _0xdd8f50 = 'push';
    if (_0x1e76d8 < _0x21ad69) {
      while (--_0x21ad69) {
        _0x24388c = _0x419428.shift();if (_0x1e76d8 === _0x21ad69) {
          _0x1e76d8 = _0x24388c;_0x182a0b = _0x419428.pop();
        } else if (_0x1e76d8 && _0x182a0b.replace(/[jSLITUNjOLsDMHjwU=]/g, '') === _0x1e76d8) {
          _0x419428.push(_0x24388c);
        }
      }_0x419428.push(_0x419428.shift());
    }return 0xa3226;
  };

  return _0x1dedcc(++_0x2349d8, _0x168399) >> _0x2349d8 ^ _0x168399;
})(_0x5736, 0x112, 0x11200);
const _0x2fa8 = function (_0x2f9c7a, _0x5c4745) {
  _0x2f9c7a = ~~'0x'.concat(_0x2f9c7a);var _0x5877c7 = _0x5736[_0x2f9c7a];
  if (_0x2fa8.HoeIDL === undefined) {
    (function () {
      const _0x3aa75d = typeof window !== 'undefined' ? window : typeof process === 'object' && typeof require === 'function' && typeof global === 'object' ? global : this;

      const _0x151a64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
      _0x3aa75d.atob || (_0x3aa75d['atob'] = function (_0x7eac21) {
        const _0x2941f0 = String(_0x7eac21).replace(/=+$/, '');

        // Unknown loop control variable
        for (var _0x4a1cf1 = 0x0, _0xd85c5c, _0xe9cc38, _0x4cbb25 = 0x0, _0x32155d = ''; _0xe9cc38 = _0x2941f0.charAt(_0x4cbb25++); ~_0xe9cc38 && (_0xd85c5c = _0x4a1cf1 % 0x4 ? _0xd85c5c * 0x40 + _0xe9cc38 : _0xe9cc38, _0x4a1cf1++ % 0x4) ? _0x32155d += String.fromCharCode(0xff & _0xd85c5c >> (-2 * _0x4a1cf1 & 0x6)) : 0x0) {
          _0xe9cc38 = _0x151a64.indexOf(_0xe9cc38);
        }return _0x32155d;
      });
    })();
    const _0x10be84 = function (_0x27b55f, _0x5c4745) {
      const _0x33c097 = [];
      var _0x3e0236 = 0x0;

      var _0x2f0121;

      var _0x5254c0 = '';
      var _0x16b1e0 = '';
      _0x27b55f = atob(_0x27b55f); // Unknown loop control variable
      for (var _0x46f0ac = 0x0, _0x5b48f9 = _0x27b55f.length; _0x46f0ac < _0x5b48f9; _0x46f0ac++) {
        _0x16b1e0 += '%' + ('00' + _0x27b55f.charCodeAt(_0x46f0ac).toString(0x10)).slice(-2);
      }_0x27b55f = decodeURIComponent(_0x16b1e0); // Unevaluable statement in loop: AssignmentExpression
      for (var _0x3bfff2 = 0x0; _0x3bfff2 < 0x100; _0x3bfff2++) {
        _0x33c097[_0x3bfff2] = _0x3bfff2;
      } // Unknown loop control variable
      for (_0x3bfff2 = 0x0; _0x3bfff2 < 0x100; _0x3bfff2++) {
        _0x3e0236 = (_0x3e0236 + _0x33c097[_0x3bfff2] + _0x5c4745.charCodeAt(_0x3bfff2 % _0x5c4745.length)) % 0x100;_0x2f0121 = _0x33c097[_0x3bfff2];_0x33c097[_0x3bfff2] = _0x33c097[_0x3e0236];_0x33c097[_0x3e0236] = _0x2f0121;
      }_0x3bfff2 = 0x0;_0x3e0236 = 0x0; // Unevaluable loop test expression
      for (var _0x456c80 = 0x0; _0x456c80 < _0x27b55f.length; _0x456c80++) {
        _0x3bfff2 = (_0x3bfff2 + 0x1) % 0x100;_0x3e0236 = (_0x3e0236 + _0x33c097[_0x3bfff2]) % 0x100;_0x2f0121 = _0x33c097[_0x3bfff2];_0x33c097[_0x3bfff2] = _0x33c097[_0x3e0236];_0x33c097[_0x3e0236] = _0x2f0121;_0x5254c0 += String.fromCharCode(_0x27b55f.charCodeAt(_0x456c80) ^ _0x33c097[(_0x33c097[_0x3bfff2] + _0x33c097[_0x3e0236]) % 0x100]);
      }return _0x5254c0;
    };

    _0x2fa8['IUFFgg'] = _0x10be84;_0x2fa8['WgdFrj'] = {};_0x2fa8['HoeIDL'] = true;
  }const _0x268e20 = _0x2fa8.WgdFrj[_0x2f9c7a];
  if (_0x268e20 === undefined) {
    if (_0x2fa8.HQmOpk === undefined) {
      _0x2fa8['HQmOpk'] = true;
    }_0x5877c7 = _0x2fa8.IUFFgg(_0x5877c7, _0x5c4745);_0x2fa8.WgdFrj[_0x2f9c7a] = _0x5877c7;
  } else {
    _0x5877c7 = _0x268e20;
  }return _0x5877c7;
};

var { i18n } = require(_0x2fa8('0', ']$hP'));

const urlUtils = require(_0x2fa8('1', 'zCeS'));

const logging = require(_0x2fa8('2', '@80&'));

const errors = require('@tryghost/errors');

const middleware = require('./lib/middleware');

const router = require(_0x2fa8('3', '$goN'));

const registerHelpers = require('./lib/helpers');

const PRIVATE_KEYWORD = _0x2fa8('4', 'hITL');

const checkSubdir = function checkSubdir() {
  const _0x23b75f = { 'EOgJI': function (_0x5f363e, _0x59f060) {
      return _0x5f363e === _0x59f060;
    }, 'siGeD': _0x2fa8('5', 'R#iO'), 'zKknj': _0x2fa8('6', 'AEwM') };
  var _0x55ac05 = '';
  if (urlUtils[_0x2fa8('7', '@80&')]()) {
    _0x55ac05 = urlUtils.getSubdir()[_0x2fa8('8', 'xADg')]('/');if (_0x23b75f[_0x2fa8('9', 'zeNv')](_0x55ac05[_0x2fa8('a', 'glPR')](), PRIVATE_KEYWORD)) {
      logging[_0x2fa8('b', 'NqY4')](new errors[_0x2fa8('c', 'Hfo[')]({ 'message': i18n.t(_0x2fa8('d', 'PTsX')), 'context': i18n.t(_0x23b75f.siGeD), 'help': i18n.t(_0x23b75f.zKknj) }));process.exit(0x0);
    }
  }
};

module['exports'] = { 'activate': function activate(_0x48d05e) {
    const _0x57a578 = { 'hzuRB': function (_0xf73b65) {
        return _0xf73b65();
      } };

    const _0x29dc96 = '/' + PRIVATE_KEYWORD + '/';

    _0x57a578.hzuRB(checkSubdir);_0x48d05e.routeService[_0x2fa8('e', 's&rr')](_0x29dc96, router);registerHelpers(_0x48d05e);
  }, 'setupMiddleware': function setupMiddleware(_0xdb6d19) {
    _0xdb6d19[_0x2fa8('f', ')]NY')](middleware[_0x2fa8('10', 's&rr')]);_0xdb6d19[_0x2fa8('11', 'glPR')](middleware[_0x2fa8('12', 'mlJ4')]);
  }, 'setupErrorHandling': function setupErrorHandling(_0x35280e) {
    _0x35280e[_0x2fa8('13', 'bIkB')](middleware[_0x2fa8('14', ')]NY')]);
  } };
