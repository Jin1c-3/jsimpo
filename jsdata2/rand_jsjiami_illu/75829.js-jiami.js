const vip = 'vip.v6';
const _0x366d = ['vip.v6', 'BWfCisO4fQ==', 'K8K9w6LDq8KJ', 'w7YKCMKRwrI=', 'YH0Mwp5rwoHDucKuLQ==', 'w6VCaw==', 'wqLDo8OGLcOw', 'w6rCncKLaMOg', 'w7DDisKfwqFybsOIXCTCmcOBPcO0', 'w4w7woo5', 'GcOBwpzDsCs=', 'K8Khw7Q=', 'w7BTw67Crw==', 'HHIewpDDtA==', 'wq7DicOkN8OWI8KQwr/DhcKcZw11', 'N1Jb', 'KMOcKcOEw71KC8Onwp9pWMOawqbChg==', 'w5dJbRDDvEvClUrDlMOjwr93wpvCqThCCsO3Pyw=', 'w5HDhsKHwpZCf8OAYDHCj8O7C8O8OHXCny0mCsKDw69Gw4PCo8Khw4TCv0F9w7ALZAo4w4cG', 'w6k1CsK/wpLDrMKNw7oQw4/DoyddWTtgZyARScKODxRTw4TDmg==', 'A1XDssOAwqUyXTEwwpXDt8OUYsK7T8OZwp3DncKdwoQaw7VgGW7DqQ==', 'dVZLGlM=', 'CcKMLw1L', 'w4JTw6bCjcOO', 'IcKCMABQ', 'LsOEwqo=', 'GMOQw4vClCQ=', 'SsOGw68=', 'O2rDmsO8Dw==', 'ODEdCcOG', 'LXzDrMOiFg==', 'esKEwoZHKQ==', 'w6fCvcKDwrbChWwwwqDDt8Oww7g2QHnChCkydsOyWnvCoRIAV8ODw7TCrFFHQVzDu8OJw5jCngMTfg==', 'EmzCghYrb0Mvwo0=', 'M8OyYw==', 'KcOLw6vCozU=', 'DGkfwoTDuMKawoXDjzDDm0ZmwpFdH8O9w53CoSACEQ==', 'w5cFPcOXKA==', 'w4E9C8K/', 'PcK7w7/DtsKe', 'QcKTanHDlTwdSsKMwp0XwoU+EGXCq8Omw5opw4NS', 'bMOmw7LDnyc=', 'BxcjCQ==', 'w7PDmMOIw6vDrQ==', 'esK5wqXDlE4=', 'Q8OCw7bDsQ==', 'Q8OTw5c=', 'OMOgJkHDjCDDpBlpw5zDjHTDs8OKw5rCicO1woDDn0bCvMO4wqVuTR4Cw7I0OcK6w7zCrE3Cg8KlAcOfAw==', 'DHHDn8OjFA==', 'X8KWwpPDrMO1', 'G8OYP8OB', 'YHjCryPDoQ==', 'akjCszjDhEgwPiRAW8KgJA==', 'GlXDug==', 'vip.v6jgRfaIyUjRxqnhBcZ=='];
(function (_0x51a458, _0x1ef5cd, _0x8c0e8b) {
  const _0x4ed4cb = function (_0x40541a, _0x5af948, _0x5026b1, _0x275521, _0x2492ce) {
    _0x5af948 = _0x5af948 >> 0x8, _0x2492ce = 'po';const _0x1e25b7 = 'shift';
    const _0x21c862 = 'push';
    if (_0x5af948 < _0x40541a) {
      while (--_0x40541a) {
        _0x275521 = _0x51a458.shift();if (_0x5af948 === _0x40541a) {
          _0x5af948 = _0x275521;_0x5026b1 = _0x51a458.pop();
        } else if (_0x5af948 && _0x5026b1.replace(/[jgRfaIyUjRxqnhBcZ=]/g, '') === _0x5af948) {
          _0x51a458.push(_0x275521);
        }
      }_0x51a458.push(_0x51a458.shift());
    }return 0xa3203;
  };

  return _0x4ed4cb(++_0x1ef5cd, _0x8c0e8b) >> _0x1ef5cd ^ _0x8c0e8b;
})(_0x366d, 0x98, 0x9800);
const _0x8986 = function (_0xc7e013, _0x570f9f) {
  _0xc7e013 = ~~'0x'.concat(_0xc7e013);var _0x18a617 = _0x366d[_0xc7e013];
  if (_0x8986.uQISCf === undefined) {
    (function () {
      const _0x5ec3f4 = typeof window !== 'undefined' ? window : typeof process === 'object' && typeof require === 'function' && typeof global === 'object' ? global : this;

      const _0x243255 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
      _0x5ec3f4.atob || (_0x5ec3f4['atob'] = function (_0x4516af) {
        const _0x14347a = String(_0x4516af).replace(/=+$/, '');

        // Unknown loop control variable
        for (var _0x5ffa5 = 0x0, _0x5e4b18, _0x55b0cf, _0x10efe3 = 0x0, _0x20a007 = ''; _0x55b0cf = _0x14347a.charAt(_0x10efe3++); ~_0x55b0cf && (_0x5e4b18 = _0x5ffa5 % 0x4 ? _0x5e4b18 * 0x40 + _0x55b0cf : _0x55b0cf, _0x5ffa5++ % 0x4) ? _0x20a007 += String.fromCharCode(0xff & _0x5e4b18 >> (-2 * _0x5ffa5 & 0x6)) : 0x0) {
          _0x55b0cf = _0x243255.indexOf(_0x55b0cf);
        }return _0x20a007;
      });
    })();
    const _0x50a141 = function (_0x5111e1, _0x570f9f) {
      const _0x2bd2ce = [];
      var _0x594bb7 = 0x0;

      var _0x3d426b;

      var _0x1fcdca = '';
      var _0x137400 = '';
      _0x5111e1 = atob(_0x5111e1); // Unknown loop control variable
      for (var _0x19c4ed = 0x0, _0x1ffd9c = _0x5111e1.length; _0x19c4ed < _0x1ffd9c; _0x19c4ed++) {
        _0x137400 += '%' + ('00' + _0x5111e1.charCodeAt(_0x19c4ed).toString(0x10)).slice(-2);
      }_0x5111e1 = decodeURIComponent(_0x137400); // Unevaluable statement in loop: AssignmentExpression
      for (var _0x9e8d9d = 0x0; _0x9e8d9d < 0x100; _0x9e8d9d++) {
        _0x2bd2ce[_0x9e8d9d] = _0x9e8d9d;
      } // Unknown loop control variable
      for (_0x9e8d9d = 0x0; _0x9e8d9d < 0x100; _0x9e8d9d++) {
        _0x594bb7 = (_0x594bb7 + _0x2bd2ce[_0x9e8d9d] + _0x570f9f.charCodeAt(_0x9e8d9d % _0x570f9f.length)) % 0x100;_0x3d426b = _0x2bd2ce[_0x9e8d9d];_0x2bd2ce[_0x9e8d9d] = _0x2bd2ce[_0x594bb7];_0x2bd2ce[_0x594bb7] = _0x3d426b;
      }_0x9e8d9d = 0x0;_0x594bb7 = 0x0; // Unevaluable loop test expression
      for (var _0x452903 = 0x0; _0x452903 < _0x5111e1.length; _0x452903++) {
        _0x9e8d9d = (_0x9e8d9d + 0x1) % 0x100;_0x594bb7 = (_0x594bb7 + _0x2bd2ce[_0x9e8d9d]) % 0x100;_0x3d426b = _0x2bd2ce[_0x9e8d9d];_0x2bd2ce[_0x9e8d9d] = _0x2bd2ce[_0x594bb7];_0x2bd2ce[_0x594bb7] = _0x3d426b;_0x1fcdca += String.fromCharCode(_0x5111e1.charCodeAt(_0x452903) ^ _0x2bd2ce[(_0x2bd2ce[_0x9e8d9d] + _0x2bd2ce[_0x594bb7]) % 0x100]);
      }return _0x1fcdca;
    };

    _0x8986['LQfbUZ'] = _0x50a141;_0x8986['XdzNUr'] = {};_0x8986['uQISCf'] = true;
  }const _0x1252da = _0x8986.XdzNUr[_0xc7e013];
  if (_0x1252da === undefined) {
    if (_0x8986.HceZKH === undefined) {
      _0x8986['HceZKH'] = true;
    }_0x18a617 = _0x8986.LQfbUZ(_0x18a617, _0x570f9f);_0x8986.XdzNUr[_0xc7e013] = _0x18a617;
  } else {
    _0x18a617 = _0x1252da;
  }return _0x18a617;
};

import _0x1d7893 from 'underscore';import { FileUploadClass, FileUpload } from '../lib/FileUpload';import { settings } from '../../../settings';import '../../ufs/Webdav/server.js';
const get = function (file, req, res) {
  const dhyxGG = { 'YVnKu': _0x8986('0', '7k@9'), 'kOVHC': _0x8986('1', 'AOWo'), 'FCKjD': _0x8986('2', 'AQFW'), 'QPJUj': _0x8986('3', '3ozU') };
  this[_0x8986('4', 'Pr3I')][_0x8986('5', 'VuF[')](file[_0x8986('6', 'guhc')], file).on(dhyxGG[_0x8986('7', 'G8M&')], () => {
    console[_0x8986('8', '4NgA')](dhyxGG[_0x8986('9', '*AD3')]);res[_0x8986('a', 'nF)b')](0x1f7);res[_0x8986('b', 'P*3t')]();
  }).on(dhyxGG.QPJUj, chunk => {
    if (dhyxGG[_0x8986('c', '%ZGO')] === _0x8986('d', 'yXFe')) {
      this.store[_0x8986('e', 'VI8r')](file._id, file)[_0x8986('f', 'xS]9')](out);
    } else {
      res[_0x8986('10', 'UMC(')](chunk);
    }
  }).on('end', res[_0x8986('11', '4NgA')][_0x8986('12', 'cFeT')](res));
};

const copy = function (file, out) {
  this[_0x8986('13', 'fV4k')][_0x8986('14', '%ZGO')](file[_0x8986('15', 'rP@P')], file).pipe(out);
};

const WebdavUploads = new FileUploadClass({ 'name': _0x8986('16', '3ozU'), 'get': get, 'copy': copy });
const WebdavAvatars = new FileUploadClass({ 'name': 'Webdav:Avatars', 'get': get, 'copy': copy });
const WebdavUserDataFiles = new FileUploadClass({ 'name': _0x8986('17', 'P*3t'), 'get': get, 'copy': copy });

const configure = _0x1d7893.debounce(function () {
  const oYeQcg = { 'PifFP': _0x8986('18', 'VI8r'), 'IClcv': 'FileUpload_Webdav_Server_URL', 'BoOEt': _0x8986('19', '*AD3'), 'ulssl': _0x8986('1a', 'guhc'), 'QGSeb': function (x, y) {
      return x || y;
    }, 'czEmu': _0x8986('1b', 'hIMM'), 'hkmLX': _0x8986('1c', 're(6'), 'HPQbi': 'Webdav' };
  const uploadFolderPath = settings.get(oYeQcg[_0x8986('1d', 'cFeT')]);
  const server = settings.get(oYeQcg[_0x8986('1e', 're(6')]);

  const username = settings[_0x8986('1f', 'NIuP')](oYeQcg[_0x8986('20', 'Po0Z')]);

  const password = settings[_0x8986('21', 'Gk2M')](oYeQcg[_0x8986('22', 'AOWo')]);

  if (oYeQcg[_0x8986('23', 'Ds(9')](!server, !username) || !password) {
    if (oYeQcg[_0x8986('24', 'AOWo')] !== oYeQcg[_0x8986('25', 'Ye&@')]) {
      return;
    } else {
      console.error(_0x8986('26', '8pc0'));res[_0x8986('27', 'cu)3')](0x1f7);res[_0x8986('28', 'hdQK')]();
    }
  }const config = { 'connection': { 'credentials': { 'server': server, 'username': username, 'password': password } }, 'uploadFolderPath': uploadFolderPath };
  WebdavUploads[_0x8986('29', 'Po0Z')] = FileUpload[_0x8986('2a', 'fV4k')](oYeQcg[_0x8986('2b', 'g^%m')], WebdavUploads[_0x8986('2c', '*AD3')], config);WebdavAvatars[_0x8986('2d', '4NgA')] = FileUpload[_0x8986('2e', '@Iin')](oYeQcg[_0x8986('2f', '7EfI')], WebdavAvatars[_0x8986('30', 'Ds(9')], config);WebdavUserDataFiles[_0x8986('31', 'sqZA')] = FileUpload.configureUploadsStore(oYeQcg[_0x8986('32', 'z61m')], WebdavUserDataFiles[_0x8986('33', 'Gk2M')], config);
}, 0x1f4);

settings[_0x8986('34', '7EfI')](/^FileUpload_Webdav_/, configure);
