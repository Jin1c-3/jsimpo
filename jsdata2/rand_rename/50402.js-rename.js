(function(e){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net"],function(s){return e(s,window,document)})}else if(typeof exports==="object"){module.exports=function(s,t){if(!s){s=window}if(!t||!t.fn.dataTable){t=require("datatables.net")(s,t).$}return e(t,s,s.document)}}else{e(jQuery,window,document)}})(function(m,l,o,a){"use strict";var i=m.fn.dataTable;var n=function(s,t){if(!(this instanceof n)){alert("Scroller warning: Scroller must be initialised with the 'new' keyword.");return}if(t===a){t={}}var e=m.fn.dataTable.Api(s);this.s={dt:e.settings()[0],dtApi:e,tableTop:0,tableBottom:0,redrawTop:0,redrawBottom:0,autoHeight:true,viewportRows:0,stateTO:null,stateSaveThrottle:function(){},drawTO:null,heights:{jump:null,page:null,virtual:null,scroll:null,row:null,viewport:null,labelFactor:1},topRowFloat:0,scrollDrawDiff:null,loaderVisible:false,forceReposition:false,baseRowTop:0,baseScrollTop:0,mousedown:false,lastScrollTop:0};this.s=m.extend(this.s,n.oDefaults,t);this.s.heights.row=this.s.rowHeight;this.dom={force:o.createElement("div"),label:m('<div class="dts_label">0</div>'),scroller:null,table:null,loader:null};if(this.s.dt.oScroller){return}this.s.dt.oScroller=this;this.construct()};m.extend(n.prototype,{measure:function(s){if(this.s.autoHeight){this._calcRowHeight()}var t=this.s.heights;if(t.row){t.viewport=this._parseHeight(m(this.dom.scroller).css("max-height"));this.s.viewportRows=parseInt(t.viewport/t.row,10)+1;this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer}var e=this.dom.label.outerHeight();t.labelFactor=(t.viewport-e)/t.scroll;if(s===a||s){this.s.dt.oInstance.fnDraw(false)}},pageInfo:function(){var s=this.s.dt,t=this.dom.scroller.scrollTop,e=s.fnRecordsDisplay(),o=Math.ceil(this.pixelsToRow(t+this.s.heights.viewport,false,this.s.ani));return{start:Math.floor(this.pixelsToRow(t,false,this.s.ani)),end:e<o?e-1:o-1}},pixelsToRow:function(s,t,e){var o=s-this.s.baseScrollTop;var r=e?(this._domain("physicalToVirtual",this.s.baseScrollTop)+o)/this.s.heights.row:o/this.s.heights.row+this.s.baseRowTop;return t||t===a?parseInt(r,10):r},rowToPixels:function(s,t,e){var o;var r=s-this.s.baseRowTop;if(e){o=this._domain("virtualToPhysical",this.s.baseScrollTop);o+=r*this.s.heights.row}else{o=this.s.baseScrollTop;o+=r*this.s.heights.row}return t||t===a?parseInt(o,10):o},scrollToRow:function(s,t){var e=this;var o=false;var r=this.rowToPixels(s);var i=(this.s.displayBuffer-1)/2*this.s.viewportRows;var l=s-i;if(l<0){l=0}if((r>this.s.redrawBottom||r<this.s.redrawTop)&&this.s.dt._iDisplayStart!==l){o=true;r=this._domain("virtualToPhysical",s*this.s.heights.row);if(this.s.redrawTop<r&&r<this.s.redrawBottom){this.s.forceReposition=true;t=false}}if(t===a||t){this.s.ani=o;m(this.dom.scroller).animate({scrollTop:r},function(){setTimeout(function(){e.s.ani=false},250)})}else{m(this.dom.scroller).scrollTop(r)}},construct:function(){var o=this;var s=this.s.dtApi;if(!this.s.dt.oFeatures.bPaginate){this.s.dt.oApi._fnLog(this.s.dt,0,"Pagination must be enabled for Scroller");return}this.dom.force.style.position="relative";this.dom.force.style.top="0px";this.dom.force.style.left="0px";this.dom.force.style.width="1px";this.dom.scroller=m("div."+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0];this.dom.scroller.appendChild(this.dom.force);this.dom.scroller.style.position="relative";this.dom.table=m(">table",this.dom.scroller)[0];this.dom.table.style.position="absolute";this.dom.table.style.top="0px";this.dom.table.style.left="0px";m(s.table().container()).addClass("dts DTS");if(this.s.loadingIndicator){this.dom.loader=m('<div class="dataTables_processing dts_loading">'+this.s.dt.oLanguage.sLoadingRecords+"</div>").css("display","none");m(this.dom.scroller.parentNode).css("position","relative").append(this.dom.loader)}this.dom.label.appendTo(this.dom.scroller);if(this.s.heights.row&&this.s.heights.row!="auto"){this.s.autoHeight=false}this.s.ingnoreScroll=true;m(this.dom.scroller).on("scroll.dt-scroller",function(s){o._scroll.call(o)});m(this.dom.scroller).on("touchstart.dt-scroller",function(){o._scroll.call(o)});m(this.dom.scroller).on("mousedown.dt-scroller",function(){o.s.mousedown=true}).on("mouseup.dt-scroller",function(){o.s.labelVisible=false;o.s.mousedown=false;o.dom.label.css("display","none")});m(l).on("resize.dt-scroller",function(){o.measure(false);o._info()});var r=true;var i=s.state.loaded();s.on("stateSaveParams.scroller",function(s,t,e){if(r&&i){e.scroller=i.scroller;r=false}else{e.scroller={topRow:o.s.topRowFloat,baseScrollTop:o.s.baseScrollTop,baseRowTop:o.s.baseRowTop,scrollTop:o.s.lastScrollTop}}});if(i&&i.scroller){this.s.topRowFloat=i.scroller.topRow;this.s.baseScrollTop=i.scroller.baseScrollTop;this.s.baseRowTop=i.scroller.baseRowTop}this.measure(false);o.s.stateSaveThrottle=o.s.dt.oApi._fnThrottle(function(){o.s.dtApi.state.save()},500);s.on("init.scroller",function(){o.measure(false);o.s.scrollType="jump";o._draw();s.on("draw.scroller",function(){o._draw()})});s.on("preDraw.dt.scroller",function(){o._scrollForce()});s.on("destroy.scroller",function(){m(l).off("resize.dt-scroller");m(o.dom.scroller).off(".dt-scroller");m(o.s.dt.nTable).off(".scroller");m(o.s.dt.nTableWrapper).removeClass("DTS");m("div.DTS_Loading",o.dom.scroller.parentNode).remove();o.dom.table.style.position="";o.dom.table.style.top="";o.dom.table.style.left=""})},_calcRowHeight:function(){var s=this.s.dt;var t=s.nTable;var e=t.cloneNode(false);var o=m("<tbody/>").appendTo(e);var r=m('<div class="'+s.oClasses.sWrapper+' DTS">'+'<div class="'+s.oClasses.sScrollWrapper+'">'+'<div class="'+s.oClasses.sScrollBody+'"></div>'+"</div>"+"</div>");m("tbody tr:lt(4)",t).clone().appendTo(o);var i=m("tr",o).length;if(i===1){o.prepend("<tr><td>&#160;</td></tr>");o.append("<tr><td>&#160;</td></tr>")}else{for(;i<3;i++){o.append("<tr><td>&#160;</td></tr>")}}m("div."+s.oClasses.sScrollBody,r).append(e);var l=this.s.dt.nHolding||t.parentNode;if(!m(l).is(":visible")){l="body"}r.find("input").removeAttr("name");r.appendTo(l);this.s.heights.row=m("tr",o).eq(1).outerHeight();r.remove()},_draw:function(){var s=this,t=this.s.heights,e=this.dom.scroller.scrollTop,o=m(this.s.dt.nTable).height(),r=this.s.dt._iDisplayStart,i=this.s.dt._iDisplayLength,l=this.s.dt.fnRecordsDisplay();this.s.skip=true;if((this.s.dt.bSorted||this.s.dt.bFiltered)&&r===0&&!this.s.dt._drawHold){this.s.topRowFloat=0}e=this.s.scrollType==="jump"?this._domain("virtualToPhysical",this.s.topRowFloat*t.row):e;this.s.baseScrollTop=e;this.s.baseRowTop=this.s.topRowFloat;var a=e-(this.s.topRowFloat-r)*t.row;if(r===0){a=0}else if(r+i>=l){a=t.scroll-o}this.dom.table.style.top=a+"px";this.s.tableTop=a;this.s.tableBottom=o+this.s.tableTop;var n=(e-this.s.tableTop)*this.s.boundaryScale;this.s.redrawTop=e-n;this.s.redrawBottom=e+n>t.scroll-t.viewport-t.row?t.scroll-t.viewport-t.row:e+n;this.s.skip=false;if(this.s.dt.oFeatures.bStateSave&&this.s.dt.oLoadedState!==null&&typeof this.s.dt.oLoadedState.scroller!="undefined"){var h=(this.s.dt.sAjaxSource||s.s.dt.ajax)&&!this.s.dt.oFeatures.bServerSide?true:false;if(h&&this.s.dt.iDraw==2||!h&&this.s.dt.iDraw==1){setTimeout(function(){m(s.dom.scroller).scrollTop(s.s.dt.oLoadedState.scroller.scrollTop);setTimeout(function(){s.s.ingnoreScroll=false},0)},0)}}else{s.s.ingnoreScroll=false}if(this.s.dt.oFeatures.bInfo){setTimeout(function(){s._info.call(s)},0)}if(this.dom.loader&&this.s.loaderVisible){this.dom.loader.css("display","none");this.s.loaderVisible=false}},_domain:function(s,t){var e=this.s.heights;var o;var r=1e4;if(e.virtual===e.scroll){return t}if(t<r){return t}else if(s==="virtualToPhysical"&&t>=e.virtual-r){o=e.virtual-t;return e.scroll-o}else if(s==="physicalToVirtual"&&t>=e.scroll-r){o=e.scroll-t;return e.virtual-o}var i=(e.virtual-r-r)/(e.scroll-r-r);var l=r-i*r;return s==="virtualToPhysical"?(t-l)/i:i*t+l},_info:function(){if(!this.s.dt.oFeatures.bInfo){return}var s=this.s.dt,t=s.oLanguage,e=this.dom.scroller.scrollTop,o=Math.floor(this.pixelsToRow(e,false,this.s.ani)+1),r=s.fnRecordsTotal(),i=s.fnRecordsDisplay(),l=Math.ceil(this.pixelsToRow(e+this.s.heights.viewport,false,this.s.ani)),a=i<l?i:l,n=s.fnFormatNumber(o),h=s.fnFormatNumber(a),c=s.fnFormatNumber(r),d=s.fnFormatNumber(i),f;if(s.fnRecordsDisplay()===0&&s.fnRecordsDisplay()==s.fnRecordsTotal()){f=t.sInfoEmpty+t.sInfoPostFix}else if(s.fnRecordsDisplay()===0){f=t.sInfoEmpty+" "+t.sInfoFiltered.replace("_MAX_",c)+t.sInfoPostFix}else if(s.fnRecordsDisplay()==s.fnRecordsTotal()){f=t.sInfo.replace("_START_",n).replace("_END_",h).replace("_MAX_",c).replace("_TOTAL_",d)+t.sInfoPostFix}else{f=t.sInfo.replace("_START_",n).replace("_END_",h).replace("_MAX_",c).replace("_TOTAL_",d)+" "+t.sInfoFiltered.replace("_MAX_",s.fnFormatNumber(s.fnRecordsTotal()))+t.sInfoPostFix}var p=t.fnInfoCallback;if(p){f=p.call(s.oInstance,s,o,a,r,i,f)}var u=s.aanFeatures.i;if(typeof u!="undefined"){for(var T=0,w=u.length;T<w;T++){m(u[T]).html(f)}}m(s.nTable).triggerHandler("info.dt")},_parseHeight:function(s){var t;var e=/^([+-]?(?:\d+(?:\.\d+)?|\.\d+))(px|em|rem|vh)$/.exec(s);if(e===null){return 0}var o=parseFloat(e[1]);var r=e[2];if(r==="px"){t=o}else if(r==="vh"){t=o/100*m(l).height()}else if(r==="rem"){t=o*parseFloat(m(":root").css("font-size"))}else if(r==="em"){t=o*parseFloat(m("body").css("font-size"))}return t?t:0},_scroll:function(){var s=this,t=this.s.heights,e=this.dom.scroller.scrollTop,o;if(this.s.skip){return}if(this.s.ingnoreScroll){return}if(e===this.s.lastScrollTop){return}if(this.s.dt.bFiltered||this.s.dt.bSorted){this.s.lastScrollTop=0;return}this._info();clearTimeout(this.s.stateTO);this.s.stateTO=setTimeout(function(){s.s.dtApi.state.save()},250);this.s.scrollType=Math.abs(e-this.s.lastScrollTop)>t.viewport?"jump":"cont";this.s.topRowFloat=this.s.scrollType==="cont"?this.pixelsToRow(e,false,false):this._domain("physicalToVirtual",e)/t.row;if(this.s.topRowFloat<0){this.s.topRowFloat=0}if(this.s.forceReposition||e<this.s.redrawTop||e>this.s.redrawBottom){var r=Math.ceil((this.s.displayBuffer-1)/2*this.s.viewportRows);o=parseInt(this.s.topRowFloat,10)-r;this.s.forceReposition=false;if(o<=0){o=0}else if(o+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()){o=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength;if(o<0){o=0}}else if(o%2!==0){o++}this.s.targetTop=o;if(o!=this.s.dt._iDisplayStart){this.s.tableTop=m(this.s.dt.nTable).offset().top;this.s.tableBottom=m(this.s.dt.nTable).height()+this.s.tableTop;var i=function(){s.s.dt._iDisplayStart=s.s.targetTop;s.s.dt.oApi._fnDraw(s.s.dt)};if(this.s.dt.oFeatures.bServerSide){this.s.forceReposition=true;clearTimeout(this.s.drawTO);this.s.drawTO=setTimeout(i,this.s.serverWait)}else{i()}if(this.dom.loader&&!this.s.loaderVisible){this.dom.loader.css("display","block");this.s.loaderVisible=true}}}else{this.s.topRowFloat=this.pixelsToRow(e,false,true)}this.s.lastScrollTop=e;this.s.stateSaveThrottle();if(this.s.scrollType==="jump"&&this.s.mousedown){this.s.labelVisible=true}if(this.s.labelVisible){this.dom.label.html(this.s.dt.fnFormatNumber(parseInt(this.s.topRowFloat,10)+1)).css("top",e+e*t.labelFactor).css("display","block")}},_scrollForce:function(){var s=this.s.heights;var t=1e6;s.virtual=s.row*this.s.dt.fnRecordsDisplay();s.scroll=s.virtual;if(s.scroll>t){s.scroll=t}this.dom.force.style.height=s.scroll>this.s.heights.row?s.scroll+"px":this.s.heights.row+"px"}});n.defaults={boundaryScale:.5,displayBuffer:9,loadingIndicator:false,rowHeight:"auto",serverWait:200};n.oDefaults=n.defaults;n.version="2.0.3";m(o).on("preInit.dt.dtscroller",function(s,t){if(s.namespace!=="dt"){return}var e=t.oInit.scroller;var o=i.defaults.scroller;if(e||o){var r=m.extend({},e,o);if(e!==false){new n(t,r)}}});m.fn.dataTable.Scroller=n;m.fn.DataTable.Scroller=n;var s=m.fn.dataTable.Api;s.register("scroller()",function(){return this});s.register("scroller().rowToPixels()",function(s,t,e){var o=this.context;if(o.length&&o[0].oScroller){return o[0].oScroller.rowToPixels(s,t,e)}});s.register("scroller().pixelsToRow()",function(s,t,e){var o=this.context;if(o.length&&o[0].oScroller){return o[0].oScroller.pixelsToRow(s,t,e)}});s.register(["scroller().scrollToRow()","scroller.toPosition()"],function(t,e){this.iterator("table",function(s){if(s.oScroller){s.oScroller.scrollToRow(t,e)}});return this});s.register("row().scrollTo()",function(o){var r=this;this.iterator("row",function(s,t){if(s.oScroller){var e=r.rows({order:"applied",search:"applied"}).indexes().indexOf(t);s.oScroller.scrollToRow(e,o)}});return this});s.register("scroller.measure()",function(t){this.iterator("table",function(s){if(s.oScroller){s.oScroller.measure(t)}});return this});s.register("scroller.page()",function(){var s=this.context;if(s.length&&s[0].oScroller){return s[0].oScroller.pageInfo()}});return n});