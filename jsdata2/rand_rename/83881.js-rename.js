const uuidGen=Cc["@mozilla.org/uuid-generator;1"].getService(Ci.nsIUUIDGenerator);const{Services}=ChromeUtils.import("resource://gre/modules/Services.jsm");class Helper{addObserver(e,r){Services.obs.addObserver(e,r);return()=>Services.obs.removeObserver(e,r)}addMessageListener(e,r,t){e.addMessageListener(r,t);return()=>e.removeMessageListener(r,t)}addEventListener(e,r,t){e.addEventListener(r,t);return()=>e.removeEventListener(r,t)}awaitEvent(t,n){return new Promise(r=>{t.addEventListener(n,function e(){t.removeEventListener(n,e);r()})})}on(e,r,t){const n=(e,...r)=>t(...r);e.on(r,n);return()=>e.off(r,n)}addProgressListener(e,r,t){e.addProgressListener(r,t);return()=>e.removeProgressListener(r)}removeListeners(e){for(const r of e)r.call(null);e.splice(0,e.length)}generateId(){const e=uuidGen.generateUUID().toString();return e.substring(1,e.length-1)}getLoadContext(e){let r=null;try{if(e.notificationCallbacks)r=e.notificationCallbacks.getInterface(Ci.nsILoadContext)}catch(e){}try{if(!r&&e.loadGroup)r=e.loadGroup.notificationCallbacks.getInterface(Ci.nsILoadContext)}catch(e){}return r}getNetworkErrorStatusText(e){if(!e)return null;for(const r of Object.keys(Cr)){if(Cr[r]===e)return r}if((e&16711680)===5898240){if((e&65535)<Math.abs(Ci.nsINSSErrorsService.NSS_SEC_ERROR_BASE)){const n=Math.abs(Ci.nsINSSErrorsService.NSS_SEC_ERROR_BASE)-(e&65535);switch(n){case 11:return"SEC_ERROR_EXPIRED_CERTIFICATE";case 12:return"SEC_ERROR_REVOKED_CERTIFICATE";case 13:return"SEC_ERROR_UNKNOWN_ISSUER";case 20:return"SEC_ERROR_UNTRUSTED_ISSUER";case 21:return"SEC_ERROR_UNTRUSTED_CERT";case 36:return"SEC_ERROR_CA_CERT_INVALID";case 90:return"SEC_ERROR_INADEQUATE_KEY_USAGE";case 176:return"SEC_ERROR_CERT_SIGNATURE_ALGORITHM_DISABLED";default:return"SEC_ERROR_UNKNOWN"}}const t=Math.abs(Ci.nsINSSErrorsService.NSS_SSL_ERROR_BASE)-(e&65535);switch(t){case 3:return"SSL_ERROR_NO_CERTIFICATE";case 4:return"SSL_ERROR_BAD_CERTIFICATE";case 8:return"SSL_ERROR_UNSUPPORTED_CERTIFICATE_TYPE";case 9:return"SSL_ERROR_UNSUPPORTED_VERSION";case 12:return"SSL_ERROR_BAD_CERT_DOMAIN";default:return"SSL_ERROR_UNKNOWN"}}return"<unknown error>"}browsingContextToFrameId(e){if(!e)return undefined;return"frame-"+e.id}}var EXPORTED_SYMBOLS=["Helper"];this.Helper=Helper;