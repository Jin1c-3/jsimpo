define(["can/util/library","can/util/string"],function(e){var u=/^\d+$/,l=/([^\[\]]+)|(\[\])/g,i=/([^?#]*)(#.*)?$/,p=function(t){return decodeURIComponent(t.replace(/\+/g," "))};e.extend(e,{deparam:function(t){var c={},n,o;if(t&&i.test(t)){n=t.split("&");e.each(n,function(t){var n=t.split("="),e=p(n.shift()),i=p(n.join("=")),r=c;if(e){n=e.match(l);for(var a=0,f=n.length-1;a<f;a++){if(!r[n[a]]){r[n[a]]=u.test(n[a+1])||n[a+1]==="[]"?[]:{}}r=r[n[a]]}o=n.pop();if(o==="[]"){r.push(i)}else{r[o]=i}}})}return c}});return e});