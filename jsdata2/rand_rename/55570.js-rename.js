"use strict";const common=require("../common");if(!common.hasCrypto)common.skip("missing crypto");const assert=require("assert");const crypto=require("crypto");const domain=require("domain");const test=o=>{const t=new Error("BAM");const n=domain.create();n.on("error",common.mustCall(function(o){assert.strictEqual(o,t)}));const r=common.mustCall(function(){throw t});n.run(r)};test(function(o){crypto.pbkdf2("password","salt",1,8,o)});test(function(o){crypto.randomBytes(32,o)});