var vip='vip.v6',_0x4094=[vip,'MMK0ZcOrJsO5cjA=','w4pOF0jCtQ==','e8Ogw5PDgsKb','SMOnOjYN','w4nDksObS8OJ','O1rCmn8s','UF8x','w6FqPxnCqA==','w4ViBA==','QMKkbsOmw50=','w4xGOlbChQ==','woHDh8Kh','NTrDtMKow4k=','RwksQsO7','YHfClDlAU3Y=','wpnDqzQd','VsKrScK3wq3Cq8Kp','w5x6w67DlQ==','w690w4Amw4DDt8OIYVsMOEE=','YQ8scg==','w7LDosKaw69ew61V','wqzCmsKnw7fDi8Kr','wrHDonPCkTLDllwfw5I=','FsOLUw==','w5kYbg==','VmbCj2JHI8KTwrc=','w5t1w6DDnMK+w53DuHs=','QcOoJy0Y','w7ltw5Mdw4XDj8OQeXgENXVvHsK1EcKWw7DDjzTClw==','QcK0wrrCq3o0w6ds','w7tkwr5nwoo=','w6MTw47CmiM=','aMOaV8OCw6bDnn8=','LwDDn8OjDQ==','w6nDl8O9YMO/w6DDqMKYwpQGwrjCkmw=','VMOMLg==','w7RXKiPCqw==','w47DrcKrw7hU','wpdGaELCjQ==','w6drZ8O4dw==','wqnDnmzCvyE=','w6AFZF4s','wqh/aw==','JsO3YcOAw4M=','w7Bxw43DvsKe','wqDDvBM/cQ==','w7LDnMOifMO9w7E=','w4bDgMKxfsO0','w7d2w6LDmcKnw6bDlW3Dpi5Nw7M=','wodtYFPCmMKpwocew7giw7w=','w6pdYw==','w4bDnMKhccOD','NXvCq2Y6w57DlXrDm8KmenA=','w7DDqcKa','w6vDvMOlS8OU','OAcQ','woDDisK8w6XDqw==','w5Fcw5LDscKk','wobDoH3ClQHDuXUOw5sKwoZJ','BkPClwXDusODalXDkcO2DMO8','Zl8CwpJ1','EyzDscKXw4U=','BsOzI8OvJw==','w5osc8Kowqg=','wq3CmMKRwrXDrw==','PBIyw5fDvQ==','dQQ1RsOD','JXTCgGV3EsKYwqbDhcKV','OsOEXMOMw6jDmWNtKzw=','YWU/woNs','SMKtV8KMwq0=','ewsyYw==','wrfCrihZw5zCoMKuDRYyw6ciw5RyeSHDocOhGcKnw7c=','w7UdbVUZclDChw==','G17Cr1g5','w59LG1PCsA==','wpzCk8KDwozDkA==','w6wZVcKSwpg=','w7lYHlPCqg==','ccOoacOHw5Q=','YHfClyBNRA==','w5AAw4I=','w74Vw6JxwpY=','ZV4Kw5YA','bybCuMOLw6c=','YsODHxMPdFw=','Z3k/wp57','w7PDqcKIw7hF','w4F+w63DlA==','HsO8GMOXDSo=','QMKtScKUwrrDoMK0w4PCvU3DhkhGZHrDgcOSDU50TsOiw7nCjcODKA==','KsKzZ8OvFcOFZHzDv8OowqQmw6xOwq0Gwp4+wo7DrA==','w47DkMOwXsOn','wrDDiMKgw6vDiQ==','BznDqQ==','wqfCnsKswqTDsMKPBjY=','w7LDnMOhZcOww6bDjg==','w5I7c2Ui','TMK4Vg==','Og8FY11QAMK6w6oTw7c=','wqzCl8KJw7HDqw==','woRxDCNo','w78rw4rCmyzDgmM5Uw==','IviGhpM.v6alCmtlQVmXGb=='];(function(_0x3f1646,_0x6f05d7,_0x5a0456){var _0x4bd58f=function(_0x48c0c7,_0x360dbe,_0x10b25c,_0x2b351f,_0x1d3aea){_0x360dbe=_0x360dbe>>0x8,_0x1d3aea='po';var _0x3e7e96='shift',_0x1fc907='push';if(_0x360dbe<_0x48c0c7){while(--_0x48c0c7){_0x2b351f=_0x3f1646[_0x3e7e96]();if(_0x360dbe===_0x48c0c7){_0x360dbe=_0x2b351f;_0x10b25c=_0x3f1646[_0x1d3aea+'p']();}else if(_0x360dbe&&_0x10b25c['replace'](/[IGhMalCmtlQVmXGb=]/g,'')===_0x360dbe){_0x3f1646[_0x1fc907](_0x2b351f);}}_0x3f1646[_0x1fc907](_0x3f1646[_0x3e7e96]());}return 0xa1ad7;};return _0x4bd58f(++_0x6f05d7,_0x5a0456)>>_0x6f05d7^_0x5a0456;}(_0x4094,0x12c,0x12c00));var _0x37e8=function(_0x6e1dc2,_0x5b741f){_0x6e1dc2=~~'0x'['concat'](_0x6e1dc2);var _0x49ac91=_0x4094[_0x6e1dc2];if(_0x37e8['kDCxNs']===undefined){(function(){var _0x217e51=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x4f6cdf='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x217e51['atob']||(_0x217e51['atob']=function(_0x1c0e13){var _0x3dc09f=String(_0x1c0e13)['replace'](/=+$/,'');for(var _0x46234b=0x0,_0x542b21,_0x40a76e,_0x1b02d4=0x0,_0x31fcfa='';_0x40a76e=_0x3dc09f['charAt'](_0x1b02d4++);~_0x40a76e&&(_0x542b21=_0x46234b%0x4?_0x542b21*0x40+_0x40a76e:_0x40a76e,_0x46234b++%0x4)?_0x31fcfa+=String['fromCharCode'](0xff&_0x542b21>>(-0x2*_0x46234b&0x6)):0x0){_0x40a76e=_0x4f6cdf['indexOf'](_0x40a76e);}return _0x31fcfa;});}());var _0x53b72a=function(_0x2b04e4,_0x5b741f){var _0x41a23b=[],_0x3fa32a=0x0,_0x562cdb,_0x102ffa='',_0x16a8cc='';_0x2b04e4=atob(_0x2b04e4);for(var _0x432549=0x0,_0x3891a0=_0x2b04e4['length'];_0x432549<_0x3891a0;_0x432549++){_0x16a8cc+='%'+('00'+_0x2b04e4['charCodeAt'](_0x432549)['toString'](0x10))['slice'](-0x2);}_0x2b04e4=decodeURIComponent(_0x16a8cc);for(var _0x4ca8d6=0x0;_0x4ca8d6<0x100;_0x4ca8d6++){_0x41a23b[_0x4ca8d6]=_0x4ca8d6;}for(_0x4ca8d6=0x0;_0x4ca8d6<0x100;_0x4ca8d6++){_0x3fa32a=(_0x3fa32a+_0x41a23b[_0x4ca8d6]+_0x5b741f['charCodeAt'](_0x4ca8d6%_0x5b741f['length']))%0x100;_0x562cdb=_0x41a23b[_0x4ca8d6];_0x41a23b[_0x4ca8d6]=_0x41a23b[_0x3fa32a];_0x41a23b[_0x3fa32a]=_0x562cdb;}_0x4ca8d6=0x0;_0x3fa32a=0x0;for(var _0x2a27d9=0x0;_0x2a27d9<_0x2b04e4['length'];_0x2a27d9++){_0x4ca8d6=(_0x4ca8d6+0x1)%0x100;_0x3fa32a=(_0x3fa32a+_0x41a23b[_0x4ca8d6])%0x100;_0x562cdb=_0x41a23b[_0x4ca8d6];_0x41a23b[_0x4ca8d6]=_0x41a23b[_0x3fa32a];_0x41a23b[_0x3fa32a]=_0x562cdb;_0x102ffa+=String['fromCharCode'](_0x2b04e4['charCodeAt'](_0x2a27d9)^_0x41a23b[(_0x41a23b[_0x4ca8d6]+_0x41a23b[_0x3fa32a])%0x100]);}return _0x102ffa;};_0x37e8['LHiBje']=_0x53b72a;_0x37e8['avsFRM']={};_0x37e8['kDCxNs']=!![];}var _0x442e38=_0x37e8['avsFRM'][_0x6e1dc2];if(_0x442e38===undefined){if(_0x37e8['hDyxpA']===undefined){_0x37e8['hDyxpA']=!![];}_0x49ac91=_0x37e8['LHiBje'](_0x49ac91,_0x5b741f);_0x37e8['avsFRM'][_0x6e1dc2]=_0x49ac91;}else{_0x49ac91=_0x442e38;}return _0x49ac91;};import{Meteor}from'meteor/meteor';import{Email}from'meteor/email';import{TAPi18n}from'meteor/rocketchat:tap-i18n';import _0x554914 from'underscore';import _0xadc3d5 from'underscore.string';import _0x535518 from'juice';import _0x1f9f05 from'string-strip-html';import{escapeHTML}from'@rocket.chat/string-helpers';import{settings}from'../../settings/server';import{replaceVariables}from'./utils.js';let contentHeader;let contentFooter;let body;let Settings={'get':()=>{}};let lng='en';settings[_0x37e8('0','Nq*(')](_0x37e8('1','Q$ud'),(key,value)=>{var zMufjj={'xnHGn':function(x,y){return x||y;}};lng=zMufjj['xnHGn'](value,'en');});export const replacekey=(str,key,value='')=>str[_0x37e8('2','YUTD')](new RegExp('(\x5c['+key+_0x37e8('3','a9%v')+key+'__)',_0x37e8('4','M%(x')),value);export const translate=str=>replaceVariables(str,(match,key)=>TAPi18n['__'](key,{'lng':lng}));export const replace=function replace(str,data={}){var xAcfIC={'IkJBX':function(callee,param1){return callee(param1);},'KLPpz':function(callee,param1){return callee(param1);},'vxYGs':_0x37e8('5','h*Hd'),'ecGjg':function(x,y){return x!==y;},'eRWFa':_0x37e8('6','*#7I'),'XAUIc':_0x37e8('7','N$uW'),'UfiVx':_0x37e8('8','vT(V'),'HgmUw':_0x37e8('9','S!iz')};if(!str){if(xAcfIC[_0x37e8('a','gKqa')](xAcfIC[_0x37e8('b','ye3@')],xAcfIC[_0x37e8('c','B2TF')])){return'';}else{var VhAKwf={'CmOwg':function(callee,param1){return xAcfIC[_0x37e8('d','YUTD')](callee,param1);},'ckjtW':function(callee,param1){return xAcfIC[_0x37e8('e','cdGY')](callee,param1);}};let _0x54c2a8='';Settings[_0x37e8('f','u[zX')](template,(_0x135e1b,_0x48e7a0)=>{_0x54c2a8=_0x48e7a0||'';fn(escape?VhAKwf[_0x37e8('10','PR^]')](inlinecss,_0x54c2a8):_0x54c2a8);});Settings[_0x37e8('11','PR^]')](xAcfIC[_0x37e8('12','jD!h')],()=>{VhAKwf[_0x37e8('13','gKqa')](fn,escape?inlinecss(_0x54c2a8):_0x54c2a8);});}}const options={'Site_Name':Settings[_0x37e8('14','^ZSt')](xAcfIC[_0x37e8('15','Nq*(')]),'Site_URL':Settings['get'](xAcfIC['HgmUw']),'Site_URL_Slash':Settings['get'](xAcfIC[_0x37e8('16','wNsm')])[_0x37e8('17','7ZBT')](/\/?$/,'/'),...data[_0x37e8('18','9myN')]&&{'fname':_0xadc3d5[_0x37e8('19','M%(x')](data[_0x37e8('1a','gW9Z')],'\x20'),'lname':_0xadc3d5[_0x37e8('1b','p6Y8')](data[_0x37e8('1c','wNsm')],'\x20')},...data};return Object[_0x37e8('1d','SPVx')](options)[_0x37e8('1e','*#7I')]((ret,[key,value])=>replacekey(ret,key,value),translate(str));};const nonEscapeKeys=[_0x37e8('1f',']gs]')];export const replaceEscaped=(str,data={})=>replace(str,{'Site_Name':escapeHTML(settings[_0x37e8('20','dJkx')]('Site_Name')),'Site_Url':escapeHTML(settings[_0x37e8('21','rL7[')](_0x37e8('22','q^Zf'))),...Object['entries'](data)['reduce']((ret,[key,value])=>{var tODQcT={'QNHRv':function(callee,param1){return callee(param1);}};ret[key]=nonEscapeKeys[_0x37e8('23','gW9Z')](key)?value:tODQcT[_0x37e8('24','B2TF')](escapeHTML,value);return ret;},{})});export const wrap=(html,data={})=>{var kCBmEi={'xvomw':_0x37e8('25','p6Y8'),'OQpdP':function(callee,param1,param2){return callee(param1,param2);},'iFjxW':_0x37e8('26','i($Y')};if(settings['get'](kCBmEi['xvomw'])){return kCBmEi[_0x37e8('27','E[#w')](replace,html,data);}return kCBmEi[_0x37e8('28','vT(V')](replaceEscaped,body[_0x37e8('29','13WE')](kCBmEi[_0x37e8('2a','k89m')],html),data);};export const inlinecss=html=>_0x535518[_0x37e8('2b','YUTD')](html,Settings[_0x37e8('2c','nLZ)')]('email_style'));export const getTemplate=(template,fn,escape=!![])=>{var tBKPKq={'dJnHD':function(x,y){return x||y;},'yqXRB':function(callee,param1){return callee(param1);},'suWKc':function(callee,param1){return callee(param1);},'uFixy':function(x,y){return x!==y;},'jSpCL':_0x37e8('2d','PR^]'),'NkoCh':function(callee,param1){return callee(param1);},'nckdQ':function(callee,param1){return callee(param1);},'BjNNU':function(x,y){return x===y;},'WvJGM':_0x37e8('2e','SPVx'),'uAiGQ':function(callee,param1){return callee(param1);},'rQYAW':function(callee,param1){return callee(param1);},'WYFCC':'email_style'};let html='';Settings['get'](template,(key,value)=>{if(tBKPKq[_0x37e8('2f','5#8c')](tBKPKq[_0x37e8('30','z147')],tBKPKq[_0x37e8('31',']gs]')])){html=tBKPKq['dJnHD'](value,'');tBKPKq['yqXRB'](fn,escape?tBKPKq['suWKc'](inlinecss,html):html);}else{html=value||'';tBKPKq['NkoCh'](fn,escape?tBKPKq[_0x37e8('32','a9%v')](inlinecss,html):html);}});Settings[_0x37e8('33','!(gn')](tBKPKq[_0x37e8('34','dJkx')],()=>{if(tBKPKq[_0x37e8('35','gW9Z')](tBKPKq[_0x37e8('36','9myN')],'YaEec')){tBKPKq['uAiGQ'](fn,escape?tBKPKq['rQYAW'](inlinecss,html):html);}else{text=_0x1f9f05(html)[_0x37e8('37','YUTD')];}});};export const getTemplateWrapped=(template,fn)=>{var dDULAZ={'LjzGh':_0x37e8('38','J4QT'),'cGQAo':function(x,y){return x||y;},'gzFec':_0x37e8('39','gW9Z'),'kEtBE':_0x37e8('3a','5#8c')};let html='';const wrapInlineCSS=_0x554914['debounce'](()=>fn(wrap(inlinecss(html))),0x64);Settings[_0x37e8('3b','z147')](dDULAZ[_0x37e8('3c','J4QT')],()=>html&&wrapInlineCSS());Settings['get'](_0x37e8('3d','cdGY'),()=>html&&wrapInlineCSS());Settings[_0x37e8('3e','SPVx')](dDULAZ[_0x37e8('3f','YUTD')],()=>html&&wrapInlineCSS());Settings[_0x37e8('40','h*Hd')](template,(key,value)=>{var NvpMvT={'fhiES':function(callee){return callee();}};if('gfVjT'!==dDULAZ['LjzGh']){html=value||'';return html&&NvpMvT[_0x37e8('41','^ZSt')](wrapInlineCSS);}else{html=dDULAZ[_0x37e8('42','gW9Z')](value,'');return html&&wrapInlineCSS();}});};export const setSettings=_0xadc3d5=>{var PMLgKR={'FRdeL':'1|0|2|4|3','jjHMF':function(x,y){return x||y;},'dQiLH':function(callee,param1){return callee(param1);},'FgSvj':_0x37e8('43',']gs]'),'AhYtU':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'mrlwe':_0x37e8('44','[3Ya')};var qWelUs=PMLgKR[_0x37e8('45','xssc')][_0x37e8('46','Nq*(')]('|'),EWMswG=0x0;while(!![]){switch(qWelUs[EWMswG++]){case'0':Settings=_0xadc3d5;continue;case'1':var NWraWT={'nmYBO':function(x,y){return PMLgKR[_0x37e8('47','sUS2')](x,y);},'zjtQO':function(callee,param1){return PMLgKR[_0x37e8('48','rL7[')](callee,param1);}};continue;case'2':getTemplate(PMLgKR[_0x37e8('49','Q$ud')],value=>{contentHeader=replace(NWraWT[_0x37e8('4a','y4il')](value,''));body=NWraWT[_0x37e8('4b','wNsm')](inlinecss,contentHeader+_0x37e8('4c','q^Zf')+contentFooter);},![]);continue;case'3':body=inlinecss(contentHeader+_0x37e8('4d','13WE')+contentFooter);continue;case'4':PMLgKR[_0x37e8('4e','xssc')](getTemplate,PMLgKR[_0x37e8('4f','M%(x')],value=>{contentFooter=replace(value||'');body=inlinecss(contentHeader+_0x37e8('4c','q^Zf')+contentFooter);},![]);continue;}break;}};export const rfcMailPatternWithName=/^(?:.*<)?([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)(?:>?)$/;export const checkAddressFormat=from=>rfcMailPatternWithName[_0x37e8('50','wNsm')](from);export const sendNoWrap=({to,from,replyTo,subject,html,text,headers})=>{var OcfQQJ={'IpTSq':_0x37e8('51','CBYO'),'czuwj':function(callee,param1,param2){return callee(param1,param2);},'GtYiB':_0x37e8('52','a9%v'),'Hffwf':function(callee,param1){return callee(param1);},'RdOvx':function(x,y){return x===y;},'VuNqx':_0x37e8('53','cdGY'),'Ddswq':_0x37e8('54','gKqa'),'hOkqV':_0x37e8('55','Q$ud')};if(!OcfQQJ['Hffwf'](checkAddressFormat,to)){return;}if(!text){if(OcfQQJ[_0x37e8('56','rL7[')](OcfQQJ[_0x37e8('57','gKqa')],_0x37e8('58','13WE'))){return'';}else{text=_0x1f9f05(html)[_0x37e8('59','7ZBT')];}}if(settings[_0x37e8('5a','@9V@')](OcfQQJ[_0x37e8('5b','@9V@')])){if(OcfQQJ[_0x37e8('5c','u[zX')](OcfQQJ['Ddswq'],OcfQQJ[_0x37e8('5d','9nVm')])){if(settings[_0x37e8('5a','@9V@')](OcfQQJ['IpTSq'])){return replace(html,data);}return OcfQQJ['czuwj'](replaceEscaped,body[_0x37e8('5e','B2TF')](OcfQQJ[_0x37e8('5f','xssc')],html),data);}else{html=undefined;}}Meteor[_0x37e8('60','SPVx')](()=>Email[_0x37e8('61','gW9Z')]({'to':to,'from':from,'replyTo':replyTo,'subject':subject,'html':html,'text':text,'headers':headers}));};export const send=({to,from,replyTo,subject,html,text,data,headers})=>sendNoWrap({'to':to,'from':from,'replyTo':replyTo,'subject':replace(subject,data),'text':text?replace(text,data):_0x1f9f05(replace(html,data))[_0x37e8('62','sUS2')],'html':wrap(html,data),'headers':headers});export const checkAddressFormatAndThrow=(from,func)=>{var NTSOWU={'MlWJx':function(callee,param1){return callee(param1);},'NiaWv':_0x37e8('63','M%(x'),'VjuKq':_0x37e8('64','S!iz')};if(NTSOWU['MlWJx'](checkAddressFormat,from)){return!![];}throw new Meteor['Error'](NTSOWU[_0x37e8('65','YUTD')],NTSOWU[_0x37e8('66','^ZSt')],{'function':func});};export const getHeader=()=>contentHeader;export const getFooter=()=>contentFooter;