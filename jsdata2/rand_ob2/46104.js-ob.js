const _0x203f = [
    'value',
    '/optional-ssp/[[...rest]]',
    'query',
    'should\x20normalize\x20optional\x20values\x20correctly\x20for\x20SSG\x20page',
    '/optional-ssg',
    '/optional-ssg/[[...rest]]',
    '1=en%2Fes%2Fhello%252Fworld&rest=en%2Fes%2Fhello%252Fworld',
    'should\x20normalize\x20optional\x20values\x20correctly\x20for\x20API\x20page',
    '/api/optional',
    '/api/optional/[[...rest]]',
    'url',
    '/api/optional?another=value',
    '/index',
    'should\x20match\x20the\x20root\x20dyanmic\x20page\x20correctly',
    '/[slug]',
    '#slug-page',
    '[slug]\x20page',
    '1201sjvATv',
    '909zbNgUy',
    '1835qXVYoi',
    '4uwwyQB',
    '1120302uLbTId',
    '472720AjmWGA',
    '58zAkSdR',
    '8912RxGMTK',
    '8476GMORze',
    '3HSCrOa',
    '2897329kcxIEC',
    'setTimeout',
    '../app',
    'tmpdir',
    'required-server-files-',
    'now',
    'Required\x20Server\x20Files',
    'next/dist/server/next-server',
    '.nft.json',
    'resolve',
    'next/package.json',
    'yarn',
    'next-v',
    '.tgz',
    'writeFile',
    'package.json',
    'latest',
    'inherit',
    'env',
    '.yarn-cache',
    'next',
    'build',
    '.next/BUILD_ID',
    'readJSON',
    '.next/required-server-files.json',
    'ensureDir',
    '-react',
    '-react/package.json',
    'install',
    'ignore',
    '.yarn',
    'remove',
    'sync',
    '**/*.nft.json',
    '.next/server/pages',
    'files',
    'forEach',
    'add',
    'has',
    'includes',
    'startsWith',
    '-react/node_modules',
    'copy',
    'node_modules',
    'http',
    'default',
    'APP_DIR',
    'createServer',
    'top-level',
    'statusCode',
    'listen',
    'log',
    'server.js',
    'global.nextConfig\x20=\x20',
    'stringify',
    'config',
    'production',
    'push',
    'should\x20output\x20required-server-files\x20manifest\x20correctly',
    'isArray',
    'toBe',
    'toBeGreaterThan',
    'configFile',
    'undefined',
    'trailingSlash',
    'boolean',
    'appDir',
    'string',
    'load',
    '#props',
    'text',
    '#index',
    'index\x20page',
    'random',
    'not',
    'should\x20render\x20dynamic\x20SSR\x20page\x20correctly',
    '/dynamic/first',
    '#dynamic',
    '#slug',
    'first',
    'hello',
    'world',
    '/dynamic/second',
    'parse',
    'dynamic\x20page',
    '/fallback/first',
    '#fallback',
    'fallback\x20page',
    '/fallback/second',
    '/_next/data/',
    '/fallback/third.json',
    'slug',
    'third',
    'should\x20render\x20SSR\x20page\x20correctly\x20with\x20x-matched-path',
    '/some-other-path',
    'should\x20render\x20dynamic\x20SSR\x20page\x20correctly\x20with\x20x-matched-path',
    '/dynamic/[slug]?slug=first',
    '/dynamic/[slug]?slug=second',
    'second',
    '1=second&slug=second',
    'should\x20render\x20fallback\x20page\x20correctly\x20with\x20x-matched-path\x20and\x20routes-matches',
    '1=first',
    '/fallback/[slug]',
    'should\x20return\x20data\x20correctly\x20with\x20x-matched-path',
    '/dynamic/first.json',
    'json',
    '/fallback/[slug].json',
    '1=second',
    'should\x20render\x20fallback\x20optional\x20catch-all\x20route\x20correctly\x20with\x20x-matched-path\x20and\x20routes-matches',
    '#catch-all',
    'toEqual',
    '/catch-all/[[...rest]]',
    '1=hello&catchAll=hello',
    'optional\x20catch-all\x20page',
    '/catch-all/[[..rest]]',
    '1=hello/world&catchAll=hello/world',
    'should\x20return\x20data\x20correctly\x20with\x20x-matched-path\x20for\x20optional\x20catch-all\x20route',
    '/catch-all.json',
    'params',
    '/catch-all/[[...rest]].json',
    '1=hello/world&rest=hello/world',
    '/fallback/first/',
    'manual',
    'status',
    'should\x20normalize\x20catch-all\x20rewrite\x20query\x20values\x20correctly',
    '/some-catch-all/hello/world',
    'hello/world',
    '#router',
    'should\x20bubble\x20error\x20correctly\x20for\x20gip\x20page',
    '/errors/gip',
    'error',
    'gip\x20hit\x20an\x20oops',
    'should\x20bubble\x20error\x20correctly\x20for\x20gssp\x20page',
    '/errors/gssp',
    'toContain',
    'gssp\x20hit\x20an\x20oops',
    'should\x20bubble\x20error\x20correctly\x20for\x20gsp\x20page',
    'length',
    'should\x20bubble\x20error\x20correctly\x20for\x20API\x20page',
    'some\x20error\x20from\x20/api/error',
    'should\x20normalize\x20optional\x20values\x20correctly\x20for\x20SSP\x20page',
    '/optional-ssp'
];
const _0x1d52d0 = _0x84f5;
(function (_0x5d444f, _0x80982b) {
    const _0x2f9c5c = _0x84f5;
    while (!![]) {
        try {
            const _0x2d1afb = -parseInt(_0x2f9c5c(0xc1)) * parseInt(_0x2f9c5c(0xc2)) + -parseInt(_0x2f9c5c(0xc3)) * -parseInt(_0x2f9c5c(0xc4)) + -parseInt(_0x2f9c5c(0xc5)) + parseInt(_0x2f9c5c(0xc6)) + -parseInt(_0x2f9c5c(0xc7)) * parseInt(_0x2f9c5c(0xc8)) + -parseInt(_0x2f9c5c(0xc9)) * parseInt(_0x2f9c5c(0xca)) + parseInt(_0x2f9c5c(0xcb));
            if (_0x2d1afb === _0x80982b)
                break;
            else
                _0x5d444f['push'](_0x5d444f['shift']());
        } catch (_0x3b0e50) {
            _0x5d444f['push'](_0x5d444f['shift']());
        }
    }
}(_0x203f, 0x981ce));
import _0x2f9863 from 'os';
import _0x1f74d5 from 'glob';
import _0x2da017 from 'fs-extra';
import _0x50b747 from 'execa';
import _0x4a4a8d from 'cheerio';
import {
    join,
    dirname,
    relative
} from 'path';
import { version } from 'next/package';
import { recursiveReadDir } from 'next/dist/lib/recursive-readdir';
import {
    fetchViaHTTP,
    findPort,
    initNextServerScript,
    killApp,
    renderViaHTTP
} from 'next-test-utils';
function _0x84f5(_0xc02fcb, _0x153cf9) {
    return _0x84f5 = function (_0x203fd4, _0x84f530) {
        _0x203fd4 = _0x203fd4 - 0xc1;
        let _0x5a90c4 = _0x203f[_0x203fd4];
        return _0x5a90c4;
    }, _0x84f5(_0xc02fcb, _0x153cf9);
}
jest[_0x1d52d0(0xcc)](0x3e8 * 0x3c * 0x2);
const appDir = join(__dirname, _0x1d52d0(0xcd)), workDir = join(_0x2f9863[_0x1d52d0(0xce)](), _0x1d52d0(0xcf) + Date[_0x1d52d0(0xd0)]());
let server, nextApp, appPort, buildId, requiredFilesManifest, errors = [];
describe(_0x1d52d0(0xd1), () => {
    const _0x33ad8b = _0x1d52d0;
    beforeAll(async () => {
        const _0x544371 = _0x84f5, _0x3edab7 = await _0x2da017['readJSON'](require['resolve'](_0x544371(0xd2)) + _0x544371(0xd3)), _0x5a6341 = dirname(require[_0x544371(0xd4)](_0x544371(0xd5)));
        await _0x50b747(_0x544371(0xd6), ['pack'], { 'cwd': _0x5a6341 });
        const _0x47b7a0 = join(_0x5a6341, _0x544371(0xd7) + version + _0x544371(0xd8));
        await _0x2da017['ensureDir'](workDir), await _0x2da017[_0x544371(0xd9)](join(workDir, _0x544371(0xda)), JSON['stringify']({
            'dependencies': {
                'next': _0x47b7a0,
                'react': 'latest',
                'react-dom': _0x544371(0xdb)
            }
        })), await _0x2da017['copy'](appDir, workDir), await _0x50b747(_0x544371(0xd6), ['install'], {
            'cwd': workDir,
            'stdio': [
                'ignore',
                _0x544371(0xdc),
                'inherit'
            ],
            'env': {
                ...process[_0x544371(0xdd)],
                'YARN_CACHE_FOLDER': join(workDir, _0x544371(0xde))
            }
        }), await _0x50b747(_0x544371(0xd6), [
            _0x544371(0xdf),
            _0x544371(0xe0)
        ], {
            'cwd': workDir,
            'stdio': [
                'ignore',
                'inherit',
                _0x544371(0xdc)
            ],
            'env': {
                ...process[_0x544371(0xdd)],
                'NODE_ENV': 'production',
                'NOW_BUILDER': '1'
            }
        }), buildId = await _0x2da017['readFile'](join(workDir, _0x544371(0xe1)), 'utf8'), requiredFilesManifest = await _0x2da017[_0x544371(0xe2)](join(workDir, _0x544371(0xe3))), await _0x2da017[_0x544371(0xe4)](workDir + _0x544371(0xe5)), await _0x2da017[_0x544371(0xd9)](join(workDir + _0x544371(0xe6)), JSON['stringify']({
            'dependencies': {
                'react': _0x544371(0xdb),
                'react-dom': 'latest'
            }
        })), await _0x50b747(_0x544371(0xd6), [_0x544371(0xe7)], {
            'cwd': workDir + _0x544371(0xe5),
            'stdio': [
                _0x544371(0xe8),
                _0x544371(0xdc),
                _0x544371(0xdc)
            ],
            'env': {
                ...process[_0x544371(0xdd)],
                'YARN_CACHE_FOLDER': join(workDir, _0x544371(0xe9))
            }
        }), await _0x2da017[_0x544371(0xea)](_0x47b7a0);
        const _0x22d7f4 = await recursiveReadDir(workDir, /.*/), _0x14e774 = await _0x1f74d5[_0x544371(0xeb)](_0x544371(0xec), { 'cwd': join(workDir, _0x544371(0xed)) }), _0x43612d = new Set();
        for (const _0x49545a of _0x14e774) {
            const _0x217c3e = join(workDir, _0x544371(0xed), _0x49545a), _0x2a5e31 = await _0x2da017[_0x544371(0xe2)](_0x217c3e);
            _0x2a5e31[_0x544371(0xee)][_0x544371(0xef)](_0x5c5fce => _0x43612d[_0x544371(0xf0)](relative(workDir, join(dirname(_0x217c3e), _0x5c5fce))));
        }
        for (const _0x2b04f9 of _0x22d7f4) {
            const _0x275848 = join('./', _0x2b04f9);
            !_0x3edab7['files']['includes'](_0x275848) && _0x2b04f9 !== '/node_modules/next/dist/server/next-server.js' && !_0x43612d[_0x544371(0xf1)](_0x275848) && !requiredFilesManifest[_0x544371(0xee)][_0x544371(0xf2)](_0x275848) && !_0x275848[_0x544371(0xf3)]('.next/server') && _0x275848 !== _0x544371(0xe3) && await _0x2da017[_0x544371(0xea)](join(workDir, _0x2b04f9));
        }
        for (const _0x1ee0f7 of await _0x2da017['readdir'](workDir + _0x544371(0xf4))) {
            await _0x2da017[_0x544371(0xf5)](join(workDir + _0x544371(0xf4), _0x1ee0f7), join(workDir, _0x544371(0xf6), _0x1ee0f7));
        }
        await _0x2da017[_0x544371(0xea)](workDir + _0x544371(0xe5));
        async function _0x2de057() {
            const _0x27af91 = _0x544371, _0x40a154 = require(_0x27af91(0xf7)), _0x39a25e = require(_0x27af91(0xd2))[_0x27af91(0xf8)], _0x23c632 = process[_0x27af91(0xdd)]['PORT'];
            nextApp = new _0x39a25e({
                'conf': global['nextConfig'],
                'dir': process[_0x27af91(0xdd)][_0x27af91(0xf9)],
                'quiet': ![],
                'minimalMode': !![]
            }), server = _0x40a154[_0x27af91(0xfa)](async (_0x52ea5e, _0x3aac0a) => {
                const _0x5d3792 = _0x27af91;
                try {
                    await nextApp['getRequestHandler']()(_0x52ea5e, _0x3aac0a);
                } catch (_0x585df8) {
                    console['error'](_0x5d3792(0xfb), _0x585df8), _0x3aac0a[_0x5d3792(0xfc)] = 0x1f4, _0x3aac0a['end']('error');
                }
            }), await new Promise((_0x28cc14, _0xc8bd9b) => {
                const _0x43d704 = _0x27af91;
                server[_0x43d704(0xfd)](_0x23c632, _0x2f9e60 => _0x2f9e60 ? _0xc8bd9b(_0x2f9e60) : _0x28cc14());
            }), console[_0x27af91(0xfe)]('Listening\x20at\x20::' + _0x23c632);
        }
        const _0xf94a91 = join(workDir, _0x544371(0xff));
        await _0x2da017[_0x544371(0xd9)](_0xf94a91, _0x544371(0x100) + JSON[_0x544371(0x101)](requiredFilesManifest[_0x544371(0x102)]) + ';\x0a' + _0x2de057['toString']() + ';\x0a' + 'startServer().catch(console.error)'), appPort = await findPort(), server = await initNextServerScript(_0xf94a91, /Listening at/, {
            ...process[_0x544371(0xdd)],
            'NODE_ENV': _0x544371(0x103),
            'PORT': appPort,
            'APP_DIR': workDir
        }, undefined, {
            'cwd': workDir,
            'onStderr'(_0x43a169) {
                const _0x4356b4 = _0x544371;
                _0x43a169[_0x4356b4(0xf2)]('top-level') && errors[_0x4356b4(0x104)](_0x43a169);
            }
        });
    }), afterAll(async () => {
        const _0x53e805 = _0x84f5;
        if (server)
            killApp(server);
        await _0x2da017[_0x53e805(0xea)](workDir);
    }), it(_0x33ad8b(0x105), async () => {
        const _0x573b2e = _0x33ad8b;
        expect(requiredFilesManifest['version'])['toBe'](0x1), expect(Array[_0x573b2e(0x106)](requiredFilesManifest[_0x573b2e(0xee)]))[_0x573b2e(0x107)](!![]), expect(Array['isArray'](requiredFilesManifest[_0x573b2e(0xe8)]))[_0x573b2e(0x107)](!![]), expect(requiredFilesManifest[_0x573b2e(0xee)]['length'])[_0x573b2e(0x108)](0x0), expect(requiredFilesManifest['ignore']['length'])['toBeGreaterThan'](0x0), expect(typeof requiredFilesManifest[_0x573b2e(0x102)][_0x573b2e(0x109)])[_0x573b2e(0x107)](_0x573b2e(0x10a)), expect(typeof requiredFilesManifest[_0x573b2e(0x102)][_0x573b2e(0x10b)])[_0x573b2e(0x107)](_0x573b2e(0x10c)), expect(typeof requiredFilesManifest[_0x573b2e(0x10d)])[_0x573b2e(0x107)](_0x573b2e(0x10e));
        for (const _0x15ecde of requiredFilesManifest[_0x573b2e(0xee)]) {
            expect(await _0x2da017['exists'](join(workDir, _0x15ecde)))[_0x573b2e(0x107)](!![]);
        }
        expect(await _0x2da017['exists'](join(workDir, '.next/server')))['toBe'](!![]);
    }), it('should\x20render\x20SSR\x20page\x20correctly', async () => {
        const _0x4a90b8 = _0x33ad8b, _0x28bdbb = await renderViaHTTP(appPort, '/'), _0x572674 = _0x4a4a8d[_0x4a90b8(0x10f)](_0x28bdbb), _0x2fe014 = JSON['parse'](_0x572674(_0x4a90b8(0x110))[_0x4a90b8(0x111)]());
        expect(_0x572674(_0x4a90b8(0x112))[_0x4a90b8(0x111)]())[_0x4a90b8(0x107)](_0x4a90b8(0x113)), expect(_0x2fe014['hello'])[_0x4a90b8(0x107)]('world');
        const _0x4ccefa = await renderViaHTTP(appPort, '/'), _0x2bed6b = _0x4a4a8d[_0x4a90b8(0x10f)](_0x4ccefa), _0x156a4d = JSON['parse'](_0x2bed6b('#props')[_0x4a90b8(0x111)]());
        expect(_0x2bed6b('#index')[_0x4a90b8(0x111)]())[_0x4a90b8(0x107)](_0x4a90b8(0x113)), expect(isNaN(_0x156a4d[_0x4a90b8(0x114)]))[_0x4a90b8(0x107)](![]), expect(_0x156a4d[_0x4a90b8(0x114)])[_0x4a90b8(0x115)]['toBe'](_0x2fe014['random']);
    }), it(_0x33ad8b(0x116), async () => {
        const _0x247eaa = _0x33ad8b, _0x56c91c = await renderViaHTTP(appPort, _0x247eaa(0x117)), _0x400e40 = _0x4a4a8d[_0x247eaa(0x10f)](_0x56c91c), _0x1ef78e = JSON['parse'](_0x400e40(_0x247eaa(0x110))['text']());
        expect(_0x400e40(_0x247eaa(0x118))[_0x247eaa(0x111)]())['toBe']('dynamic\x20page'), expect(_0x400e40(_0x247eaa(0x119))[_0x247eaa(0x111)]())[_0x247eaa(0x107)](_0x247eaa(0x11a)), expect(_0x1ef78e[_0x247eaa(0x11b)])[_0x247eaa(0x107)](_0x247eaa(0x11c));
        const _0x417f89 = await renderViaHTTP(appPort, _0x247eaa(0x11d)), _0x1babc8 = _0x4a4a8d[_0x247eaa(0x10f)](_0x417f89), _0x42a2b6 = JSON[_0x247eaa(0x11e)](_0x1babc8(_0x247eaa(0x110))[_0x247eaa(0x111)]());
        expect(_0x1babc8(_0x247eaa(0x118))[_0x247eaa(0x111)]())[_0x247eaa(0x107)](_0x247eaa(0x11f)), expect(_0x1babc8(_0x247eaa(0x119))[_0x247eaa(0x111)]())['toBe']('second'), expect(isNaN(_0x42a2b6[_0x247eaa(0x114)]))[_0x247eaa(0x107)](![]), expect(_0x42a2b6[_0x247eaa(0x114)])['not'][_0x247eaa(0x107)](_0x1ef78e[_0x247eaa(0x114)]);
    }), it('should\x20render\x20fallback\x20page\x20correctly', async () => {
        const _0x107936 = _0x33ad8b, _0x23babe = await renderViaHTTP(appPort, _0x107936(0x120)), _0x305c17 = _0x4a4a8d['load'](_0x23babe), _0x12862c = JSON['parse'](_0x305c17(_0x107936(0x110))[_0x107936(0x111)]());
        expect(_0x305c17(_0x107936(0x121))['text']())[_0x107936(0x107)](_0x107936(0x122)), expect(_0x305c17(_0x107936(0x119))[_0x107936(0x111)]())[_0x107936(0x107)](_0x107936(0x11a)), expect(_0x12862c[_0x107936(0x11b)])[_0x107936(0x107)]('world');
        const _0x48ab32 = await renderViaHTTP(appPort, '/fallback/first'), _0x4738c5 = _0x4a4a8d[_0x107936(0x10f)](_0x48ab32), _0x4d6ff8 = JSON['parse'](_0x4738c5(_0x107936(0x110))[_0x107936(0x111)]());
        expect(_0x4738c5('#fallback')[_0x107936(0x111)]())[_0x107936(0x107)](_0x107936(0x122)), expect(_0x4738c5(_0x107936(0x119))['text']())[_0x107936(0x107)](_0x107936(0x11a)), expect(isNaN(_0x4d6ff8[_0x107936(0x114)]))['toBe'](![]), expect(_0x4d6ff8[_0x107936(0x114)])[_0x107936(0x115)][_0x107936(0x107)](_0x12862c['random']);
        const _0x44c7d1 = await renderViaHTTP(appPort, _0x107936(0x123)), _0x84fb5a = _0x4a4a8d[_0x107936(0x10f)](_0x44c7d1), _0x2de8f7 = JSON[_0x107936(0x11e)](_0x84fb5a('#props')['text']());
        expect(_0x84fb5a(_0x107936(0x121))['text']())[_0x107936(0x107)](_0x107936(0x122)), expect(_0x84fb5a(_0x107936(0x119))[_0x107936(0x111)]())[_0x107936(0x107)]('second'), expect(isNaN(_0x2de8f7['random']))['toBe'](![]);
        const {pageProps: _0x1ba5d7} = JSON[_0x107936(0x11e)](await renderViaHTTP(appPort, _0x107936(0x124) + buildId + _0x107936(0x125)));
        expect(_0x1ba5d7[_0x107936(0x11b)])[_0x107936(0x107)]('world'), expect(_0x1ba5d7[_0x107936(0x126)])[_0x107936(0x107)](_0x107936(0x127));
    }), it(_0x33ad8b(0x128), async () => {
        const _0x3ae665 = _0x33ad8b, _0x3cde85 = await renderViaHTTP(appPort, _0x3ae665(0x129), undefined, { 'headers': { 'x-matched-path': '/' } }), _0x478277 = _0x4a4a8d[_0x3ae665(0x10f)](_0x3cde85), _0x2a4612 = JSON[_0x3ae665(0x11e)](_0x478277('#props')[_0x3ae665(0x111)]());
        expect(_0x478277(_0x3ae665(0x112))[_0x3ae665(0x111)]())[_0x3ae665(0x107)](_0x3ae665(0x113)), expect(_0x2a4612[_0x3ae665(0x11b)])[_0x3ae665(0x107)](_0x3ae665(0x11c));
        const _0x93ba08 = await renderViaHTTP(appPort, '/some-other-path', undefined, { 'headers': { 'x-matched-path': '/' } }), _0x4660bb = _0x4a4a8d['load'](_0x93ba08), _0x54eecc = JSON['parse'](_0x4660bb('#props')[_0x3ae665(0x111)]());
        expect(_0x4660bb('#index')[_0x3ae665(0x111)]())[_0x3ae665(0x107)](_0x3ae665(0x113)), expect(isNaN(_0x54eecc[_0x3ae665(0x114)]))[_0x3ae665(0x107)](![]), expect(_0x54eecc[_0x3ae665(0x114)])[_0x3ae665(0x115)][_0x3ae665(0x107)](_0x2a4612[_0x3ae665(0x114)]);
    }), it(_0x33ad8b(0x12a), async () => {
        const _0x2c4739 = _0x33ad8b, _0x37604b = await renderViaHTTP(appPort, '/some-other-path', undefined, { 'headers': { 'x-matched-path': _0x2c4739(0x12b) } }), _0x2f103a = _0x4a4a8d[_0x2c4739(0x10f)](_0x37604b), _0x210d5a = JSON['parse'](_0x2f103a(_0x2c4739(0x110))[_0x2c4739(0x111)]());
        expect(_0x2f103a(_0x2c4739(0x118))[_0x2c4739(0x111)]())['toBe'](_0x2c4739(0x11f)), expect(_0x2f103a('#slug')['text']())[_0x2c4739(0x107)](_0x2c4739(0x11a)), expect(_0x210d5a[_0x2c4739(0x11b)])['toBe'](_0x2c4739(0x11c));
        const _0x234ced = await renderViaHTTP(appPort, _0x2c4739(0x129), undefined, { 'headers': { 'x-matched-path': _0x2c4739(0x12c) } }), _0xd05df3 = _0x4a4a8d[_0x2c4739(0x10f)](_0x234ced), _0x10d5d3 = JSON[_0x2c4739(0x11e)](_0xd05df3(_0x2c4739(0x110))['text']());
        expect(_0xd05df3(_0x2c4739(0x118))[_0x2c4739(0x111)]())['toBe'](_0x2c4739(0x11f)), expect(_0xd05df3(_0x2c4739(0x119))[_0x2c4739(0x111)]())['toBe'](_0x2c4739(0x12d)), expect(isNaN(_0x10d5d3[_0x2c4739(0x114)]))['toBe'](![]), expect(_0x10d5d3[_0x2c4739(0x114)])[_0x2c4739(0x115)][_0x2c4739(0x107)](_0x210d5a[_0x2c4739(0x114)]);
        const _0x1da914 = await renderViaHTTP(appPort, _0x2c4739(0x129), undefined, {
                'headers': {
                    'x-matched-path': '/dynamic/[slug]?slug=%5Bslug%5D.json',
                    'x-now-route-matches': _0x2c4739(0x12e)
                }
            }), _0x16450d = _0x4a4a8d[_0x2c4739(0x10f)](_0x1da914), _0x43b5f2 = JSON['parse'](_0x16450d(_0x2c4739(0x110))[_0x2c4739(0x111)]());
        expect(_0x16450d('#dynamic')[_0x2c4739(0x111)]())['toBe']('dynamic\x20page'), expect(_0x16450d('#slug')[_0x2c4739(0x111)]())[_0x2c4739(0x107)](_0x2c4739(0x12d)), expect(isNaN(_0x43b5f2['random']))[_0x2c4739(0x107)](![]), expect(_0x43b5f2[_0x2c4739(0x114)])['not'][_0x2c4739(0x107)](_0x210d5a[_0x2c4739(0x114)]);
    }), it(_0x33ad8b(0x12f), async () => {
        const _0x194e52 = _0x33ad8b, _0x226fb2 = await renderViaHTTP(appPort, _0x194e52(0x120), undefined, {
                'headers': {
                    'x-matched-path': _0x194e52(0x120),
                    'x-now-route-matches': _0x194e52(0x130)
                }
            }), _0xa048c6 = _0x4a4a8d[_0x194e52(0x10f)](_0x226fb2), _0x1612df = JSON[_0x194e52(0x11e)](_0xa048c6(_0x194e52(0x110))[_0x194e52(0x111)]());
        expect(_0xa048c6('#fallback')[_0x194e52(0x111)]())[_0x194e52(0x107)](_0x194e52(0x122)), expect(_0xa048c6('#slug')[_0x194e52(0x111)]())[_0x194e52(0x107)](_0x194e52(0x11a)), expect(_0x1612df['hello'])[_0x194e52(0x107)]('world');
        const _0x18f1c5 = await renderViaHTTP(appPort, _0x194e52(0x131), undefined, {
                'headers': {
                    'x-matched-path': '/fallback/[slug]',
                    'x-now-route-matches': '1=second'
                }
            }), _0x1847c8 = _0x4a4a8d[_0x194e52(0x10f)](_0x18f1c5), _0x44871d = JSON['parse'](_0x1847c8(_0x194e52(0x110))[_0x194e52(0x111)]());
        expect(_0x1847c8('#fallback')['text']())[_0x194e52(0x107)](_0x194e52(0x122)), expect(_0x1847c8(_0x194e52(0x119))[_0x194e52(0x111)]())[_0x194e52(0x107)](_0x194e52(0x12d)), expect(isNaN(_0x44871d['random']))[_0x194e52(0x107)](![]), expect(_0x44871d[_0x194e52(0x114)])[_0x194e52(0x115)][_0x194e52(0x107)](_0x1612df[_0x194e52(0x114)]);
    }), it(_0x33ad8b(0x132), async () => {
        const _0x53f228 = _0x33ad8b, _0x2e44d5 = await fetchViaHTTP(appPort, _0x53f228(0x124) + buildId + _0x53f228(0x133), undefined, { 'headers': { 'x-matched-path': _0x53f228(0x12b) } }), {pageProps: _0x4c54ae} = await _0x2e44d5[_0x53f228(0x134)]();
        expect(_0x4c54ae[_0x53f228(0x126)])[_0x53f228(0x107)](_0x53f228(0x11a)), expect(_0x4c54ae['hello'])[_0x53f228(0x107)](_0x53f228(0x11c));
        const _0x54639a = await fetchViaHTTP(appPort, _0x53f228(0x124) + buildId + '/fallback/[slug].json', undefined, {
                'headers': {
                    'x-matched-path': _0x53f228(0x124) + buildId + _0x53f228(0x135),
                    'x-now-route-matches': _0x53f228(0x136)
                }
            }), {pageProps: _0x123ae0} = await _0x54639a[_0x53f228(0x134)]();
        expect(_0x123ae0[_0x53f228(0x126)])[_0x53f228(0x107)](_0x53f228(0x12d)), expect(_0x123ae0[_0x53f228(0x11b)])['toBe'](_0x53f228(0x11c));
    }), it(_0x33ad8b(0x137), async () => {
        const _0x56beae = _0x33ad8b, _0x3514ff = await renderViaHTTP(appPort, '/catch-all/[[...rest]]', undefined, {
                'headers': {
                    'x-matched-path': '/catch-all/[[...rest]]',
                    'x-now-route-matches': ''
                }
            }), _0x153e38 = _0x4a4a8d[_0x56beae(0x10f)](_0x3514ff), _0xdcfa52 = JSON['parse'](_0x153e38(_0x56beae(0x110))[_0x56beae(0x111)]());
        expect(_0x153e38(_0x56beae(0x138))['text']())['toBe']('optional\x20catch-all\x20page'), expect(_0xdcfa52['params'])[_0x56beae(0x139)]({}), expect(_0xdcfa52['hello'])[_0x56beae(0x107)]('world');
        const _0x3bc7c3 = await renderViaHTTP(appPort, _0x56beae(0x13a), undefined, {
                'headers': {
                    'x-matched-path': _0x56beae(0x13a),
                    'x-now-route-matches': _0x56beae(0x13b)
                }
            }), _0x5dd09b = _0x4a4a8d[_0x56beae(0x10f)](_0x3bc7c3), _0x18ed4d = JSON['parse'](_0x5dd09b(_0x56beae(0x110))['text']());
        expect(_0x5dd09b(_0x56beae(0x138))[_0x56beae(0x111)]())['toBe'](_0x56beae(0x13c)), expect(_0x18ed4d['params'])['toEqual']({ 'rest': [_0x56beae(0x11b)] }), expect(isNaN(_0x18ed4d['random']))['toBe'](![]), expect(_0x18ed4d[_0x56beae(0x114)])[_0x56beae(0x115)][_0x56beae(0x107)](_0xdcfa52[_0x56beae(0x114)]);
        const _0x1c6e30 = await renderViaHTTP(appPort, _0x56beae(0x13d), undefined, {
                'headers': {
                    'x-matched-path': '/catch-all/[[...rest]]',
                    'x-now-route-matches': _0x56beae(0x13e)
                }
            }), _0x3e0c17 = _0x4a4a8d[_0x56beae(0x10f)](_0x1c6e30), _0x39697 = JSON[_0x56beae(0x11e)](_0x3e0c17(_0x56beae(0x110))[_0x56beae(0x111)]());
        expect(_0x3e0c17(_0x56beae(0x138))[_0x56beae(0x111)]())[_0x56beae(0x107)](_0x56beae(0x13c)), expect(_0x39697['params'])[_0x56beae(0x139)]({
            'rest': [
                _0x56beae(0x11b),
                _0x56beae(0x11c)
            ]
        }), expect(isNaN(_0x39697[_0x56beae(0x114)]))[_0x56beae(0x107)](![]), expect(_0x39697[_0x56beae(0x114)])[_0x56beae(0x115)][_0x56beae(0x107)](_0xdcfa52[_0x56beae(0x114)]);
    }), it(_0x33ad8b(0x13f), async () => {
        const _0x4b8819 = _0x33ad8b, _0x173395 = await fetchViaHTTP(appPort, _0x4b8819(0x124) + buildId + _0x4b8819(0x140), undefined, { 'headers': { 'x-matched-path': _0x4b8819(0x13a) } }), {pageProps: _0x6a2c0a} = await _0x173395[_0x4b8819(0x134)]();
        expect(_0x6a2c0a[_0x4b8819(0x141)])[_0x4b8819(0x139)]({}), expect(_0x6a2c0a[_0x4b8819(0x11b)])['toBe'](_0x4b8819(0x11c));
        const _0x12b980 = await fetchViaHTTP(appPort, _0x4b8819(0x124) + buildId + '/catch-all/[[...rest]].json', undefined, {
                'headers': {
                    'x-matched-path': _0x4b8819(0x124) + buildId + '/catch-all/[[...rest]].json',
                    'x-now-route-matches': '1=hello&rest=hello'
                }
            }), {pageProps: _0x142e0b} = await _0x12b980[_0x4b8819(0x134)]();
        expect(_0x142e0b['params'])['toEqual']({ 'rest': [_0x4b8819(0x11b)] }), expect(_0x142e0b[_0x4b8819(0x11b)])['toBe'](_0x4b8819(0x11c));
        const _0x5778dc = await fetchViaHTTP(appPort, _0x4b8819(0x124) + buildId + _0x4b8819(0x142), undefined, {
                'headers': {
                    'x-matched-path': '/_next/data/' + buildId + '/catch-all/[[...rest]].json',
                    'x-now-route-matches': _0x4b8819(0x143)
                }
            }), {pageProps: _0x10b582} = await _0x5778dc[_0x4b8819(0x134)]();
        expect(_0x10b582[_0x4b8819(0x141)])[_0x4b8819(0x139)]({
            'rest': [
                _0x4b8819(0x11b),
                _0x4b8819(0x11c)
            ]
        }), expect(_0x10b582[_0x4b8819(0x11b)])[_0x4b8819(0x107)](_0x4b8819(0x11c));
    }), it('should\x20not\x20apply\x20trailingSlash\x20redirect', async () => {
        const _0x468020 = _0x33ad8b;
        for (const _0x34fc0e of [
                '/',
                '/dynamic/another/',
                '/dynamic/another',
                _0x468020(0x144),
                _0x468020(0x120),
                '/fallback/another/',
                '/fallback/another'
            ]) {
            const _0x46a28a = await fetchViaHTTP(appPort, _0x34fc0e, undefined, { 'redirect': _0x468020(0x145) });
            expect(_0x46a28a[_0x468020(0x146)])[_0x468020(0x107)](0xc8);
        }
    }), it(_0x33ad8b(0x147), async () => {
        const _0x20da51 = _0x33ad8b, _0x607af7 = await renderViaHTTP(appPort, _0x20da51(0x148), { 'path': _0x20da51(0x149) }, { 'headers': { 'x-matched-path': '/' } }), _0x241c27 = _0x4a4a8d[_0x20da51(0x10f)](_0x607af7);
        expect(JSON[_0x20da51(0x11e)](_0x241c27(_0x20da51(0x14a))['text']())['query'])[_0x20da51(0x139)]({
            'path': [
                _0x20da51(0x11b),
                'world'
            ]
        });
    }), it(_0x33ad8b(0x14b), async () => {
        const _0x348c4e = _0x33ad8b;
        errors = [];
        const _0x3479f0 = await fetchViaHTTP(appPort, _0x348c4e(0x14c), { 'crash': '1' });
        expect(_0x3479f0[_0x348c4e(0x146)])[_0x348c4e(0x107)](0x1f4), expect(await _0x3479f0[_0x348c4e(0x111)]())['toBe'](_0x348c4e(0x14d)), expect(errors['length'])[_0x348c4e(0x107)](0x1), expect(errors[0x0])['toContain'](_0x348c4e(0x14e));
    }), it(_0x33ad8b(0x14f), async () => {
        const _0x402e95 = _0x33ad8b;
        errors = [];
        const _0x1d37ca = await fetchViaHTTP(appPort, _0x402e95(0x150), { 'crash': '1' });
        expect(_0x1d37ca[_0x402e95(0x146)])[_0x402e95(0x107)](0x1f4), expect(await _0x1d37ca[_0x402e95(0x111)]())[_0x402e95(0x107)](_0x402e95(0x14d)), expect(errors['length'])[_0x402e95(0x107)](0x1), expect(errors[0x0])[_0x402e95(0x151)](_0x402e95(0x152));
    }), it(_0x33ad8b(0x153), async () => {
        const _0x1bd33e = _0x33ad8b;
        errors = [];
        const _0x2c444 = await fetchViaHTTP(appPort, '/errors/gsp/crash');
        expect(_0x2c444[_0x1bd33e(0x146)])[_0x1bd33e(0x107)](0x1f4), expect(await _0x2c444['text']())[_0x1bd33e(0x107)](_0x1bd33e(0x14d)), expect(errors[_0x1bd33e(0x154)])['toBe'](0x1), expect(errors[0x0])[_0x1bd33e(0x151)]('gsp\x20hit\x20an\x20oops');
    }), it(_0x33ad8b(0x155), async () => {
        const _0x44c5ae = _0x33ad8b;
        errors = [];
        const _0x386ae2 = await fetchViaHTTP(appPort, '/api/error');
        expect(_0x386ae2['status'])[_0x44c5ae(0x107)](0x1f4), expect(await _0x386ae2[_0x44c5ae(0x111)]())[_0x44c5ae(0x107)](_0x44c5ae(0x14d)), expect(errors[_0x44c5ae(0x154)])[_0x44c5ae(0x107)](0x1), expect(errors[0x0])[_0x44c5ae(0x151)](_0x44c5ae(0x156));
    }), it(_0x33ad8b(0x157), async () => {
        const _0x500c12 = _0x33ad8b, _0x30c8ee = await fetchViaHTTP(appPort, _0x500c12(0x158), {
                'rest': '',
                'another': _0x500c12(0x159)
            }, { 'headers': { 'x-matched-path': _0x500c12(0x15a) } }), _0x59ff88 = await _0x30c8ee[_0x500c12(0x111)](), _0xdd83ed = _0x4a4a8d['load'](_0x59ff88), _0x55f862 = JSON[_0x500c12(0x11e)](_0xdd83ed(_0x500c12(0x110))['text']());
        expect(_0x55f862[_0x500c12(0x141)])['toEqual']({}), expect(_0x55f862[_0x500c12(0x15b)])[_0x500c12(0x139)]({ 'another': _0x500c12(0x159) });
    }), it(_0x33ad8b(0x15c), async () => {
        const _0x44fdce = _0x33ad8b, _0x43b16a = await fetchViaHTTP(appPort, _0x44fdce(0x15d), {
                'rest': '',
                'another': _0x44fdce(0x159)
            }, { 'headers': { 'x-matched-path': _0x44fdce(0x15e) } }), _0x321391 = await _0x43b16a[_0x44fdce(0x111)](), _0x10805f = _0x4a4a8d[_0x44fdce(0x10f)](_0x321391), _0x511583 = JSON[_0x44fdce(0x11e)](_0x10805f(_0x44fdce(0x110))[_0x44fdce(0x111)]());
        expect(_0x511583[_0x44fdce(0x141)])[_0x44fdce(0x139)]({});
    }), it('should\x20normalize\x20optional\x20values\x20correctly\x20for\x20SSG\x20page\x20with\x20encoded\x20slash', async () => {
        const _0x3b3747 = _0x33ad8b, _0x5cc1c0 = await fetchViaHTTP(appPort, _0x3b3747(0x15e), undefined, {
                'headers': {
                    'x-matched-path': _0x3b3747(0x15e),
                    'x-now-route-matches': _0x3b3747(0x15f)
                }
            }), _0x41b60e = await _0x5cc1c0[_0x3b3747(0x111)](), _0x2eca25 = _0x4a4a8d[_0x3b3747(0x10f)](_0x41b60e), _0x44a9d3 = JSON[_0x3b3747(0x11e)](_0x2eca25(_0x3b3747(0x110))['text']());
        expect(_0x44a9d3['params'])['toEqual']({
            'rest': [
                'en',
                'es',
                _0x3b3747(0x149)
            ]
        });
    }), it(_0x33ad8b(0x160), async () => {
        const _0x17c7f8 = _0x33ad8b, _0x44742e = await fetchViaHTTP(appPort, _0x17c7f8(0x161), {
                'rest': '',
                'another': _0x17c7f8(0x159)
            }, { 'headers': { 'x-matched-path': _0x17c7f8(0x162) } }), _0xe4f8b4 = await _0x44742e[_0x17c7f8(0x134)]();
        expect(_0xe4f8b4[_0x17c7f8(0x15b)])[_0x17c7f8(0x139)]({ 'another': _0x17c7f8(0x159) }), expect(_0xe4f8b4[_0x17c7f8(0x163)])[_0x17c7f8(0x107)](_0x17c7f8(0x164));
    }), it('should\x20match\x20the\x20index\x20page\x20correctly', async () => {
        const _0x5ccfd1 = _0x33ad8b, _0x5b1ab5 = await fetchViaHTTP(appPort, '/', undefined, {
                'headers': { 'x-matched-path': _0x5ccfd1(0x165) },
                'redirect': 'manual'
            }), _0xf32741 = await _0x5b1ab5[_0x5ccfd1(0x111)](), _0x74b735 = _0x4a4a8d[_0x5ccfd1(0x10f)](_0xf32741);
        expect(_0x74b735(_0x5ccfd1(0x112))[_0x5ccfd1(0x111)]())[_0x5ccfd1(0x107)](_0x5ccfd1(0x113));
    }), it(_0x33ad8b(0x166), async () => {
        const _0x1ce27b = _0x33ad8b, _0x499139 = await fetchViaHTTP(appPort, '/index', undefined, {
                'headers': { 'x-matched-path': _0x1ce27b(0x167) },
                'redirect': 'manual'
            }), _0x42ff81 = await _0x499139[_0x1ce27b(0x111)](), _0x5325c5 = _0x4a4a8d[_0x1ce27b(0x10f)](_0x42ff81);
        expect(_0x5325c5(_0x1ce27b(0x168))['text']())[_0x1ce27b(0x107)](_0x1ce27b(0x169));
    });
});
