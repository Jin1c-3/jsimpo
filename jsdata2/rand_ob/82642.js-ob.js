const _0x1d9c = [
    'site.changed',
    'https://example.com/new-subscriber',
    'ignore_me',
    'subscriber.added',
    'webhook',
    'canary',
    'Fails\x20nicely\x20when\x20creating\x20an\x20orphaned\x20webhook',
    'yPXVn',
    'ncNUi',
    'startGhost',
    'get',
    'wZxSq',
    'doAuth',
    'integrations',
    'aNMqp',
    'zKXaO',
    'http://example.com/webhooks/test/extra/1',
    'YdCtA',
    'post',
    'API',
    'VbZEN',
    'send',
    'expect',
    'EqjUH',
    'cacheRules',
    'private',
    'body',
    'exist',
    'webhooks',
    'should',
    'target_url',
    'secret',
    'name',
    'equal',
    'api_version',
    'integration_id',
    'not',
    'headers',
    'location',
    'getApiQuery',
    'set',
    'tOrHO',
    'RhDTU',
    'OIaph',
    'fake-integration',
    'kKPsG',
    'url',
    'Content-Type',
    'errors',
    'zUUeD',
    'context',
    'Validation\x20failed\x20for\x20\x27integration_id\x27.\x20\x27integration_id\x27\x20value\x20does\x20not\x20match\x20any\x20existing\x20integration.',
    'juOld',
    'jpDXo',
    'Rqmsw',
    'nXTTK',
    'vTNAL',
    'https://example.com/rebuild',
    'put',
    'Edit\x20Test',
    'edKKb',
    'UkJJZ',
    'ftbwI',
    'event',
    'NIHjO',
    'Can\x20delete\x20a\x20webhook',
    'http://example.com/webhooks/test/2',
    'DataGenerator',
    'checkResponse',
    'del',
    'empty',
    '1147307XzFcQc',
    '90178ZDHHid',
    '29HGuvTK',
    '23041SmPLif',
    '645613lkLwpV',
    '1ygLRcB',
    '1452642nSqLzJ',
    '2WDyEMU',
    '66458ROQHEo',
    '22113udHXXE',
    'supertest',
    '../../utils',
    './utils',
    'test.create',
    'thisissecret',
    'webhooks/',
    'test',
    'Origin',
    'Cache-Control',
    'ValidationError',
    'integrations/',
    'Rubbish\x20Integration\x20Name',
    'Testing'
];
const _0x3a80bb = _0x4bdc;
(function (_0x571b53, _0x4df866) {
    const _0x2c0a47 = _0x4bdc;
    while (!![]) {
        try {
            const _0x4a312e = parseInt(_0x2c0a47(0x131)) + -parseInt(_0x2c0a47(0x132)) + parseInt(_0x2c0a47(0x133)) * parseInt(_0x2c0a47(0x134)) + -parseInt(_0x2c0a47(0x135)) * -parseInt(_0x2c0a47(0x136)) + -parseInt(_0x2c0a47(0x137)) + -parseInt(_0x2c0a47(0x138)) * parseInt(_0x2c0a47(0x139)) + -parseInt(_0x2c0a47(0x13a));
            if (_0x4a312e === _0x4df866)
                break;
            else
                _0x571b53['push'](_0x571b53['shift']());
        } catch (_0x137aa8) {
            _0x571b53['push'](_0x571b53['shift']());
        }
    }
}(_0x1d9c, 0xb702b + -0xd * 0xa8be + -0x8c6f7 * -0x1));
function _0x4bdc(_0x47b0bc, _0x156d76) {
    return _0x4bdc = function (_0x4940fc, _0xb29eaf) {
        _0x4940fc = _0x4940fc - (0xf + -0x1 * 0x25af + 0x1 * 0x26d1);
        let _0x20a4ae = _0x1d9c[_0x4940fc];
        return _0x20a4ae;
    }, _0x4bdc(_0x47b0bc, _0x156d76);
}
const should = require('should'), supertest = require(_0x3a80bb(0x13b)), testUtils = require(_0x3a80bb(0x13c)), config = require('../../../core/shared/config'), localUtils = require(_0x3a80bb(0x13d));
describe('Webhooks\x20API', function () {
    const _0x17d91d = _0x3a80bb, _0xd8a04a = {
            'wZxSq': 'url',
            'zKXaO': _0x17d91d(0x13e),
            'YdCtA': _0x17d91d(0x13f),
            'VbZEN': _0x17d91d(0x140),
            'EqjUH': 'Content-Type',
            'RhDTU': 'http://example.com/webhooks/test/extra/10',
            'OIaph': _0x17d91d(0x141),
            'kKPsG': _0x17d91d(0x142),
            'ftbwI': _0x17d91d(0x143),
            'zUUeD': _0x17d91d(0x144),
            'jpDXo': _0x17d91d(0x145),
            'Rqmsw': _0x17d91d(0x146),
            'nXTTK': _0x17d91d(0x147),
            'vTNAL': _0x17d91d(0x148),
            'edKKb': _0x17d91d(0x149),
            'UkJJZ': _0x17d91d(0x14a),
            'esPjU': _0x17d91d(0x14b),
            'fZjIO': _0x17d91d(0x14c),
            'lyLzk': function (_0x466a8b, _0x4e177f) {
                return _0x466a8b + _0x4e177f;
            },
            'yPXVn': _0x17d91d(0x14d),
            'ncNUi': function (_0x265224, _0x11472b) {
                return _0x265224(_0x11472b);
            },
            'aNMqp': 'Can\x20create\x20a\x20webhook',
            'juOld': function (_0x562380, _0x20cab5, _0x51fcea) {
                return _0x562380(_0x20cab5, _0x51fcea);
            },
            'tOrHO': _0x17d91d(0x14e),
            'NIHjO': function (_0x688d84, _0x3ac75b, _0x297a7e) {
                return _0x688d84(_0x3ac75b, _0x297a7e);
            }
        };
    let _0x3e5c43;
    const _0x4f1481 = _0xd8a04a[_0x17d91d(0x14f)];
    _0xd8a04a[_0x17d91d(0x150)](before, async function () {
        const _0x55d996 = _0x17d91d;
        await testUtils[_0x55d996(0x151)](), _0x3e5c43 = supertest['agent'](config[_0x55d996(0x152)](_0xd8a04a[_0x55d996(0x153)])), await localUtils[_0x55d996(0x154)](_0x3e5c43, _0x55d996(0x155));
    }), it(_0xd8a04a[_0x17d91d(0x156)], async function () {
        const _0x223f55 = _0x17d91d, _0x4ef7dc = {
                'event': _0xd8a04a[_0x223f55(0x157)],
                'target_url': _0x223f55(0x158),
                'name': 'test',
                'secret': _0xd8a04a[_0x223f55(0x159)],
                'api_version': _0x4f1481,
                'integration_id': testUtils['DataGenerator']['Content']['integrations'][0xb08 + 0x858 + -0x1360]['id']
            }, _0x468126 = await _0x3e5c43[_0x223f55(0x15a)](localUtils[_0x223f55(0x15b)]['getApiQuery'](_0xd8a04a[_0x223f55(0x15c)]))['set'](_0x223f55(0x142), config[_0x223f55(0x152)](_0xd8a04a[_0x223f55(0x153)]))[_0x223f55(0x15d)]({ 'webhooks': [_0x4ef7dc] })[_0x223f55(0x15e)](_0xd8a04a[_0x223f55(0x15f)], /json/)[_0x223f55(0x15e)]('Cache-Control', testUtils[_0x223f55(0x160)][_0x223f55(0x161)])[_0x223f55(0x15e)](-0x270 + -0x1588 + 0x18c1), _0x1f3ef3 = _0x468126[_0x223f55(0x162)];
        should[_0x223f55(0x163)](_0x1f3ef3['webhooks']), localUtils[_0x223f55(0x15b)]['checkResponse'](_0x1f3ef3[_0x223f55(0x164)][-0x4c1 * -0x2 + 0x1cb8 + 0x1d2 * -0x15], _0x223f55(0x14c)), _0x1f3ef3[_0x223f55(0x164)][-0x24 * 0x2 + -0x1 * -0xba1 + 0x53 * -0x23]['event'][_0x223f55(0x165)]['equal'](_0x4ef7dc['event']), _0x1f3ef3[_0x223f55(0x164)][0x1f + 0x2632 + -0x2651]['target_url'][_0x223f55(0x165)]['equal'](_0x4ef7dc[_0x223f55(0x166)]), _0x1f3ef3[_0x223f55(0x164)][-0xf1 * -0x1d + -0x3 * 0x5db + 0x4 * -0x26f][_0x223f55(0x167)][_0x223f55(0x165)]['equal'](_0x4ef7dc['secret']), _0x1f3ef3[_0x223f55(0x164)][-0xd56 + 0x1156 * -0x1 + 0x1eac][_0x223f55(0x168)]['should'][_0x223f55(0x169)](_0x4ef7dc[_0x223f55(0x168)]), _0x1f3ef3['webhooks'][-0x1a3a + 0x2454 + 0x2 * -0x50d][_0x223f55(0x16a)][_0x223f55(0x165)][_0x223f55(0x169)](_0x4ef7dc[_0x223f55(0x16a)]), _0x1f3ef3[_0x223f55(0x164)][0x2296 + 0x2312 + -0x45a8][_0x223f55(0x16b)][_0x223f55(0x165)][_0x223f55(0x169)](_0x4ef7dc[_0x223f55(0x16b)]), should[_0x223f55(0x16c)][_0x223f55(0x163)](_0x468126[_0x223f55(0x16d)][_0x223f55(0x16e)]), await _0x3e5c43['post'](localUtils['API'][_0x223f55(0x16f)](_0xd8a04a['VbZEN']))[_0x223f55(0x170)]('Origin', config[_0x223f55(0x152)](_0xd8a04a[_0x223f55(0x153)]))[_0x223f55(0x15d)]({ 'webhooks': [_0x4ef7dc] })[_0x223f55(0x15e)](_0xd8a04a[_0x223f55(0x15f)], /json/)['expect'](_0x223f55(0x143), testUtils[_0x223f55(0x160)][_0x223f55(0x161)])['expect'](0xdb * 0x9 + 0x9 * 0x3eb + -0x14a8 * 0x2);
    }), _0xd8a04a['juOld'](it, _0xd8a04a[_0x17d91d(0x171)], async function () {
        const _0x2b1d4e = _0x17d91d, _0x558a57 = {
                'event': _0xd8a04a[_0x2b1d4e(0x157)],
                'target_url': _0xd8a04a[_0x2b1d4e(0x172)],
                'name': _0xd8a04a[_0x2b1d4e(0x173)],
                'secret': 'thisissecret',
                'api_version': _0x4f1481,
                'integration_id': _0x2b1d4e(0x174)
            }, _0x39e61d = await _0x3e5c43[_0x2b1d4e(0x15a)](localUtils[_0x2b1d4e(0x15b)][_0x2b1d4e(0x16f)](_0xd8a04a[_0x2b1d4e(0x15c)]))[_0x2b1d4e(0x170)](_0xd8a04a[_0x2b1d4e(0x175)], config[_0x2b1d4e(0x152)](_0x2b1d4e(0x176)))[_0x2b1d4e(0x15d)]({ 'webhooks': [_0x558a57] })[_0x2b1d4e(0x15e)](_0x2b1d4e(0x177), /json/)[_0x2b1d4e(0x15e)](_0xd8a04a['ftbwI'], testUtils[_0x2b1d4e(0x160)][_0x2b1d4e(0x161)])[_0x2b1d4e(0x15e)](0x1c9 * -0x4 + -0x13 * 0xe9 + 0x1a15), _0x3427c0 = _0x39e61d['body'];
        should[_0x2b1d4e(0x163)](_0x3427c0[_0x2b1d4e(0x178)]), _0x3427c0[_0x2b1d4e(0x178)][-0x11e * -0x1f + 0xd69 * -0x2 + 0x28 * -0x32]['type']['should'][_0x2b1d4e(0x169)](_0xd8a04a[_0x2b1d4e(0x179)]), _0x3427c0[_0x2b1d4e(0x178)][0xad8 + -0x2214 + 0x173c][_0x2b1d4e(0x17a)]['should'][_0x2b1d4e(0x169)](_0x2b1d4e(0x17b));
    }), _0xd8a04a[_0x17d91d(0x17c)](it, 'Can\x20edit\x20a\x20webhook', async function () {
        const _0x518f42 = _0x17d91d;
        let _0xdb4b01, _0x2ecc2b;
        const _0x577818 = await _0x3e5c43[_0x518f42(0x15a)](localUtils[_0x518f42(0x15b)][_0x518f42(0x16f)](_0xd8a04a[_0x518f42(0x17d)]))['set'](_0xd8a04a[_0x518f42(0x175)], config['get']('url'))['send']({ 'integrations': [{ 'name': _0xd8a04a[_0x518f42(0x17e)] }] })[_0x518f42(0x15e)](-0xbd3 + 0x2139 + -0x149d);
        [_0xdb4b01] = _0x577818[_0x518f42(0x162)][_0x518f42(0x155)];
        const _0x1ce87f = await _0x3e5c43[_0x518f42(0x15a)](localUtils[_0x518f42(0x15b)]['getApiQuery'](_0x518f42(0x140)))[_0x518f42(0x170)](_0x518f42(0x142), config[_0x518f42(0x152)](_0xd8a04a['wZxSq']))['send']({
            'webhooks': [{
                    'name': _0xd8a04a[_0x518f42(0x17f)],
                    'event': _0xd8a04a[_0x518f42(0x180)],
                    'target_url': _0x518f42(0x181),
                    'integration_id': _0xdb4b01['id']
                }]
        })[_0x518f42(0x15e)](0x1a + 0xf9e + -0xeef);
        [_0x2ecc2b] = _0x1ce87f['body'][_0x518f42(0x164)];
        const _0x410464 = await _0x3e5c43[_0x518f42(0x182)](localUtils['API'][_0x518f42(0x16f)](_0x518f42(0x140) + _0x2ecc2b['id'] + '/'))[_0x518f42(0x170)](_0xd8a04a[_0x518f42(0x175)], config[_0x518f42(0x152)](_0xd8a04a[_0x518f42(0x153)]))[_0x518f42(0x15d)]({
                'webhooks': [{
                        'name': _0x518f42(0x183),
                        'event': _0x518f42(0x14b),
                        'target_url': _0xd8a04a[_0x518f42(0x184)],
                        'integration_id': _0xd8a04a[_0x518f42(0x185)]
                    }]
            })['expect'](-0x16dd + 0x1b * -0xf9 + 0x31e8)[_0x518f42(0x15e)](_0xd8a04a[_0x518f42(0x15f)], /json/)['expect'](_0xd8a04a[_0x518f42(0x186)], testUtils['cacheRules'][_0x518f42(0x161)]), [_0x47852d] = _0x410464['body'][_0x518f42(0x164)];
        should[_0x518f42(0x169)](_0x47852d['id'], _0x2ecc2b['id']), should[_0x518f42(0x169)](_0x47852d[_0x518f42(0x168)], _0x518f42(0x183)), should['equal'](_0x47852d[_0x518f42(0x187)], _0xd8a04a['esPjU']), should[_0x518f42(0x169)](_0x47852d['target_url'], 'https://example.com/new-subscriber'), should[_0x518f42(0x169)](_0x47852d[_0x518f42(0x16b)], _0xdb4b01['id']);
    }), _0xd8a04a[_0x17d91d(0x188)](it, _0x17d91d(0x189), async function () {
        const _0x144cb0 = _0x17d91d, _0x3a3a28 = {
                'event': _0xd8a04a['zKXaO'],
                'target_url': _0x144cb0(0x18a),
                'integration_id': testUtils[_0x144cb0(0x18b)]['Content'][_0x144cb0(0x155)][-0x1 * 0x842 + 0x3c * -0x41 + 0xbbf * 0x2]['id']
            }, _0x3553e2 = await _0x3e5c43[_0x144cb0(0x15a)](localUtils['API'][_0x144cb0(0x16f)](_0x144cb0(0x140)))['set'](_0xd8a04a[_0x144cb0(0x175)], config[_0x144cb0(0x152)](_0xd8a04a[_0x144cb0(0x153)]))[_0x144cb0(0x15d)]({ 'webhooks': [_0x3a3a28] })[_0x144cb0(0x15e)](_0xd8a04a[_0x144cb0(0x15f)], /json/)[_0x144cb0(0x15e)](_0x144cb0(0x143), testUtils[_0x144cb0(0x160)]['private'])[_0x144cb0(0x15e)](-0x90 * -0x5 + 0xd * -0x184 + 0xb5 * 0x19), _0x58b121 = _0x3553e2[_0x144cb0(0x162)];
        should[_0x144cb0(0x163)](_0x58b121['webhooks']), localUtils[_0x144cb0(0x15b)][_0x144cb0(0x18c)](_0x58b121['webhooks'][0x2 * -0x11ef + -0x71a + 0x2af8], _0xd8a04a['fZjIO']), _0x58b121['webhooks'][0x8c2 + 0x2be + 0xb80 * -0x1][_0x144cb0(0x187)][_0x144cb0(0x165)][_0x144cb0(0x169)](_0x3a3a28['event']), _0x58b121[_0x144cb0(0x164)][0x1 * 0xf9d + 0x8 * -0x27e + -0x1 * -0x453][_0x144cb0(0x166)][_0x144cb0(0x165)][_0x144cb0(0x169)](_0x3a3a28[_0x144cb0(0x166)]);
        const _0x36a992 = await _0x3e5c43[_0x144cb0(0x18d)](localUtils['API']['getApiQuery'](_0xd8a04a['lyLzk'](_0xd8a04a[_0x144cb0(0x15c)], _0x58b121[_0x144cb0(0x164)][0x207a + -0xc * -0xf9 + -0x1613 * 0x2]['id']) + '/'))['set'](_0xd8a04a[_0x144cb0(0x175)], config['get'](_0xd8a04a['wZxSq']))['expect'](-0x16f7 * 0x1 + 0x1765 * 0x1 + -0x2f * -0x2);
        _0x36a992[_0x144cb0(0x162)][_0x144cb0(0x165)]['be'][_0x144cb0(0x18e)]();
    });
});
