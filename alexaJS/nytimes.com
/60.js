(function(){var h="src|smprod|emc|smid|nl|partner|nrx|WT.mc_id|oc|CMP|mc|meid",l=new RegExp("\\|("+h+")\x3d","g"),m=function(a){return function(c,b){var f=a.indexOf(c),e=a.indexOf(b);return f>e?1:f<e?-1:0}}(h.split("|")),n=function(a,f){var b={campaignSource:a,campaignMedium:"notifications",campaignContent:c(f,"msgid")};"sms"===a.toLowerCase()&&(b.campaignName=f.subid);return b},c=function(a,c,b){return"object"===typeof a&&a.hasOwnProperty(c)?a[c]:b?b:""},k=function(a){if(!a)return{};a=decodeURI(a);
try{return a='{"'+a.replace(/[&]+/g,"\x26").replace(/([\?&][^=]+)([&]|$)/g,"$1\x3d$2").replace(/(^\?|&$)/g,"").replace(/&/g,'","').replace(/=/g,'":"')+'"}',JSON.parse(a)}catch(f){return{}}};h=function(){var a,f=google_tag_manager["GTM-P528B3"].macro(344),b={},g=google_tag_manager["GTM-P528B3"].macro(349);var e=document.location.search||"";if(g&&/.*\.nytimes\.com/.test(g)||!e)return b;var d=k(e);if(a=e.replace(/\?|&/g,"|").match(l)){a=a.map(function(a){return a.replace(/[\|=]/g,"")}).sort(m);d=k(e);b.campaignName=c(d,"subid");b.campaignContent=
c(d,"subid1");b.campaignKeyword=c(d,"subid2")||c(d,"ad-keywords");e=a.shift();"src"===e&&"safaripush"!==c(d,e)&&"sms"!==c(d,e)&&(e=a.shift());if("smprod"===e&&"eta1"===c(d,"emc")||"emc"===e&&"eta1"!==c(d,e)&&"edit_na"!==c(d,e)||"smid"===e&&""!==c(d,"nrx"))e=a.shift();"mc"===e&&""===c(d,"mcid")&&(e=a.shift());if(e)switch(a=c(d,e),e){case "src":b=n(a,d);break;case "nl":b={campaignSource:a,campaignMedium:"email",campaignName:c(d,"emc"),campaignContent:c(d,"em_pos")};break;case "smid":b={campaignSource:a,
campaignMedium:"social",campaignName:c(d,"smtyp"),campaignContent:c(d,"smvar")};break;case "smprod":b={campaignSource:function(){if(g){var a=g.match(/https?:\/\/([^/]*)/);return a?a[1]:g}return"nyt-fb-native-external-iframe"===f?"m.facebook.com":"null"}(),campaignMedium:"social",campaignName:c(d,"smid"),campaignContent:a};break;case "partner":b.campaignSource=a;b.campaignMedium="rss"===a.toLowerCase()?"RSS":"partner";break;case "emc":b="edit_na"===a?{campaignName:c(d,"emc"),campaignContent:c(d,"empos"),
campaignSource:"Breaking News",campaignMedium:"email"}:{campaignSource:"nytnow",campaignMedium:"email share",campaignName:"share tool"};break;case "nrx":b.campaignSource=a;b.campaignMedium="Vanity URL";break;case "WT.mc_id":b.campaignSource=a;b.campaignMedium="Marketing Campaigns";break;case "oc":b.campaignSource=a;b.campaignMedium="Marketing Campaigns";break;case "CMP":b.campaignSource=a;b.campaignMedium="Marketing Campaigns";break;case "mc":b.campaignSource=c(d,"mcid");b.campaignMedium=a;break;
case "meid":b.campaignSource=a,b.campaignMedium="marketing email",b.campaignName=c(d,"moc"),b.campaignContent=c(d,"rid"),b.campaignKeyword=c(d,"dt")}}return b};nytAnalytics=window.nytAnalytics||{};nytAnalytics.campaignMap=h()})();