function getQueryParamsFromDataLayer(){var b={},c={};if(dataLayer)for(var a=0;a<dataLayer.length;a++){var d=dataLayer[a];if("dataLayer-initialized"===d.event){c=d;break}}if(a=c.pageType)b.pt=a;if(a=c.pageViewId)b.pageViewId=a;if(a=c.product)b.pd=a;if(a=c.fullUrl)b.fullUrl=a;if(a=c.acquisitionDivision)b.ad=a;if(a=c.locale)b.lc=a;if(a=c.agency)b.ag=a;if(a=c.adNetwork)b.an=a;if(a=c.adId)b.adid=a;if(a=c.googleClient)b.gcl=a;if(a=c.googleStyleId)b.gsid=a;if(a=c.googleChannelPrimary)b.gchp=a;if(a=c.googleChannelSemSecondaries)b.gcsemsc=
a;if(a=c.googleChannelAbTests)b.gcabt=a;if(a=c.yahooAdId)b.yaid=a;if(a=c.yahooSourceTag)b.yst=a;if(a=c.yahooTypeTag)b.ytt=a;if(a=c.yahooSearchId)b.ysid=a;if(a=c.bingAdUnitId)b.bauid=a;if(a=c.bingPropertyId)b.bpid=a;if(a=c.bingTypeTagPrimary)b.bttp=a;if(a=c.bingTypeTagAbTests)b.bttabt=a;if(a=c.gclid)b.gclid=a;if(a=c.msclkid)b.msclkid=a;if(a=c.fbclid)b.fbclid=a;if(a=c.uniqueEntryId)b.ueid=a;if(a=c.akid)b.akid=a;if(a=c.ckid)b.ckid=a;if(a=c.utms)b.utms=a;b.eid=getFbEventTs("pageview");if(a=google_tag_manager["GTM-KMFC6W2"].macro(18)("_fbp"))b.fbp=
a;if(a=google_tag_manager["GTM-KMFC6W2"].macro(19)("_fbc"))b.fbc=a;if(c=c.requestId)b.freqid=c;window.inIframe&&(b.srccont="iframe",b.parentcont=document.referrer);if(c=processDataLayerDabuObj()){if(a=c.pageViewId)b.dabuPageViewId=a;if(a=c.googleClientId)b.gcl=a;if(a=c.googlePrimaryChannel)b.gchp=a;if(a=c.bingAdUnitId)b.bauid=a;if(a=c.bingPropertyId)b.bpid=a;if(a=c.bingTypeTagPrimary)b.bttp=a}return b}
function processDataLayerDabuObj(){for(var b={},c=window.dataLayerDabu||[],a=0;a<c.length;a++){var d=c[a];if("dataLayer-initialized"===d.event)b=d;else if("ad-content-rendered"===d.event){b=Object.assign({},b,d);break}}return b}function parseLinkAttribute(b,c){b=b.attr(c);if(!b)return null;try{var a=JSON.parse(b)}catch(d){console.log("Error in parsing the link attribute :"+c)}return a}
function triggerClickBeacon(b){return function(c){console.log("Trigger Click Beacon");var a=$(c.target).closest("a"),d=a.attr("href");c={type:"click",link_type:b,url:encodeURIComponent(d),clk_target_class:$(c.target).attr("class"),clk_target_tag:c.target.tagName};if(d=parseLinkAttribute(a,"data-analytics")){var e=d.providerSource;e&&(c.ps=e);if(e=d.resultType)c.rt=e;d=d.destinationDomain;"bing_ads"!==b&&"yahoo_ads"!==b||!d||(c.advDomain=d)}if("shopping_results"===b&&(d=parseLinkAttribute(a,"data-fastly"))){if(e=
d.cpc)c.cpc=e;if(e=d.providerSource)c.ps=e;if(e=d.resultType)c.rt=e}"amb_sib_ads"===b&&(d=a.attr("data-lp-url"),c.url=encodeURIComponent(d));a=getQueryParamsFromDataLayer();a.eid=getFbEventTs("action");a=$.param(c)+"\x26"+$.param(a);$.get("/_action?"+a)}}
function getFbEventTs(b){switch(b){case "pageview":return window.fbpvts||(window.fbpvts=Date.now()),window.fbpvts;case "action":if(!window.fbacts||window.forceFbacts)window.fbacts=Date.now(),window.forceFbacts=!0;return window.fbacts;default:return""}}function inIframe(){try{return window.self!==window.top}catch(b){return!0}}
function trackPageView(){console.log("Track Page View");var b=getQueryParamsFromDataLayer();b.url=encodeURIComponent(window.location.href);"undefined"===typeof window.signalParameter?b.tmtry=!1:(b.tmtry=!0,b.tmtryId=window.signalParameter.requestGUID);b=$.param(b);$.get("/_page_view?"+b)}
function initializeHandlers(){console.log("initializeHandlers");window.inIframe=inIframe();$(".PartialSearchBox-form").on("submit",triggerClickBeacon("search_box"));$(".PartialCookieCompliance a").click(triggerClickBeacon("cookie_compliance"));$(".PartialLogo-logo a").click(triggerClickBeacon("logo"));$(".PartialSpellCheck a").click(triggerClickBeacon("spell_check"));$(".PartialYahooAds a").click(triggerClickBeacon("yahoo_ads"));$(".PartialBingAds a").click(triggerClickBeacon("bing_ads"));$(".PartialRelatedSearch a").click(triggerClickBeacon("related_search"));
$(".PartialWebPagination  a").click(triggerClickBeacon("pagination"));$(".PartialSearchResults-results a").click(triggerClickBeacon("search_results"));console.log("add shopping list listeners");$(".PartialShoppingResults a").click(triggerClickBeacon("shopping_results"));$(".PartialPageFooter a").click(triggerClickBeacon("footer"));console.log("Attaching bing click events",$(".sib-bing-ads a"));$(".sib-bing-ads a").click(triggerClickBeacon("amg_bing_ads"));$(".sib-afs-ads a").click(triggerClickBeacon("amg_afs_ads"));
$(".sib-ads a").click(triggerClickBeacon("amg_sib_ads"));trackPageView()}try{window.onload=function(){setTimeout(function(){initializeHandlers()},500)}}catch(b){console.log("Error in loading click bacon")};