"use strict";const{extname}=require("path");const Promise=require("bluebird");const getExtname=t=>{if(typeof t!=="string")return"";const e=extname(t)||t;return e.startsWith(".")?e.slice(1):e};class Renderer{constructor(){this.store={};this.storeSync={}}list(t){return t?this.storeSync:this.store}get(t,e){const r=this[e?"storeSync":"store"];return r[getExtname(t)]||r[t]}isRenderable(t){return Boolean(this.get(t))}isRenderableSync(t){return Boolean(this.get(t,true))}getOutput(t){const e=this.get(t);return e?e.output:""}register(t,e,r,s){if(!t)throw new TypeError("name is required");if(!e)throw new TypeError("output is required");if(typeof r!=="function")throw new TypeError("fn must be a function");t=getExtname(t);e=getExtname(e);if(s){this.storeSync[t]=r;this.storeSync[t].output=e;this.store[t]=Promise.method(r)}else{if(r.length>2)r=Promise.promisify(r);this.store[t]=r}this.store[t].output=e;this.store[t].compile=r.compile}}module.exports=Renderer;