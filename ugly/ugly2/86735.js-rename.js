var Class=require("../utils/Class");var NOOP=require("../utils/NOOP");var RequestAnimationFrame=new Class({initialize:function t(){this.isRunning=false;this.callback=NOOP;this.tick=0;this.isSetTimeOut=false;this.timeOutID=null;this.lastTime=0;this.target=0;var s=this;this.step=function t(){var i=window.performance.now();s.lastTime=s.tick;s.tick=i;s.callback(i);s.timeOutID=window.requestAnimationFrame(t)};this.stepTimeout=function t(){var i=Date.now();var e=Math.min(Math.max(s.target*2+s.tick-i,0),s.target);s.lastTime=s.tick;s.tick=i;s.callback(i);s.timeOutID=window.setTimeout(t,e)}},start:function(t,i,e){if(this.isRunning){return}this.callback=t;this.isSetTimeOut=i;this.target=e;this.isRunning=true;this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step)},stop:function(){this.isRunning=false;if(this.isSetTimeOut){clearTimeout(this.timeOutID)}else{window.cancelAnimationFrame(this.timeOutID)}},destroy:function(){this.stop();this.callback=NOOP}});module.exports=RequestAnimationFrame;