var nwNatives=requireNative("nw_natives");var forEach=require("utils").forEach;var runtimeNatives=requireNative("runtime");var renderFrameObserverNatives=requireNative("renderFrameObserverNatives");var appWindowNatives=requireNative("app_window_natives");var GetExtensionViews=runtimeNatives.GetExtensionViews;var currentNWWindow=null;var currentNWWindowInternal=null;var currentRoutingID=nwNatives.getRoutingID();var currentWidgetRoutingID=nwNatives.getWidgetRoutingID();var bgPage=GetExtensionViews(-1,-1,"BACKGROUND")[0];var try_hidden=function(e){if(e.chrome.windows)return e;return privates(e)};var try_nw=function(e){if(e.nw)return e;return privates(e)};function getPlatform(){var e=[[/CrOS Touch/,"chromeos touch"],[/CrOS/,"chromeos"],[/Linux/,"linux"],[/Mac/,"mac"],[/Win/,"win"]];for(var n=0;n<e.length;n++){if($RegExp.exec(e[n][0],navigator.appVersion)){return e[n][1]}}return"unknown"}var canSetVisibleOnAllWorkspaces=/(mac|linux)/.exec(getPlatform());var nwWinEventsMap={minimize:"onMinimized",maximize:"onMaximized",restore:"onRestore","enter-fullscreen":"onFullscreen",zoom:"onZoom",resize:"onResized"};var nwWrapEventsMap={"new-win-policy":"onNewWinPolicy",navigation:"onNavigation"};var wrapEventsMapNewWin={move:"onMove",focus:"onFocusChanged",blur:"onFocusChanged",closed:"onRemoved",close:"onRemoving"};function NWWindow(e){var o=this;if(e){this.cWindow=e}else{this.cWindow=currentNWWindowInternal.getCurrent(-2,{populate:true});if(!this.cWindow)console.error("The JavaScript context calling "+"nw.Window.get() has no associated Browser window.")}function n(e){if(e.id!==o.cWindow.id)return;var n=o.cWindow.state;var t=o.cWindow.width;var i=o.cWindow.height;o.cWindow.state=e.state;o.cWindow.width=e.width;o.cWindow.height=e.height;if(n!="minimized"&&e.state=="minimized"){dispatchEventIfExists(o,"onMinimized",[e.id])}else if(n!="maximized"&&e.state=="maximized"){dispatchEventIfExists(o,"onMaximized",[e.id])}else if(n!="fullscreen"&&e.state=="fullscreen"){dispatchEventIfExists(o,"onFullscreen",[e.id])}else if(n!="normal"&&e.state=="normal"){dispatchEventIfExists(o,"onRestore",[e.id])}else if(t!=e.width||i!=e.height){dispatchEventIfExists(o,"onResized",[e.id,e.width,e.height])}}privates(this).menu=null;chrome.windows.onWindowChanged.addListener(n)}NWWindow.prototype.onNewWinPolicy=bindingUtil.createCustomEvent("nw.Window.onNewWinPolicy",false,false);NWWindow.prototype.onNavigation=bindingUtil.createCustomEvent("nw.Window.onNavigation",false,false);NWWindow.prototype.LoadingStateChanged=bindingUtil.createCustomEvent("nw.Window.LoadingStateChanged",false,false);NWWindow.prototype.onDocumentStart=bindingUtil.createCustomEvent("nw.Window.onDocumentStart",false,false);NWWindow.prototype.onDocumentEnd=bindingUtil.createCustomEvent("nw.Window.onDocumentEnd",false,false);NWWindow.prototype.onZoom=bindingUtil.createCustomEvent("nw.Window.onZoom",false,false);NWWindow.prototype.onClose=bindingUtil.createCustomEvent("nw.Window.onClose",true,false);NWWindow.prototype.onMinimized=bindingUtil.createCustomEvent("nw.Window.onMinimized",false,false);NWWindow.prototype.onMaximized=bindingUtil.createCustomEvent("nw.Window.onMaximized",false,false);NWWindow.prototype.onFullscreen=bindingUtil.createCustomEvent("nw.Window.onFullscreen",false,false);NWWindow.prototype.onResized=bindingUtil.createCustomEvent("nw.Window.onResized",false,false);NWWindow.prototype.onRestore=bindingUtil.createCustomEvent("nw.Window.onRestore",false,false);NWWindow.prototype.close=function(e){currentNWWindowInternal.close(e,this.cWindow.id)};NWWindow.prototype.once=function(e,n,t){if(typeof n!=="function")throw new TypeError("listener must be a function");var i=false;var o=this;function r(){o.removeListener(e,r);if(!i){i=true;n.apply(o,arguments)}}this.on(e,r,false);return this};NWWindow.prototype.on=function(n,r,e){var a=this;function t(e){var n=(e||r).bind(a);n.listener=r;n.c_win_id=a.cWindow.id;r.__nw_cb=n;return n}if(n==="close"){var i=t(function(e,n){if(a.cWindow.id!==e)return;r.call(a,n)});chrome.windows.onRemoving.addListener(i,{instanceId:a.cWindow.id});return this}switch(n){case"focus":var o=t(function(e){if(a.cWindow.id!==e)return;r.call(a)});chrome.windows.onFocusChanged.addListener(o);break;case"blur":this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});var o=t(function(e){if(a.cWindow.id===e){r.__nw_cb.focused=true;return}if(!r.__nw_cb.focused)return;r.__nw_cb.focused=false;r.call(a)});chrome.windows.onFocusChanged.addListener(o);break;case"closed":var s=t(function(e){if(a.cWindow.id!==e)return;r.call(a)});chrome.windows.onRemoved.addListener(s);break;case"loaded":var d=t(function(e,n,t){if(t.windowId!==a.cWindow.id)return;if("nwstatus"in n&&n.nwstatus=="complete")r.call(a)});chrome.tabs.onUpdated.addListener(d);break;case"document-start":var c=t(function(e,n){if(n!==a.cWindow.tabs[0].mainFrameId)return;r.call(a,e)});this.onDocumentStart.addListener(c);break;case"document-end":var w=t(function(e,n){if(n!==a.cWindow.tabs[0].mainFrameId)return;r.call(a,e)});this.onDocumentEnd.addListener(w);break;case"new-win-policy":var u=t(function(e,n,t,i){if(i!==a.cWindow.tabs[0].mainFrameId)return;t.ignore=function(){this.val="ignore"};t.forceCurrent=function(){this.val="current"};t.forceDownload=function(){this.val="download"};t.forceNewWindow=function(){this.val="new-window"};t.forceNewPopup=function(){this.val="new-popup"};t.setNewWindowManifest=function(e){this.manifest=e};r.call(a,e,n,t)});this.onNewWinPolicy.addListener(u);break;case"navigation":var W=t(function(e,n,t,i,o){if(o!==a.cWindow.tabs[0].mainFrameId)return;t.ignore=function(){this.val="ignore"};r.call(a,e,n,t,i)});this.onNavigation.addListener(W);break;case"move":var l=t(function(e){if(e.id!=a.cWindow.id)return;r.call(a,e.left,e.top)});chrome.windows.onMove.addListener(l);return this;break}if(nwWinEventsMap.hasOwnProperty(n)){let e=t(function(e,...n){if(e!=a.cWindow.id)return;r.call(a,...n)});this[nwWinEventsMap[n]].addListener(e);return this}return this};NWWindow.prototype.removeListener=function(n,t){if(n==="loaded"){for(let e of chrome.tabs.onUpdated.getListeners()){if(e.listener&&e.listener===t){chrome.tabs.onUpdated.removeListener(e);return this}}}if(nwWinEventsMap.hasOwnProperty(n)){for(let e of this[nwWinEventsMap[n]].getListeners()){if(e.listener&&e.listener===t){this[nwWinEventsMap[n]].removeListener(e);return this}}}if(nwWrapEventsMap.hasOwnProperty(n)){for(let e of this[nwWrapEventsMap[n]].getListeners()){if(e.listener&&e.listener===t){this[nwWrapEventsMap[n]].removeListener(e);return this}}}if(wrapEventsMapNewWin.hasOwnProperty(n)){for(let e of chrome.windows[wrapEventsMapNewWin[n]].getListeners()){if(e.listener&&e.listener===t){chrome.windows[wrapEventsMapNewWin[n]].removeListener(e);return this}}}return this};NWWindow.prototype.removeAllListeners=function(n){if(arguments.length===0){var e=Object.assign({},nwWinEventsMap,nwWrapEventsMap);var t=Object.keys(e);for(var i=0,o;i<t.length;++i){o=t[i];this.removeAllListeners(o)}return this}if(nwWinEventsMap.hasOwnProperty(n)){for(let e of this[nwWinEventsMap[n]].getListeners()){this[nwWinEventsMap[n]].removeListener(e)}return this}if(nwWrapEventsMap.hasOwnProperty(n)){for(let e of this[nwWrapEventsMap[n]].getListeners()){this[nwWrapEventsMap[n]].removeListener(e)}return this}if(wrapEventsMapNewWin.hasOwnProperty(n)){for(let e of chrome.windows[wrapEventsMapNewWin[n]].getListeners()){if(e.c_win_id===this.cWindow.id){chrome.windows[wrapEventsMapNewWin[n]].removeListener(e)}}return this}if(n==="loaded"){for(let e of chrome.tabs.onUpdated.getListeners()){if(e.c_win_id===this.cWindow.id){chrome.tabs.onUpdated.removeListener(e)}}return this}return this};NWWindow.prototype.setShadow=function(e){currentNWWindowInternal.setShadowInternal(e,this.cWindow.id)};NWWindow.prototype.setBadgeLabel=function(e){currentNWWindowInternal.setBadgeLabelInternal(e,this.cWindow.id)};NWWindow.prototype.setProgressBar=function(e){currentNWWindowInternal.setProgressBarInternal(e,this.cWindow.id)};NWWindow.prototype.setShowInTaskbar=function(e){currentNWWindowInternal.setShowInTaskbarInternal(e,this.cWindow.id)};NWWindow.prototype.enterKioskMode=function(){currentNWWindowInternal.enterKioskModeInternal(this.cWindow.id)};NWWindow.prototype.leaveKioskMode=function(){currentNWWindowInternal.leaveKioskModeInternal(this.cWindow.id)};NWWindow.prototype.toggleKioskMode=function(){currentNWWindowInternal.toggleKioskModeInternal(this.cWindow.id)};NWWindow.prototype.showDevTools=function(e,n){var t="";if(typeof e==="string")t=e;var i=null;if(t)i=this.window.getElementById(t);else i=e||null;nwNatives.setDevToolsJail(i);currentNWWindowInternal.showDevTools2Internal(this.cWindow.id,n)};NWWindow.prototype.capturePage=function(i,e){var n=i;if(!e)e={format:"jpeg",datatype:"datauri"};if(typeof e=="string")e={format:e,datatype:"datauri"};if(e.datatype!="datauri"){n=function(e,n){var t=n.replace(/^data:[^;]*;base64,/,"");switch(e){case"buffer":i(new nw.Buffer(t,"base64"));break;case"raw":i(t);break}};n=n.bind(undefined,e.datatype)}this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});currentNWWindowInternal.capturePageInternal(this.cWindow.id,e,n)};function sendCommand(e,i,o){return new Promise((n,t)=>{chrome.debugger.sendCommand({tabId:e},i,o,e=>{if(!e){t(chrome.runtime.lastError);return}n(e)})})}function attach(t){return new Promise((e,n)=>{chrome.debugger.attach({tabId:t},"1.0",()=>{if(chrome.runtime.lastError){n(chrome.runtime.lastError);return}e()})})}function detach(t){return new Promise((e,n)=>{chrome.debugger.detach({tabId:t},()=>{if(chrome.runtime.lastError){n(chrome.runtime.lastError);return}e()})})}async function captureScreenshotHelper(e,n){await attach(e);let t=await sendCommand(e,"Page.getLayoutMetrics");if(n.fullSize){const o=Math.min((1<<14)/window.devicePixelRatio,t.contentSize.height);await sendCommand(e,"Emulation.setDeviceMetricsOverride",{deviceScaleFactor:0,mobile:false,width:t.contentSize.width,height:Math.floor(o)})}let i=await sendCommand(e,"Page.captureScreenshot",n);if(n.fullSize)await sendCommand(e,"Emulation.clearDeviceMetricsOverride");await detach(e);return i.data}NWWindow.prototype.captureScreenshot=function(e,n){let t=this.cWindow.tabs[0].id;if(!n)return captureScreenshotHelper(t,e);captureScreenshotHelper(t,e).then(e=>{n(null,e)}).catch(n)};NWWindow.prototype.reload=function(){chrome.tabs.reload(this.cWindow.tabs[0].id)};NWWindow.prototype.reloadIgnoringCache=function(){chrome.tabs.reload(this.cWindow.tabs[0].id,{bypassCache:true})};NWWindow.prototype.eval=function(e,n){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});return nwNatives.evalScript(e,n,this.cWindow.tabs[0].mainFrameId)};NWWindow.prototype.evalNWBin=function(e,n){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});this.evalNWBinInternal(e,n,null,this.cWindow.tabs[0].mainFrameId)};NWWindow.prototype.evalNWBinModule=function(e,n,t){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});this.evalNWBinInternal(e,n,t,this.cWindow.tabs[0].mainFrameId)};NWWindow.prototype.evalNWBinInternal=function(e,n,t,i){var o;if(Buffer.isBuffer(n)){let e=n;o=new global.ArrayBuffer(n.length);n.copy(Buffer.from(o))}else if($Object.prototype.toString.apply(n)==="[object ArrayBuffer]"){o=n}else{let e=global.require("fs").readFileSync(n);o=new global.ArrayBuffer(e.length);e.copy(Buffer.from(o))}return nwNatives.evalNWBin(e,o,t,i)};NWWindow.prototype.show=function(){chrome.windows.update(this.cWindow.id,{show:true})};NWWindow.prototype.hide=function(){chrome.windows.update(this.cWindow.id,{state:"hidden"})};NWWindow.prototype.focus=function(){chrome.windows.update(this.cWindow.id,{focused:true})};NWWindow.prototype.blur=function(){chrome.windows.update(this.cWindow.id,{focused:false})};NWWindow.prototype.minimize=function(){chrome.windows.update(this.cWindow.id,{state:"minimized"})};NWWindow.prototype.maximize=function(){chrome.windows.update(this.cWindow.id,{state:"maximized"})};NWWindow.prototype.unmaximize=NWWindow.prototype.restore=function(){chrome.windows.update(this.cWindow.id,{state:"normal"})};NWWindow.prototype.enterFullscreen=function(){chrome.windows.update(this.cWindow.id,{state:"fullscreen"})};NWWindow.prototype.leaveFullscreen=function(){var n=this;chrome.windows.get(this.cWindow.id,{},function(e){n.cWindow=e;if(e.state==="fullscreen")chrome.windows.update(e.id,{state:"normal"})})};NWWindow.prototype.toggleFullscreen=function(){var n=this;chrome.windows.get(this.cWindow.id,{},function(e){n.cWindow=e;if(e.state==="fullscreen")chrome.windows.update(e.id,{state:"normal"});else n.enterFullscreen()})};NWWindow.prototype.setAlwaysOnTop=function(e){chrome.windows.update(this.cWindow.id,{alwaysOnTop:e})};NWWindow.prototype.setPosition=function(e){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});if(e=="center"){var n=screen.availWidth;var t=screen.availHeight;var i=this.cWindow.width;var o=this.cWindow.height;chrome.windows.update(this.cWindow.id,{left:Math.round((n-i)/2),top:Math.round((t-o)/2)})}else if(e=="mouse"){chrome.windows.update(this.cWindow.id,{position:"mouse"})}};NWWindow.prototype.setVisibleOnAllWorkspaces=function(e){chrome.windows.update(this.cWindow.id,{allVisible:e})};NWWindow.prototype.canSetVisibleOnAllWorkspaces=function(){return canSetVisibleOnAllWorkspaces};NWWindow.prototype.setMaximumSize=function(e,n){chrome.windows.update(this.cWindow.id,{maxWidth:e,maxHeight:n})};NWWindow.prototype.setMinimumSize=function(e,n){chrome.windows.update(this.cWindow.id,{minWidth:e,minHeight:n})};NWWindow.prototype.resizeTo=function(e,n){chrome.windows.update(this.cWindow.id,{innerWidth:e,innerHeight:n})};NWWindow.prototype.setInnerWidth=function(e){chrome.windows.update(this.cWindow.id,{innerWidth:e})};NWWindow.prototype.setInnerHeight=function(e){chrome.windows.update(this.cWindow.id,{innerHeight:e})};NWWindow.prototype.resizeBy=function(e,n){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});chrome.windows.update(this.cWindow.id,{width:this.cWindow.width+e,height:this.cWindow.height+n})};NWWindow.prototype.moveTo=function(e,n){chrome.windows.update(this.cWindow.id,{left:e,top:n})};NWWindow.prototype.moveBy=function(e,n){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});chrome.windows.update(this.cWindow.id,{left:this.cWindow.left+e,top:this.cWindow.top+n})};NWWindow.prototype.setResizable=function(e){chrome.windows.update(this.cWindow.id,{resizable:e})};NWWindow.prototype.requestAttention=function(e){if(typeof e=="boolean")e=e?-1:0;currentNWWindowInternal.requestAttentionInternal(e)};NWWindow.prototype.cookies=chrome.cookies;NWWindow.prototype.print=function(e){var n=JSON.parse(JSON.stringify(e));if(!("autoprint"in n))n["autoprint"]=true;if(e.pdf_path)n["printer"]="Save as PDF";currentNWWindowInternal.setPrintSettingsInternal(n,this.cWindow.id);this.window.print()};Object.defineProperty(NWWindow.prototype,"x",{get:function(){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});return this.cWindow.left},set:function(e){chrome.windows.update(this.cWindow.id,{left:e})}});Object.defineProperty(NWWindow.prototype,"y",{get:function(){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});return this.cWindow.top},set:function(e){chrome.windows.update(this.cWindow.id,{top:e})}});Object.defineProperty(NWWindow.prototype,"width",{get:function(){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});return this.cWindow.width},set:function(e){chrome.windows.update(this.cWindow.id,{width:e})}});Object.defineProperty(NWWindow.prototype,"height",{get:function(){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});return this.cWindow.height},set:function(e){chrome.windows.update(this.cWindow.id,{height:e})}});Object.defineProperty(NWWindow.prototype,"title",{get:function(){return currentNWWindowInternal.getTitleInternal(this.cWindow.id)},set:function(e){currentNWWindowInternal.setTitleInternal(e,this.cWindow.id)}});Object.defineProperty(NWWindow.prototype,"zoomLevel",{get:function(){return currentNWWindowInternal.getZoom(this.cWindow.id)},set:function(e){currentNWWindowInternal.setZoom(e,this.cWindow.id)}});Object.defineProperty(NWWindow.prototype,"isTransparent",{get:function(){return this.appWindow.alphaEnabled()}});Object.defineProperty(NWWindow.prototype,"isKioskMode",{get:function(){return currentNWWindowInternal.isKioskInternal(this.cWindow.id)},set:function(e){if(e)currentNWWindowInternal.enterKioskModeInternal(this.cWindow.id);else currentNWWindowInternal.leaveKioskModeInternal(this.cWindow.id)}});Object.defineProperty(NWWindow.prototype,"isFullscreen",{get:function(){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});return this.cWindow.state==="fullscreen"}});Object.defineProperty(NWWindow.prototype,"isAlwaysOnTop",{get:function(){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});return this.cWindow.alwaysOnTop}});Object.defineProperty(NWWindow.prototype,"menu",{get:function(){var e=privates(this).menu||{};return e},set:function(o){if(!o){privates(this).menu=null;currentNWWindowInternal.clearMenu(this.cWindow.id);return}if(o.type!="menubar")throw new TypeError('Only menu of type "menubar" can be used as this.window menu');privates(this).menu=o;var e=currentNWWindowInternal.setMenu(o.id,this.cWindow.id);if(e.length){e.forEach(e=>{let n=e.menu;let t=e.index;let i=o.items[n];if(i&&i.submenu){i.submenu.insert(new nw.MenuItem(e.option),t)}})}}});Object.defineProperty(NWWindow.prototype,"window",{get:function(){this.cWindow=currentNWWindowInternal.getCurrent(this.cWindow.id,{populate:true});return appWindowNatives.GetFrame(this.cWindow.tabs[0].mainFrameId,false)}});Object.defineProperty(NWWindow.prototype,"frameId",{get:function(){return currentRoutingID}});apiBridge.registerCustomHook(function(e){var n=e.apiFunctions;currentNWWindowInternal=getInternalApi("nw.currentWindowInternal");forEach(currentNWWindowInternal,function(e,n){if(!e.endsWith("Internal")&&e!=="close")NWWindow.prototype[e]=n});n.setHandleRequest("get",function(e){if(e)return try_nw(e.top).nw.Window.get();if(currentNWWindow)return currentNWWindow;currentNWWindow=new NWWindow;return currentNWWindow});n.setHandleRequest("getAll",function(t){chrome.windows.getAll({populate:true},function(e){let n=e=>new NWWindow(e);t(e.map(n))})});n.setHandleRequest("open",function(e,n,t){var i={url:e,setSelfAsOpener:true,type:"popup"};if(n){if(n.frame===false)i.frameless=true;if(n.resizable===false)i.resizable=false;if(n.focus===false)i.focused=false;if(n.x)i.left=n.x;if(n.y)i.top=n.y;if(n.height)i.height=n.height;if(n.width)i.width=n.width;if(n.min_width)i.minWidth=n.min_width;if(n.max_width)i.maxWidth=n.max_width;if(n.min_height)i.minHeight=n.min_height;if(n.max_height)i.maxHeight=n.max_height;if(n.fullscreen===true)i.state="fullscreen";if(n.show===false)i.hidden=true;if(n.show_in_taskbar===false)i.showInTaskbar=false;if(n["always_on_top"]===true)i.alwaysOnTop=true;if(n["visible_on_all_workspaces"]===true)i.allVisible=true;if(typeof n["inject_js_start"]=="string")i.inject_js_start=n["inject_js_start"];if(typeof n["inject_js_end"]=="string")i.inject_js_end=n["inject_js_end"];if(n.transparent)i.alphaEnabled=true;if(n.new_instance===true){i.new_instance=true;i.setSelfAsOpener=false}if(n.mixed_context===true){if(n.new_instance!==true){throw new Error("mixed_context should be set with new_instance in nw.Window.open")}i.mixed_context=true}if(n.position)i.position=n.position;if(n.title)i.title=n.title;if(n.icon)i.icon=n.icon;if(n.id)i.id=n.id}if(t&&!(i.new_instance===true))i.block_parser=true;try_hidden(window).chrome.windows.create(i,function(e){try{if(t){if(e)t(new NWWindow(e));else t()}}finally{if(i.block_parser)appWindowNatives.ResumeParser(e.tabs[0].mainFrameId)}})})});function dispatchEventIfExists(e,n,t){var i=e[n];if(i&&typeof i.dispatch=="function")$Function.apply(i.dispatch,i,t);else console.warn("Could not dispatch "+n+", event has been clobbered")}function onNewWinPolicy(e,n,t,i){dispatchEventIfExists(NWWindow.prototype,"onNewWinPolicy",[e,n,t,i])}function onNavigation(e,n,t,i,o){dispatchEventIfExists(NWWindow.prototype,"onNavigation",[e,n,t,o,i])}function onLoadingStateChanged(e){if(!currentNWWindow)return;dispatchEventIfExists(currentNWWindow,"LoadingStateChanged",[e])}function onDocumentStartEnd(e,n,t){if(e){dispatchEventIfExists(NWWindow.prototype,"onDocumentStart",[n,t])}else dispatchEventIfExists(NWWindow.prototype,"onDocumentEnd",[n,t])}function updateAppWindowZoom(e,n){if(!currentNWWindow)return;dispatchEventIfExists(currentNWWindow,"onZoom",[n])}function onClose(e){if(!currentNWWindow)return;currentNWWindow.onClose.dispatchNW({instanceId:currentWidgetRoutingID},e)}function get_nw(){appWindowNatives.FixGamePadAPI();var e=try_nw(window).nw;if(e)e.Window.get()}exports.onNewWinPolicy=onNewWinPolicy;exports.onNavigation=onNavigation;exports.LoadingStateChanged=onLoadingStateChanged;exports.onDocumentStartEnd=onDocumentStartEnd;exports.onClose=onClose;exports.updateAppWindowZoom=updateAppWindowZoom;