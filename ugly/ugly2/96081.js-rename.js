QUnit.module("traversing",{afterEach:moduleTeardown});QUnit.test("find(String)",function(e){e.expect(1);e.equal(jQuery("#foo").find(".blogTest").text(),"Yahoo","Basic selector")});QUnit.test("find(String) under non-elements",function(e){e.expect(2);var t=jQuery("#nonnodes").contents();e.equal(t.find("div").length,0,"Check node,textnode,comment to find zero divs");e.equal(t.find("div").addBack().length,3,"Check node,textnode,comment to find zero divs, but preserves pushStack")});QUnit[QUnit.jQuerySelectors?"test":"skip"]("find(leading combinator)",function(e){e.expect(4);e.deepEqual(jQuery("#qunit-fixture").find("> div").get(),q("foo","nothiddendiv","moretests","tabindex-tests","liveHandlerOrder","siblingTest","fx-test-group"),"find child elements");e.deepEqual(jQuery("#qunit-fixture").find("> #foo, > #moretests").get(),q("foo","moretests"),"find child elements");e.deepEqual(jQuery("#qunit-fixture").find("> #foo > p").get(),q("sndp","en","sap"),"find child elements");e.deepEqual(jQuery("#siblingTest, #siblingfirst").find("+ *").get(),q("siblingnext","fx-test-group"),"ensure document order")});QUnit.test("find(node|jQuery object)",function(e){e.expect(13);var t=jQuery("#foo"),n=jQuery(".blogTest"),i=jQuery("#first"),o=n.add(i),r=jQuery("#ap").add(n),l=t.add(n);e.equal(t.find(n).text(),"Yahoo","Find with blog jQuery object");e.equal(t.find(n[0]).text(),"Yahoo","Find with blog node");e.equal(t.find(i).length,0,"#first is not in #foo");e.equal(t.find(i[0]).length,0,"#first not in #foo (node)");e.deepEqual(t.find(o).get(),n.get(),"Find returns only nodes within #foo");e.deepEqual(t.find(r).get(),n.get(),"...regardless of order");e.ok(l.find(n).is(".blogTest"),"Blog is part of the collection, but also within foo");e.ok(l.find(n[0]).is(".blogTest"),"Blog is part of the collection, but also within foo(node)");e.equal(o.find(t).length,0,"Foo is not in two elements");e.equal(o.find(t[0]).length,0,"Foo is not in two elements(node)");e.equal(o.find(i).length,0,"first is in the collection and not within two");e.equal(o.find(i).length,0,"first is in the collection and not within two(node)");e.equal(o.find(t[0]).addBack().length,2,"find preserves the pushStack, see #12009")});QUnit.test("is(falsy|invalid)",function(e){e.expect(5);e.ok(!jQuery("#foo").is(0),"Expected false for an invalid expression - 0");e.ok(!jQuery("#foo").is(null),"Expected false for an invalid expression - null");e.ok(!jQuery("#foo").is(""),'Expected false for an invalid expression - ""');e.ok(!jQuery("#foo").is(undefined),"Expected false for an invalid expression - undefined");e.ok(!jQuery("#foo").is({plain:"object"}),"Check passing invalid object")});QUnit.test("is(String)",function(e){e.expect(33);var t=document.getElementById("simon1"),n=document.getElementById("text1"),i=document.getElementById("option1a"),o=document.createElement("div");e.ok(jQuery("#form").is("form"),"Check for element: A form must be a form");e.ok(!jQuery("#form").is("div"),"Check for element: A form is not a div");e.ok(jQuery("#mark").is(".blog"),"Check for class: Expected class 'blog'");e.ok(!jQuery("#mark").is(".link"),"Check for class: Did not expect class 'link'");e.ok(jQuery("#simon").is(".blog.link"),"Check for multiple classes: Expected classes 'blog' and 'link'");e.ok(!jQuery("#simon").is(".blogTest"),"Check for multiple classes: Expected classes 'blog' and 'link', but not 'blogTest'");e.ok(jQuery("#en").is('[lang="en"]'),"Check for attribute: Expected attribute lang to be 'en'");e.ok(!jQuery("#en").is('[lang="de"]'),"Check for attribute: Expected attribute lang to be 'en', not 'de'");e.ok(jQuery("#text1").is('[type="text"]'),"Check for attribute: Expected attribute type to be 'text'");e.ok(!jQuery("#text1").is('[type="radio"]'),"Check for attribute: Expected attribute type to be 'text', not 'radio'");e.ok(jQuery("#text2").is(":disabled"),"Check for pseudoclass: Expected to be disabled");e.ok(!jQuery("#text1").is(":disabled"),"Check for pseudoclass: Expected not disabled");e.ok(jQuery("#radio2").is(":checked"),"Check for pseudoclass: Expected to be checked");e.ok(!jQuery("#radio1").is(":checked"),"Check for pseudoclass: Expected not checked");e.ok(jQuery("#en").is('[lang="en"],[lang="de"]'),"Comma-separated; Check for lang attribute: Expect en or de");e.ok(jQuery("#en").is('[lang="de"],[lang="en"]'),"Comma-separated; Check for lang attribute: Expect en or de");e.ok(jQuery("#en").is('[lang="en"] , [lang="de"]'),"Comma-separated; Check for lang attribute: Expect en or de");e.ok(jQuery("#en").is('[lang="de"] , [lang="en"]'),"Comma-separated; Check for lang attribute: Expect en or de");t.title="Don't click me";e.ok(jQuery(t).is("[rel='bookmark']"),"attribute-equals string (delimited via apostrophes)");e.ok(jQuery(t).is("[rel=bookmark]"),"attribute-equals identifier");e.ok(jQuery(t).is("[\nrel = bookmark\t]"),"attribute-equals identifier (whitespace ignored)");e.ok(jQuery(t).is('a[title="Don\'t click me"]'),"attribute-equals string containing single quote");n.setAttribute("data-pos",":first");e.ok(jQuery(n).is("input[data-pos=\\:first]"),"attribute-equals POS in identifier");e.ok(jQuery(n).is("input[data-pos=':first']"),"attribute-equals POS in string");if(QUnit.jQuerySelectors){e.ok(jQuery(n).is(":input[data-pos=':first']"),"attribute-equals POS in string after pseudo")}else{e.ok("skip",":input not supported in selector-native")}i.setAttribute("test","");e.ok(jQuery(i).is("[id=option1a]"),"id attribute-equals identifier");if(QUnit.jQuerySelectors){e.ok(jQuery(i).is("[id*=option1][type!=checkbox]"),"attribute-not-equals identifier")}else{e.ok("skip","attribute-not-equals not supported in selector-native")}e.ok(jQuery(i).is("[id*=option1]"),"attribute-contains identifier");e.ok(!jQuery(i).is("[test^='']"),"attribute-starts-with empty string (negative)");i.className="=]";e.ok(jQuery(i).is(".\\=\\]"),"class selector with attribute-equals confusable");e.ok(jQuery(o).is("div"),"disconnected element");e.ok(jQuery(t).is("* > *"),"child combinator matches in document");e.ok(!jQuery(o).is("* > *"),"child combinator fails in fragment")});QUnit.test("is() against non-elements (#10178)",function(e){e.expect(14);var t,n,i,o=jQuery(document),r=["a","*"],l={text:document.createTextNode(""),comment:document.createComment(""),document:document,window:window,array:[],"plain object":{},function:function(){}};for(t in l){o[0]=l[t];for(n=0;n<r.length;n++){i=r[n];e.ok(!o.is(i),t+' does not match "'+i+'"')}}});QUnit.test("is(jQuery)",function(e){e.expect(19);e.ok(jQuery("#form").is(jQuery("form")),"Check for element: A form is a form");e.ok(!jQuery("#form").is(jQuery("div")),"Check for element: A form is not a div");e.ok(jQuery("#mark").is(jQuery(".blog")),"Check for class: Expected class 'blog'");e.ok(!jQuery("#mark").is(jQuery(".link")),"Check for class: Did not expect class 'link'");e.ok(jQuery("#simon").is(jQuery(".blog.link")),"Check for multiple classes: Expected classes 'blog' and 'link'");e.ok(!jQuery("#simon").is(jQuery(".blogTest")),"Check for multiple classes: Expected classes 'blog' and 'link', but not 'blogTest'");e.ok(jQuery("#en").is(jQuery('[lang="en"]')),"Check for attribute: Expected attribute lang to be 'en'");e.ok(!jQuery("#en").is(jQuery('[lang="de"]')),"Check for attribute: Expected attribute lang to be 'en', not 'de'");e.ok(jQuery("#text1").is(jQuery('[type="text"]')),"Check for attribute: Expected attribute type to be 'text'");e.ok(!jQuery("#text1").is(jQuery('[type="radio"]')),"Check for attribute: Expected attribute type to be 'text', not 'radio'");e.ok(!jQuery("#text1").is(jQuery("input:disabled")),"Check for pseudoclass: Expected not disabled");e.ok(jQuery("#radio2").is(jQuery("input:checked")),"Check for pseudoclass: Expected to be checked");e.ok(!jQuery("#radio1").is(jQuery("input:checked")),"Check for pseudoclass: Expected not checked");e.ok(jQuery("#form").is(jQuery("#qunit-fixture form")[0]),"Check for element: A form is a form");e.ok(!jQuery("#form").is(jQuery("div")[0]),"Check for element: A form is not a div");e.ok(jQuery("#mark").is(jQuery(".blog")[0]),"Check for class: Expected class 'blog'");e.ok(!jQuery("#mark").is(jQuery(".link")[0]),"Check for class: Did not expect class 'link'");e.ok(jQuery("#simon").is(jQuery(".blog.link")[0]),"Check for multiple classes: Expected classes 'blog' and 'link'");e.ok(!jQuery("#simon").is(jQuery(".blogTest")[0]),"Check for multiple classes: Expected classes 'blog' and 'link', but not 'blogTest'")});QUnit[QUnit.jQuerySelectors?"test":"skip"]("is() with :has() selectors",function(e){e.expect(6);e.ok(jQuery("#foo").is(":has(p)"),"Check for child: Expected a child 'p' element");e.ok(!jQuery("#foo").is(":has(ul)"),"Check for child: Did not expect 'ul' element");e.ok(jQuery("#foo").is(":has(p):has(a):has(code)"),"Check for childs: Expected 'p', 'a' and 'code' child elements");e.ok(!jQuery("#foo").is(":has(p):has(a):has(code):has(ol)"),"Check for childs: Expected 'p', 'a' and 'code' child elements, but no 'ol'");e.ok(jQuery("#foo").is(jQuery("div:has(p)")),"Check for child: Expected a child 'p' element");e.ok(!jQuery("#foo").is(jQuery("div:has(ul)")),"Check for child: Did not expect 'ul' element")});QUnit[QUnit.jQuerySelectorsPos?"test":"skip"]("is() with positional selectors",function(i){i.expect(27);var e=jQuery("<p id='posp'><a class='firsta' href='#'><em>first</em></a>"+"<a class='seconda' href='#'><b>test</b></a><em></em></p>").appendTo("#qunit-fixture"),t=function(e,t,n){i.equal(jQuery(e).is(t),n,"jQuery('"+e+"').is('"+t+"')")};t("#posp","p:last",true);t("#posp","#posp:first",true);t("#posp","#posp:eq(2)",false);t("#posp","#posp a:first",false);t("#posp .firsta","#posp a:first",true);t("#posp .firsta","#posp a:last",false);t("#posp .firsta","#posp a:even",true);t("#posp .firsta","#posp a:odd",false);t("#posp .firsta","#posp a:eq(0)",true);t("#posp .firsta","#posp a:eq(9)",false);t("#posp .firsta","#posp em:eq(0)",false);t("#posp .firsta","#posp em:first",false);t("#posp .firsta","#posp:first",false);t("#posp .seconda","#posp a:first",false);t("#posp .seconda","#posp a:last",true);t("#posp .seconda","#posp a:gt(0)",true);t("#posp .seconda","#posp a:lt(5)",true);t("#posp .seconda","#posp a:lt(1)",false);t("#posp em","#posp a:eq(0) em",true);t("#posp em","#posp a:lt(1) em",true);t("#posp em","#posp a:gt(1) em",false);t("#posp em","#posp a:first em",true);t("#posp em","#posp a em:last",true);t("#posp em","#posp a em:eq(2)",false);i.ok(jQuery("#option1b").is("#select1 option:not(:first)"),"POS inside of :not() (#10970)");i.ok(jQuery(e[0]).is("p:last"),"context constructed from a single node (#13797)");i.ok(!jQuery(e[0]).find("#firsta").is("a:first"),"context derived from a single node (#13797)")});QUnit.test("index()",function(e){e.expect(2);e.equal(jQuery("#text2").index(),2,"Returns the index of a child amongst its siblings");e.equal(jQuery("<div></div>").index(),-1,"Node without parent returns -1")});QUnit.test("index(Object|String|undefined)",function(e){e.expect(16);var t=jQuery([window,document]),n=jQuery("#radio1,#radio2,#check1,#check2");e.equal(t.index(window),0,"Check for index of elements");e.equal(t.index(document),1,"Check for index of elements");e.equal(n.index(document.getElementById("radio1")),0,"Check for index of elements");e.equal(n.index(document.getElementById("radio2")),1,"Check for index of elements");e.equal(n.index(document.getElementById("check1")),2,"Check for index of elements");e.equal(n.index(document.getElementById("check2")),3,"Check for index of elements");e.equal(n.index(window),-1,"Check for not found index");e.equal(n.index(document),-1,"Check for not found index");e.equal(t.index(t),0,"Pass in a jQuery object");e.equal(t.index(t.eq(1)),1,"Pass in a jQuery object");e.equal(jQuery("#form input[type='radio']").index(jQuery("#radio2")),1,"Pass in a jQuery object");e.equal(jQuery("#text2").index(),2,"Check for index amongst siblings");e.equal(jQuery("#form").children().eq(4).index(),4,"Check for index amongst siblings");e.equal(jQuery("#radio2").index("#form input[type='radio']"),1,"Check for index within a selector");e.equal(jQuery("#form input[type='radio']").index(jQuery("#radio2")),1,"Check for index within a selector");e.equal(jQuery("#radio2").index("#form input[type='text']"),-1,"Check for index not found within a selector")});QUnit.test("filter(Selector|undefined)",function(e){e.expect(9);e.deepEqual(jQuery("#form input").filter(":checked").get(),q("radio2","check1"),"filter(String)");e.deepEqual(jQuery("p").filter("#ap, #sndp").get(),q("ap","sndp"),"filter('String, String')");e.deepEqual(jQuery("p").filter("#ap,#sndp").get(),q("ap","sndp"),"filter('String,String')");e.deepEqual(jQuery("p").filter(null).get(),[],"filter(null) should return an empty jQuery object");e.deepEqual(jQuery("p").filter(undefined).get(),[],"filter(undefined) should return an empty jQuery object");e.deepEqual(jQuery("p").filter(0).get(),[],"filter(0) should return an empty jQuery object");e.deepEqual(jQuery("p").filter("").get(),[],"filter('') should return an empty jQuery object");var t=jQuery("#nonnodes").contents();e.equal(t.filter("span").length,1,"Check node,textnode,comment to filter the one span");e.equal(t.filter("[name]").length,0,"Check node,textnode,comment to filter the one span")});QUnit.test("filter(Function)",function(e){e.expect(2);e.deepEqual(jQuery("#qunit-fixture p").filter(function(){return!jQuery("a",this).length}).get(),q("sndp","first"),"filter(Function)");e.deepEqual(jQuery("#qunit-fixture p").filter(function(e,t){return!jQuery("a",t).length}).get(),q("sndp","first"),"filter(Function) using arg")});QUnit.test("filter(Element)",function(e){e.expect(1);var t=document.getElementById("text1");e.deepEqual(jQuery("#form input").filter(t).get(),q("text1"),"filter(Element)")});QUnit.test("filter(Array)",function(e){e.expect(1);var t=[document.getElementById("text1")];e.deepEqual(jQuery("#form input").filter(t).get(),q("text1"),"filter(Element)")});QUnit.test("filter(jQuery)",function(e){e.expect(1);var t=jQuery("#text1");e.deepEqual(jQuery("#form input").filter(t).get(),q("text1"),"filter(Element)")});QUnit[QUnit.jQuerySelectorsPos?"test":"skip"]("filter() with positional selectors",function(i){i.expect(19);var e=function(e,t,n){i.equal(jQuery(e).filter(t).length,n,"jQuery( "+e+" ).filter( "+t+" )")};jQuery(""+"<p id='posp'>"+"<a class='firsta' href='#'>"+"<em>first</em>"+"</a>"+"<a class='seconda' href='#'>"+"<b>test</b>"+"</a>"+"<em></em>"+"</p>").appendTo("#qunit-fixture");e("#posp","#posp:first",1);e("#posp","#posp:eq(2)",0);e("#posp","#posp a:first",0);e("#posp .firsta","#posp a:first",1);e("#posp .firsta","#posp a:last",1);e("#posp .firsta","#posp a:last-child",0);e("#posp .firsta","#posp a:even",1);e("#posp .firsta","#posp a:odd",0);e("#posp .firsta","#posp a:eq(0)",1);e("#posp .firsta","#posp a:eq(9)",0);e("#posp .firsta","#posp em:eq(0)",0);e("#posp .firsta","#posp em:first",0);e("#posp .firsta","#posp:first",0);e("#posp .seconda","#posp a:first",1);e("#posp .seconda","#posp em:first",0);e("#posp .seconda","#posp a:last",1);e("#posp .seconda","#posp a:gt(0)",0);e("#posp .seconda","#posp a:lt(5)",1);e("#posp .seconda","#posp a:lt(1)",1)});QUnit.test("closest()",function(e){e.expect(14);var t;e.deepEqual(jQuery("body").closest("body").get(),q("body"),"closest(body)");e.deepEqual(jQuery("body").closest("html").get(),q("html"),"closest(html)");e.deepEqual(jQuery("body").closest("div").get(),[],"closest(div)");e.deepEqual(jQuery("#qunit-fixture").closest("span,#html").get(),q("html"),"closest(span,#html)");t=jQuery("#nothiddendivchild");e.deepEqual(t.closest("html",document.body).get(),[],"Context limited.");e.deepEqual(t.closest("body",document.body).get(),[],"Context limited.");e.deepEqual(t.closest("#nothiddendiv",document.body).get(),q("nothiddendiv"),"Context not reached.");e.equal(jQuery("#qunit-fixture p").closest("#qunit-fixture").length,1,"Closest should return a unique set");e.equal(jQuery("<div><p></p></div>").find("p").closest("table").length,0,"Make sure disconnected closest work.");e.deepEqual(jQuery("#firstp").closest(q("qunit-fixture")).get(),q("qunit-fixture"),"Non-string match target");e.equal(jQuery("<div foo='bar'></div>").closest("[foo]").length,1,"Disconnected nodes with attribute selector");e.equal(jQuery("<div>text</div>").closest("[lang]").length,0,"Disconnected nodes with text and non-existent attribute selector");e.ok(!jQuery(document).closest("#foo").length,"Calling closest on a document fails silently");t=jQuery("<div>text</div>");e.deepEqual(t.contents().closest("*").get(),t.get(),"Text node input (#13332)")});QUnit[QUnit.jQuerySelectorsPos?"test":"skip"]("closest() with positional selectors",function(e){e.expect(3);e.deepEqual(jQuery("#qunit-fixture").closest("div:first").get(),[],"closest(div:first)");e.deepEqual(jQuery("#qunit-fixture div").closest("body:first div:last").get(),[],"closest(body:first div:last)");e.deepEqual(jQuery("#qunit-fixture div").closest("body:first div:last",document).get(),[],"closest(body:first div:last, document)")});QUnit.test("closest(jQuery)",function(e){e.expect(8);var t=jQuery("#nothiddendivchild"),n=jQuery("#nothiddendiv"),i=jQuery("#foo"),o=jQuery("body");e.ok(t.closest(n).is("#nothiddendiv"),"closest( jQuery('#nothiddendiv') )");e.ok(t.closest(n[0]).is("#nothiddendiv"),"closest( jQuery('#nothiddendiv') ) :: node");e.ok(t.closest(t).is("#nothiddendivchild"),"child is included");e.ok(t.closest(t[0]).is("#nothiddendivchild"),"child is included  :: node");e.equal(t.closest(document.createElement("div")).length,0,"created element is not related");e.equal(t.closest(i).length,0,"Sibling not a parent of child");e.equal(t.closest(i[0]).length,0,"Sibling not a parent of child :: node");e.ok(t.closest(o.add(n)).is("#nothiddendiv"),"Closest ancestor retrieved.")});QUnit[QUnit.jQuerySelectors?"test":"skip"]("not(Selector)",function(e){e.expect(7);e.equal(jQuery("#qunit-fixture > p#ap > a").not("#google").length,2,"not('selector')");e.deepEqual(jQuery("#qunit-fixture p").not(".result").get(),q("firstp","ap","sndp","en","sap","first"),"not('.class')");e.deepEqual(jQuery("#qunit-fixture p").not("#ap, #sndp, .result").get(),q("firstp","en","sap","first"),"not('selector, selector')");e.deepEqual(jQuery("#ap *").not("code").get(),q("google","groups","anchor1","mark"),"not('tag selector')");e.deepEqual(jQuery("#ap *").not("code, #mark").get(),q("google","groups","anchor1"),"not('tag, ID selector')");e.deepEqual(jQuery("#ap *").not("#mark, code").get(),q("google","groups","anchor1"),"not('ID, tag selector')");e.deepEqual(jQuery("#form option").not("option.emptyopt:contains('Nothing'),optgroup *,[value='1']").get(),q("option1c","option1d","option2c","option2d","option3c","option3d","option3e","option4d","option4e","option5a","option5b"),"not('complex selector')")});QUnit.test("not(undefined)",function(e){e.expect(4);var t=jQuery("p").get();e.deepEqual(jQuery("p").not(null).get(),t,"not(null) should have no effect");e.deepEqual(jQuery("p").not(undefined).get(),t,"not(undefined) should have no effect");e.deepEqual(jQuery("p").not(0).get(),t,"not(0) should have no effect");e.deepEqual(jQuery("p").not("").get(),t,"not('') should have no effect")});QUnit.test("not(Element)",function(e){e.expect(1);var t=jQuery("#form select");e.deepEqual(t.not(t[1]).get(),q("select1","select3","select4","select5"),"filter out DOM element")});QUnit.test("not(Function)",function(e){e.expect(1);e.deepEqual(jQuery("#qunit-fixture p").not(function(){return jQuery("a",this).length}).get(),q("sndp","first"),"not(Function)")});QUnit.test("not(Array)",function(e){e.expect(2);e.equal(jQuery("#qunit-fixture > p#ap > a").not(document.getElementById("google")).length,2,"not(DOMElement)");e.equal(jQuery("p").not(document.getElementsByTagName("p")).length,0,"not(Array-like DOM collection)")});QUnit.test("not(jQuery)",function(e){e.expect(1);e.deepEqual(jQuery("#qunit-fixture p").not(jQuery("#ap, #sndp, .result")).get(),q("firstp","en","sap","first"),"not(jQuery)")});QUnit[QUnit.jQuerySelectors?"test":"skip"]("not(Selector) excludes non-element nodes (gh-2808)",function(e){e.expect(3);var t=jQuery("#nonnodes").contents(),n=q("nonnodesElement");e.deepEqual(t.not("*").get(),[],"not *");e.deepEqual(t.not("[id=a],[id=b]").get(),n,"not [id=a],[id=b]");e.deepEqual(t.not("[id=a],*,[id=b]").get(),[],"not [id=a],*,[id=b]")});QUnit.test("not(arraylike) passes non-element nodes (gh-3226)",function(e){e.expect(5);var t=jQuery("<span id='nonnodesElement'>hi</span> there \x3c!-- mon ami --\x3e"),n=t.length,i=t.first();e.deepEqual(t.not(t).get(),[],"not everything");e.deepEqual(t.not(i).length,n-1,"not firstElement");e.deepEqual(t.not([i[0].nextSibling]).length,n-1,"not textnode array");e.deepEqual(t.not(i[0].nextSibling).length,n-1,"not textnode");e.deepEqual(t.not(document.body).get(),t.get(),"not with unmatched element")});QUnit.test("has(Element)",function(e){e.expect(3);var t,n,i;t=jQuery("#qunit-fixture").has(jQuery("#sndp")[0]);e.deepEqual(t.get(),q("qunit-fixture"),"Keeps elements that have the element as a descendant");n=jQuery("<a><b><i></i></b></a>");e.deepEqual(n.has(n.find("i")[0]).get(),n.get(),"...Even when detached");i=jQuery("#qunit-fixture, #header").has(jQuery("#sndp")[0]);e.deepEqual(i.get(),q("qunit-fixture"),"Does not include elements that do not have the element as a descendant")});QUnit.test("has(Selector)",function(e){e.expect(5);var t,n,i,o;t=jQuery("#qunit-fixture").has("#sndp");e.deepEqual(t.get(),q("qunit-fixture"),"Keeps elements that have any element matching the selector as a descendant");n=jQuery("<a><b><i></i></b></a>");e.deepEqual(n.has("i").get(),n.get(),"...Even when detached");i=jQuery("#qunit-fixture, #header").has("#sndp");e.deepEqual(i.get(),q("qunit-fixture"),"Does not include elements that do not have the element as a descendant");i=jQuery("#select1, #select2, #select3").has("#option1a, #option3a");e.deepEqual(i.get(),q("select1","select3"),"Multiple contexts are checks correctly");o=jQuery("#qunit-fixture").has("#sndp, #first");e.deepEqual(o.get(),q("qunit-fixture"),"Only adds elements once")});QUnit.test("has(Arrayish)",function(e){e.expect(4);var t,n,i,o;t=jQuery("#qunit-fixture").has(jQuery("#sndp"));e.deepEqual(t.get(),q("qunit-fixture"),"Keeps elements that have any element in the jQuery list as a descendant");n=jQuery("<a><b><i></i></b></a>");e.deepEqual(n.has(n.find("i")).get(),n.get(),"...Even when detached");i=jQuery("#qunit-fixture, #header").has(jQuery("#sndp"));e.deepEqual(i.get(),q("qunit-fixture"),"Does not include elements that do not have an element in the jQuery list as a descendant");o=jQuery("#qunit-fixture").has(jQuery("#sndp, #first"));e.deepEqual(o.get(),q("qunit-fixture"),"Only adds elements once")});QUnit.test("addBack()",function(e){e.expect(5);e.deepEqual(jQuery("#en").siblings().addBack().get(),q("sndp","en","sap"),"Check for siblings and self");e.deepEqual(jQuery("#foo").children().addBack().get(),q("foo","sndp","en","sap"),"Check for children and self");e.deepEqual(jQuery("#sndp, #en").parent().addBack().get(),q("foo","sndp","en"),"Check for parent and self");e.deepEqual(jQuery("#groups").parents("p, div").addBack().get(),q("qunit-fixture","ap","groups"),"Check for parents and self");e.deepEqual(jQuery("#select1 > option").filter(":first-child").addBack(":last-child").get(),q("option1a","option1d"),"Should contain the last elems plus the *filtered* prior set elements")});QUnit.test("siblings([String])",function(e){e.expect(6);e.deepEqual(jQuery("#en").siblings().get(),q("sndp","sap"),"Check for siblings");e.deepEqual(jQuery("#nonnodes").contents().eq(1).siblings().get(),q("nonnodesElement"),"Check for text node siblings");e.deepEqual(jQuery("#foo").siblings("form, b").get(),q("form","floatTest","lengthtest","name-tests","testForm","disabled-tests"),"Check for multiple filters");var t=q("sndp","en","sap");e.deepEqual(jQuery("#en, #sndp").siblings().get(),t,"Check for unique results from siblings");e.deepEqual(jQuery("#option5a").siblings("option[data-attr]").get(),q("option5c"),"Has attribute selector in siblings (#9261)");e.equal(jQuery("<a></a>").siblings().length,0,"Detached elements have no siblings (#11370)")});QUnit[QUnit.jQuerySelectors?"test":"skip"]("siblings([String])",function(e){e.expect(2);e.deepEqual(jQuery("#sndp").siblings(":has(code)").get(),q("sap"),"Check for filtered siblings (has code child element)");e.deepEqual(jQuery("#sndp").siblings(":has(a)").get(),q("en","sap"),"Check for filtered siblings (has anchor child element)")});QUnit.test("children([String])",function(e){e.expect(2);e.deepEqual(jQuery("#foo").children().get(),q("sndp","en","sap"),"Check for children");e.deepEqual(jQuery("#foo").children("#en, #sap").get(),q("en","sap"),"Check for multiple filters")});QUnit[QUnit.jQuerySelectors?"test":"skip"]("children([String])",function(e){e.expect(1);e.deepEqual(jQuery("#foo").children(":has(code)").get(),q("sndp","sap"),"Check for filtered children")});QUnit.test("parent([String])",function(e){e.expect(6);var t;e.equal(jQuery("#groups").parent()[0].id,"ap","Simple parent check");e.equal(jQuery("#groups").parent("p")[0].id,"ap","Filtered parent check");e.equal(jQuery("#groups").parent("div").length,0,"Filtered parent check, no match");e.equal(jQuery("#groups").parent("div, p")[0].id,"ap","Check for multiple filters");e.deepEqual(jQuery("#en, #sndp").parent().get(),q("foo"),"Check for unique results from parent");t=jQuery("<div>text</div>");e.deepEqual(t.contents().parent().get(),t.get(),"Check for parent of text node (#13265)")});QUnit.test("parents([String])",function(e){e.expect(6);e.equal(jQuery("#groups").parents()[0].id,"ap","Simple parents check");e.deepEqual(jQuery("#nonnodes").contents().eq(1).parents().eq(0).get(),q("nonnodes"),"Text node parents check");e.equal(jQuery("#groups").parents("p")[0].id,"ap","Filtered parents check");e.equal(jQuery("#groups").parents("div")[0].id,"qunit-fixture","Filtered parents check2");e.deepEqual(jQuery("#groups").parents("p, div").get(),q("ap","qunit-fixture"),"Check for multiple filters");e.deepEqual(jQuery("#en, #sndp").parents().get(),q("foo","qunit-fixture","body","html"),"Check for unique results from parents")});QUnit.test("parentsUntil([String])",function(e){e.expect(10);var t=jQuery("#groups").parents();e.deepEqual(jQuery("#groups").parentsUntil().get(),t.get(),"parentsUntil with no selector (nextAll)");e.deepEqual(jQuery("#groups").parentsUntil(".foo").get(),t.get(),"parentsUntil with invalid selector (nextAll)");e.deepEqual(jQuery("#groups").parentsUntil("#html").get(),t.slice(0,-1).get(),"Simple parentsUntil check");e.equal(jQuery("#groups").parentsUntil("#ap").length,0,"Simple parentsUntil check");e.deepEqual(jQuery("#nonnodes").contents().eq(1).parentsUntil("#html").eq(0).get(),q("nonnodes"),"Text node parentsUntil check");e.deepEqual(jQuery("#groups").parentsUntil("#html, #body").get(),t.slice(0,2).get(),"Less simple parentsUntil check");e.deepEqual(jQuery("#groups").parentsUntil("#html","div").get(),jQuery("#qunit-fixture").get(),"Filtered parentsUntil check");e.deepEqual(jQuery("#groups").parentsUntil("#html","p,div").get(),t.slice(0,2).get(),"Multiple-filtered parentsUntil check");e.equal(jQuery("#groups").parentsUntil("#html","span").length,0,"Filtered parentsUntil check, no match");e.deepEqual(jQuery("#groups, #ap").parentsUntil("#html","p,div").get(),t.slice(0,2).get(),"Multi-source, multiple-filtered parentsUntil check")});QUnit.test("next([String])",function(e){e.expect(6);e.equal(jQuery("#ap").next()[0].id,"foo","Simple next check");e.equal(jQuery("<div>text<a id='element'></a></div>").contents().eq(0).next().attr("id"),"element","Text node next check");e.equal(jQuery("#ap").next("div")[0].id,"foo","Filtered next check");e.equal(jQuery("#ap").next("p").length,0,"Filtered next check, no match");e.equal(jQuery("#ap").next("div, p")[0].id,"foo","Multiple filters");e.equal(jQuery("body").next().length,0,"Simple next check, no match")});QUnit.test("prev([String])",function(e){e.expect(5);e.equal(jQuery("#foo").prev()[0].id,"ap","Simple prev check");e.deepEqual(jQuery("#nonnodes").contents().eq(1).prev().get(),q("nonnodesElement"),"Text node prev check");e.equal(jQuery("#foo").prev("p")[0].id,"ap","Filtered prev check");e.equal(jQuery("#foo").prev("div").length,0,"Filtered prev check, no match");e.equal(jQuery("#foo").prev("p, div")[0].id,"ap","Multiple filters")});QUnit.test("nextAll([String])",function(e){e.expect(5);var t=jQuery("#form").children();e.deepEqual(jQuery("#label-for").nextAll().get(),t.slice(1).get(),"Simple nextAll check");e.equal(jQuery("<div>text<a id='element'></a></div>").contents().eq(0).nextAll().attr("id"),"element","Text node nextAll check");e.deepEqual(jQuery("#label-for").nextAll("input").get(),t.slice(1).filter("input").get(),"Filtered nextAll check");e.deepEqual(jQuery("#label-for").nextAll("input,select").get(),t.slice(1).filter("input,select").get(),"Multiple-filtered nextAll check");e.deepEqual(jQuery("#label-for, #hidden1").nextAll("input,select").get(),t.slice(1).filter("input,select").get(),"Multi-source, multiple-filtered nextAll check")});QUnit.test("prevAll([String])",function(e){e.expect(5);var t=jQuery(jQuery("#form").children().slice(0,12).get().reverse());e.deepEqual(jQuery("#area1").prevAll().get(),t.get(),"Simple prevAll check");e.deepEqual(jQuery("#nonnodes").contents().eq(1).prevAll().get(),q("nonnodesElement"),"Text node prevAll check");e.deepEqual(jQuery("#area1").prevAll("input").get(),t.filter("input").get(),"Filtered prevAll check");e.deepEqual(jQuery("#area1").prevAll("input,select").get(),t.filter("input,select").get(),"Multiple-filtered prevAll check");e.deepEqual(jQuery("#area1, #hidden1").prevAll("input,select").get(),t.filter("input,select").get(),"Multi-source, multiple-filtered prevAll check")});QUnit.test("nextUntil([String])",function(e){e.expect(12);var t=jQuery("#form").children().slice(2,12);e.deepEqual(jQuery("#text1").nextUntil().get(),jQuery("#text1").nextAll().get(),"nextUntil with no selector (nextAll)");e.equal(jQuery("<div>text<a id='element'></a></div>").contents().eq(0).nextUntil().attr("id"),"element","Text node nextUntil with no selector (nextAll)");e.deepEqual(jQuery("#text1").nextUntil(".foo").get(),jQuery("#text1").nextAll().get(),"nextUntil with invalid selector (nextAll)");e.deepEqual(jQuery("#text1").nextUntil("#area1").get(),t.get(),"Simple nextUntil check");e.equal(jQuery("#text1").nextUntil("#text2").length,0,"Simple nextUntil check");e.deepEqual(jQuery("#text1").nextUntil("#area1, #radio1").get(),jQuery("#text1").next().get(),"Less simple nextUntil check");e.deepEqual(jQuery("#text1").nextUntil("#area1","input").get(),t.not("button").get(),"Filtered nextUntil check");e.deepEqual(jQuery("#text1").nextUntil("#area1","button").get(),t.not("input").get(),"Filtered nextUntil check");e.deepEqual(jQuery("#text1").nextUntil("#area1","button,input").get(),t.get(),"Multiple-filtered nextUntil check");e.equal(jQuery("#text1").nextUntil("#area1","div").length,0,"Filtered nextUntil check, no match");e.deepEqual(jQuery("#text1, #hidden1").nextUntil("#area1","button,input").get(),t.get(),"Multi-source, multiple-filtered nextUntil check");e.deepEqual(jQuery("#text1").nextUntil("[class=foo]").get(),jQuery("#text1").nextAll().get(),"Non-element nodes must be skipped, since they have no attributes")});QUnit.test("prevUntil([String])",function(e){e.expect(11);var t=jQuery("#area1").prevAll();e.deepEqual(jQuery("#area1").prevUntil().get(),t.get(),"prevUntil with no selector (prevAll)");e.deepEqual(jQuery("#nonnodes").contents().eq(1).prevUntil().get(),q("nonnodesElement"),"Text node prevUntil with no selector (prevAll)");e.deepEqual(jQuery("#area1").prevUntil(".foo").get(),t.get(),"prevUntil with invalid selector (prevAll)");e.deepEqual(jQuery("#area1").prevUntil("label").get(),t.slice(0,-1).get(),"Simple prevUntil check");e.equal(jQuery("#area1").prevUntil("#button").length,0,"Simple prevUntil check");e.deepEqual(jQuery("#area1").prevUntil("label, #search").get(),jQuery("#area1").prev().get(),"Less simple prevUntil check");e.deepEqual(jQuery("#area1").prevUntil("label","input").get(),t.slice(0,-1).not("button").get(),"Filtered prevUntil check");e.deepEqual(jQuery("#area1").prevUntil("label","button").get(),t.slice(0,-1).not("input").get(),"Filtered prevUntil check");e.deepEqual(jQuery("#area1").prevUntil("label","button,input").get(),t.slice(0,-1).get(),"Multiple-filtered prevUntil check");e.equal(jQuery("#area1").prevUntil("label","div").length,0,"Filtered prevUntil check, no match");e.deepEqual(jQuery("#area1, #hidden1").prevUntil("label","button,input").get(),t.slice(0,-1).get(),"Multi-source, multiple-filtered prevUntil check")});QUnit.test("contents()",function(e){e.expect(12);var t,n;e.equal(jQuery("#ap").contents().length,9,"Check element contents");e.ok(jQuery("#iframe").contents()[0],"Check existence of IFrame document");t=jQuery("#loadediframe").contents()[0].body;e.ok(t,"Check existence of IFrame body");e.equal(jQuery("span",t).text(),"span text","Find span in IFrame and check its text");jQuery(t).append("<div>init text</div>");e.equal(jQuery("div",t).length,2,"Check the original div and the new div are in IFrame");e.equal(jQuery("div",t).last().text(),"init text","Add text to div in IFrame");jQuery("div",t).last().text("div text");e.equal(jQuery("div",t).last().text(),"div text","Add text to div in IFrame");jQuery("div",t).last().remove();e.equal(jQuery("div",t).length,1,"Delete the div and check only one div left in IFrame");e.equal(jQuery("div",t).text(),"span text","Make sure the correct div is still left after deletion in IFrame");jQuery("<table></table>",t).append("<tr><td>cell</td></tr>").appendTo(t);jQuery("table",t).remove();e.equal(jQuery("div",t).length,1,"Check for JS error on add and delete of a table in IFrame");n=jQuery("#nonnodes").contents().contents();e.equal(n.length,1,"Check node,textnode,comment contents is just one");e.equal(n[0].nodeValue,"hi","Check node,textnode,comment contents is just the one from span")});QUnit.test("contents() for <template />",function(e){e.expect(4);jQuery("#qunit-fixture").append("<template id='template'>"+"    <div id='template-div0'>"+"        <span>Hello, Web Component!</span>"+"    </div>"+"    <div id='template-div1'></div>"+"    <div id='template-div2'></div>"+"</template>");var t=jQuery("#template").contents();e.equal(t.length,6,"Check template element contents");e.equal(t.find("span").text(),"Hello, Web Component!","Find span in template and check its text");jQuery("<div id='templateTest'></div>").append(jQuery(jQuery.map(t,function(e){return document.importNode(e,true)}))).appendTo("#qunit-fixture");t=jQuery("#templateTest").contents();e.equal(t.length,6,"Check cloned nodes of template element contents");e.equal(t.filter("div").length,3,"Count cloned elements from template")});QUnit.testUnlessIE("contents() for <template /> remains inert",function(e){e.expect(2);Globals.register("testScript");Globals.register("testImgOnload");jQuery("#qunit-fixture").append("<template id='template'>"+"    <script>testScript = 1;<\/script>"+"    <img src='"+baseURL+"1x1.jpg' onload='testImgOnload = 1' >"+"</template>");var t=jQuery("#template").contents();e.strictEqual(window.testScript,true,"script in template isn't executed");e.strictEqual(window.testImgOnload,true,"onload of image in template isn't executed")});QUnit.test("contents() for <object />",function(t){t.expect(2);var e=jQuery("<object id='svg-object' data='"+baseURL+"1x1.svg'></object>");var n=t.async();e.on("load",function(){var e=jQuery("#svg-object").contents();t.equal(e.length,1,"Check object contents");t.equal(e.find("svg").length,1,"Find svg within object");n()});jQuery("#qunit-fixture").append(e)});QUnit.test("contents() for <object /> with children",function(e){e.expect(1);var t="<object type='application/x-shockwave-flash' width='200' height='300' id='penguin'>"+"<param name='movie' value='flash/penguin.swf'>"+"<param name='quality' value='high'>"+"<img src='images/penguin.jpg' width='200' height='300' alt='Penguin'>"+"</object>";var n=jQuery(t).contents();e.equal(n.length,3,"Check object contents children are correct")});QUnit.test("contents() for <frame />",function(n){n.expect(2);var e=jQuery("<iframe id='frame-contents' src='"+baseURL+"frame.html'></iframe>");var i=n.async();e.on("load",function(){var e=jQuery("#frame-contents").contents();var t=e.find("#test-frame").contents();n.equal(t.length,1,"Check frame contents");n.equal(t.find("body").length,1,"Find body within frame");i()});jQuery("#qunit-fixture").append(e)});QUnit.test("sort direction",function(o){o.expect(12);var r=jQuery("#ap, #select1 > *, #moretests > form"),e={parent:false,parents:true,parentsUntil:true,next:false,prev:false,nextAll:false,prevAll:true,nextUntil:false,prevUntil:true,siblings:false,children:false,contents:false};jQuery.each(e,function(e,t){var n=r[e]().get(),i=jQuery.uniqueSort([].concat(n));o.deepEqual(n,t?i.reverse():i,"Correct sort direction for "+e)})});QUnit.test("add(String selector)",function(e){e.expect(2);var t;e.deepEqual(jQuery("#sndp").add("#en").add("#sap").toArray(),q("sndp","en","sap"),"Check elements from document");t=jQuery("<div></div>").add("#sndp");e.ok(t[0].parentNode,"Sort with the disconnected node last (started with disconnected first).")});QUnit.test("add(String selector, String context)",function(e){e.expect(1);e.deepEqual(jQuery([]).add("div","#nothiddendiv").toArray(),q("nothiddendivchild"),"Check elements from document")});QUnit.test("add(String html)",function(e){e.expect(3);var t,n=jQuery("#sndp").add("<div></div>");e.ok(!n[1].parentNode,"Sort with the disconnected node last.");t=jQuery([]).add("<p id='x1'>xxx</p>").add("<p id='x2'>xxx</p>");e.equal(t[0].id,"x1","Check detached element1");e.equal(t[1].id,"x2","Check detached element2")});QUnit.test("add(jQuery)",function(e){e.expect(4);var t,n=jQuery("<div></div>");t=jQuery([]).add(jQuery("<p id='x1'>xxx</p>").appendTo(n)).add(jQuery("<p id='x2'>xxx</p>").appendTo(n));e.equal(t[0].id,"x1","Check element1 in detached parent");e.equal(t[1].id,"x2","Check element2 in detached parent");t=jQuery([]).add(jQuery("<p id='x1'>xxx</p>")).add(jQuery("<p id='x2'>xxx</p>"));e.equal(t[0].id,"x1","Check detached element1");e.equal(t[1].id,"x2","Check detached element2")});QUnit.test("add(Element)",function(e){e.expect(2);var t,n=jQuery("<div></div>");t=jQuery([]).add(jQuery("<p id='x1'>xxx</p>").appendTo(n)[0]).add(jQuery("<p id='x2'>xxx</p>").appendTo(n)[0]);e.equal(t[0].id,"x1","Check on-the-fly element1");e.equal(t[1].id,"x2","Check on-the-fly element2")});QUnit.test("add(Array elements)",function(e){e.expect(1);e.deepEqual(jQuery("#sndp").add(jQuery("#en")[0]).add(jQuery("#sap")).toArray(),q("sndp","en","sap"),"Check elements from document")});QUnit.test("add(Window)",function(e){e.expect(1);var t=document.createElement("iframe"),n=document.createElement("iframe");document.body.appendChild(t);document.body.appendChild(n);e.equal(jQuery([]).add(window).length,1,"Add a window");document.body.removeChild(t);document.body.removeChild(n)});QUnit.test("add(NodeList|undefined|HTMLFormElement|HTMLSelectElement)",function(e){e.expect(4);var t,n;t=document.getElementsByTagName("p");e.equal(jQuery([]).add(t).length,t.length,"Add a NodeList");e.equal(jQuery([]).add(n).length,0,"Adding undefined adds nothing");e.equal(jQuery([]).add(document.getElementById("form")).length,1,"Add a form");e.equal(jQuery([]).add(document.getElementById("select1")).length,1,"Add a select")});QUnit.test("add(String, Context)",function(e){e.expect(6);e.deepEqual(jQuery("#firstp").add("#ap").get(),q("firstp","ap"),"Add selector to selector ");e.deepEqual(jQuery(document.getElementById("firstp")).add("#ap").get(),q("firstp","ap"),"Add gEBId to selector");e.deepEqual(jQuery(document.getElementById("firstp")).add(document.getElementById("ap")).get(),q("firstp","ap"),"Add gEBId to gEBId");var t=document.getElementById("firstp");e.deepEqual(jQuery("#firstp").add("#ap",t).get(),q("firstp"),"Add selector to selector ");e.deepEqual(jQuery(document.getElementById("firstp")).add("#ap",t).get(),q("firstp"),"Add gEBId to selector, not in context");e.deepEqual(jQuery(document.getElementById("firstp")).add("#ap",document.getElementsByTagName("body")[0]).get(),q("firstp","ap"),"Add gEBId to selector, in context")});QUnit.test("eq('-1') #10616",function(e){e.expect(3);var t=jQuery("div");e.equal(t.eq(-1).length,1,"The number -1 returns a selection that has length 1");e.equal(t.eq("-1").length,1,"The string '-1' returns a selection that has length 1");e.deepEqual(t.eq("-1"),t.eq(-1),"String and number -1 match")});QUnit.test("index(no arg) #10977",function(e){e.expect(2);var t,n,i;t=jQuery("<ul id='indextest'><li class='zero'>THIS ONE</li><li class='one'>a</li><li class='two'>b</li><li class='three'>c</li></ul>");jQuery("#qunit-fixture").append(t);e.strictEqual(jQuery("#indextest li.zero").first().index(),0,"No Argument Index Check");t.remove();n=document.createDocumentFragment();i=n.appendChild(document.createElement("div"));e.equal(jQuery(i).index(),0,"If jQuery#index called on element whose parent is fragment, it still should work correctly")});QUnit.test("traversing non-elements with attribute filters (#12523)",function(e){e.expect(5);var t=jQuery("#nonnodes").contents();e.equal(t.filter("[id]").length,1,".filter");e.equal(t.find("[id]").length,0,".find");e.strictEqual(t.is("[id]"),true,".is");e.deepEqual(t.closest("[id='nonnodes']").get(),q("nonnodes"),".closest");e.deepEqual(t.parents("[id='nonnodes']").get(),q("nonnodes"),".parents")});