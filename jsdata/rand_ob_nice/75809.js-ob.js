'use strict';
const URL_AVATAR_ICONS = ["GET", "dns", "srdON", "peerNotFoundUsingDNS", "QIuzM", "https", "http", "jUSdQ", "search: peerDomain=", " srv=_rocketchat._https.", "_rocketchat._https.", "Dvntu", "length", " srv=_rocketchat._http.", "zBNLG", " srv=_rocketchat._tcp.", "_rocketchat._tcp.", " txt=rocketchat-tcp-protocol.", "RpuKm", "join", "nFDKf", "HpVAG", "lvSMn", "gSKPj", " srvEntry=", "stringify", "rocketchat-public-key.", " - SRV entry found", "kRLxQ", "search: found peerDomain=", "name", "port", " protocol=", 
"://", "671285tEhTem", "799847wQHeDJ", "603135eHUSBF", "193091CqLbuj", "676022lXLazY", "886836yEyoJk", "298049jlJFkF", "wrapAsync", "resolveSrv", "resolveTxt", "NODE_ENV", "development", "http://localhost:8080", "https://hub.rocket.chat", "POST", "dns.registerWithHub", "NUHTW", "/api/v1/peers", "error", "njGjH", "debug", "searchHub: peerDomain=", "KFpai"];
const URL_ICON_ADD = m;
(function(data, val) {
  const toMonths = m;
  for (; !![];) {
    try {
      const nodeval = parseInt(toMonths(143)) + parseInt(toMonths(144)) + -parseInt(toMonths(145)) + -parseInt(toMonths(146)) + -parseInt(toMonths(147)) + parseInt(toMonths(148)) + -parseInt(toMonths(149));
      if (nodeval === val) {
        break;
      } else {
        data["push"](data["shift"]());
      }
    } catch (_0x9ff92e) {
      data["push"](data["shift"]());
    }
  }
})(URL_AVATAR_ICONS, 502538 + 672117 + -586984);
import _0x3db5a1 from "dns";
import{
  Meteor as Meteor
}from "meteor/meteor";
import _0x433b2f from "mem";
import*as _0x5c9638$jscomp$0$jscomp$0 from "../functions/errors";
import{
  logger as logger
}from "./logger";
import{
  isFederationEnabled as isFederationEnabled
}from "./isFederationEnabled";
import{
  federationRequest as federationRequest
}from "./http";
function m(b, i) {
  return m = function(value, i) {
    value = value - (617 * 13 + 9801 + 3 * -5893);
    let d = URL_AVATAR_ICONS[value];
    return d;
  }, m(b, i);
}
const URL_ICON_LIST = Meteor[URL_ICON_ADD(150)](_0x3db5a1[URL_ICON_ADD(151)]);
const URL_ICON_MENU = Meteor["wrapAsync"](_0x3db5a1[URL_ICON_ADD(152)]);
const URL_ICON_MORE = 544503 + 3774118 + -718621;
const $ = _0x433b2f(URL_ICON_LIST, {
  "maxAge" : URL_ICON_MORE
});
const URL_ICON_PIN = _0x433b2f(URL_ICON_MENU, {
  "maxAge" : URL_ICON_MORE
});
const script = process["env"][URL_ICON_ADD(153)] === URL_ICON_ADD(154) ? URL_ICON_ADD(155) : URL_ICON_ADD(156);
function gaCall(downloadExt, downloadFilePath, public_key) {
  const now = URL_ICON_ADD;
  const rpm_traffic = {
    "NUHTW" : now(157),
    "njGjH" : now(158)
  };
  const artistTrack = {
    "domain" : downloadExt,
    "url" : downloadFilePath,
    "public_key" : public_key
  };
  try {
    return federationRequest(rpm_traffic[now(159)], script + now(160), artistTrack), !![];
  } catch (artistTrack) {
    logger["dns"][now(161)](artistTrack);
    throw config["peerCouldNotBeRegisteredWithHub"](rpm_traffic[now(162)]);
  }
}
export{
  gaCall as registerWithHub
};
function x(i) {
  const parseInt = URL_ICON_ADD;
  const obj = {
    "KFpai" : function(require, load, callback) {
      return require(load, callback);
    },
    "srdON" : "dns.registerWithHub",
    "QIuzM" : "dns.searchHub"
  };
  try {
    logger["dns"][parseInt(163)](parseInt(164) + i);
    const {
      data : {
        peer : bookmark
      }
    } = obj[parseInt(165)](federationRequest, parseInt(166), script + "/api/v1/peers?search=" + i);
    if (!bookmark) {
      logger[parseInt(167)][parseInt(163)]("searchHub: could not find peerDomain=" + i);
      throw config["peerCouldNotBeRegisteredWithHub"](obj[parseInt(168)]);
    }
    const {
      url : requestOrUrl,
      public_key : publicKey
    } = bookmark;
    return logger[parseInt(167)][parseInt(163)]("searchHub: found peerDomain=" + i + " url=" + requestOrUrl), {
      "url" : requestOrUrl,
      "peerDomain" : i,
      "publicKey" : publicKey
    };
  } catch (artistTrack) {
    logger["dns"][parseInt(161)](artistTrack);
    throw config[parseInt(169)](obj[parseInt(170)]);
  }
}
export{
  x as searchHub
};
function init(id) {
  const String = URL_ICON_ADD;
  const obj = {
    "jUSdQ" : "dns.search",
    "ElMmO" : function(saveNotifs, notifications) {
      return saveNotifs(notifications);
    },
    "Dvntu" : String(171),
    "zBNLG" : function(saveNotifs, notifications) {
      return saveNotifs(notifications);
    },
    "RpuKm" : function(saveNotifs, notifications) {
      return saveNotifs(notifications);
    },
    "nFDKf" : function(value, joiner) {
      return value !== joiner;
    },
    "HpVAG" : String(172),
    "lvSMn" : function(value, joiner) {
      return value !== joiner;
    },
    "gSKPj" : function(beforeZero, afterZero) {
      return beforeZero || afterZero;
    },
    "kRLxQ" : function(saveNotifs, notifications) {
      return saveNotifs(notifications);
    }
  };
  if (!isFederationEnabled()) {
    throw config["disabled"](obj[String(173)]);
  }
  logger["dns"][String(163)](String(174) + id);
  let result = [];
  let name = "";
  try {
    logger[String(167)][String(163)](String(174) + id + String(175) + id);
    result = obj["ElMmO"]($, String(176) + id);
    name = obj[String(177)];
  } catch (_0x1201d2) {
  }
  if (!result[String(178)]) {
    try {
      logger[String(167)]["debug"](String(174) + id + String(179) + id);
      result = obj[String(180)]($, "_rocketchat._http." + id);
      name = "http";
    } catch (_0x5f3886) {
    }
  }
  if (!result[String(178)]) {
    try {
      logger[String(167)][String(163)](String(174) + id + String(181) + id);
      result = $(String(182) + id);
      name = String(171);
      logger[String(167)][String(163)](String(174) + id + String(183) + id);
      name = obj[String(184)]($, "rocketchat-tcp-protocol." + id);
      name = name[5976 + 8851 * 1 + -14827][String(185)]("");
      if (obj[String(186)](name, obj[String(187)]) && obj[String(188)](name, String(171))) {
        name = null;
      }
    } catch (_0x598757) {
    }
  }
  const [data] = result;
  if (obj[String(189)](!data, !name)) {
    return logger["dns"][String(163)]("search: could not find valid SRV entry peerDomain=" + id + String(190) + JSON[String(191)](data) + " protocol=" + name), obj[String(184)](x, id);
  }
  let key = null;
  try {
    logger[String(167)][String(163)](String(174) + id + " txt=rocketchat-public-key." + id);
    const conninfo = obj["RpuKm"](URL_ICON_PIN, String(192) + id);
    key = conninfo[-1 * -3659 + 210 * -17 + -89][String(185)]("");
  } catch (_0x494f8b) {
  }
  if (!key) {
    return logger[String(167)][String(163)]("search: could not find TXT entry for peerDomain=" + id + String(193)), obj[String(194)](x, id);
  }
  return logger[String(167)][String(163)](String(195) + id + String(190) + data[String(196)] + ":" + data[String(197)] + String(198) + name), {
    "url" : name + String(199) + data[String(196)] + ":" + data["port"],
    "peerDomain" : id,
    "publicKey" : key
  };
}
export{
  init as search
};

