import _0xb13d5 from '../tool-testing/selftest.js';
import {
    parse,
    markBottom
} from '../utils/parse-stack';
import _0xe69aa from 'underscore';
import _0x153e5c from 'fibers';
import _0x962116 from 'fibers/future';
import _0x4b0f02 from '../fs/files';
_0xb13d5['define']('parse-stack\x20-\x20parse\x20stack\x20traces\x20without\x20fibers', () => {
    const _0x1a1ae5 = {
            'uuuJI': function (_0x301ae8, _0x30934c) {
                return _0x301ae8(_0x30934c);
            },
            'GxgYB': 'parse-stack-test.js',
            'PINSc': 'selftest.js',
            'CKWwO': function (_0x1e6da0, _0x32afec) {
                return _0x1e6da0(_0x32afec);
            }
        }, _0x55764f = new Error(), _0x3c5795 = _0x1a1ae5['uuuJI'](parse, _0x55764f)['outsideFiber'], _0x47af0 = _0x4b0f02['convertToStandardPath'](_0x3c5795[0x0]['file']);
    _0xb13d5['expectEqual'](_0xe69aa['last'](_0x47af0['split']('/')), _0x1a1ae5['GxgYB']);
    const _0x14be4a = _0x4b0f02['convertToStandardPath'](_0xe69aa['last'](_0x3c5795)['file']);
    _0xb13d5['expectEqual'](_0xe69aa['last'](_0x14be4a['split']('/')), _0x1a1ae5['PINSc']), _0x1a1ae5['CKWwO'](markBottom, () => {
        const _0x4a1454 = new Error(), {
                outsideFiber: _0x25500a,
                insideFiber: _0x3147fd
            } = _0x1a1ae5['uuuJI'](parse, _0x4a1454);
        _0xb13d5['expectEqual'](_0x3147fd, undefined), _0xb13d5['expectEqual'](_0x25500a['length'], 0x1);
        const _0xa231d2 = _0x4b0f02['convertToStandardPath'](_0x25500a[0x0]['file']);
        _0xb13d5['expectEqual'](_0xe69aa['last'](_0xa231d2['split']('/')), _0x1a1ae5['GxgYB']);
    })();
}), _0xb13d5['define']('parse-stack\x20-\x20parse\x20stack\x20traces\x20with\x20fibers', () => {
    const _0x4b8d1d = {
            'xaVJU': function (_0x1e11a5, _0x529caa) {
                return _0x1e11a5(_0x529caa);
            },
            'mdCRX': 'template-compiler.js'
        }, _0x3ffd37 = _0x4b8d1d['xaVJU'](parse, { 'stack': exampleStackTrace });
    _0xb13d5['expectEqual'](_0x3ffd37['insideFiber'][0x0]['file'], _0x4b8d1d['mdCRX']), _0xb13d5['expectEqual'](_0xe69aa['last'](_0x3ffd37['outsideFiber'])['file'], _0x4b8d1d['mdCRX']);
});
const exampleStackTrace = 'TypeError:\x20object\x20is\x20not\x20a\x20function\x0a\x20\x20\x20\x20at\x20Object.Future.wait\x20(/Users/sashko/git/meteor/dev_bundle/lib/node_modules/fibers/future.js:395:16)\x0a\x20\x20\x20\x20at\x20TemplateCompiler.processFilesForTarget\x20(caching-compiler.js:312:12)\x0a\x20\x20\x20\x20at\x20TemplateCompiler.processFilesForTarget\x20(template-compiler.js:28:32)\x0a\x20\x20\x20\x20at\x20__bottom_mark__\x20(/Users/sashko/git/meteor/tools/parse-stack.js:92:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/compiler-plugin.js:141:13\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:356:18\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:349:34\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:347:23\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20Object.enterJob\x20(/Users/sashko/git/meteor/tools/buildmessage.js:321:26)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/compiler-plugin.js:130:22\x0a\x20\x20\x20\x20at\x20Function.time\x20(/Users/sashko/git/meteor/tools/profile.js:232:28)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/compiler-plugin.js:129:15\x0a\x20\x20\x20\x20at\x20Function._.each._.forEach\x20(/Users/sashko/git/meteor/dev_bundle/lib/node_modules/underscore/underscore.js:87:22)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.runCompilerPlugins\x20(/Users/sashko/git/meteor/tools/isobuild/compiler-plugin.js:118:7)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend._runCompilerPlugins\x20(/Users/sashko/git/meteor/tools/isobuild/bundler.js:702:22)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/bundler.js:504:34\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:356:18\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:349:34\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:347:23\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20Object.enterJob\x20(/Users/sashko/git/meteor/tools/buildmessage.js:321:26)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.make\x20(/Users/sashko/git/meteor/tools/isobuild/bundler.js:498:18)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/bundler.js:2044:14\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/bundler.js:2126:20\x0a\x20\x20\x20\x20at\x20Array.forEach\x20(native)\x0a\x20\x20\x20\x20at\x20Function._.each._.forEach\x20(/Users/sashko/git/meteor/dev_bundle/lib/node_modules/underscore/underscore.js:79:11)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/bundler.js:2125:7\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:268:13\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:261:29\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:259:18\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:250:23\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20Object.capture\x20(/Users/sashko/git/meteor/tools/buildmessage.js:249:19)\x0a\x20\x20\x20\x20at\x20Object.exports.bundle\x20(/Users/sashko/git/meteor/tools/isobuild/bundler.js:2029:31)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/run-app.js:557:36\x0a\x20\x20\x20\x20at\x20time\x20(/Users/sashko/git/meteor/tools/profile.js:232:28)\x0a\x20\x20\x20\x20at\x20Function.run\x20(/Users/sashko/git/meteor/tools/profile.js:377:12)\x0a\x20\x20\x20\x20at\x20bundleApp\x20(/Users/sashko/git/meteor/tools/run-app.js:547:34)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend._runOnce\x20(/Users/sashko/git/meteor/tools/run-app.js:600:35)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend._fiber\x20(/Users/sashko/git/meteor/tools/run-app.js:848:28)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/run-app.js:402:12\x0a\x20\x20\x20\x20-\x20-\x20-\x20-\x20-\x0a\x20\x20\x20\x20at\x20TemplateCompiler.compileOneFile\x20(template-compiler.js:43:23)\x0a\x20\x20\x20\x20at\x20caching-compiler.js:292:32\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/packages/caching-compiler/.npm/package/node_modules/async/lib/async.js:182:20\x0a\x20\x20\x20\x20at\x20replenish\x20(/Users/sashko/git/meteor/packages/caching-compiler/.npm/package/node_modules/async/lib/async.js:317:21)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/packages/caching-compiler/.npm/package/node_modules/async/lib/async.js:328:15\x0a\x20\x20\x20\x20at\x20Object.async.forEachLimit.async.eachLimit\x20(/Users/sashko/git/meteor/packages/caching-compiler/.npm/package/node_modules/async/lib/async.js:221:35)\x0a\x20\x20\x20\x20at\x20TemplateCompiler.processFilesForTarget\x20(caching-compiler.js:277:11)\x0a\x20\x20\x20\x20at\x20TemplateCompiler.processFilesForTarget\x20(template-compiler.js:28:32)\x0a\x20\x20\x20\x20at\x20__bottom_mark__\x20(/Users/sashko/git/meteor/tools/parse-stack.js:92:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/compiler-plugin.js:141:13\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:356:18\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:349:34\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:347:23\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20Object.enterJob\x20(/Users/sashko/git/meteor/tools/buildmessage.js:321:26)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/compiler-plugin.js:130:22\x0a\x20\x20\x20\x20at\x20Function.time\x20(/Users/sashko/git/meteor/tools/profile.js:232:28)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/compiler-plugin.js:129:15\x0a\x20\x20\x20\x20at\x20Function._.each._.forEach\x20(/Users/sashko/git/meteor/dev_bundle/lib/node_modules/underscore/underscore.js:87:22)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.runCompilerPlugins\x20(/Users/sashko/git/meteor/tools/isobuild/compiler-plugin.js:118:7)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend._runCompilerPlugins\x20(/Users/sashko/git/meteor/tools/isobuild/bundler.js:702:22)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/bundler.js:504:34\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:356:18\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:349:34\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:347:23\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20Object.enterJob\x20(/Users/sashko/git/meteor/tools/buildmessage.js:321:26)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.make\x20(/Users/sashko/git/meteor/tools/isobuild/bundler.js:498:18)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/bundler.js:2044:14\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/bundler.js:2126:20\x0a\x20\x20\x20\x20at\x20Array.forEach\x20(native)\x0a\x20\x20\x20\x20at\x20Function._.each._.forEach\x20(/Users/sashko/git/meteor/dev_bundle/lib/node_modules/underscore/underscore.js:79:11)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/isobuild/bundler.js:2125:7\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:268:13\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:261:29\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:259:18\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/buildmessage.js:250:23\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend.withValue\x20(/Users/sashko/git/meteor/tools/fiber-helpers.js:114:14)\x0a\x20\x20\x20\x20at\x20Object.capture\x20(/Users/sashko/git/meteor/tools/buildmessage.js:249:19)\x0a\x20\x20\x20\x20at\x20Object.exports.bundle\x20(/Users/sashko/git/meteor/tools/isobuild/bundler.js:2029:31)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/run-app.js:557:36\x0a\x20\x20\x20\x20at\x20time\x20(/Users/sashko/git/meteor/tools/profile.js:232:28)\x0a\x20\x20\x20\x20at\x20Function.run\x20(/Users/sashko/git/meteor/tools/profile.js:377:12)\x0a\x20\x20\x20\x20at\x20bundleApp\x20(/Users/sashko/git/meteor/tools/run-app.js:547:34)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend._runOnce\x20(/Users/sashko/git/meteor/tools/run-app.js:600:35)\x0a\x20\x20\x20\x20at\x20[object\x20Object]._.extend._fiber\x20(/Users/sashko/git/meteor/tools/run-app.js:848:28)\x0a\x20\x20\x20\x20at\x20/Users/sashko/git/meteor/tools/run-app.js:402:12';
