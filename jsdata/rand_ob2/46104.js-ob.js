const _0x20c1 = [
    '/fallback/[slug].json',
    '1=second',
    'should\x20render\x20fallback\x20optional\x20catch-all\x20route\x20correctly\x20with\x20x-matched-path\x20and\x20routes-matches',
    'optional\x20catch-all\x20page',
    'params',
    '/catch-all/[[...rest]]',
    '1=hello&catchAll=hello',
    '#catch-all',
    'toEqual',
    '/catch-all/[[..rest]]',
    '/catch-all.json',
    '/catch-all/[[...rest]].json',
    '1=hello&rest=hello',
    '1=hello/world&rest=hello/world',
    'should\x20not\x20apply\x20trailingSlash\x20redirect',
    '/dynamic/another/',
    '/dynamic/another',
    '/fallback/first/',
    '/fallback/another',
    'status',
    '/some-catch-all/hello/world',
    '#router',
    'query',
    'toContain',
    'should\x20bubble\x20error\x20correctly\x20for\x20gssp\x20page',
    '/errors/gssp',
    'gssp\x20hit\x20an\x20oops',
    'should\x20bubble\x20error\x20correctly\x20for\x20gsp\x20page',
    'gsp\x20hit\x20an\x20oops',
    'should\x20bubble\x20error\x20correctly\x20for\x20API\x20page',
    '/api/error',
    'some\x20error\x20from\x20/api/error',
    'should\x20normalize\x20optional\x20values\x20correctly\x20for\x20SSP\x20page',
    '/optional-ssp',
    'value',
    '/optional-ssp/[[...rest]]',
    '/optional-ssg',
    'should\x20normalize\x20optional\x20values\x20correctly\x20for\x20SSG\x20page\x20with\x20encoded\x20slash',
    '/optional-ssg/[[...rest]]',
    '1=en%2Fes%2Fhello%252Fworld&rest=en%2Fes%2Fhello%252Fworld',
    '/api/optional/[[...rest]]',
    'url',
    '/api/optional?another=value',
    'should\x20match\x20the\x20index\x20page\x20correctly',
    '/index',
    'manual',
    '#slug-page',
    '192709nRnpZX',
    '4217YOhapM',
    '29vHJfqz',
    '32646eIJcfp',
    '1KlFNYv',
    '251528RWOKTW',
    '2NEkPxK',
    '220205YOujjH',
    '25756lqAEmm',
    '14zsdvhv',
    '837202wBrUaf',
    '../app',
    'tmpdir',
    'required-server-files-',
    'now',
    'Required\x20Server\x20Files',
    'readJSON',
    'next/dist/server/next-server',
    '.nft.json',
    'resolve',
    'yarn',
    'pack',
    'next-v',
    '.tgz',
    'ensureDir',
    'writeFile',
    'package.json',
    'stringify',
    'latest',
    'copy',
    'ignore',
    'inherit',
    'env',
    '.yarn-cache',
    'next',
    'build',
    'production',
    'readFile',
    '.next/BUILD_ID',
    'utf8',
    '.next/required-server-files.json',
    '-react/package.json',
    'install',
    '-react',
    '.yarn',
    'sync',
    '.next/server/pages',
    'files',
    'forEach',
    'add',
    'includes',
    '/node_modules/next/dist/server/next-server.js',
    'has',
    'startsWith',
    '.next/server',
    'remove',
    'readdir',
    '-react/node_modules',
    'http',
    'nextConfig',
    'APP_DIR',
    'getRequestHandler',
    'error',
    'top-level',
    'statusCode',
    'end',
    'listen',
    'Listening\x20at\x20::',
    'config',
    'toString',
    'startServer().catch(console.error)',
    'should\x20output\x20required-server-files\x20manifest\x20correctly',
    'isArray',
    'toBe',
    'length',
    'toBeGreaterThan',
    'configFile',
    'undefined',
    'trailingSlash',
    'boolean',
    'exists',
    'should\x20render\x20SSR\x20page\x20correctly',
    'load',
    'parse',
    '#props',
    'text',
    'index\x20page',
    'hello',
    'world',
    '#index',
    'random',
    'not',
    '/dynamic/first',
    '#dynamic',
    'first',
    '/dynamic/second',
    'dynamic\x20page',
    '#slug',
    'second',
    'should\x20render\x20fallback\x20page\x20correctly',
    '/fallback/first',
    '#fallback',
    'fallback\x20page',
    '/fallback/third.json',
    'slug',
    'third',
    'should\x20render\x20SSR\x20page\x20correctly\x20with\x20x-matched-path',
    '/some-other-path',
    'should\x20render\x20dynamic\x20SSR\x20page\x20correctly\x20with\x20x-matched-path',
    '/dynamic/[slug]?slug=first',
    '/dynamic/[slug]?slug=second',
    '1=second&slug=second',
    '1=first',
    '/fallback/[slug]',
    'should\x20return\x20data\x20correctly\x20with\x20x-matched-path',
    '/dynamic/first.json',
    'json',
    '/_next/data/'
];
function _0x33a5(_0x3e45ba, _0x4d0123) {
    return _0x33a5 = function (_0x20c183, _0x33a503) {
        _0x20c183 = _0x20c183 - 0x109;
        let _0x20ff91 = _0x20c1[_0x20c183];
        return _0x20ff91;
    }, _0x33a5(_0x3e45ba, _0x4d0123);
}
const _0xa93e49 = _0x33a5;
(function (_0x3d442c, _0x172eec) {
    const _0x329e18 = _0x33a5;
    while (!![]) {
        try {
            const _0x56e590 = -parseInt(_0x329e18(0x109)) + parseInt(_0x329e18(0x10a)) * parseInt(_0x329e18(0x10b)) + -parseInt(_0x329e18(0x10c)) * -parseInt(_0x329e18(0x10d)) + parseInt(_0x329e18(0x10e)) + parseInt(_0x329e18(0x10f)) * -parseInt(_0x329e18(0x110)) + parseInt(_0x329e18(0x111)) * -parseInt(_0x329e18(0x112)) + parseInt(_0x329e18(0x113));
            if (_0x56e590 === _0x172eec)
                break;
            else
                _0x3d442c['push'](_0x3d442c['shift']());
        } catch (_0x53c403) {
            _0x3d442c['push'](_0x3d442c['shift']());
        }
    }
}(_0x20c1, 0x3d06e));
import _0x834c67 from 'os';
import _0x138e79 from 'glob';
import _0x1aaa74 from 'fs-extra';
import _0x11193b from 'execa';
import _0x492c70 from 'cheerio';
import {
    join,
    dirname,
    relative
} from 'path';
import { version } from 'next/package';
import { recursiveReadDir } from 'next/dist/lib/recursive-readdir';
import {
    fetchViaHTTP,
    findPort,
    initNextServerScript,
    killApp,
    renderViaHTTP
} from 'next-test-utils';
jest['setTimeout'](0x3e8 * 0x3c * 0x2);
const appDir = join(__dirname, _0xa93e49(0x114)), workDir = join(_0x834c67[_0xa93e49(0x115)](), _0xa93e49(0x116) + Date[_0xa93e49(0x117)]());
let server, nextApp, appPort, buildId, requiredFilesManifest, errors = [];
describe(_0xa93e49(0x118), () => {
    const _0x2029cd = _0xa93e49;
    beforeAll(async () => {
        const _0x2fb281 = _0x33a5, _0xfcc1c5 = await _0x1aaa74[_0x2fb281(0x119)](require['resolve'](_0x2fb281(0x11a)) + _0x2fb281(0x11b)), _0x372ff6 = dirname(require[_0x2fb281(0x11c)]('next/package.json'));
        await _0x11193b(_0x2fb281(0x11d), [_0x2fb281(0x11e)], { 'cwd': _0x372ff6 });
        const _0x2625d4 = join(_0x372ff6, _0x2fb281(0x11f) + version + _0x2fb281(0x120));
        await _0x1aaa74[_0x2fb281(0x121)](workDir), await _0x1aaa74[_0x2fb281(0x122)](join(workDir, _0x2fb281(0x123)), JSON[_0x2fb281(0x124)]({
            'dependencies': {
                'next': _0x2625d4,
                'react': _0x2fb281(0x125),
                'react-dom': 'latest'
            }
        })), await _0x1aaa74[_0x2fb281(0x126)](appDir, workDir), await _0x11193b(_0x2fb281(0x11d), ['install'], {
            'cwd': workDir,
            'stdio': [
                _0x2fb281(0x127),
                _0x2fb281(0x128),
                _0x2fb281(0x128)
            ],
            'env': {
                ...process[_0x2fb281(0x129)],
                'YARN_CACHE_FOLDER': join(workDir, _0x2fb281(0x12a))
            }
        }), await _0x11193b(_0x2fb281(0x11d), [
            _0x2fb281(0x12b),
            _0x2fb281(0x12c)
        ], {
            'cwd': workDir,
            'stdio': [
                _0x2fb281(0x127),
                _0x2fb281(0x128),
                'inherit'
            ],
            'env': {
                ...process[_0x2fb281(0x129)],
                'NODE_ENV': _0x2fb281(0x12d),
                'NOW_BUILDER': '1'
            }
        }), buildId = await _0x1aaa74[_0x2fb281(0x12e)](join(workDir, _0x2fb281(0x12f)), _0x2fb281(0x130)), requiredFilesManifest = await _0x1aaa74[_0x2fb281(0x119)](join(workDir, _0x2fb281(0x131))), await _0x1aaa74[_0x2fb281(0x121)](workDir + '-react'), await _0x1aaa74['writeFile'](join(workDir + _0x2fb281(0x132)), JSON[_0x2fb281(0x124)]({
            'dependencies': {
                'react': _0x2fb281(0x125),
                'react-dom': _0x2fb281(0x125)
            }
        })), await _0x11193b(_0x2fb281(0x11d), [_0x2fb281(0x133)], {
            'cwd': workDir + _0x2fb281(0x134),
            'stdio': [
                _0x2fb281(0x127),
                _0x2fb281(0x128),
                'inherit'
            ],
            'env': {
                ...process['env'],
                'YARN_CACHE_FOLDER': join(workDir, _0x2fb281(0x135))
            }
        }), await _0x1aaa74['remove'](_0x2625d4);
        const _0x4d09a3 = await recursiveReadDir(workDir, /.*/), _0x28745b = await _0x138e79[_0x2fb281(0x136)]('**/*.nft.json', { 'cwd': join(workDir, '.next/server/pages') }), _0x10bb9e = new Set();
        for (const _0x25c1bb of _0x28745b) {
            const _0xddee34 = join(workDir, _0x2fb281(0x137), _0x25c1bb), _0x41f364 = await _0x1aaa74[_0x2fb281(0x119)](_0xddee34);
            _0x41f364[_0x2fb281(0x138)][_0x2fb281(0x139)](_0x1930a5 => _0x10bb9e[_0x2fb281(0x13a)](relative(workDir, join(dirname(_0xddee34), _0x1930a5))));
        }
        for (const _0x44101c of _0x4d09a3) {
            const _0x20af3b = join('./', _0x44101c);
            !_0xfcc1c5[_0x2fb281(0x138)][_0x2fb281(0x13b)](_0x20af3b) && _0x44101c !== _0x2fb281(0x13c) && !_0x10bb9e[_0x2fb281(0x13d)](_0x20af3b) && !requiredFilesManifest[_0x2fb281(0x138)][_0x2fb281(0x13b)](_0x20af3b) && !_0x20af3b[_0x2fb281(0x13e)](_0x2fb281(0x13f)) && _0x20af3b !== _0x2fb281(0x131) && await _0x1aaa74[_0x2fb281(0x140)](join(workDir, _0x44101c));
        }
        for (const _0x34476b of await _0x1aaa74[_0x2fb281(0x141)](workDir + '-react/node_modules')) {
            await _0x1aaa74['copy'](join(workDir + _0x2fb281(0x142), _0x34476b), join(workDir, 'node_modules', _0x34476b));
        }
        await _0x1aaa74['remove'](workDir + _0x2fb281(0x134));
        async function _0x553b90() {
            const _0x384912 = _0x2fb281, _0x1d28e2 = require(_0x384912(0x143)), _0x2e1345 = require(_0x384912(0x11a))['default'], _0x3da234 = process[_0x384912(0x129)]['PORT'];
            nextApp = new _0x2e1345({
                'conf': global[_0x384912(0x144)],
                'dir': process['env'][_0x384912(0x145)],
                'quiet': ![],
                'minimalMode': !![]
            }), server = _0x1d28e2['createServer'](async (_0x288798, _0x3bf0a6) => {
                const _0x38dd13 = _0x384912;
                try {
                    await nextApp[_0x38dd13(0x146)]()(_0x288798, _0x3bf0a6);
                } catch (_0x46ccac) {
                    console[_0x38dd13(0x147)](_0x38dd13(0x148), _0x46ccac), _0x3bf0a6[_0x38dd13(0x149)] = 0x1f4, _0x3bf0a6[_0x38dd13(0x14a)]('error');
                }
            }), await new Promise((_0x33affe, _0x45b98c) => {
                const _0x43e06f = _0x384912;
                server[_0x43e06f(0x14b)](_0x3da234, _0x59b4c8 => _0x59b4c8 ? _0x45b98c(_0x59b4c8) : _0x33affe());
            }), console['log'](_0x384912(0x14c) + _0x3da234);
        }
        const _0x1c9e20 = join(workDir, 'server.js');
        await _0x1aaa74[_0x2fb281(0x122)](_0x1c9e20, 'global.nextConfig\x20=\x20' + JSON[_0x2fb281(0x124)](requiredFilesManifest[_0x2fb281(0x14d)]) + ';\x0a' + _0x553b90[_0x2fb281(0x14e)]() + ';\x0a' + _0x2fb281(0x14f)), appPort = await findPort(), server = await initNextServerScript(_0x1c9e20, /Listening at/, {
            ...process[_0x2fb281(0x129)],
            'NODE_ENV': _0x2fb281(0x12d),
            'PORT': appPort,
            'APP_DIR': workDir
        }, undefined, {
            'cwd': workDir,
            'onStderr'(_0x471f27) {
                const _0x56e08c = _0x2fb281;
                _0x471f27[_0x56e08c(0x13b)](_0x56e08c(0x148)) && errors['push'](_0x471f27);
            }
        });
    }), afterAll(async () => {
        const _0x4b9f69 = _0x33a5;
        if (server)
            killApp(server);
        await _0x1aaa74[_0x4b9f69(0x140)](workDir);
    }), it(_0x2029cd(0x150), async () => {
        const _0x114f3d = _0x2029cd;
        expect(requiredFilesManifest['version'])['toBe'](0x1), expect(Array[_0x114f3d(0x151)](requiredFilesManifest[_0x114f3d(0x138)]))[_0x114f3d(0x152)](!![]), expect(Array[_0x114f3d(0x151)](requiredFilesManifest[_0x114f3d(0x127)]))[_0x114f3d(0x152)](!![]), expect(requiredFilesManifest['files'][_0x114f3d(0x153)])[_0x114f3d(0x154)](0x0), expect(requiredFilesManifest[_0x114f3d(0x127)][_0x114f3d(0x153)])['toBeGreaterThan'](0x0), expect(typeof requiredFilesManifest[_0x114f3d(0x14d)][_0x114f3d(0x155)])['toBe'](_0x114f3d(0x156)), expect(typeof requiredFilesManifest[_0x114f3d(0x14d)][_0x114f3d(0x157)])[_0x114f3d(0x152)](_0x114f3d(0x158)), expect(typeof requiredFilesManifest['appDir'])[_0x114f3d(0x152)]('string');
        for (const _0x1d2346 of requiredFilesManifest[_0x114f3d(0x138)]) {
            expect(await _0x1aaa74['exists'](join(workDir, _0x1d2346)))['toBe'](!![]);
        }
        expect(await _0x1aaa74[_0x114f3d(0x159)](join(workDir, '.next/server')))[_0x114f3d(0x152)](!![]);
    }), it(_0x2029cd(0x15a), async () => {
        const _0x435f3c = _0x2029cd, _0xce4a10 = await renderViaHTTP(appPort, '/'), _0x1beb3b = _0x492c70[_0x435f3c(0x15b)](_0xce4a10), _0xf968e3 = JSON[_0x435f3c(0x15c)](_0x1beb3b(_0x435f3c(0x15d))[_0x435f3c(0x15e)]());
        expect(_0x1beb3b('#index')[_0x435f3c(0x15e)]())[_0x435f3c(0x152)](_0x435f3c(0x15f)), expect(_0xf968e3[_0x435f3c(0x160)])['toBe'](_0x435f3c(0x161));
        const _0x5a5d76 = await renderViaHTTP(appPort, '/'), _0x7d6b89 = _0x492c70[_0x435f3c(0x15b)](_0x5a5d76), _0x58654f = JSON[_0x435f3c(0x15c)](_0x7d6b89(_0x435f3c(0x15d))[_0x435f3c(0x15e)]());
        expect(_0x7d6b89(_0x435f3c(0x162))[_0x435f3c(0x15e)]())[_0x435f3c(0x152)](_0x435f3c(0x15f)), expect(isNaN(_0x58654f[_0x435f3c(0x163)]))[_0x435f3c(0x152)](![]), expect(_0x58654f['random'])[_0x435f3c(0x164)][_0x435f3c(0x152)](_0xf968e3['random']);
    }), it('should\x20render\x20dynamic\x20SSR\x20page\x20correctly', async () => {
        const _0x45e6d7 = _0x2029cd, _0x4ff582 = await renderViaHTTP(appPort, _0x45e6d7(0x165)), _0x1fae0e = _0x492c70[_0x45e6d7(0x15b)](_0x4ff582), _0x273217 = JSON[_0x45e6d7(0x15c)](_0x1fae0e(_0x45e6d7(0x15d))[_0x45e6d7(0x15e)]());
        expect(_0x1fae0e(_0x45e6d7(0x166))[_0x45e6d7(0x15e)]())[_0x45e6d7(0x152)]('dynamic\x20page'), expect(_0x1fae0e('#slug')[_0x45e6d7(0x15e)]())['toBe'](_0x45e6d7(0x167)), expect(_0x273217[_0x45e6d7(0x160)])[_0x45e6d7(0x152)]('world');
        const _0x970c8e = await renderViaHTTP(appPort, _0x45e6d7(0x168)), _0x4fea4e = _0x492c70[_0x45e6d7(0x15b)](_0x970c8e), _0xa67e61 = JSON[_0x45e6d7(0x15c)](_0x4fea4e(_0x45e6d7(0x15d))[_0x45e6d7(0x15e)]());
        expect(_0x4fea4e('#dynamic')[_0x45e6d7(0x15e)]())['toBe'](_0x45e6d7(0x169)), expect(_0x4fea4e(_0x45e6d7(0x16a))[_0x45e6d7(0x15e)]())[_0x45e6d7(0x152)](_0x45e6d7(0x16b)), expect(isNaN(_0xa67e61[_0x45e6d7(0x163)]))[_0x45e6d7(0x152)](![]), expect(_0xa67e61[_0x45e6d7(0x163)])[_0x45e6d7(0x164)][_0x45e6d7(0x152)](_0x273217['random']);
    }), it(_0x2029cd(0x16c), async () => {
        const _0x24b441 = _0x2029cd, _0x191cd7 = await renderViaHTTP(appPort, _0x24b441(0x16d)), _0x3005c9 = _0x492c70['load'](_0x191cd7), _0xf26904 = JSON[_0x24b441(0x15c)](_0x3005c9(_0x24b441(0x15d))[_0x24b441(0x15e)]());
        expect(_0x3005c9(_0x24b441(0x16e))[_0x24b441(0x15e)]())[_0x24b441(0x152)](_0x24b441(0x16f)), expect(_0x3005c9(_0x24b441(0x16a))['text']())[_0x24b441(0x152)](_0x24b441(0x167)), expect(_0xf26904[_0x24b441(0x160)])[_0x24b441(0x152)](_0x24b441(0x161));
        const _0x1f000c = await renderViaHTTP(appPort, _0x24b441(0x16d)), _0x968988 = _0x492c70[_0x24b441(0x15b)](_0x1f000c), _0x178b10 = JSON[_0x24b441(0x15c)](_0x968988(_0x24b441(0x15d))[_0x24b441(0x15e)]());
        expect(_0x968988('#fallback')['text']())[_0x24b441(0x152)]('fallback\x20page'), expect(_0x968988(_0x24b441(0x16a))[_0x24b441(0x15e)]())[_0x24b441(0x152)](_0x24b441(0x167)), expect(isNaN(_0x178b10[_0x24b441(0x163)]))[_0x24b441(0x152)](![]), expect(_0x178b10['random'])[_0x24b441(0x164)][_0x24b441(0x152)](_0xf26904[_0x24b441(0x163)]);
        const _0xd96f40 = await renderViaHTTP(appPort, '/fallback/second'), _0x1bc53e = _0x492c70[_0x24b441(0x15b)](_0xd96f40), _0x5e4d8c = JSON[_0x24b441(0x15c)](_0x1bc53e('#props')[_0x24b441(0x15e)]());
        expect(_0x1bc53e(_0x24b441(0x16e))[_0x24b441(0x15e)]())[_0x24b441(0x152)](_0x24b441(0x16f)), expect(_0x1bc53e(_0x24b441(0x16a))[_0x24b441(0x15e)]())['toBe'](_0x24b441(0x16b)), expect(isNaN(_0x5e4d8c[_0x24b441(0x163)]))['toBe'](![]);
        const {pageProps: _0x54d647} = JSON['parse'](await renderViaHTTP(appPort, '/_next/data/' + buildId + _0x24b441(0x170)));
        expect(_0x54d647[_0x24b441(0x160)])[_0x24b441(0x152)](_0x24b441(0x161)), expect(_0x54d647[_0x24b441(0x171)])[_0x24b441(0x152)](_0x24b441(0x172));
    }), it(_0x2029cd(0x173), async () => {
        const _0xc3b21d = _0x2029cd, _0x502900 = await renderViaHTTP(appPort, '/some-other-path', undefined, { 'headers': { 'x-matched-path': '/' } }), _0x2c76d0 = _0x492c70[_0xc3b21d(0x15b)](_0x502900), _0x30d4ff = JSON['parse'](_0x2c76d0(_0xc3b21d(0x15d))['text']());
        expect(_0x2c76d0(_0xc3b21d(0x162))[_0xc3b21d(0x15e)]())[_0xc3b21d(0x152)]('index\x20page'), expect(_0x30d4ff['hello'])[_0xc3b21d(0x152)](_0xc3b21d(0x161));
        const _0x3bb6f0 = await renderViaHTTP(appPort, _0xc3b21d(0x174), undefined, { 'headers': { 'x-matched-path': '/' } }), _0x7c2a76 = _0x492c70[_0xc3b21d(0x15b)](_0x3bb6f0), _0x22e3ff = JSON[_0xc3b21d(0x15c)](_0x7c2a76(_0xc3b21d(0x15d))[_0xc3b21d(0x15e)]());
        expect(_0x7c2a76('#index')[_0xc3b21d(0x15e)]())[_0xc3b21d(0x152)](_0xc3b21d(0x15f)), expect(isNaN(_0x22e3ff[_0xc3b21d(0x163)]))[_0xc3b21d(0x152)](![]), expect(_0x22e3ff[_0xc3b21d(0x163)])[_0xc3b21d(0x164)][_0xc3b21d(0x152)](_0x30d4ff[_0xc3b21d(0x163)]);
    }), it(_0x2029cd(0x175), async () => {
        const _0xfda4bb = _0x2029cd, _0x9cdcfe = await renderViaHTTP(appPort, _0xfda4bb(0x174), undefined, { 'headers': { 'x-matched-path': _0xfda4bb(0x176) } }), _0x578674 = _0x492c70[_0xfda4bb(0x15b)](_0x9cdcfe), _0x39a973 = JSON['parse'](_0x578674('#props')[_0xfda4bb(0x15e)]());
        expect(_0x578674(_0xfda4bb(0x166))[_0xfda4bb(0x15e)]())[_0xfda4bb(0x152)](_0xfda4bb(0x169)), expect(_0x578674(_0xfda4bb(0x16a))[_0xfda4bb(0x15e)]())[_0xfda4bb(0x152)]('first'), expect(_0x39a973[_0xfda4bb(0x160)])['toBe']('world');
        const _0x3c1b25 = await renderViaHTTP(appPort, _0xfda4bb(0x174), undefined, { 'headers': { 'x-matched-path': _0xfda4bb(0x177) } }), _0x48c162 = _0x492c70['load'](_0x3c1b25), _0x3ca6ab = JSON[_0xfda4bb(0x15c)](_0x48c162(_0xfda4bb(0x15d))[_0xfda4bb(0x15e)]());
        expect(_0x48c162(_0xfda4bb(0x166))[_0xfda4bb(0x15e)]())[_0xfda4bb(0x152)](_0xfda4bb(0x169)), expect(_0x48c162('#slug')[_0xfda4bb(0x15e)]())['toBe'](_0xfda4bb(0x16b)), expect(isNaN(_0x3ca6ab[_0xfda4bb(0x163)]))[_0xfda4bb(0x152)](![]), expect(_0x3ca6ab['random'])[_0xfda4bb(0x164)][_0xfda4bb(0x152)](_0x39a973[_0xfda4bb(0x163)]);
        const _0x3b2af1 = await renderViaHTTP(appPort, _0xfda4bb(0x174), undefined, {
                'headers': {
                    'x-matched-path': '/dynamic/[slug]?slug=%5Bslug%5D.json',
                    'x-now-route-matches': _0xfda4bb(0x178)
                }
            }), _0x2f8f77 = _0x492c70[_0xfda4bb(0x15b)](_0x3b2af1), _0x13b727 = JSON[_0xfda4bb(0x15c)](_0x2f8f77(_0xfda4bb(0x15d))[_0xfda4bb(0x15e)]());
        expect(_0x2f8f77('#dynamic')[_0xfda4bb(0x15e)]())[_0xfda4bb(0x152)](_0xfda4bb(0x169)), expect(_0x2f8f77('#slug')['text']())[_0xfda4bb(0x152)](_0xfda4bb(0x16b)), expect(isNaN(_0x13b727[_0xfda4bb(0x163)]))[_0xfda4bb(0x152)](![]), expect(_0x13b727[_0xfda4bb(0x163)])[_0xfda4bb(0x164)][_0xfda4bb(0x152)](_0x39a973[_0xfda4bb(0x163)]);
    }), it('should\x20render\x20fallback\x20page\x20correctly\x20with\x20x-matched-path\x20and\x20routes-matches', async () => {
        const _0x42433a = _0x2029cd, _0x4c1db8 = await renderViaHTTP(appPort, _0x42433a(0x16d), undefined, {
                'headers': {
                    'x-matched-path': _0x42433a(0x16d),
                    'x-now-route-matches': _0x42433a(0x179)
                }
            }), _0x418517 = _0x492c70[_0x42433a(0x15b)](_0x4c1db8), _0x14eca7 = JSON['parse'](_0x418517(_0x42433a(0x15d))[_0x42433a(0x15e)]());
        expect(_0x418517(_0x42433a(0x16e))[_0x42433a(0x15e)]())[_0x42433a(0x152)](_0x42433a(0x16f)), expect(_0x418517(_0x42433a(0x16a))[_0x42433a(0x15e)]())[_0x42433a(0x152)](_0x42433a(0x167)), expect(_0x14eca7[_0x42433a(0x160)])['toBe'](_0x42433a(0x161));
        const _0x15023f = await renderViaHTTP(appPort, _0x42433a(0x17a), undefined, {
                'headers': {
                    'x-matched-path': _0x42433a(0x17a),
                    'x-now-route-matches': '1=second'
                }
            }), _0x216a3e = _0x492c70[_0x42433a(0x15b)](_0x15023f), _0x188919 = JSON[_0x42433a(0x15c)](_0x216a3e(_0x42433a(0x15d))['text']());
        expect(_0x216a3e('#fallback')[_0x42433a(0x15e)]())[_0x42433a(0x152)](_0x42433a(0x16f)), expect(_0x216a3e('#slug')['text']())[_0x42433a(0x152)](_0x42433a(0x16b)), expect(isNaN(_0x188919[_0x42433a(0x163)]))[_0x42433a(0x152)](![]), expect(_0x188919[_0x42433a(0x163)])['not'][_0x42433a(0x152)](_0x14eca7[_0x42433a(0x163)]);
    }), it(_0x2029cd(0x17b), async () => {
        const _0x39387c = _0x2029cd, _0x18acc0 = await fetchViaHTTP(appPort, '/_next/data/' + buildId + _0x39387c(0x17c), undefined, { 'headers': { 'x-matched-path': _0x39387c(0x176) } }), {pageProps: _0x2d2f88} = await _0x18acc0[_0x39387c(0x17d)]();
        expect(_0x2d2f88[_0x39387c(0x171)])[_0x39387c(0x152)](_0x39387c(0x167)), expect(_0x2d2f88[_0x39387c(0x160)])['toBe']('world');
        const _0x3b56c7 = await fetchViaHTTP(appPort, _0x39387c(0x17e) + buildId + _0x39387c(0x17f), undefined, {
                'headers': {
                    'x-matched-path': _0x39387c(0x17e) + buildId + _0x39387c(0x17f),
                    'x-now-route-matches': _0x39387c(0x180)
                }
            }), {pageProps: _0x13e5c4} = await _0x3b56c7[_0x39387c(0x17d)]();
        expect(_0x13e5c4['slug'])[_0x39387c(0x152)]('second'), expect(_0x13e5c4[_0x39387c(0x160)])[_0x39387c(0x152)](_0x39387c(0x161));
    }), it(_0x2029cd(0x181), async () => {
        const _0x2cb2cc = _0x2029cd, _0xd753a0 = await renderViaHTTP(appPort, '/catch-all/[[...rest]]', undefined, {
                'headers': {
                    'x-matched-path': '/catch-all/[[...rest]]',
                    'x-now-route-matches': ''
                }
            }), _0x3f5344 = _0x492c70['load'](_0xd753a0), _0x5380a6 = JSON[_0x2cb2cc(0x15c)](_0x3f5344(_0x2cb2cc(0x15d))[_0x2cb2cc(0x15e)]());
        expect(_0x3f5344('#catch-all')['text']())[_0x2cb2cc(0x152)](_0x2cb2cc(0x182)), expect(_0x5380a6[_0x2cb2cc(0x183)])['toEqual']({}), expect(_0x5380a6[_0x2cb2cc(0x160)])[_0x2cb2cc(0x152)]('world');
        const _0x3ec482 = await renderViaHTTP(appPort, _0x2cb2cc(0x184), undefined, {
                'headers': {
                    'x-matched-path': '/catch-all/[[...rest]]',
                    'x-now-route-matches': _0x2cb2cc(0x185)
                }
            }), _0x115ad4 = _0x492c70[_0x2cb2cc(0x15b)](_0x3ec482), _0x3a6481 = JSON[_0x2cb2cc(0x15c)](_0x115ad4(_0x2cb2cc(0x15d))[_0x2cb2cc(0x15e)]());
        expect(_0x115ad4(_0x2cb2cc(0x186))[_0x2cb2cc(0x15e)]())[_0x2cb2cc(0x152)]('optional\x20catch-all\x20page'), expect(_0x3a6481['params'])[_0x2cb2cc(0x187)]({ 'rest': ['hello'] }), expect(isNaN(_0x3a6481[_0x2cb2cc(0x163)]))[_0x2cb2cc(0x152)](![]), expect(_0x3a6481[_0x2cb2cc(0x163)])['not'][_0x2cb2cc(0x152)](_0x5380a6['random']);
        const _0x1bb32f = await renderViaHTTP(appPort, _0x2cb2cc(0x188), undefined, {
                'headers': {
                    'x-matched-path': _0x2cb2cc(0x184),
                    'x-now-route-matches': '1=hello/world&catchAll=hello/world'
                }
            }), _0x299c98 = _0x492c70['load'](_0x1bb32f), _0x3413b8 = JSON[_0x2cb2cc(0x15c)](_0x299c98('#props')[_0x2cb2cc(0x15e)]());
        expect(_0x299c98(_0x2cb2cc(0x186))['text']())[_0x2cb2cc(0x152)](_0x2cb2cc(0x182)), expect(_0x3413b8[_0x2cb2cc(0x183)])['toEqual']({
            'rest': [
                _0x2cb2cc(0x160),
                _0x2cb2cc(0x161)
            ]
        }), expect(isNaN(_0x3413b8[_0x2cb2cc(0x163)]))['toBe'](![]), expect(_0x3413b8[_0x2cb2cc(0x163)])[_0x2cb2cc(0x164)][_0x2cb2cc(0x152)](_0x5380a6[_0x2cb2cc(0x163)]);
    }), it('should\x20return\x20data\x20correctly\x20with\x20x-matched-path\x20for\x20optional\x20catch-all\x20route', async () => {
        const _0x4952b6 = _0x2029cd, _0x6b7727 = await fetchViaHTTP(appPort, '/_next/data/' + buildId + _0x4952b6(0x189), undefined, { 'headers': { 'x-matched-path': '/catch-all/[[...rest]]' } }), {pageProps: _0x393df0} = await _0x6b7727[_0x4952b6(0x17d)]();
        expect(_0x393df0['params'])[_0x4952b6(0x187)]({}), expect(_0x393df0[_0x4952b6(0x160)])[_0x4952b6(0x152)](_0x4952b6(0x161));
        const _0x2204ab = await fetchViaHTTP(appPort, '/_next/data/' + buildId + _0x4952b6(0x18a), undefined, {
                'headers': {
                    'x-matched-path': _0x4952b6(0x17e) + buildId + _0x4952b6(0x18a),
                    'x-now-route-matches': _0x4952b6(0x18b)
                }
            }), {pageProps: _0x5a31a2} = await _0x2204ab['json']();
        expect(_0x5a31a2[_0x4952b6(0x183)])[_0x4952b6(0x187)]({ 'rest': ['hello'] }), expect(_0x5a31a2['hello'])[_0x4952b6(0x152)](_0x4952b6(0x161));
        const _0x4a5112 = await fetchViaHTTP(appPort, _0x4952b6(0x17e) + buildId + '/catch-all/[[...rest]].json', undefined, {
                'headers': {
                    'x-matched-path': '/_next/data/' + buildId + _0x4952b6(0x18a),
                    'x-now-route-matches': _0x4952b6(0x18c)
                }
            }), {pageProps: _0x4a354a} = await _0x4a5112[_0x4952b6(0x17d)]();
        expect(_0x4a354a[_0x4952b6(0x183)])[_0x4952b6(0x187)]({
            'rest': [
                _0x4952b6(0x160),
                _0x4952b6(0x161)
            ]
        }), expect(_0x4a354a[_0x4952b6(0x160)])[_0x4952b6(0x152)](_0x4952b6(0x161));
    }), it(_0x2029cd(0x18d), async () => {
        const _0x37b9d1 = _0x2029cd;
        for (const _0x1fc1f3 of [
                '/',
                _0x37b9d1(0x18e),
                _0x37b9d1(0x18f),
                _0x37b9d1(0x190),
                _0x37b9d1(0x16d),
                '/fallback/another/',
                _0x37b9d1(0x191)
            ]) {
            const _0x3769c3 = await fetchViaHTTP(appPort, _0x1fc1f3, undefined, { 'redirect': 'manual' });
            expect(_0x3769c3[_0x37b9d1(0x192)])[_0x37b9d1(0x152)](0xc8);
        }
    }), it('should\x20normalize\x20catch-all\x20rewrite\x20query\x20values\x20correctly', async () => {
        const _0x20f0c4 = _0x2029cd, _0x2ce1df = await renderViaHTTP(appPort, _0x20f0c4(0x193), { 'path': 'hello/world' }, { 'headers': { 'x-matched-path': '/' } }), _0x3313e5 = _0x492c70['load'](_0x2ce1df);
        expect(JSON['parse'](_0x3313e5(_0x20f0c4(0x194))[_0x20f0c4(0x15e)]())[_0x20f0c4(0x195)])[_0x20f0c4(0x187)]({
            'path': [
                _0x20f0c4(0x160),
                _0x20f0c4(0x161)
            ]
        });
    }), it('should\x20bubble\x20error\x20correctly\x20for\x20gip\x20page', async () => {
        const _0x4a6fb1 = _0x2029cd;
        errors = [];
        const _0x1b3672 = await fetchViaHTTP(appPort, '/errors/gip', { 'crash': '1' });
        expect(_0x1b3672['status'])['toBe'](0x1f4), expect(await _0x1b3672[_0x4a6fb1(0x15e)]())['toBe']('error'), expect(errors[_0x4a6fb1(0x153)])[_0x4a6fb1(0x152)](0x1), expect(errors[0x0])[_0x4a6fb1(0x196)]('gip\x20hit\x20an\x20oops');
    }), it(_0x2029cd(0x197), async () => {
        const _0x9f6644 = _0x2029cd;
        errors = [];
        const _0x9c11b5 = await fetchViaHTTP(appPort, _0x9f6644(0x198), { 'crash': '1' });
        expect(_0x9c11b5['status'])[_0x9f6644(0x152)](0x1f4), expect(await _0x9c11b5[_0x9f6644(0x15e)]())[_0x9f6644(0x152)]('error'), expect(errors['length'])['toBe'](0x1), expect(errors[0x0])['toContain'](_0x9f6644(0x199));
    }), it(_0x2029cd(0x19a), async () => {
        const _0x246064 = _0x2029cd;
        errors = [];
        const _0x5c71e6 = await fetchViaHTTP(appPort, '/errors/gsp/crash');
        expect(_0x5c71e6[_0x246064(0x192)])[_0x246064(0x152)](0x1f4), expect(await _0x5c71e6[_0x246064(0x15e)]())[_0x246064(0x152)](_0x246064(0x147)), expect(errors[_0x246064(0x153)])[_0x246064(0x152)](0x1), expect(errors[0x0])[_0x246064(0x196)](_0x246064(0x19b));
    }), it(_0x2029cd(0x19c), async () => {
        const _0x42cb4a = _0x2029cd;
        errors = [];
        const _0x3a62db = await fetchViaHTTP(appPort, _0x42cb4a(0x19d));
        expect(_0x3a62db['status'])['toBe'](0x1f4), expect(await _0x3a62db[_0x42cb4a(0x15e)]())[_0x42cb4a(0x152)]('error'), expect(errors[_0x42cb4a(0x153)])['toBe'](0x1), expect(errors[0x0])['toContain'](_0x42cb4a(0x19e));
    }), it(_0x2029cd(0x19f), async () => {
        const _0x3c3b88 = _0x2029cd, _0x5bfcde = await fetchViaHTTP(appPort, _0x3c3b88(0x1a0), {
                'rest': '',
                'another': _0x3c3b88(0x1a1)
            }, { 'headers': { 'x-matched-path': _0x3c3b88(0x1a2) } }), _0x288f3c = await _0x5bfcde[_0x3c3b88(0x15e)](), _0x1fb718 = _0x492c70[_0x3c3b88(0x15b)](_0x288f3c), _0x4cd895 = JSON[_0x3c3b88(0x15c)](_0x1fb718(_0x3c3b88(0x15d))['text']());
        expect(_0x4cd895[_0x3c3b88(0x183)])[_0x3c3b88(0x187)]({}), expect(_0x4cd895[_0x3c3b88(0x195)])[_0x3c3b88(0x187)]({ 'another': _0x3c3b88(0x1a1) });
    }), it('should\x20normalize\x20optional\x20values\x20correctly\x20for\x20SSG\x20page', async () => {
        const _0x3404e6 = _0x2029cd, _0x11137 = await fetchViaHTTP(appPort, _0x3404e6(0x1a3), {
                'rest': '',
                'another': _0x3404e6(0x1a1)
            }, { 'headers': { 'x-matched-path': '/optional-ssg/[[...rest]]' } }), _0xe8bb83 = await _0x11137['text'](), _0x1d1b10 = _0x492c70[_0x3404e6(0x15b)](_0xe8bb83), _0x1b8954 = JSON[_0x3404e6(0x15c)](_0x1d1b10('#props')[_0x3404e6(0x15e)]());
        expect(_0x1b8954[_0x3404e6(0x183)])[_0x3404e6(0x187)]({});
    }), it(_0x2029cd(0x1a4), async () => {
        const _0x2e493c = _0x2029cd, _0x3ddd77 = await fetchViaHTTP(appPort, _0x2e493c(0x1a5), undefined, {
                'headers': {
                    'x-matched-path': _0x2e493c(0x1a5),
                    'x-now-route-matches': _0x2e493c(0x1a6)
                }
            }), _0x450648 = await _0x3ddd77[_0x2e493c(0x15e)](), _0x2831f6 = _0x492c70[_0x2e493c(0x15b)](_0x450648), _0x5520d1 = JSON[_0x2e493c(0x15c)](_0x2831f6(_0x2e493c(0x15d))[_0x2e493c(0x15e)]());
        expect(_0x5520d1[_0x2e493c(0x183)])['toEqual']({
            'rest': [
                'en',
                'es',
                'hello/world'
            ]
        });
    }), it('should\x20normalize\x20optional\x20values\x20correctly\x20for\x20API\x20page', async () => {
        const _0x451a1a = _0x2029cd, _0x32614e = await fetchViaHTTP(appPort, '/api/optional', {
                'rest': '',
                'another': _0x451a1a(0x1a1)
            }, { 'headers': { 'x-matched-path': _0x451a1a(0x1a7) } }), _0x2c4826 = await _0x32614e[_0x451a1a(0x17d)]();
        expect(_0x2c4826[_0x451a1a(0x195)])[_0x451a1a(0x187)]({ 'another': 'value' }), expect(_0x2c4826[_0x451a1a(0x1a8)])[_0x451a1a(0x152)](_0x451a1a(0x1a9));
    }), it(_0x2029cd(0x1aa), async () => {
        const _0x448c6d = _0x2029cd, _0x53f5bb = await fetchViaHTTP(appPort, '/', undefined, {
                'headers': { 'x-matched-path': _0x448c6d(0x1ab) },
                'redirect': 'manual'
            }), _0x5c9d04 = await _0x53f5bb[_0x448c6d(0x15e)](), _0x11ae84 = _0x492c70['load'](_0x5c9d04);
        expect(_0x11ae84(_0x448c6d(0x162))[_0x448c6d(0x15e)]())[_0x448c6d(0x152)](_0x448c6d(0x15f));
    }), it('should\x20match\x20the\x20root\x20dyanmic\x20page\x20correctly', async () => {
        const _0xab6e36 = _0x2029cd, _0x336577 = await fetchViaHTTP(appPort, _0xab6e36(0x1ab), undefined, {
                'headers': { 'x-matched-path': '/[slug]' },
                'redirect': _0xab6e36(0x1ac)
            }), _0x3da76a = await _0x336577[_0xab6e36(0x15e)](), _0x73abfe = _0x492c70['load'](_0x3da76a);
        expect(_0x73abfe(_0xab6e36(0x1ad))[_0xab6e36(0x15e)]())[_0xab6e36(0x152)]('[slug]\x20page');
    });
});
