const _0x77cd = [
    'searchFiles',
    'formatResults',
    'npm',
    'No\x20matches\x20in\x20help\x20for:\x20',
    'join',
    'all',
    'map',
    'entries',
    'toLowerCase',
    'includes',
    'split',
    'some',
    'push',
    'pop',
    'shift',
    'npm\x20help\x20',
    'basename',
    'keys',
    'sort',
    'found',
    'totalHits',
    'lines',
    'slice',
    'min',
    'stdout',
    'columns',
    'cmd',
    'hits',
    'repeat',
    'max',
    'config',
    'get',
    'unshift',
    'forEach',
    'substr',
    'bgBlack',
    'red',
    'Top\x20hits\x20for\x20',
    'stringify',
    '(run\x20with\x20-l\x20or\x20--long\x20to\x20see\x20more\x20context)',
    'trim',
    'exports',
    '1aiSmdy',
    '637487OOhnIT',
    '2DljQNd',
    '2384xzDeLn',
    '234139URWgEF',
    '3KFunzn',
    '652580HKPeqE',
    '519330pCfjwB',
    '1JYeixN',
    '347843YTilge',
    '42xmnGmZ',
    '11637qtZeok',
    'path',
    'ansicolors',
    'glob',
    './base-command.js',
    'description',
    'Search\x20npm\x20help\x20documentation',
    'help-search',
    '<text>',
    'params',
    'long',
    'helpSearch',
    'then',
    'length',
    'output',
    'usage',
    'resolve',
    '/*/*.md',
    'readFiles'
];
function _0x1d99(_0x59988d, _0x2a96d2) {
    return _0x1d99 = function (_0x77cd80, _0x1d999b) {
        _0x77cd80 = _0x77cd80 - 0xe9;
        let _0x2e0aa9 = _0x77cd[_0x77cd80];
        return _0x2e0aa9;
    }, _0x1d99(_0x59988d, _0x2a96d2);
}
const _0x47806a = _0x1d99;
(function (_0x3a1c55, _0x203e69) {
    const _0x481476 = _0x1d99;
    while (!![]) {
        try {
            const _0xdc4919 = parseInt(_0x481476(0xe9)) * parseInt(_0x481476(0xea)) + -parseInt(_0x481476(0xeb)) * -parseInt(_0x481476(0xec)) + parseInt(_0x481476(0xed)) * parseInt(_0x481476(0xee)) + -parseInt(_0x481476(0xef)) + parseInt(_0x481476(0xf0)) + -parseInt(_0x481476(0xf1)) * parseInt(_0x481476(0xf2)) + -parseInt(_0x481476(0xf3)) * parseInt(_0x481476(0xf4));
            if (_0xdc4919 === _0x203e69)
                break;
            else
                _0x3a1c55['push'](_0x3a1c55['shift']());
        } catch (_0x543cec) {
            _0x3a1c55['push'](_0x3a1c55['shift']());
        }
    }
}(_0x77cd, 0x5b829));
const fs = require('fs'), path = require(_0x47806a(0xf5)), color = require(_0x47806a(0xf6)), {promisify} = require('util'), glob = promisify(require(_0x47806a(0xf7))), readFile = promisify(fs['readFile']), BaseCommand = require(_0x47806a(0xf8));
class HelpSearch extends BaseCommand {
    static get [_0x47806a(0xf9)]() {
        const _0x5ed599 = _0x47806a;
        return _0x5ed599(0xfa);
    }
    static get ['name']() {
        const _0x1f4ae1 = _0x47806a;
        return _0x1f4ae1(0xfb);
    }
    static get ['usage']() {
        const _0x28c330 = _0x47806a;
        return [_0x28c330(0xfc)];
    }
    static get [_0x47806a(0xfd)]() {
        const _0x96ccec = _0x47806a;
        return [_0x96ccec(0xfe)];
    }
    ['exec'](_0x481844, _0x45cfd0) {
        const _0x9ef557 = _0x47806a;
        this[_0x9ef557(0xff)](_0x481844)[_0x9ef557(0x100)](() => _0x45cfd0())['catch'](_0x45cfd0);
    }
    async [_0x47806a(0xff)](_0x39da9d) {
        const _0x559e07 = _0x47806a;
        if (!_0x39da9d[_0x559e07(0x101)])
            return this['npm'][_0x559e07(0x102)](this[_0x559e07(0x103)]);
        const _0x5347c2 = path[_0x559e07(0x104)](__dirname, '..', 'docs/content'), _0x141a85 = await glob(_0x5347c2 + _0x559e07(0x105)), _0x1a690a = await this[_0x559e07(0x106)](_0x141a85), _0x3880c1 = await this[_0x559e07(0x107)](_0x39da9d, _0x1a690a, _0x141a85), _0x5a96ce = this[_0x559e07(0x108)](_0x39da9d, _0x3880c1);
        if (!_0x5a96ce['trim']())
            this[_0x559e07(0x109)][_0x559e07(0x102)](_0x559e07(0x10a) + _0x39da9d[_0x559e07(0x10b)]('\x20') + '\x0a');
        else
            this[_0x559e07(0x109)][_0x559e07(0x102)](_0x5a96ce);
    }
    async [_0x47806a(0x106)](_0x227305) {
        const _0x362d75 = _0x47806a, _0x27bb96 = {};
        return await Promise[_0x362d75(0x10c)](_0x227305[_0x362d75(0x10d)](async _0x745734 => {
            _0x27bb96[_0x745734] = (await readFile(_0x745734, 'utf8'))['replace'](/^---\n(.*\n)*?---\n/, '')['trim']();
        })), _0x27bb96;
    }
    async ['searchFiles'](_0x33ae2e, _0x6306c1, _0x4e081b) {
        const _0x2a03ad = _0x47806a, _0x5d4d4b = [];
        for (const [_0x3d4ced, _0xb52b0f] of Object[_0x2a03ad(0x10e)](_0x6306c1)) {
            const _0x38dba8 = _0xb52b0f[_0x2a03ad(0x10f)]();
            if (!_0x33ae2e['some'](_0x4a9980 => _0x38dba8[_0x2a03ad(0x110)](_0x4a9980[_0x2a03ad(0x10f)]())))
                continue;
            const _0x198fc1 = _0xb52b0f[_0x2a03ad(0x111)](/\n+/);
            for (let _0x449de6 = 0x0; _0x449de6 < _0x198fc1[_0x2a03ad(0x101)]; _0x449de6++) {
                const _0xce9556 = _0x198fc1[_0x449de6], _0x284bfd = _0x198fc1[_0x449de6 + 0x1];
                let _0x5c3ed8 = ![];
                if (_0x284bfd) {
                    _0x5c3ed8 = _0x33ae2e[_0x2a03ad(0x112)](_0x214f08 => _0x284bfd[_0x2a03ad(0x10f)]()['includes'](_0x214f08['toLowerCase']()));
                    if (_0x5c3ed8) {
                        _0x449de6 += 0x2;
                        continue;
                    }
                }
                _0x5c3ed8 = _0x33ae2e[_0x2a03ad(0x112)](_0x2c178e => _0xce9556[_0x2a03ad(0x10f)]()[_0x2a03ad(0x110)](_0x2c178e['toLowerCase']()));
                if (_0x5c3ed8) {
                    _0x449de6++;
                    continue;
                }
                _0x198fc1[_0x449de6] = null;
            }
            const _0x51cbfb = _0x198fc1['reduce']((_0xc70dbf, _0x47fc53) => {
                const _0x64f43c = _0x2a03ad;
                if (!(_0x47fc53 === null && _0xc70dbf[_0xc70dbf[_0x64f43c(0x101)] - 0x1] === null))
                    _0xc70dbf[_0x64f43c(0x113)](_0x47fc53);
                return _0xc70dbf;
            }, []);
            if (_0x51cbfb[_0x51cbfb[_0x2a03ad(0x101)] - 0x1] === null)
                _0x51cbfb[_0x2a03ad(0x114)]();
            if (_0x51cbfb[0x0] === null)
                _0x51cbfb[_0x2a03ad(0x115)]();
            const _0x361648 = {};
            let _0xfc2045 = 0x0;
            for (const _0x277110 of _0x51cbfb) {
                for (const _0x5447fb of _0x33ae2e) {
                    const _0x5759d4 = (_0x277110 || '')[_0x2a03ad(0x10f)]()['split'](_0x5447fb['toLowerCase']())['length'] - 0x1;
                    _0x5759d4 > 0x0 && (_0x361648[_0x5447fb] = (_0x361648[_0x5447fb] || 0x0) + _0x5759d4, _0xfc2045 += _0x5759d4);
                }
            }
            const _0x2ff8d0 = _0x2a03ad(0x116) + path[_0x2a03ad(0x117)](_0x3d4ced, '.md')['replace'](/^npm-/, '');
            _0x5d4d4b['push']({
                'file': _0x3d4ced,
                'cmd': _0x2ff8d0,
                'lines': _0x51cbfb,
                'found': Object[_0x2a03ad(0x118)](_0x361648),
                'hits': _0x361648,
                'totalHits': _0xfc2045
            });
        }
        return _0x5d4d4b[_0x2a03ad(0x119)]((_0x428d3b, _0x2006ea) => _0x428d3b[_0x2a03ad(0x11a)][_0x2a03ad(0x101)] > _0x2006ea[_0x2a03ad(0x11a)][_0x2a03ad(0x101)] ? -0x1 : _0x428d3b[_0x2a03ad(0x11a)][_0x2a03ad(0x101)] < _0x2006ea[_0x2a03ad(0x11a)][_0x2a03ad(0x101)] ? 0x1 : _0x428d3b[_0x2a03ad(0x11b)] > _0x2006ea['totalHits'] ? -0x1 : _0x428d3b[_0x2a03ad(0x11b)] < _0x2006ea[_0x2a03ad(0x11b)] ? 0x1 : _0x428d3b[_0x2a03ad(0x11c)][_0x2a03ad(0x101)] > _0x2006ea['lines'][_0x2a03ad(0x101)] ? -0x1 : _0x428d3b[_0x2a03ad(0x11c)][_0x2a03ad(0x101)] < _0x2006ea['lines']['length'] ? 0x1 : 0x0)[_0x2a03ad(0x11d)](0x0, 0xa);
    }
    ['formatResults'](_0x2686ab, _0x404862) {
        const _0x5da684 = _0x47806a, _0x5270c0 = Math[_0x5da684(0x11e)](process[_0x5da684(0x11f)][_0x5da684(0x120)] || Infinity, 0x50) + 0x1, _0x47578f = _0x404862[_0x5da684(0x10d)](_0x4e035b => {
                const _0x813319 = _0x5da684, _0x4b73c5 = [_0x4e035b[_0x813319(0x121)]], _0x9df02 = Object[_0x813319(0x118)](_0x4e035b[_0x813319(0x122)])[_0x813319(0x10d)](_0x512337 => _0x512337 + ':' + _0x4e035b[_0x813319(0x122)][_0x512337])[_0x813319(0x119)]((_0x34244b, _0x522ddc) => _0x34244b > _0x522ddc ? 0x1 : -0x1)['join']('\x20');
                _0x4b73c5['push']('\x20'[_0x813319(0x123)](Math[_0x813319(0x124)](0x1, _0x5270c0 - _0x4b73c5[_0x813319(0x10b)]('\x20')['length'] - _0x9df02[_0x813319(0x101)] - 0x1))), _0x4b73c5[_0x813319(0x113)](_0x9df02);
                if (!this['npm'][_0x813319(0x125)][_0x813319(0x126)](_0x813319(0xfe)))
                    return _0x4b73c5[_0x813319(0x10b)]('');
                return _0x4b73c5[_0x813319(0x127)]('\x0a\x0a'), _0x4b73c5[_0x813319(0x113)]('\x0a'), _0x4b73c5[_0x813319(0x113)]('-'[_0x813319(0x123)](_0x5270c0 - 0x1) + '\x0a'), _0x4e035b[_0x813319(0x11c)][_0x813319(0x128)]((_0x24acb1, _0x33c96e) => {
                    const _0x2f5a75 = _0x813319;
                    if (_0x24acb1 === null || _0x33c96e > 0x3)
                        return;
                    if (!this[_0x2f5a75(0x109)]['color']) {
                        _0x4b73c5['push'](_0x24acb1 + '\x0a');
                        return;
                    }
                    const _0x5b1ae0 = [];
                    for (const _0x2c0e1d of _0x2686ab) {
                        const _0x43028b = _0x24acb1['toLowerCase']()[_0x2f5a75(0x111)](_0x2c0e1d[_0x2f5a75(0x10f)]());
                        let _0x55efb8 = 0x0;
                        for (const _0x20964d of _0x43028b) {
                            _0x5b1ae0[_0x2f5a75(0x113)](_0x24acb1[_0x2f5a75(0x129)](_0x55efb8, _0x20964d['length']));
                            const _0x16b25d = _0x24acb1['substr'](_0x55efb8 + _0x20964d['length'], _0x2c0e1d['length']), _0x4cfdc3 = color[_0x2f5a75(0x12a)](color[_0x2f5a75(0x12b)](_0x16b25d));
                            _0x5b1ae0['push'](_0x4cfdc3), _0x55efb8 += _0x20964d['length'] + _0x2c0e1d[_0x2f5a75(0x101)];
                        }
                    }
                    _0x4b73c5[_0x2f5a75(0x113)](_0x5b1ae0['join']('') + '\x0a');
                }), _0x4b73c5['join']('');
            })['join']('\x0a'), _0x2aeaf7 = _0x404862[_0x5da684(0x101)] && !this[_0x5da684(0x109)][_0x5da684(0x125)][_0x5da684(0x126)](_0x5da684(0xfe)) ? _0x5da684(0x12c) + _0x2686ab[_0x5da684(0x10d)](JSON[_0x5da684(0x12d)])['join']('\x20') + '\x0a' + '—'['repeat'](_0x5270c0 - 0x1) + '\x0a' + _0x47578f + '\x0a' + '—'[_0x5da684(0x123)](_0x5270c0 - 0x1) + '\x0a' + _0x5da684(0x12e) : _0x47578f;
        return _0x2aeaf7[_0x5da684(0x12f)]();
    }
}
module[_0x47806a(0x130)] = HelpSearch;
