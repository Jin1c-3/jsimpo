const _0x2866 = [
    '5wlFxxz',
    'mock',
    'fs-extra',
    'fetch-mock-jest',
    'sandbox',
    'Hello,\x20world!',
    'http://example.com/file1.txt',
    'const\x20options\x20=\x20{\x0a\x20\x20key:\x20process.env.WHATEVER\x0a\x20\x20\x0a}',
    'file\x20resource',
    'e2e\x20file\x20resource\x20test',
    'mockReturnValue',
    'content',
    'plan',
    '\x0a\x20\x20\x20\x20\x20\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22currentState\x22:\x20\x22Hello,\x20world!\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22describe\x22:\x20\x22Write\x20file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22diff\x22:\x20\x22\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22newState\x22:\x20\x22Hello,\x20world!\x22,\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',
    'create',
    'error',
    'toBeNull',
    '\x0a\x20\x20\x20\x20\x20\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22_message\x22:\x20\x22Wrote\x20file\x20file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22Hello,\x20world!\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22path\x22:\x20\x22file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',
    'read',
    'toEqual',
    'toMatchInlineSnapshot',
    '\x0a\x20\x20\x20\x20\x20\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22currentState\x22:\x20\x22Hello,\x20world!\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22describe\x22:\x20\x22Write\x20file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22diff\x22:\x20\x22-\x20Original\x20\x20-\x201\x0a\x20\x20\x20\x20\x20\x20+\x20Modified\x20\x20+\x201\x0a\x0a\x20\x20\x20\x20\x20\x20-\x20Hello,\x20world!\x0a\x20\x20\x20\x20\x20\x20+\x20Hello,\x20world!1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22newState\x22:\x20\x22Hello,\x20world!1\x22,\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',
    'readFile',
    'mockReturnValueOnce',
    'update',
    '\x0a\x20\x20\x20\x20\x20\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22_message\x22:\x20\x22Wrote\x20file\x20file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22Hello,\x20world!1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22path\x22:\x20\x22file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',
    'file.txt',
    'stream',
    'mockImplementation',
    'get',
    'push',
    'currentState',
    'validate',
    'diff',
    '\x0a\x20\x20\x20\x20\x20\x20\x22-\x20Original\x20\x20-\x2023\x0a\x20\x20\x20\x20\x20\x20+\x20Modified\x20\x20+\x20\x203\x0a\x0a\x20\x20\x20\x20\x20\x20-\x20query\x20{\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20allGatsbyPlugin\x20{\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20nodes\x20{\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20name\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20options\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20resolvedOptions\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20package\x20{\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20version\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20...\x20on\x20GatsbyTheme\x20{\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20files\x20{\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20nodes\x20{\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20shadowedFiles\x20{\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20nodes\x20{\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20}\x20\x20\x0a\x20\x20\x20\x20\x20\x20+\x20const\x20options\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20+\x20\x20\x20key:\x20process.env.WHATEVER\x0a\x20\x20\x20\x20\x20\x20+\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x22\x0a\x20\x20\x20\x20',
    '\x0a\x20\x20\x20\x20\x20\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22_message\x22:\x20\x22Wrote\x20file\x20file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22http://example.com/file2.txt\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22path\x22:\x20\x22file.txt\x22,\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',
    'destroy',
    '300711StKchw',
    '1DGTjee',
    '1jNQIva',
    '186222lwuXnW',
    '33742CszUDS',
    '7ukKAQd',
    '245870AvxktD',
    '184633lxXgPo',
    '198788RhbIFO',
    '58199GYDYWZ'
];
function _0x1807(_0x536c2c, _0x2b2684) {
    return _0x1807 = function (_0x28664d, _0x180700) {
        _0x28664d = _0x28664d - 0xe0;
        let _0x257488 = _0x2866[_0x28664d];
        return _0x257488;
    }, _0x1807(_0x536c2c, _0x2b2684);
}
const _0x53435a = _0x1807;
(function (_0x3674dc, _0x2c3250) {
    const _0x536a17 = _0x1807;
    while (!![]) {
        try {
            const _0x23aef6 = -parseInt(_0x536a17(0xe0)) * -parseInt(_0x536a17(0xe1)) + parseInt(_0x536a17(0xe2)) * parseInt(_0x536a17(0xe3)) + -parseInt(_0x536a17(0xe4)) * parseInt(_0x536a17(0xe5)) + parseInt(_0x536a17(0xe6)) + parseInt(_0x536a17(0xe7)) + -parseInt(_0x536a17(0xe8)) + -parseInt(_0x536a17(0xe9)) * parseInt(_0x536a17(0xea));
            if (_0x23aef6 === _0x2c3250)
                break;
            else
                _0x3674dc['push'](_0x3674dc['shift']());
        } catch (_0x51b840) {
            _0x3674dc['push'](_0x3674dc['shift']());
        }
    }
}(_0x2866, 0x2ebe3));
import _0x405f47 from 'fs-extra';
import _0x383c4b from '../resource-schema';
import _0x1bae88 from '@hapi/joi';
jest[_0x53435a(0xeb)](_0x53435a(0xec)), jest['mock']('node-fetch', () => require(_0x53435a(0xed))[_0x53435a(0xee)]());
const fetchMock = require('node-fetch'), file = require('./file'), root = __dirname, content = _0x53435a(0xef), url = _0x53435a(0xf0), url2 = 'http://example.com/file2.txt', response1 = 'query\x20{\x0a\x20\x20allGatsbyPlugin\x20{\x0a\x20\x20\x20\x20nodes\x20{\x0a\x20\x20\x20\x20\x20\x20name\x0a\x20\x20\x20\x20\x20\x20options\x0a\x20\x20\x20\x20\x20\x20resolvedOptions\x0a\x20\x20\x20\x20\x20\x20package\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20version\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20...\x20on\x20GatsbyTheme\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20files\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20nodes\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20shadowedFiles\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20nodes\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20\x20\x0a}', response2 = _0x53435a(0xf1);
describe(_0x53435a(0xf2), () => {
    const _0x669ddd = _0x53435a;
    test(_0x669ddd(0xf3), async () => {
        const _0x2f2060 = _0x669ddd, _0xba9a75 = { 'root': root }, _0x1b85fe = {
                'path': 'file.txt',
                'content': content
            }, _0x335ce1 = { 'content': content + '1' };
        _0x405f47['readFile'][_0x2f2060(0xf4)](_0x1b85fe[_0x2f2060(0xf5)]);
        const _0x15410f = await file[_0x2f2060(0xf6)](_0xba9a75, _0x1b85fe);
        expect(_0x15410f)['toMatchInlineSnapshot'](_0x2f2060(0xf7));
        const _0x291674 = await file[_0x2f2060(0xf8)](_0xba9a75, _0x1b85fe), _0x58a2bf = _0x1bae88['validate'](_0x291674, {
                ...file['schema'],
                ..._0x383c4b
            });
        expect(_0x58a2bf[_0x2f2060(0xf9)])[_0x2f2060(0xfa)](), expect(_0x291674)['toMatchInlineSnapshot'](_0x2f2060(0xfb));
        const _0x1f02d1 = await file[_0x2f2060(0xfc)](_0xba9a75, _0x291674['id']);
        expect(_0x1f02d1)[_0x2f2060(0xfd)](_0x291674);
        const _0x2a3908 = {
                ..._0x1f02d1,
                ..._0x335ce1
            }, _0x46a0a1 = await file[_0x2f2060(0xf6)](_0xba9a75, _0x2a3908);
        expect(_0x46a0a1)[_0x2f2060(0xfe)](_0x2f2060(0xff)), _0x405f47[_0x2f2060(0x100)][_0x2f2060(0x101)](_0x335ce1[_0x2f2060(0xf5)]);
        const _0x592a5e = await file[_0x2f2060(0x102)](_0xba9a75, _0x2a3908);
        expect(_0x592a5e)[_0x2f2060(0xfe)](_0x2f2060(0x103)), await file['destroy'](_0xba9a75, _0x592a5e);
    }), test('e2e\x20remote\x20file\x20resource\x20test', async () => {
        const _0x1521aa = _0x669ddd, _0x539bb0 = { 'root': root }, _0x50a169 = {
                'path': _0x1521aa(0x104),
                'content': url
            }, _0x7c0a0d = { 'content': url2 };
        _0x405f47[_0x1521aa(0x100)][_0x1521aa(0xf4)](response1);
        const {
            Readable: _0x566152,
            PassThrough: _0x23f4ac
        } = require(_0x1521aa(0x105));
        _0x405f47['createWriteStream'][_0x1521aa(0x106)](() => new _0x23f4ac()), fetchMock[_0x1521aa(0x107)](url, () => {
            const _0x4986c8 = _0x1521aa, _0x14eb04 = new _0x566152();
            return _0x14eb04[_0x4986c8(0x108)](response1), _0x14eb04[_0x4986c8(0x108)](null), _0x14eb04;
        }, { 'sendAsJson': ![] })[_0x1521aa(0xeb)](url2, response2), _0x405f47[_0x1521aa(0x100)][_0x1521aa(0x101)]('');
        const _0x9a1129 = await file[_0x1521aa(0xf6)](_0x539bb0, _0x50a169);
        expect(_0x9a1129[_0x1521aa(0x109)])[_0x1521aa(0xfd)](''), expect(_0x9a1129['newState'])['toEqual'](response1);
        const _0x2588bd = await file[_0x1521aa(0xf8)](_0x539bb0, _0x50a169), _0x3ed562 = _0x1bae88[_0x1521aa(0x10a)](_0x2588bd, {
                ...file['schema'],
                ..._0x383c4b
            });
        expect(_0x3ed562['error'])['toBeNull'](), expect(_0x2588bd[_0x1521aa(0xf5)])[_0x1521aa(0xfd)](response1);
        const _0x538b21 = await file['read'](_0x539bb0, _0x2588bd['id']);
        expect(_0x538b21)[_0x1521aa(0xfd)](_0x2588bd);
        const _0x8b99eb = {
                ..._0x538b21,
                ..._0x7c0a0d
            }, _0xb8d73e = await file['plan'](_0x539bb0, _0x8b99eb);
        expect(_0xb8d73e[_0x1521aa(0x10b)])['toMatchInlineSnapshot'](_0x1521aa(0x10c)), _0x405f47[_0x1521aa(0x100)][_0x1521aa(0x101)](_0x7c0a0d[_0x1521aa(0xf5)]);
        const _0x3dcebd = await file['update'](_0x539bb0, _0x8b99eb);
        expect(_0x3dcebd)[_0x1521aa(0xfe)](_0x1521aa(0x10d)), await file[_0x1521aa(0x10e)](_0x539bb0, _0x3dcebd);
    });
});
