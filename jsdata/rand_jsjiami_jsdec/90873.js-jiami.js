const {writeFileSync}=require('fs');const yargs=require('yargs');const {getPackages}=require('@lerna/project');const PackageGraph=require('@lerna/package-graph');const semver=require('semver');let warned=![];const argv=yargs['option']('fix',{'default':![],'describe':'Fixes outdated dependencies'})['option']('allow-next',{'default':![],'describe':'Allow\x20using\x20\x22next\x22\x20versions.\x20Use\x20this\x20only\x20for\x20alpha/beta\x20releases'})['argv'];getPackages(process['cwd']())['then'](_0x235a32=>{var _0xd671d0={'iRCTk':function(_0xd6b3f3,_0x53cb1d){return _0xd6b3f3!==_0x53cb1d;},'NfNjN':'WucuR','suiKK':'MfDOK','QwHUU':function(_0x3959f5,_0x32b51a){return _0x3959f5===_0x32b51a;},'MVepH':'kSAzK','QGjHS':'HwmOX','Yzjtu':function(_0x72e4af,_0x1b9d33,_0x2ac997){return _0x72e4af(_0x1b9d33,_0x2ac997);}};const _0x10adf2=new PackageGraph(_0x235a32,'allDependencies',!![]);_0x10adf2['forEach']((_0x3a6efd,_0xdb870d)=>{var _0x351fd5={'Bvjtu':function(_0x1656f8,_0xf1e361){return _0xd671d0['QwHUU'](_0x1656f8,_0xf1e361);},'JRvJM':_0xd671d0['MVepH']};let _0x5c9d34=Array['from'](_0x3a6efd['localDependencies']['values']())['filter'](_0x382a87=>!semver['satisfies'](_0x10adf2['get'](_0x382a87['name'])['version'],_0x382a87['fetchSpec']));if(argv['allow-next']){if(_0xd671d0['iRCTk']('HwmOX',_0xd671d0['QGjHS'])){if(pkg[depKey]&&pkg[depKey][p['name']]){next[depKey][p['name']]='^'+_0x10adf2['get'](p['name'])['version'];}}else{_0x5c9d34=_0x5c9d34['filter'](_0x1703bc=>_0x1703bc['fetchSpec']!=='next');}}if(!_0x5c9d34['length'])return;const _0x4e6552=_0x5c9d34['map'](_0x1ae3c7=>'  Depends on "'+_0x1ae3c7['name']+'@'+_0x1ae3c7['fetchSpec']+'" \n'+('  instead of "'+_0x1ae3c7['name']+'@'+_0x10adf2['get'](_0x1ae3c7['name'])['version']+'\x22.\x20\x0a'))['join']('\x0a');console['error'](_0x3a6efd['name']+': \n'+_0x4e6552);warned=!![];if(argv['fix']){const _0x6da883=_0x3a6efd['pkg'];const _0x490fab=_0x6da883['toJSON']();const _0x3add36=['dependencies','devDependencies','peerDependencies'];_0x5c9d34['forEach'](_0x40480e=>{if(_0xd671d0['iRCTk'](_0xd671d0['NfNjN'],_0xd671d0['suiKK'])){_0x3add36['forEach'](_0x3822b9=>{if(_0x6da883[_0x3822b9]&&_0x6da883[_0x3822b9][_0x40480e['name']]){if(_0x351fd5['Bvjtu'](_0x351fd5['JRvJM'],_0x351fd5['JRvJM'])){_0x490fab[_0x3822b9][_0x40480e['name']]='^'+_0x10adf2['get'](_0x40480e['name'])['version'];}else{_0x490fab[_0x3822b9][_0x40480e['name']]='^'+_0x10adf2['get'](_0x40480e['name'])['version'];}}});}else{process['exit'](0x1);}});_0xd671d0['Yzjtu'](writeFileSync,_0x6da883['location']+'/package.json',JSON['stringify'](_0x490fab,null,0x2));}});if(warned){process['exit'](0x1);}});