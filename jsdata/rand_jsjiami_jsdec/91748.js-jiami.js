const {onCreateWebpackConfig,onCreateBabelConfig}=require('../gatsby-node');const PreactRefreshPlugin=require('@prefresh/webpack');const ReactRefreshWebpackPlugin=require('@pmmmwh/react-refresh-webpack-plugin');describe('gatsby-plugin-preact',()=>{var _0x57d8c4={'LYNlP':function(_0x12a0a4,_0x43e43a){return _0x12a0a4(_0x43e43a);},'DjgQc':function(_0xbf444f,_0x57f3b9){return _0xbf444f(_0x57f3b9);},'wGNZb':function(_0xd424f8,_0x1054c5){return _0xd424f8(_0x1054c5);},'zrFcF':function(_0x229cc9,_0x585a16){return _0x229cc9(_0x585a16);},'tkQpn':function(_0xbad4bb,_0xaad841){return _0xbad4bb(_0xaad841);},'yLCQd':function(_0x149d55,_0x334f86){return _0x149d55(_0x334f86);},'VYdNx':function(_0xfd590a,_0x499a3e){return _0xfd590a(_0x499a3e);},'CuBGQ':function(_0x5ae5f9,_0x215f7b){return _0x5ae5f9(_0x215f7b);},'TAmdZ':function(_0x11f81a,_0x430257,_0x1f2cce){return _0x11f81a(_0x430257,_0x1f2cce);}};_0x57d8c4['TAmdZ'](it,'sets the correct webpack config in development',()=>{const _0x457348=jest['fn'](()=>{return{'entry':{'commons':[]},'plugins':[new ReactRefreshWebpackPlugin()]};});const _0x455fd6={'setWebpackConfig':jest['fn'](),'setBabelPlugin':jest['fn'](),'replaceWebpackConfig':jest['fn']()};onCreateBabelConfig({'stage':'develop','actions':_0x455fd6});_0x57d8c4['LYNlP'](onCreateBabelConfig,{'stage':'develop-html','actions':_0x455fd6});onCreateWebpackConfig({'stage':'develop','actions':_0x455fd6,'getConfig':_0x457348});onCreateWebpackConfig({'stage':'develop-html','actions':_0x455fd6,'getConfig':_0x457348});_0x57d8c4['DjgQc'](expect,_0x455fd6['setWebpackConfig'])['toHaveBeenCalledTimes'](0x2);expect(_0x455fd6['setWebpackConfig'])['toHaveBeenCalledWith']({'plugins':expect['arrayContaining']([expect['any'](PreactRefreshPlugin)]),'resolve':{'alias':{'react':'preact/compat','react-dom':'preact/compat'}}});_0x57d8c4['wGNZb'](expect,_0x457348)['toHaveBeenCalledTimes'](0x2);_0x57d8c4['zrFcF'](expect,_0x455fd6['setBabelPlugin'])['toHaveBeenCalledTimes'](0x1);expect(_0x455fd6['setBabelPlugin'])['toHaveBeenCalledWith']({'name':'@prefresh/babel-plugin','stage':'develop'});_0x57d8c4['tkQpn'](expect,_0x455fd6['replaceWebpackConfig'])['toHaveBeenCalledTimes'](0x1);_0x57d8c4['tkQpn'](expect,_0x455fd6['replaceWebpackConfig'])['toHaveBeenCalledWith']({'plugins':[],'entry':{'commons':['@gatsbyjs/webpack-hot-middleware/client']}});});_0x57d8c4['TAmdZ'](it,'sets the correct webpack config in production',()=>{const _0x2fa6b4=['react','react-dom','scheduler','prop-types'];const _0x20bcc8=jest['fn'](()=>{return{'optimization':{'splitChunks':{'chunks':'all','cacheGroups':{'default':![],'vendors':![],'framework':{'chunks':'all','name':'framework','test':new RegExp('(?<!node_modules.*)[\x5c\x5c/]node_modules[\x5c\x5c/]('+_0x2fa6b4['join']('|')+')[\\/]'),'priority':0x28,'enforce':!![]}}}}};});const _0xe86e34={'setWebpackConfig':jest['fn'](),'setBabelPlugin':jest['fn'](),'replaceWebpackConfig':jest['fn']()};_0x57d8c4['yLCQd'](onCreateBabelConfig,{'stage':'build-javascript','actions':_0xe86e34});onCreateBabelConfig({'stage':'build-html','actions':_0xe86e34});_0x57d8c4['yLCQd'](onCreateWebpackConfig,{'stage':'build-javascript','actions':_0xe86e34,'getConfig':_0x20bcc8});_0x57d8c4['VYdNx'](onCreateWebpackConfig,{'stage':'build-html','actions':_0xe86e34,'getConfig':_0x20bcc8});_0x57d8c4['VYdNx'](expect,_0xe86e34['setWebpackConfig'])['toHaveBeenCalledTimes'](0x2);_0x57d8c4['VYdNx'](expect,_0xe86e34['setWebpackConfig'])['toHaveBeenCalledWith']({'plugins':[],'resolve':{'alias':{'react':'preact/compat','react-dom':'preact/compat'}}});expect(_0x20bcc8)['toHaveBeenCalledTimes'](0x1);_0x57d8c4['CuBGQ'](expect,_0xe86e34['setBabelPlugin'])['toHaveBeenCalledTimes'](0x0);expect(_0xe86e34['replaceWebpackConfig'])['toHaveBeenCalledTimes'](0x1);_0x57d8c4['CuBGQ'](expect,_0xe86e34['replaceWebpackConfig'])['toMatchInlineSnapshot']('\x0a\x20\x20\x20\x20\x20\x20[MockFunction]\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22calls\x22:\x20Array\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Array\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22optimization\x22:\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22splitChunks\x22:\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cacheGroups\x22:\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22default\x22:\x20false,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22framework\x22:\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22chunks\x22:\x20\x22all\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22enforce\x22:\x20true,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22name\x22:\x20\x22framework\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22priority\x22:\x2040,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22test\x22:\x20[Function],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22vendors\x22:\x20false,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22chunks\x22:\x20\x22all\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22results\x22:\x20Array\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Object\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22type\x22:\x20\x22return\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22value\x22:\x20undefined,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20');});});