'use strict';const {pipe,set,pick,eq,omit,remove,get,uniq,isArray,map,curry,merge}=require('lodash/fp');const permissionFields=['id','action','subject','properties','conditions','role'];const sanitizedPermissionFields=['id','action','subject','properties','conditions'];const sanitizePermissionFields=pick(sanitizedPermissionFields);const getDefaultPermission=()=>({'conditions':[],'properties':{},'subject':null});const addCondition=curry((_0x34855d,_0x25df37)=>{var _0x535471={'grXnj':function(_0x548173,_0x16bf52){return _0x548173(_0x16bf52);},'RErYW':function(_0x328174,_0x5e9ddb,_0x1244ff,_0xbb59aa){return _0x328174(_0x5e9ddb,_0x1244ff,_0xbb59aa);},'fpFeW':'conditions'};const {conditions}=_0x25df37;const _0x2cae0b=Array['isArray'](conditions)?_0x535471['grXnj'](uniq,conditions['concat'](_0x34855d)):[_0x34855d];return _0x535471['RErYW'](set,_0x535471['fpFeW'],_0x2cae0b,_0x25df37);});const removeCondition=curry((_0x15fec6,_0x17ebe3)=>{var _0x594395={'Xsmms':function(_0x245e76,_0x293a70,_0xd5d8ea,_0x4918b0){return _0x245e76(_0x293a70,_0xd5d8ea,_0x4918b0);},'DRgvg':function(_0x566174,_0x147caa,_0x32a04a){return _0x566174(_0x147caa,_0x32a04a);}};return _0x594395['Xsmms'](set,'conditions',_0x594395['DRgvg'](remove,eq(_0x15fec6),_0x17ebe3['conditions']),_0x17ebe3);});const getProperty=curry((_0x58a433,_0x5d2ab3)=>get('properties.'+_0x58a433,_0x5d2ab3));const setProperty=(_0x2c5c20,_0x1657c6,_0x513915)=>{return set('properties.'+_0x2c5c20,_0x1657c6,_0x513915);};const deleteProperty=(_0x3d5660,_0x4c340b)=>omit('properties.'+_0x3d5660,_0x4c340b);const create=_0x471d09=>{var _0x2fe9f0={'ZCiwc':function(_0x2b4306,_0xbf4e82){return _0x2b4306(_0xbf4e82);},'sGIGH':function(_0x55379b,_0x47d02e){return _0x55379b(_0x47d02e);},'LkPJx':function(_0xd15473){return _0xd15473();}};return pipe(_0x2fe9f0['ZCiwc'](pick,permissionFields),_0x2fe9f0['sGIGH'](merge,_0x2fe9f0['LkPJx'](getDefaultPermission)))(_0x471d09);};const sanitizeConditions=curry((_0x2ef847,_0x32e216)=>{if(!isArray(_0x32e216['conditions'])){return _0x32e216;}return _0x32e216['conditions']['filter'](_0x236126=>!_0x2ef847['has'](_0x236126))['reduce']((_0x3ea3f2,_0x23b644)=>removeCondition(_0x23b644,_0x3ea3f2),_0x32e216);});const toPermission=_0x56d3c1=>isArray(_0x56d3c1)?map(create,_0x56d3c1):create(_0x56d3c1);module['exports']={'addCondition':addCondition,'removeCondition':removeCondition,'create':create,'deleteProperty':deleteProperty,'permissionFields':permissionFields,'getProperty':getProperty,'sanitizedPermissionFields':sanitizedPermissionFields,'sanitizeConditions':sanitizeConditions,'sanitizePermissionFields':sanitizePermissionFields,'setProperty':setProperty,'toPermission':toPermission};