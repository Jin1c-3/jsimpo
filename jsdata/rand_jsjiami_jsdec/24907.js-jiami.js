const assert=require('assert');const _=require('lodash');const request=require('supertest');const jsonServer=require('../../src/server');describe('Server',()=>{var _0x52b9b3={'ExUYa':function(_0xad34be,_0x35229e,_0x208eb8){return _0xad34be(_0x35229e,_0x208eb8);},'GCZvb':'should\x20be\x20possible\x20to\x20wrap\x20response','LiMkh':function(_0x5ebcf1,_0x2af2ee){return _0x5ebcf1!==_0x2af2ee;},'ZltNy':'oUzXi','MxOVJ':'hVzVd','bWVOQ':'foo','bRufn':'Technology','FAMHv':'photo','oyASG':'Jim','jGUJl':'George','uhaqF':'123','UOumk':'bar','izhBo':'quux','SJwYY':'Aileen','eATMF':'Colombia','SGvWy':'Barney','xCphV':'Daniel','PQJAc':'Belize','EcgHr':'Frank','vEEEU':'Argentina','NQpll':'Henry','QVuQi':'abcd-1234','dcTan':'http://example.com','ecbJr':'1234','xdwnH':'cheatem','LFBOV':'howe','NLwBf':function(_0x40252a,_0x4127e7){return _0x40252a(_0x4127e7);},'tJfmo':'/posts/1?_embed=comments','sDwYQ':'Content-Type','DtPxf':function(_0x832101,_0x48d87d){return _0x832101===_0x48d87d;},'gCNsx':'MIwdu','nsqbY':function(_0xb44542,_0x42fbf6,_0x197f21){return _0xb44542(_0x42fbf6,_0x197f21);},'AALtM':'should respond with json and full database','QQglR':'should\x20respond\x20with\x20404\x20if\x20resource\x20is\x20not\x20found','NFZTO':'okqEm','NwJHC':function(_0x4d84c3,_0x694134){return _0x4d84c3(_0x694134);},'LOmPS':'muuVT','hRBAH':function(_0x2d36f4,_0x2d6bfc,_0x17abed){return _0x2d36f4(_0x2d6bfc,_0x17abed);},'VNyYC':'should respond with json and filter resources','YwFJi':'should\x20be\x20strict','QxSvM':'should support multiple filters','HdQkx':function(_0x5414c3,_0x4f9b07,_0xdf98d6){return _0x5414c3(_0x4f9b07,_0xdf98d6);},'UwGzI':'should support deep filter','zeesO':'should not fail with null value','lstxW':'should support filtering by boolean value false','XSVmG':'should respond with a sliced array','XaboS':'should respond with json and sort on a field','VnjMa':function(_0x545d30,_0x47c7a8,_0x2160df){return _0x545d30(_0x47c7a8,_0x2160df);},'EwdjQ':'should sort on numerical field','FgWNP':function(_0x53fbf0,_0x1f95de,_0x37cdfe){return _0x53fbf0(_0x1f95de,_0x37cdfe);},'PUqjM':'should sort on nested field','VRALf':function(_0x23ccec,_0x48761a){return _0x23ccec!==_0x48761a;},'zmsBT':'KLNXW','qeXmN':function(_0x385ad2,_0x395a95,_0x20f88f){return _0x385ad2(_0x395a95,_0x20f88f);},'Olwep':'should reverse sorting with _order=DESC','BpFXM':function(_0x5ed952,_0x13dd30,_0x11a0e1){return _0x5ed952(_0x13dd30,_0x11a0e1);},'iJgfj':'should reverse sorting with _order=desc (case insensitive)','eOjRJ':'WBJlH','DHZKr':'should\x20respond\x20with\x20a\x20limited\x20array','ADizW':'should paginate','Qvwce':'<http://localhost/list?_page=15&_limit=1>; rel="last"','ZVjDC':'localhost','wQKOh':'x-total-count','lAmXE':'link','shteO':function(_0x50b087,_0x1a4b51,_0x15e995){return _0x50b087(_0x1a4b51,_0x15e995);},'eoGIY':'should\x20paginate\x20with\x20a\x20custom\x20limit','mvSlt':function(_0x3b04c9,_0x3f2751,_0x2c89ab){return _0x3b04c9(_0x3f2751,_0x2c89ab);},'LFfJr':'should\x20accept\x20multiple\x20parameters','sZpbP':'should respond with an array that matches the like operator (case insensitive)','mmmwA':function(_0x4bc858,_0x245313){return _0x4bc858===_0x245313;},'rHspp':'pAPAb','hDAem':'QVHRL','xUtAI':function(_0x5c21c5,_0x30d3a6,_0x2729ca){return _0x5c21c5(_0x30d3a6,_0x2729ca);},'cWpZa':'/comments/1?_expand=post','hKnJs':function(_0x3a2a40,_0x51b108){return _0x3a2a40!==_0x51b108;},'hDVPL':'ynZFx','WlyFt':'GBepj','YMRzZ':function(_0x1c05e9,_0x2c7d06,_0x17c197){return _0x1c05e9(_0x2c7d06,_0x17c197);},'MrUwc':'should respond with json and corresponding nested resources','wSKOO':function(_0x4e1c0d,_0x3a11b3){return _0x4e1c0d===_0x3a11b3;},'PMpcw':'ZpBtl','VCfwH':'should support string id, respond with json and corresponding resource','UfnGb':function(_0x537a04,_0x47d838,_0x1982bd){return _0x537a04(_0x47d838,_0x1982bd);},'Uvrmq':'should support integer id as string','chBlL':'VXFvU','ESASK':'RXLMj','EsMVp':'/posts?_embed=comments','ukFff':'should\x20respond\x20with\x20corresponding\x20resources\x20and\x20embedded\x20resources','gfwXW':'qYAln','fWCWM':'/posts?_embed=comments&_embed=refs','hYpfl':function(_0x356d4f,_0x3de026){return _0x356d4f(_0x3de026);},'rmOeM':'dvsAT','AbpgA':function(_0x45abc1,_0x3763a6,_0x9b34d){return _0x45abc1(_0x3763a6,_0x9b34d);},'teyoL':'/firstpostwithcomments','lLHjV':function(_0xf868ce,_0x3c2fa7){return _0xf868ce!==_0x3c2fa7;},'ahzZn':'dlTor','gYGDD':'should respond with corresponding resource and embedded resources','mVafh':function(_0x4d2840,_0x14af9e){return _0x4d2840!==_0x14af9e;},'wzTqQ':'ToHFp','pAmqu':'/refs?_expand=post','HiwDx':'should respond with corresponding resource and expanded inner resources','dvZDB':function(_0x41a8bb,_0x25eba2){return _0x41a8bb>_0x25eba2;},'JCuvJ':'should delay response','HKsVj':function(_0x421b7d,_0x510bb9){return _0x421b7d(_0x510bb9);},'zErxI':'/refs?_expand=post&_expand=user','SSoMV':function(_0x56105d,_0x3a067b,_0x590cc8){return _0x56105d(_0x3a067b,_0x590cc8);},'zaVgo':function(_0x35e97a,_0x41b2cc,_0x33b301){return _0x35e97a(_0x41b2cc,_0x33b301);},'IYVKN':function(_0x531f14,_0x2ac176){return _0x531f14(_0x2ac176);},'yttKL':function(_0x1e738e,_0x295176){return _0x1e738e(_0x295176);},'vlobc':function(_0x2affd2,_0x45bdac){return _0x2affd2!==_0x45bdac;},'OOFOL':function(_0x4a4586,_0x6d0a36){return _0x4a4586-_0x6d0a36;},'JpXyt':'Request\x20wasn\x27t\x20delayed','eUQHj':'/posts?_delay=1100','nUgtT':'MXeYx','IqzRB':function(_0x116aee,_0x5e9383,_0x9423f9){return _0x116aee(_0x5e9383,_0x9423f9);},'ULTbc':function(_0x4f3588,_0x1a2aca){return _0x4f3588(_0x1a2aca);},'egIST':'/posts','IxuCJ':'Location','XBScz':'GCMMO','bKiYb':'http://foo.com','XTcxM':function(_0x3cf4f1,_0x54ad84,_0x1d2b0f){return _0x3cf4f1(_0x54ad84,_0x1d2b0f);},'uuorw':function(_0x69cda6,_0x3027c9,_0x587bd2){return _0x69cda6(_0x3027c9,_0x587bd2);},'bkSDa':'should respond with json, create a resource and generate string id','PQPrK':'/posts/1?_delay=1100','bbFqW':'FiUvs','dnVOF':'FgVPz','HmeJu':function(_0x50faaa,_0x3b9b08,_0x3f0a4a){return _0x50faaa(_0x3b9b08,_0x3f0a4a);},'GIcgH':function(_0x38ffd3,_0x1deec5){return _0x38ffd3!==_0x1deec5;},'qUVXc':'zgWli','hmaFh':'/posts/1','klQjl':'Accept','RaAcf':function(_0x3cb950,_0x43a4f8,_0xc99d6b){return _0x3cb950(_0x43a4f8,_0xc99d6b);},'nAjpO':'should respond with json and replace resource','Gzzqk':'should respond with html','eRHcJ':'should respond with css','MLuFu':function(_0x127d19,_0xc977fb){return _0x127d19>_0xc977fb;},'zeqnJ':function(_0x1d2f2b,_0x586d22){return _0x1d2f2b-_0x586d22;},'couGG':function(_0x5436f8,_0x102b30){return _0x5436f8===_0x102b30;},'Dqnvb':'KGuFe','VONXy':'application/json','ssuQb':'GET /','UzvwB':'GET /script.js','irxVJ':'GET /style.css','VLSyP':function(_0x1d31e2,_0x7ce2b3,_0x145079){return _0x1d31e2(_0x7ce2b3,_0x145079);},'RXgYP':function(_0x6618dc,_0x2b5444,_0x9ba5f8){return _0x6618dc(_0x2b5444,_0x9ba5f8);},'mzBXN':'should\x20respond\x20with\x20json\x20and\x20update\x20resource','nrhoB':'should return an empty array when nothing is matched','xtSir':function(_0x4db7f9,_0x51b9af){return _0x4db7f9(_0x51b9af);},'ADBlZ':function(_0x1d9ddf,_0x53c3e0,_0x1e7b26){return _0x1d9ddf(_0x53c3e0,_0x1e7b26);},'xeLUC':function(_0x5ec0b9,_0x4aa87b,_0x26163e){return _0x5ec0b9(_0x4aa87b,_0x26163e);},'ehyyq':'should\x20be\x20accessible','GxqiK':function(_0x5f62fa,_0x376874){return _0x5f62fa!==_0x376874;},'hObaf':'UlkSN','GHicd':function(_0x2b5820,_0x2007f,_0x1e5bec){return _0x2b5820(_0x2007f,_0x1e5bec);},'NcPJF':function(_0x56c41f,_0x5e4f5a,_0x56734a){return _0x56c41f(_0x5e4f5a,_0x56734a);},'SszdA':function(_0x443395,_0x18e14f){return _0x443395(_0x18e14f);},'jpCTP':function(_0x4b8f46,_0x3d2623,_0x17e990){return _0x4b8f46(_0x3d2623,_0x17e990);},'EkdVP':'UhGaI','uTCZI':'should respond with js','MhGfk':'zSCWE','Hdhiy':'AjYCy','fVoyo':function(_0xa02e22,_0x231628){return _0xa02e22!==_0x231628;},'unqyh':'OgdFn','JPcFj':'dKCrQ','AyXeu':function(_0x107b2b,_0x771c28,_0x438a75){return _0x107b2b(_0x771c28,_0x438a75);},'Zepxi':'should have no cache headers (for IE)','nPqXM':function(_0x196262,_0x1c79f1,_0x5c6fda){return _0x196262(_0x1c79f1,_0x5c6fda);},'HrSfE':'should\x20rewrite\x20using\x20prefix','DJytk':'should rewrite using params','HnnrA':'should\x20rewrite\x20using\x20params\x20and\x20query','TscMj':'should rewrite query params','fthTf':'should ignore JSONP query parameters callback and _ ','cuuys':'SDCBW','SdfTB':function(_0xeadc87,_0x7a6d83){return _0xeadc87(_0x7a6d83);},'hNCRw':function(_0x43c331,_0x50d481,_0x3ad7fa){return _0x43c331(_0x50d481,_0x3ad7fa);},'rjqIy':function(_0x32525b,_0x34d32a,_0x3bf1ad){return _0x32525b(_0x34d32a,_0x3bf1ad);},'XYmoY':'mNxTW','tThzP':'_id','RFIWW':function(_0x1b2a83,_0x318728,_0x205ff8){return _0x1b2a83(_0x318728,_0x205ff8);},'bCCbA':'should be possible to GET using a different id property','TLyyk':'/$1','WJfRw':'/posts/:id','nwXhC':'/comments/?userId=:userId&body=:body','OrNVl':function(_0x50dbb4,_0x5b9e05,_0x5eb8eb){return _0x50dbb4(_0x5b9e05,_0x5eb8eb);},'QQeLo':'GET\x20/db','xzPSv':'GET /:resource?attr=&attr=','KXIjH':'GET\x20/:resource?q=','gSTPC':'GET\x20/:resource?_end=','XdHpB':'GET\x20/:resource?_sort=','ABsMI':function(_0x45e13a,_0x2acf72,_0x5945f6){return _0x45e13a(_0x2acf72,_0x5945f6);},'eLZqI':'GET /:resource?_start=&_end=','fzGBD':function(_0x316e7a,_0x4909da,_0x104f44){return _0x316e7a(_0x4909da,_0x104f44);},'AynJp':'GET /:resource?_start=&_limit=','JvPAG':function(_0x1dfbcb,_0x299b22,_0x4f7854){return _0x1dfbcb(_0x299b22,_0x4f7854);},'IJfLa':'GET /:resource?_page=','JqMXw':'GET /:resource?attr_gte=&attr_lte=','EqRzw':function(_0x491c20,_0x2033ee,_0x495369){return _0x491c20(_0x2033ee,_0x495369);},'TuXYs':'GET\x20/:resource?attr_ne=','BOgoU':function(_0x2997f5,_0x31782c,_0x503ff8){return _0x2997f5(_0x31782c,_0x503ff8);},'rVECm':'GET\x20/:parent/:parentId/:resource','VGZyG':function(_0x165712,_0x3c5c55,_0x244a46){return _0x165712(_0x3c5c55,_0x244a46);},'PfCIe':'GET /:resource/:id','fNGgP':'GET /:resource?_embed=','oAkqW':'GET /:resource?_embed&_embed=','AYTmE':function(_0x47c226,_0x59c9c2,_0x41ae6b){return _0x47c226(_0x59c9c2,_0x41ae6b);},'jsVwL':function(_0x2be6ce,_0x1c33b9,_0x2f8e86){return _0x2be6ce(_0x1c33b9,_0x2f8e86);},'uKLYj':function(_0x490f48,_0x399b7f,_0x245504){return _0x490f48(_0x399b7f,_0x245504);},'BRnIX':'GET /:resource?_expand=','QMlvq':'GET\x20/:resource/:id?_expand=','bhIZq':'GET\x20/:resource?_expand=&_expand','vIauo':'GET /:resource/:id?_expand=&_expand=','AOlPw':function(_0xd4e7e6,_0x43989c,_0x56bfe9){return _0xd4e7e6(_0x43989c,_0x56bfe9);},'bnoGm':'GET\x20/:resource>_delay=','SyDzN':'POST /:resource','MaWBf':function(_0x5e80f5,_0x3b3404,_0x56085d){return _0x5e80f5(_0x3b3404,_0x56085d);},'xIzwF':'POST /:parent/:parentId/:resource','CGAHI':function(_0x1fe7b0,_0x39b574,_0x249da3){return _0x1fe7b0(_0x39b574,_0x249da3);},'CgbWk':'POST /:resource?_delay=','hcQTo':'PUT /:resource/:id','bYxMi':'PUT /:resource:id?_delay=','GGkZq':function(_0x3a388c,_0xbdfaf9,_0x443ee7){return _0x3a388c(_0xbdfaf9,_0x443ee7);},'hWRoQ':'PATCH\x20/:resource/:id','wUJqx':function(_0x4d2082,_0x3edfa6,_0x5d2db6){return _0x4d2082(_0x3edfa6,_0x5d2db6);},'ILrCB':function(_0x13b7fe,_0x5f2217,_0x47e962){return _0x13b7fe(_0x5f2217,_0x47e962);},'RZFww':'DELETE /:resource/:id','EfTNv':'DELETE /:resource:id?_delay=','YyCRX':function(_0x3c1dda,_0x21e160,_0x321b49){return _0x3c1dda(_0x21e160,_0x321b49);},'Elacg':'Static\x20routes','iZfEn':function(_0x28686c,_0x3b2db7,_0x46eae0){return _0x28686c(_0x3b2db7,_0x46eae0);},'QZzzs':'Responses','cVKHh':'Rewriter','HXbSY':function(_0x20efb9,_0x54a6dd,_0x1aeffb){return _0x20efb9(_0x54a6dd,_0x1aeffb);},'LLnIo':'router.render'};let _0x562eb8;let _0x8deef2;let _0xa66de7;const _0x4943b0={'/api/*':_0x52b9b3['TLyyk'],'/blog/posts/:id/show':_0x52b9b3['WJfRw'],'/comments/special/:userId-:body':_0x52b9b3['nwXhC'],'/firstpostwithcomments':_0x52b9b3['tJfmo'],'/articles\\?_id=:id':'/posts/:id'};beforeEach(()=>{if(_0x52b9b3['LiMkh'](_0x52b9b3['ZltNy'],_0x52b9b3['MxOVJ'])){_0xa66de7={};_0xa66de7['posts']=[{'id':0x1,'body':_0x52b9b3['bWVOQ']},{'id':0x2,'body':'bar'}];_0xa66de7['tags']=[{'id':0x1,'body':_0x52b9b3['bRufn']},{'id':0x2,'body':'Photography'},{'id':0x3,'body':_0x52b9b3['FAMHv']}];_0xa66de7['users']=[{'id':0x1,'username':_0x52b9b3['oyASG'],'tel':'0123'},{'id':0x2,'username':_0x52b9b3['jGUJl'],'tel':_0x52b9b3['uhaqF']}];_0xa66de7['comments']=[{'id':0x1,'body':_0x52b9b3['bWVOQ'],'published':!![],'postId':0x1,'userId':0x1},{'id':0x2,'body':_0x52b9b3['UOumk'],'published':![],'postId':0x1,'userId':0x2},{'id':0x3,'body':'baz','published':![],'postId':0x2,'userId':0x1},{'id':0x4,'body':'qux','published':!![],'postId':0x2,'userId':0x2},{'id':0x5,'body':_0x52b9b3['izhBo'],'published':![],'postId':0x2,'userId':0x1}];_0xa66de7['buyers']=[{'id':0x1,'name':_0x52b9b3['SJwYY'],'country':_0x52b9b3['eATMF'],'total':0x64},{'id':0x2,'name':_0x52b9b3['SGvWy'],'country':'Colombia','total':0xc8},{'id':0x3,'name':'Carley','country':'Colombia','total':0x12c},{'id':0x4,'name':_0x52b9b3['xCphV'],'country':_0x52b9b3['PQJAc'],'total':0x1e},{'id':0x5,'name':'Ellen','country':_0x52b9b3['PQJAc'],'total':0x14},{'id':0x6,'name':_0x52b9b3['EcgHr'],'country':'Belize','total':0xa},{'id':0x7,'name':'Grace','country':_0x52b9b3['vEEEU'],'total':0x1},{'id':0x8,'name':_0x52b9b3['NQpll'],'country':_0x52b9b3['vEEEU'],'total':0x2},{'id':0x9,'name':'Isabelle','country':_0x52b9b3['vEEEU'],'total':0x3}];_0xa66de7['refs']=[{'id':_0x52b9b3['QVuQi'],'url':_0x52b9b3['dcTan'],'postId':0x1,'userId':0x1}];_0xa66de7['stringIds']=[{'id':_0x52b9b3['ecbJr']}];_0xa66de7['deep']=[{'a':{'b':0x1}},{'a':0x1}];_0xa66de7['nested']=[{'resource':{'name':'dewey'}},{'resource':{'name':_0x52b9b3['xdwnH']}},{'resource':{'name':_0x52b9b3['LFBOV']}}];_0xa66de7['list']=[{'id':0x1},{'id':0x2},{'id':0x3},{'id':0x4},{'id':0x5},{'id':0x6},{'id':0x7},{'id':0x8},{'id':0x9},{'id':0xa},{'id':0xb},{'id':0xc},{'id':0xd},{'id':0xe},{'id':0xf}];_0x562eb8=jsonServer['create']();_0x8deef2=jsonServer['router'](_0xa66de7);_0x562eb8['use'](jsonServer['defaults']());_0x562eb8['use'](jsonServer['rewriter'](_0x4943b0));_0x562eb8['use'](_0x8deef2);}else{beforeEach(()=>{_0x8deef2['render']=(_0x14860b,_0x223212)=>{_0x223212['jsonp']({'data':_0x223212['locals']['data']});};});_0x52b9b3['ExUYa'](test,_0x52b9b3['GCZvb'],()=>request(_0x562eb8)['get']('/posts/1')['expect']('Content-Type',/json/)['expect'](0xc8,{'data':_0xa66de7['posts'][0x0]}));}});_0x52b9b3['OrNVl'](describe,_0x52b9b3['QQeLo'],()=>{var _0x250227={'XgnGY':function(_0x566d31,_0x41acf8){return _0x52b9b3['NLwBf'](_0x566d31,_0x41acf8);},'tfNRG':_0x52b9b3['tJfmo'],'ohYwd':_0x52b9b3['sDwYQ']};if(_0x52b9b3['DtPxf'](_0x52b9b3['gCNsx'],'WBaah')){const _0x67fed9=_['cloneDeep'](_0xa66de7['posts'][0x0]);_0x67fed9['comments']=[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]];return _0x250227['XgnGY'](request,_0x562eb8)['get'](_0x250227['tfNRG'])['expect'](_0x250227['ohYwd'],/json/)['expect'](0xc8,_0x67fed9);}else{_0x52b9b3['nsqbY'](test,_0x52b9b3['AALtM'],()=>request(_0x562eb8)['get']('/db')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7));}});describe('GET\x20/:resource',()=>{test('should respond with json and corresponding resources',()=>request(_0x562eb8)['get']('/posts')['set']('Origin','http://example.com')['expect']('Content-Type',/json/)['expect']('Access-Control-Allow-Credentials','true')['expect']('Access-Control-Allow-Origin','http://example.com')['expect'](0xc8,_0xa66de7['posts']));test(_0x52b9b3['QQglR'],()=>request(_0x562eb8)['get']('/undefined')['expect'](0x194));});describe(_0x52b9b3['xzPSv'],()=>{var _0x578699={'FNCPR':function(_0xcfc83b,_0x56baa8){return _0xcfc83b>_0x56baa8;},'PkvgL':function(_0x18f7e7,_0x3a7d7a){return _0x18f7e7-_0x3a7d7a;},'EbHqj':'Request wasn\'t delayed','OHyXu':function(_0x24cde9,_0x14788a){return _0x52b9b3['LiMkh'](_0x24cde9,_0x14788a);},'PyrAg':_0x52b9b3['NFZTO'],'RVWfx':'pnxaz','qnChn':function(_0x1938a5,_0x587a71){return _0x52b9b3['NwJHC'](_0x1938a5,_0x587a71);},'OBKtZ':'/posts?body=foo','qbtem':_0x52b9b3['sDwYQ']};if(_0x52b9b3['LiMkh'](_0x52b9b3['LOmPS'],'muuVT')){_0x52b9b3['NLwBf'](assert,_0x8deef2['db']['getState']());}else{_0x52b9b3['hRBAH'](test,_0x52b9b3['VNyYC'],()=>request(_0x562eb8)['get']('/comments?postId=1&published=true')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x0]]));_0x52b9b3['hRBAH'](test,_0x52b9b3['YwFJi'],()=>request(_0x562eb8)['get']('/users?tel=123')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['users'][0x1]]));_0x52b9b3['hRBAH'](test,_0x52b9b3['QxSvM'],()=>request(_0x562eb8)['get']('/comments?id=1&id=2')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]]));_0x52b9b3['HdQkx'](test,_0x52b9b3['UwGzI'],()=>request(_0x562eb8)['get']('/deep?a.b=1')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['deep'][0x0]]));_0x52b9b3['HdQkx'](test,'should ignore JSONP query parameters callback and _ ',()=>request(_0x562eb8)['get']('/comments?callback=1&_=1')['expect']('Content-Type',/text/)['expect'](new RegExp(_0xa66de7['comments'][0x0]['body']))['expect'](0xc8));_0x52b9b3['HdQkx'](test,'should\x20ignore\x20unknown\x20query\x20parameters',()=>request(_0x562eb8)['get']('/comments?foo=1&bar=2')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['comments']));_0x52b9b3['HdQkx'](test,_0x52b9b3['zeesO'],()=>{if(_0x578699['OHyXu'](_0x578699['PyrAg'],_0x578699['RVWfx'])){_0xa66de7['posts']['push']({'id':0x63,'body':null});return _0x578699['qnChn'](request,_0x562eb8)['get'](_0x578699['OBKtZ'])['expect'](_0x578699['qbtem'],/json/)['expect'](0xc8,[_0xa66de7['posts'][0x0]]);}else{const _0xc3276c=new Date();done(_0x578699['FNCPR'](_0x578699['PkvgL'](_0xc3276c,start),0x3e8)?err:new Error(_0x578699['EbHqj']));}});}});_0x52b9b3['OrNVl'](describe,_0x52b9b3['KXIjH'],()=>{_0x52b9b3['HdQkx'](test,'should respond with json and make a full-text search',()=>request(_0x562eb8)['get']('/tags?q=pho')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x1],_0xa66de7['tags'][0x2]]));test('should respond with json and make a deep full-text search',()=>request(_0x562eb8)['get']('/deep?q=1')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['deep']));_0x52b9b3['HdQkx'](test,'should return an empty array when nothing is matched',()=>request(_0x562eb8)['get']('/tags?q=nope')['expect']('Content-Type',/json/)['expect'](0xc8,[]));test('should support other query parameters',()=>request(_0x562eb8)['get']('/comments?q=qu&published=true')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x3]]));test('should\x20ignore\x20duplicate\x20q\x20query\x20parameters',()=>request(_0x562eb8)['get']('/comments?q=foo&q=bar')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x0]]));test(_0x52b9b3['lstxW'],()=>request(_0x562eb8)['get']('/comments?published=false')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x1],_0xa66de7['comments'][0x2],_0xa66de7['comments'][0x4]]));});_0x52b9b3['OrNVl'](describe,_0x52b9b3['gSTPC'],()=>{_0x52b9b3['HdQkx'](test,_0x52b9b3['XSVmG'],()=>request(_0x562eb8)['get']('/comments?_end=2')['expect']('Content-Type',/json/)['expect']('x-total-count',_0xa66de7['comments']['length']['toString']())['expect']('Access-Control-Expose-Headers','X-Total-Count')['expect'](0xc8,_0xa66de7['comments']['slice'](0x0,0x2)));});describe(_0x52b9b3['XdHpB'],()=>{if(_0x52b9b3['VRALf']('KLNXW',_0x52b9b3['zmsBT'])){test(_0x52b9b3['XaboS'],()=>request(_0x562eb8)['get']('/tags?_sort=body')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x1],_0xa66de7['tags'][0x0],_0xa66de7['tags'][0x2]]));_0x52b9b3['HdQkx'](test,'should reverse sorting with _order=DESC',()=>request(_0x562eb8)['get']('/tags?_sort=body&_order=DESC')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x2],_0xa66de7['tags'][0x0],_0xa66de7['tags'][0x1]]));_0x52b9b3['VnjMa'](test,'should reverse sorting with _order=desc (case insensitive)',()=>request(_0x562eb8)['get']('/tags?_sort=body&_order=desc')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x2],_0xa66de7['tags'][0x0],_0xa66de7['tags'][0x1]]));_0x52b9b3['VnjMa'](test,_0x52b9b3['EwdjQ'],()=>request(_0x562eb8)['get']('/posts?_sort=id&_order=DESC')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['posts']['reverse']()));_0x52b9b3['FgWNP'](test,_0x52b9b3['PUqjM'],()=>request(_0x562eb8)['get']('/nested?_sort=resource.name')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['nested'][0x1],_0xa66de7['nested'][0x0],_0xa66de7['nested'][0x2]]));test('should sort on multiple fields',()=>request(_0x562eb8)['get']('/buyers?_sort=country,total&_order=asc,desc')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['buyers'][0x8],_0xa66de7['buyers'][0x7],_0xa66de7['buyers'][0x6],_0xa66de7['buyers'][0x3],_0xa66de7['buyers'][0x4],_0xa66de7['buyers'][0x5],_0xa66de7['buyers'][0x2],_0xa66de7['buyers'][0x1],_0xa66de7['buyers'][0x0]]));}else{var _0x33dffb='3|0|5|1|4|2'['split']('|'),_0x27484a=0x0;while(!![]){switch(_0x33dffb[_0x27484a++]){case'0':_0x52b9b3['qeXmN'](test,_0x52b9b3['Olwep'],()=>request(_0x562eb8)['get']('/tags?_sort=body&_order=DESC')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x2],_0xa66de7['tags'][0x0],_0xa66de7['tags'][0x1]]));continue;case'1':test(_0x52b9b3['EwdjQ'],()=>request(_0x562eb8)['get']('/posts?_sort=id&_order=DESC')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['posts']['reverse']()));continue;case'2':test('should sort on multiple fields',()=>request(_0x562eb8)['get']('/buyers?_sort=country,total&_order=asc,desc')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['buyers'][0x8],_0xa66de7['buyers'][0x7],_0xa66de7['buyers'][0x6],_0xa66de7['buyers'][0x3],_0xa66de7['buyers'][0x4],_0xa66de7['buyers'][0x5],_0xa66de7['buyers'][0x2],_0xa66de7['buyers'][0x1],_0xa66de7['buyers'][0x0]]));continue;case'3':_0x52b9b3['BpFXM'](test,'should respond with json and sort on a field',()=>request(_0x562eb8)['get']('/tags?_sort=body')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x1],_0xa66de7['tags'][0x0],_0xa66de7['tags'][0x2]]));continue;case'4':test(_0x52b9b3['PUqjM'],()=>request(_0x562eb8)['get']('/nested?_sort=resource.name')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['nested'][0x1],_0xa66de7['nested'][0x0],_0xa66de7['nested'][0x2]]));continue;case'5':test(_0x52b9b3['iJgfj'],()=>request(_0x562eb8)['get']('/tags?_sort=body&_order=desc')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x2],_0xa66de7['tags'][0x0],_0xa66de7['tags'][0x1]]));continue;}break;}}});_0x52b9b3['ABsMI'](describe,_0x52b9b3['eLZqI'],()=>{_0x52b9b3['BpFXM'](test,'should\x20respond\x20with\x20a\x20sliced\x20array',()=>request(_0x562eb8)['get']('/comments?_start=1&_end=2')['expect']('Content-Type',/json/)['expect']('X-Total-Count',_0xa66de7['comments']['length']['toString']())['expect']('Access-Control-Expose-Headers','X-Total-Count')['expect'](0xc8,_0xa66de7['comments']['slice'](0x1,0x2)));});_0x52b9b3['fzGBD'](describe,_0x52b9b3['AynJp'],()=>{if(_0x52b9b3['eOjRJ']!==_0x52b9b3['eOjRJ']){res['jsonp']({'data':res['locals']['data']});}else{test(_0x52b9b3['DHZKr'],()=>request(_0x562eb8)['get']('/comments?_start=1&_limit=1')['expect']('Content-Type',/json/)['expect']('X-Total-Count',_0xa66de7['comments']['length']['toString']())['expect']('Access-Control-Expose-Headers','X-Total-Count')['expect'](0xc8,_0xa66de7['comments']['slice'](0x1,0x2)));}});_0x52b9b3['JvPAG'](describe,_0x52b9b3['IJfLa'],()=>{_0x52b9b3['BpFXM'](test,_0x52b9b3['ADizW'],()=>request(_0x562eb8)['get']('/list?_page=2')['expect']('Content-Type',/json/)['expect']('x-total-count',_0xa66de7['list']['length']['toString']())['expect']('Access-Control-Expose-Headers','X-Total-Count, Link')['expect'](0xc8,_0xa66de7['list']['slice'](0xa,0x14)));});_0x52b9b3['JvPAG'](describe,'GET /:resource?_page=&_limit=',()=>{var _0x446457={'TTboA':'<http://localhost/list?_page=1&_limit=1>; rel="prev"','nllvW':_0x52b9b3['Qvwce'],'HqsMX':function(_0x354180,_0x53a61c){return _0x354180(_0x53a61c);},'aKfOe':'/list?_page=2&_limit=1','oDBGN':'host','NMlOd':_0x52b9b3['ZVjDC'],'vIXus':'Content-Type','oXpVY':_0x52b9b3['wQKOh'],'ZWiBY':_0x52b9b3['lAmXE'],'zpjzw':'X-Total-Count, Link'};_0x52b9b3['shteO'](test,_0x52b9b3['eoGIY'],()=>{const _0x469689=['<http://localhost/list?_page=1&_limit=1>;\x20rel=\x22first\x22',_0x446457['TTboA'],'<http://localhost/list?_page=3&_limit=1>; rel="next"',_0x446457['nllvW']]['join'](',\x20');return _0x446457['HqsMX'](request,_0x562eb8)['get'](_0x446457['aKfOe'])['set'](_0x446457['oDBGN'],_0x446457['NMlOd'])['expect'](_0x446457['vIXus'],/json/)['expect'](_0x446457['oXpVY'],_0xa66de7['list']['length']['toString']())['expect'](_0x446457['ZWiBY'],_0x469689)['expect']('Access-Control-Expose-Headers',_0x446457['zpjzw'])['expect'](0xc8,_0xa66de7['list']['slice'](0x1,0x2));});});_0x52b9b3['JvPAG'](describe,_0x52b9b3['JqMXw'],()=>{_0x52b9b3['mvSlt'](test,_0x52b9b3['DHZKr'],()=>request(_0x562eb8)['get']('/comments?id_gte=2&id_lte=3')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['comments']['slice'](0x1,0x3)));});_0x52b9b3['EqRzw'](describe,_0x52b9b3['TuXYs'],()=>{test('should respond with a limited array',()=>request(_0x562eb8)['get']('/comments?id_ne=1')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['comments']['slice'](0x1)));test(_0x52b9b3['LFfJr'],()=>request(_0x562eb8)['get']('/comments?id_ne=1&id_ne=2')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['comments']['slice'](0x2)));});_0x52b9b3['BOgoU'](describe,'GET\x20/:resource?attr_like=',()=>{if(_0x52b9b3['mmmwA'](_0x52b9b3['rHspp'],_0x52b9b3['hDAem'])){test(_0x52b9b3['sZpbP'],()=>request(_0x562eb8)['get']('/tags?body_like=photo')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x1],_0xa66de7['tags'][0x2]]));_0x52b9b3['mvSlt'](test,'should\x20accept\x20multiple\x20parameters',()=>request(_0x562eb8)['get']('/tags?body_like=photo&body_like=tech')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['tags']));}else{_0x52b9b3['mvSlt'](test,_0x52b9b3['sZpbP'],()=>request(_0x562eb8)['get']('/tags?body_like=photo')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x1],_0xa66de7['tags'][0x2]]));_0x52b9b3['xUtAI'](test,_0x52b9b3['LFfJr'],()=>request(_0x562eb8)['get']('/tags?body_like=photo&body_like=tech')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['tags']));}});describe(_0x52b9b3['rVECm'],()=>{var _0x2b58ec={'FTVZX':function(_0x14aab6,_0x23cd14){return _0x14aab6(_0x23cd14);},'LCTow':_0x52b9b3['cWpZa'],'Ujlhe':_0x52b9b3['sDwYQ']};if(_0x52b9b3['hKnJs'](_0x52b9b3['hDVPL'],_0x52b9b3['WlyFt'])){_0x52b9b3['YMRzZ'](test,_0x52b9b3['MrUwc'],()=>request(_0x562eb8)['get']('/posts/1/comments')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]]));}else{const _0x1fba2d=_['cloneDeep'](_0xa66de7['comments'][0x0]);_0x1fba2d['post']=_0xa66de7['posts'][0x0];return _0x2b58ec['FTVZX'](request,_0x562eb8)['get'](_0x2b58ec['LCTow'])['expect'](_0x2b58ec['Ujlhe'],/json/)['expect'](0xc8,_0x1fba2d);}});_0x52b9b3['VGZyG'](describe,_0x52b9b3['PfCIe'],()=>{if(_0x52b9b3['wSKOO']('SFHGW',_0x52b9b3['PMpcw'])){_0x8deef2['render']=(_0x28edcf,_0x177548)=>{_0x177548['jsonp']({'data':_0x177548['locals']['data']});};}else{_0x52b9b3['YMRzZ'](test,'should\x20respond\x20with\x20json\x20and\x20corresponding\x20resource',()=>request(_0x562eb8)['get']('/posts/1')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['posts'][0x0]));_0x52b9b3['YMRzZ'](test,_0x52b9b3['VCfwH'],()=>request(_0x562eb8)['get']('/refs/abcd-1234')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['refs'][0x0]));_0x52b9b3['UfnGb'](test,_0x52b9b3['Uvrmq'],()=>request(_0x562eb8)['get']('/stringIds/1234')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['stringIds'][0x0]));test(_0x52b9b3['QQglR'],()=>request(_0x562eb8)['get']('/posts/9001')['expect']('Content-Type',/json/)['expect'](0x194,{}));}});describe(_0x52b9b3['fNGgP'],()=>{var _0x21ee90={'vVYrl':function(_0x3d4d8d,_0x3bce99,_0x5ae784){return _0x3d4d8d(_0x3bce99,_0x5ae784);},'fESOm':'should have no cache headers (for IE)'};test(_0x52b9b3['ukFff'],()=>{if(_0x52b9b3['chBlL']===_0x52b9b3['ESASK']){_0x21ee90['vVYrl'](test,_0x21ee90['fESOm'],()=>request(_0x562eb8)['get']('/db')['expect']('Cache-Control','no-cache')['expect']('Pragma','no-cache')['expect']('Expires','-1'));}else{const _0x33fb27=_['cloneDeep'](_0xa66de7['posts']);_0x33fb27[0x0]['comments']=[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]];_0x33fb27[0x1]['comments']=[_0xa66de7['comments'][0x2],_0xa66de7['comments'][0x3],_0xa66de7['comments'][0x4]];return request(_0x562eb8)['get'](_0x52b9b3['EsMVp'])['expect'](_0x52b9b3['sDwYQ'],/json/)['expect'](0xc8,_0x33fb27);}});});describe(_0x52b9b3['oAkqW'],()=>{test('should respond with corresponding resources and embedded resources',()=>{var _0x2b0d4d={'wDDvg':function(_0x2c9a80,_0x279271){return _0x52b9b3['NwJHC'](_0x2c9a80,_0x279271);},'Pvdix':'/posts/1?_embed=comments&_embed=refs'};if(_0x52b9b3['gfwXW']===_0x52b9b3['gfwXW']){const _0x1dead7=_['cloneDeep'](_0xa66de7['posts']);_0x1dead7[0x0]['comments']=[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]];_0x1dead7[0x0]['refs']=[_0xa66de7['refs'][0x0]];_0x1dead7[0x1]['comments']=[_0xa66de7['comments'][0x2],_0xa66de7['comments'][0x3],_0xa66de7['comments'][0x4]];_0x1dead7[0x1]['refs']=[];return _0x52b9b3['NwJHC'](request,_0x562eb8)['get'](_0x52b9b3['fWCWM'])['expect'](_0x52b9b3['sDwYQ'],/json/)['expect'](0xc8,_0x1dead7);}else{const _0x56d60d=_['cloneDeep'](_0xa66de7['posts'][0x0]);_0x56d60d['comments']=[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]];_0x56d60d['refs']=[_0xa66de7['refs'][0x0]];return _0x2b0d4d['wDDvg'](request,_0x562eb8)['get'](_0x2b0d4d['Pvdix'])['expect']('Content-Type',/json/)['expect'](0xc8,_0x56d60d);}});});_0x52b9b3['AYTmE'](describe,'GET /:resource/:id?_embed=',()=>{var _0x560e6e={'OnCkN':function(_0x288a51,_0xb9a3da){return _0x52b9b3['hYpfl'](_0x288a51,_0xb9a3da);},'UWwOS':_0x52b9b3['tJfmo'],'XPMcK':_0x52b9b3['sDwYQ'],'GIYtN':function(_0x1dc9cb,_0x9bc2c,_0x424ab2){return _0x1dc9cb(_0x9bc2c,_0x424ab2);},'pOmRP':'should\x20respond\x20with\x20a\x20limited\x20array'};if('xeaTP'!==_0x52b9b3['rmOeM']){_0x52b9b3['AbpgA'](test,_0x52b9b3['ukFff'],()=>{const _0x2b9160=_['cloneDeep'](_0xa66de7['posts'][0x0]);_0x2b9160['comments']=[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]];return _0x560e6e['OnCkN'](request,_0x562eb8)['get'](_0x560e6e['UWwOS'])['expect'](_0x560e6e['XPMcK'],/json/)['expect'](0xc8,_0x2b9160);});}else{_0x560e6e['GIYtN'](test,_0x560e6e['pOmRP'],()=>request(_0x562eb8)['get']('/comments?id_gte=2&id_lte=3')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['comments']['slice'](0x1,0x3)));}});_0x52b9b3['jsVwL'](describe,'GET\x20/:resource/:id?_embed=&_embed=',()=>{var _0x3427c4={'uXGBj':function(_0x233221,_0x118d63){return _0x233221(_0x118d63);},'ADfIh':_0x52b9b3['teyoL'],'mSApU':'Content-Type'};if(_0x52b9b3['lLHjV'](_0x52b9b3['ahzZn'],_0x52b9b3['ahzZn'])){const _0x5af6f0=_['cloneDeep'](_0xa66de7['posts'][0x0]);_0x5af6f0['comments']=[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]];return _0x3427c4['uXGBj'](request,_0x562eb8)['get'](_0x3427c4['ADfIh'])['expect'](_0x5af6f0);}else{_0x52b9b3['AbpgA'](test,_0x52b9b3['gYGDD'],()=>{const _0x2212ba=_['cloneDeep'](_0xa66de7['posts'][0x0]);_0x2212ba['comments']=[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]];_0x2212ba['refs']=[_0xa66de7['refs'][0x0]];return request(_0x562eb8)['get']('/posts/1?_embed=comments&_embed=refs')['expect'](_0x3427c4['mSApU'],/json/)['expect'](0xc8,_0x2212ba);});}});_0x52b9b3['uKLYj'](describe,_0x52b9b3['BRnIX'],()=>{var _0x19da6e={'XVdXK':function(_0x7ea9c8,_0x42ae3e){return _0x7ea9c8(_0x42ae3e);},'NHHIi':_0x52b9b3['sDwYQ'],'CJBVP':function(_0x3c160a,_0x414dee){return _0x52b9b3['mVafh'](_0x3c160a,_0x414dee);},'BykpB':_0x52b9b3['wzTqQ'],'rVGFG':_0x52b9b3['pAmqu']};test(_0x52b9b3['HiwDx'],()=>{if(_0x19da6e['CJBVP'](_0x19da6e['BykpB'],_0x19da6e['BykpB'])){const _0xda7aaf=_['cloneDeep'](_0xa66de7['refs']);_0xda7aaf[0x0]['post']=_0xa66de7['posts'][0x0];return _0x19da6e['XVdXK'](request,_0x562eb8)['get']('/refs?_expand=post')['expect'](_0x19da6e['NHHIi'],/json/)['expect'](0xc8,_0xda7aaf);}else{const _0x2c02b4=_['cloneDeep'](_0xa66de7['refs']);_0x2c02b4[0x0]['post']=_0xa66de7['posts'][0x0];return _0x19da6e['XVdXK'](request,_0x562eb8)['get'](_0x19da6e['rVGFG'])['expect'](_0x19da6e['NHHIi'],/json/)['expect'](0xc8,_0x2c02b4);}});});describe(_0x52b9b3['QMlvq'],()=>{var _0x445990={'FVNSV':function(_0x536803,_0x3d5008){return _0x536803(_0x3d5008);},'kptUl':_0x52b9b3['sDwYQ']};test(_0x52b9b3['HiwDx'],()=>{const _0xf7a419=_['cloneDeep'](_0xa66de7['comments'][0x0]);_0xf7a419['post']=_0xa66de7['posts'][0x0];return _0x445990['FVNSV'](request,_0x562eb8)['get']('/comments/1?_expand=post')['expect'](_0x445990['kptUl'],/json/)['expect'](0xc8,_0xf7a419);});});_0x52b9b3['uKLYj'](describe,_0x52b9b3['bhIZq'],()=>{var _0x596965={'OcOVP':'/posts/1?_delay=1100','ikEVs':function(_0x4da4fb,_0x1716ed){return _0x52b9b3['dvZDB'](_0x4da4fb,_0x1716ed);},'dxDQq':_0x52b9b3['JCuvJ'],'PKDvB':'pNBKZ','zNHKb':'FFZJN','yIiez':function(_0x205986,_0x3e1365){return _0x52b9b3['HKsVj'](_0x205986,_0x3e1365);},'XvPfP':_0x52b9b3['zErxI']};_0x52b9b3['SSoMV'](test,_0x52b9b3['HiwDx'],()=>{var _0x3d251a={'OxGSp':_0x596965['OcOVP'],'YXZdd':function(_0x1ba53e,_0x353db4){return _0x596965['ikEVs'](_0x1ba53e,_0x353db4);},'AIcOY':function(_0x3d48db,_0x573456,_0x52eec0){return _0x3d48db(_0x573456,_0x52eec0);},'AcKJu':_0x596965['dxDQq']};if(_0x596965['PKDvB']===_0x596965['zNHKb']){var _0x76ed30={'oQWWO':function(_0x2d2e96,_0x3e9a77){return _0x2d2e96(_0x3e9a77);},'qYxrq':function(_0x2a7171,_0x2c2b4f){return _0x3d251a['YXZdd'](_0x2a7171,_0x2c2b4f);}};_0x3d251a['AIcOY'](test,_0x3d251a['AcKJu'],_0xd77464=>{const _0x5c2b58=new Date();request(_0x562eb8)['del'](_0x3d251a['OxGSp'])['send']({'id':0x1,'booleanValue':!![],'integerValue':0x1})['expect'](0xc8,function(_0x1dfe4e){const _0x10627d=new Date();_0x76ed30['oQWWO'](_0xd77464,_0x76ed30['qYxrq'](_0x10627d-_0x5c2b58,0x3e8)?_0x1dfe4e:new Error('Request wasn\'t delayed'));});});}else{const _0x4473fc=_['cloneDeep'](_0xa66de7['refs']);_0x4473fc[0x0]['post']=_0xa66de7['posts'][0x0];_0x4473fc[0x0]['user']=_0xa66de7['users'][0x0];return _0x596965['yIiez'](request,_0x562eb8)['get'](_0x596965['XvPfP'])['expect']('Content-Type',/json/)['expect'](0xc8,_0x4473fc);}});});describe(_0x52b9b3['vIauo'],()=>{var _0x5248d6={'XqrqL':'/comments/1?_expand=post&_expand=user'};_0x52b9b3['zaVgo'](test,'should respond with corresponding resource and expanded inner resources',()=>{const _0x4133cd=_0xa66de7['comments'][0x0];_0x4133cd['post']=_0xa66de7['posts'][0x0];_0x4133cd['user']=_0xa66de7['users'][0x0];return request(_0x562eb8)['get'](_0x5248d6['XqrqL'])['expect']('Content-Type',/json/)['expect'](0xc8,_0x4133cd);});});_0x52b9b3['AOlPw'](describe,_0x52b9b3['bnoGm'],()=>{if(_0x52b9b3['nUgtT']!==_0x52b9b3['nUgtT']){const _0x2a64f4=_['cloneDeep'](_0xa66de7['posts']);_0x2a64f4[0x0]['comments']=[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]];_0x2a64f4[0x1]['comments']=[_0xa66de7['comments'][0x2],_0xa66de7['comments'][0x3],_0xa66de7['comments'][0x4]];return _0x52b9b3['IYVKN'](request,_0x562eb8)['get'](_0x52b9b3['EsMVp'])['expect'](_0x52b9b3['sDwYQ'],/json/)['expect'](0xc8,_0x2a64f4);}else{_0x52b9b3['IqzRB'](test,_0x52b9b3['JCuvJ'],_0x3c86c9=>{var _0x36f489={'kSQtX':function(_0x137137,_0x13965c){return _0x52b9b3['yttKL'](_0x137137,_0x13965c);},'qiRmC':_0x52b9b3['zErxI'],'RohuK':function(_0x48bb1c,_0x18e8b5){return _0x52b9b3['vlobc'](_0x48bb1c,_0x18e8b5);},'AEtDu':'DOWfJ','hEVqk':function(_0x138bcb,_0xbf1ee3){return _0x52b9b3['OOFOL'](_0x138bcb,_0xbf1ee3);},'rkfYw':_0x52b9b3['JpXyt']};const _0x515eba=new Date();_0x52b9b3['yttKL'](request,_0x562eb8)['get'](_0x52b9b3['eUQHj'])['expect'](0xc8,function(_0x43e8c5){var _0x132916={'NOgrp':function(_0x184fab,_0x40b451){return _0x36f489['kSQtX'](_0x184fab,_0x40b451);},'otQmp':_0x36f489['qiRmC'],'eFzeF':'should respond with corresponding resource and expanded inner resources'};if(_0x36f489['RohuK'](_0x36f489['AEtDu'],_0x36f489['AEtDu'])){test(_0x132916['eFzeF'],()=>{const _0x30f529=_['cloneDeep'](_0xa66de7['refs']);_0x30f529[0x0]['post']=_0xa66de7['posts'][0x0];_0x30f529[0x0]['user']=_0xa66de7['users'][0x0];return _0x132916['NOgrp'](request,_0x562eb8)['get'](_0x132916['otQmp'])['expect']('Content-Type',/json/)['expect'](0xc8,_0x30f529);});}else{const _0x1d7007=new Date();_0x36f489['kSQtX'](_0x3c86c9,_0x36f489['hEVqk'](_0x1d7007,_0x515eba)>0x3e8?_0x43e8c5:new Error(_0x36f489['rkfYw']));}});});}});_0x52b9b3['AOlPw'](describe,_0x52b9b3['SyDzN'],()=>{var _0x2a8ecb={'fqRKx':function(_0x5ea641,_0x36a7bc){return _0x5ea641(_0x36a7bc);},'Ghkiv':_0x52b9b3['eUQHj'],'TqarE':_0x52b9b3['bWVOQ'],'pGYhz':function(_0xc2cfae,_0x196eb5){return _0xc2cfae===_0x196eb5;},'VszQk':_0x52b9b3['XBScz'],'flDvD':_0x52b9b3['egIST'],'PmoJo':_0x52b9b3['sDwYQ'],'ARWGa':function(_0xd04660,_0x31149f){return _0x52b9b3['ULTbc'](_0xd04660,_0x31149f);},'vUJXX':_0x52b9b3['bKiYb']};_0x52b9b3['XTcxM'](test,'should respond with json, create a resource and increment id',async()=>{await _0x52b9b3['ULTbc'](request,_0x562eb8)['post'](_0x52b9b3['egIST'])['send']({'body':_0x52b9b3['bWVOQ'],'booleanValue':!![],'integerValue':0x1})['expect']('Access-Control-Expose-Headers',_0x52b9b3['IxuCJ'])['expect'](_0x52b9b3['IxuCJ'],/posts\/3$/)['expect']('Content-Type',/json/)['expect'](0xc9,{'id':0x3,'body':'foo','booleanValue':!![],'integerValue':0x1});assert['strictEqual'](_0xa66de7['posts']['length'],0x3);});_0x52b9b3['XTcxM'](test,'should support x-www-form-urlencoded',async()=>{if(_0x2a8ecb['pGYhz']('hSGTY',_0x2a8ecb['VszQk'])){const _0x2722b8=new Date();_0x2a8ecb['fqRKx'](request,_0x562eb8)['post'](_0x2a8ecb['Ghkiv'])['send']({'body':_0x2a8ecb['TqarE'],'booleanValue':!![],'integerValue':0x1})['expect'](0xc9,function(_0x5c807f){const _0xb42dcc=new Date();done(_0xb42dcc-_0x2722b8>0x3e8?_0x5c807f:new Error('Request\x20wasn\x27t\x20delayed'));});}else{await _0x2a8ecb['fqRKx'](request,_0x562eb8)['post'](_0x2a8ecb['flDvD'])['type']('form')['send']({'body':'foo','booleanValue':!![],'integerValue':0x1})['expect'](_0x2a8ecb['PmoJo'],/json/)['expect'](0xc9,{'id':0x3,'body':_0x2a8ecb['TqarE'],'booleanValue':'true','integerValue':'1'});assert['strictEqual'](_0xa66de7['posts']['length'],0x3);}});_0x52b9b3['uuorw'](test,_0x52b9b3['bkSDa'],async()=>{await _0x2a8ecb['ARWGa'](request,_0x562eb8)['post']('/refs')['send']({'url':_0x2a8ecb['vUJXX'],'postId':0x1})['expect']('Content-Type',/json/)['expect'](0xc9);assert['strictEqual'](_0xa66de7['refs']['length'],0x2);});});_0x52b9b3['MaWBf'](describe,_0x52b9b3['xIzwF'],()=>{var _0x145a8d={'putNu':function(_0x221712,_0x312bef){return _0x52b9b3['dvZDB'](_0x221712,_0x312bef);},'COIOv':'Request wasn\'t delayed','ARtOd':function(_0x1477be,_0x1d6e2a){return _0x52b9b3['ULTbc'](_0x1477be,_0x1d6e2a);},'tfENy':_0x52b9b3['PQPrK'],'ZaHCx':_0x52b9b3['UOumk']};if(_0x52b9b3['bbFqW']===_0x52b9b3['dnVOF']){const _0x22c79f=new Date();_0x145a8d['ARtOd'](request,_0x562eb8)['patch'](_0x145a8d['tfENy'])['send']({'body':_0x145a8d['ZaHCx']})['send']({'id':0x1,'booleanValue':!![],'integerValue':0x1})['expect'](0xc8,function(_0x47de13){const _0x182eb0=new Date();done(_0x145a8d['putNu'](_0x182eb0-_0x22c79f,0x3e8)?_0x47de13:new Error(_0x145a8d['COIOv']));});}else{_0x52b9b3['HmeJu'](test,'should respond with json and set parentId',()=>request(_0x562eb8)['post']('/posts/1/comments')['send']({'body':'foo'})['expect']('Content-Type',/json/)['expect'](0xc9,{'id':0x6,'postId':'1','body':'foo'}));}});_0x52b9b3['CGAHI'](describe,_0x52b9b3['CgbWk'],()=>{var _0x3c6177={'mjAyy':function(_0xf9ca5e,_0xb37054){return _0xf9ca5e(_0xb37054);},'xkEZx':function(_0x255db7,_0x4bc4f8){return _0x255db7>_0x4bc4f8;},'MgrbZ':function(_0x1c785a,_0x24ab95){return _0x52b9b3['OOFOL'](_0x1c785a,_0x24ab95);},'wkHqn':_0x52b9b3['JpXyt']};if(_0x52b9b3['GIcgH'](_0x52b9b3['qUVXc'],_0x52b9b3['qUVXc'])){test(_0x52b9b3['AALtM'],()=>request(_0x562eb8)['get']('/db')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7));}else{test('should delay response',_0x152f5c=>{const _0xd5aaea=new Date();_0x52b9b3['ULTbc'](request,_0x562eb8)['post'](_0x52b9b3['eUQHj'])['send']({'body':'foo','booleanValue':!![],'integerValue':0x1})['expect'](0xc9,function(_0x4d22f3){const _0x1120f1=new Date();_0x3c6177['mjAyy'](_0x152f5c,_0x3c6177['xkEZx'](_0x3c6177['MgrbZ'](_0x1120f1,_0xd5aaea),0x3e8)?_0x4d22f3:new Error(_0x3c6177['wkHqn']));});});}});describe(_0x52b9b3['hcQTo'],()=>{var _0x3f399c={'BIzwQ':function(_0x5ee687,_0x54e73d){return _0x5ee687(_0x54e73d);},'ZbdJI':_0x52b9b3['hmaFh'],'lfgLE':_0x52b9b3['klQjl'],'TrDtL':_0x52b9b3['sDwYQ']};_0x52b9b3['RaAcf'](test,_0x52b9b3['nAjpO'],async()=>{const _0x1a4cb4={'id':0x1,'booleanValue':!![],'integerValue':0x1};const _0x488377=await _0x3f399c['BIzwQ'](request,_0x562eb8)['put'](_0x3f399c['ZbdJI'])['set'](_0x3f399c['lfgLE'],'application/json')['send'](_0x1a4cb4)['expect'](_0x3f399c['TrDtL'],/json/)['expect'](0xc8,_0x1a4cb4);assert['deepStrictEqual'](_0x488377['body'],_0x1a4cb4);assert['deepStrictEqual'](_0xa66de7['posts'][0x0],_0x1a4cb4);});test(_0x52b9b3['QQglR'],()=>request(_0x562eb8)['put']('/posts/9001')['send']({'id':0x1,'body':'bar'})['expect']('Content-Type',/json/)['expect'](0x194,{}));});describe(_0x52b9b3['bYxMi'],()=>{var _0x42b20c={'Mhdaf':function(_0x39b376,_0x5344e0,_0xa0633b){return _0x39b376(_0x5344e0,_0xa0633b);},'AshlO':_0x52b9b3['ssuQb'],'QcGrT':_0x52b9b3['UzvwB'],'vilOg':_0x52b9b3['irxVJ']};_0x52b9b3['VLSyP'](test,'should\x20delay\x20response',_0x142322=>{var _0x3038ce={'pEUfQ':function(_0xc962d9,_0x3fa69e,_0x2a713e){return _0xc962d9(_0x3fa69e,_0x2a713e);},'aTJsY':_0x52b9b3['Gzzqk'],'xTNuO':'should\x20respond\x20with\x20js','lQRJQ':_0x52b9b3['eRHcJ'],'xrHjM':function(_0x3f01d3,_0x19a550){return _0x3f01d3(_0x19a550);},'NuKqD':function(_0x225cca,_0x313d2e){return _0x52b9b3['MLuFu'](_0x225cca,_0x313d2e);},'gYZfS':function(_0x5b8bcd,_0x5c5f1d){return _0x52b9b3['zeqnJ'](_0x5b8bcd,_0x5c5f1d);},'uYHfQ':_0x52b9b3['JpXyt']};if(_0x52b9b3['couGG']('dogqB',_0x52b9b3['Dqnvb'])){_0x42b20c['Mhdaf'](describe,_0x42b20c['AshlO'],()=>{_0x3038ce['pEUfQ'](test,_0x3038ce['aTJsY'],()=>request(_0x562eb8)['get']('/')['expect'](/You're successfully running JSON Server/)['expect'](0xc8));});describe(_0x42b20c['QcGrT'],()=>{test(_0x3038ce['xTNuO'],()=>request(_0x562eb8)['get']('/script.js')['expect']('Content-Type',/javascript/)['expect'](0xc8));});describe(_0x42b20c['vilOg'],()=>{test(_0x3038ce['lQRJQ'],()=>request(_0x562eb8)['get']('/style.css')['expect']('Content-Type',/css/)['expect'](0xc8));});}else{const _0x4ea84b=new Date();_0x52b9b3['ULTbc'](request,_0x562eb8)['put'](_0x52b9b3['PQPrK'])['set'](_0x52b9b3['klQjl'],_0x52b9b3['VONXy'])['send']({'id':0x1,'booleanValue':!![],'integerValue':0x1})['expect'](0xc8,function(_0x1d9d10){const _0x35aa18=new Date();_0x3038ce['xrHjM'](_0x142322,_0x3038ce['NuKqD'](_0x3038ce['gYZfS'](_0x35aa18,_0x4ea84b),0x3e8)?_0x1d9d10:new Error(_0x3038ce['uYHfQ']));});}});});_0x52b9b3['GGkZq'](describe,_0x52b9b3['hWRoQ'],()=>{var _0x86ffb={'vyKKc':_0x52b9b3['UOumk'],'pVeZk':_0x52b9b3['hmaFh']};_0x52b9b3['RXgYP'](test,_0x52b9b3['mzBXN'],async()=>{const _0x118114={'body':_0x86ffb['vyKKc']};const _0x472d51={'id':0x1,'body':_0x86ffb['vyKKc']};const _0x3e31f0=await request(_0x562eb8)['patch'](_0x86ffb['pVeZk'])['send'](_0x118114)['expect']('Content-Type',/json/)['expect'](0xc8,_0x472d51);assert['deepStrictEqual'](_0x3e31f0['body'],_0x472d51);assert['deepStrictEqual'](_0xa66de7['posts'][0x0],_0x472d51);});_0x52b9b3['RXgYP'](test,_0x52b9b3['QQglR'],()=>request(_0x562eb8)['patch']('/posts/9001')['send']({'body':'bar'})['expect']('Content-Type',/json/)['expect'](0x194,{}));});_0x52b9b3['wUJqx'](describe,'PATCH /:resource:id?_delay=',()=>{var _0x43439f={'msDNI':'5|2|3|4|1|0','wRPeh':function(_0x557153,_0x5de502,_0xe83876){return _0x52b9b3['RXgYP'](_0x557153,_0x5de502,_0xe83876);},'jNqeP':_0x52b9b3['lstxW'],'LHMFG':function(_0x5dba98,_0x21e489,_0x19cc4d){return _0x52b9b3['RXgYP'](_0x5dba98,_0x21e489,_0x19cc4d);},'jDwDs':'should ignore duplicate q query parameters','oXqIT':_0x52b9b3['nrhoB'],'ongsC':function(_0x119492,_0x2b0b89,_0x4742da){return _0x52b9b3['RXgYP'](_0x119492,_0x2b0b89,_0x4742da);},'CedTW':'should support other query parameters','EVMDc':'should\x20respond\x20with\x20json\x20and\x20make\x20a\x20full-text\x20search','htYVq':function(_0x5d9e6c,_0x3ed36d){return _0x52b9b3['xtSir'](_0x5d9e6c,_0x3ed36d);},'eaYiE':_0x52b9b3['PQPrK'],'yyXbM':_0x52b9b3['klQjl'],'ShQdR':_0x52b9b3['VONXy'],'nEtuU':function(_0x4544fa,_0x50514a){return _0x4544fa!==_0x50514a;},'MjmiA':'yBOrW','CXAIA':function(_0x5758d1,_0x42a8a1){return _0x5758d1>_0x42a8a1;},'azKgz':function(_0xd88f0e,_0x51b926){return _0x52b9b3['zeqnJ'](_0xd88f0e,_0x51b926);},'dGNRV':_0x52b9b3['JpXyt'],'fAjUX':function(_0x4dd147,_0x3a1173,_0x5444b7){return _0x52b9b3['ADBlZ'](_0x4dd147,_0x3a1173,_0x5444b7);},'jwgsn':'sBMeu','qlbct':'bar','hJllg':function(_0x2eae80,_0x591bc3,_0x24faf7){return _0x52b9b3['xeLUC'](_0x2eae80,_0x591bc3,_0x24faf7);},'kUHLI':_0x52b9b3['ehyyq']};if(_0x52b9b3['GxqiK'](_0x52b9b3['hObaf'],'vtjof')){_0x52b9b3['GHicd'](test,_0x52b9b3['JCuvJ'],_0x3de371=>{var _0x27a51d={'SsWlY':function(_0x1730cf,_0x31bda8,_0xdbf826){return _0x43439f['fAjUX'](_0x1730cf,_0x31bda8,_0xdbf826);},'XgfeX':'should delay response'};if(_0x43439f['jwgsn']!==_0x43439f['jwgsn']){var _0x4ac74e=_0x43439f['msDNI']['split']('|'),_0x360b44=0x0;while(!![]){switch(_0x4ac74e[_0x360b44++]){case'0':_0x43439f['wRPeh'](test,_0x43439f['jNqeP'],()=>request(_0x562eb8)['get']('/comments?published=false')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x1],_0xa66de7['comments'][0x2],_0xa66de7['comments'][0x4]]));continue;case'1':_0x43439f['LHMFG'](test,_0x43439f['jDwDs'],()=>request(_0x562eb8)['get']('/comments?q=foo&q=bar')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x0]]));continue;case'2':_0x43439f['LHMFG'](test,'should\x20respond\x20with\x20json\x20and\x20make\x20a\x20deep\x20full-text\x20search',()=>request(_0x562eb8)['get']('/deep?q=1')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['deep']));continue;case'3':test(_0x43439f['oXqIT'],()=>request(_0x562eb8)['get']('/tags?q=nope')['expect']('Content-Type',/json/)['expect'](0xc8,[]));continue;case'4':_0x43439f['ongsC'](test,_0x43439f['CedTW'],()=>request(_0x562eb8)['get']('/comments?q=qu&published=true')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x3]]));continue;case'5':_0x43439f['ongsC'](test,_0x43439f['EVMDc'],()=>request(_0x562eb8)['get']('/tags?q=pho')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['tags'][0x1],_0xa66de7['tags'][0x2]]));continue;}break;}}else{const _0x4ac0af=new Date();request(_0x562eb8)['patch'](_0x43439f['eaYiE'])['send']({'body':_0x43439f['qlbct']})['send']({'id':0x1,'booleanValue':!![],'integerValue':0x1})['expect'](0xc8,function(_0x10533d){var _0x5a11a9={'DZYVa':function(_0x18e032,_0x1728cc){return _0x43439f['htYVq'](_0x18e032,_0x1728cc);},'ShDOz':_0x43439f['eaYiE'],'vvokf':_0x43439f['yyXbM'],'WrItz':_0x43439f['ShQdR']};if(_0x43439f['nEtuU']('yBOrW',_0x43439f['MjmiA'])){_0x27a51d['SsWlY'](test,_0x27a51d['XgfeX'],_0x30f00b=>{var _0x480e5c={'egGFW':function(_0x1e091a,_0x1935c4){return _0x1e091a-_0x1935c4;}};const _0x7c0596=new Date();_0x5a11a9['DZYVa'](request,_0x562eb8)['put'](_0x5a11a9['ShDOz'])['set'](_0x5a11a9['vvokf'],_0x5a11a9['WrItz'])['send']({'id':0x1,'booleanValue':!![],'integerValue':0x1})['expect'](0xc8,function(_0x37070d){const _0x53ff40=new Date();_0x30f00b(_0x480e5c['egGFW'](_0x53ff40,_0x7c0596)>0x3e8?_0x37070d:new Error('Request\x20wasn\x27t\x20delayed'));});});}else{const _0x290f77=new Date();_0x43439f['htYVq'](_0x3de371,_0x43439f['CXAIA'](_0x43439f['azKgz'](_0x290f77,_0x4ac0af),0x3e8)?_0x10533d:new Error(_0x43439f['dGNRV']));}});}});}else{_0x43439f['hJllg'](test,_0x43439f['kUHLI'],()=>{assert(_0x8deef2['db']['getState']());});}});_0x52b9b3['ILrCB'](describe,_0x52b9b3['RZFww'],()=>{_0x52b9b3['NcPJF'](test,'should respond with empty data, destroy resource and dependent resources',async()=>{await _0x52b9b3['xtSir'](request,_0x562eb8)['del']('/posts/1')['expect'](0xc8,{});assert['strictEqual'](_0xa66de7['posts']['length'],0x1);assert['strictEqual'](_0xa66de7['comments']['length'],0x3);});_0x52b9b3['NcPJF'](test,_0x52b9b3['QQglR'],()=>request(_0x562eb8)['del']('/posts/9001')['expect']('Content-Type',/json/)['expect'](0x194,{}));});describe(_0x52b9b3['EfTNv'],()=>{var _0xba180f={'gvSFu':function(_0x3d17e3,_0x15b460){return _0x3d17e3(_0x15b460);},'KYydz':function(_0x4df944,_0x3ae832){return _0x52b9b3['SszdA'](_0x4df944,_0x3ae832);},'uFfVx':_0x52b9b3['PQPrK']};_0x52b9b3['NcPJF'](test,'should delay response',_0x526da2=>{var _0x72957={'SjmzV':function(_0x58cd57,_0x4a1fcb){return _0xba180f['gvSFu'](_0x58cd57,_0x4a1fcb);},'MpWbs':function(_0x44aa98,_0x512099){return _0x44aa98-_0x512099;},'EUvms':'Request\x20wasn\x27t\x20delayed'};const _0x743070=new Date();_0xba180f['KYydz'](request,_0x562eb8)['del'](_0xba180f['uFfVx'])['send']({'id':0x1,'booleanValue':!![],'integerValue':0x1})['expect'](0xc8,function(_0x102725){const _0x2d0fd6=new Date();_0x72957['SjmzV'](_0x526da2,_0x72957['MpWbs'](_0x2d0fd6,_0x743070)>0x3e8?_0x102725:new Error(_0x72957['EUvms']));});});});_0x52b9b3['YyCRX'](describe,_0x52b9b3['Elacg'],()=>{var _0x49cf55={'lupAo':function(_0x1ff192,_0x4e847c){return _0x52b9b3['SszdA'](_0x1ff192,_0x4e847c);},'WPnew':'Request wasn\'t delayed','PnNsE':'bar','kKvSH':function(_0x367516,_0x55b666,_0x344e18){return _0x52b9b3['jpCTP'](_0x367516,_0x55b666,_0x344e18);},'Nrgij':'should\x20delay\x20response','fqWYT':function(_0x2f5910,_0x17eb3a){return _0x2f5910!==_0x17eb3a;},'Uaxge':'HEyud','aSKRk':_0x52b9b3['EkdVP'],'rgINe':function(_0x120a0a,_0x72c35f,_0x212509){return _0x120a0a(_0x72c35f,_0x212509);},'mCgsS':'should\x20respond\x20with\x20html','nPIIg':_0x52b9b3['uTCZI'],'lIpvS':_0x52b9b3['MhGfk'],'HHQdr':_0x52b9b3['eRHcJ']};_0x52b9b3['jpCTP'](describe,_0x52b9b3['ssuQb'],()=>{if(_0x49cf55['fqWYT'](_0x49cf55['Uaxge'],_0x49cf55['aSKRk'])){_0x49cf55['rgINe'](test,_0x49cf55['mCgsS'],()=>request(_0x562eb8)['get']('/')['expect'](/You're successfully running JSON Server/)['expect'](0xc8));}else{var _0x201b57={'rKHNp':function(_0x45e160,_0x3ae6b2){return _0x49cf55['lupAo'](_0x45e160,_0x3ae6b2);},'inCzh':function(_0x49d1d7,_0x31ae54){return _0x49d1d7>_0x31ae54;},'znVhL':function(_0x55338b,_0xf2d815){return _0x55338b-_0xf2d815;},'eBQks':_0x49cf55['WPnew'],'SzlJS':'/posts/1?_delay=1100','CaBVT':_0x49cf55['PnNsE']};_0x49cf55['kKvSH'](test,_0x49cf55['Nrgij'],_0x45915f=>{const _0x2ba618=new Date();request(_0x562eb8)['patch'](_0x201b57['SzlJS'])['send']({'body':_0x201b57['CaBVT']})['send']({'id':0x1,'booleanValue':!![],'integerValue':0x1})['expect'](0xc8,function(_0xbc7a5e){const _0x5d657b=new Date();_0x201b57['rKHNp'](_0x45915f,_0x201b57['inCzh'](_0x201b57['znVhL'](_0x5d657b,_0x2ba618),0x3e8)?_0xbc7a5e:new Error(_0x201b57['eBQks']));});});}});describe(_0x52b9b3['UzvwB'],()=>{var _0x33dc87={'XUWIg':function(_0x157a55,_0x36b4ff,_0x563e77){return _0x49cf55['rgINe'](_0x157a55,_0x36b4ff,_0x563e77);},'ltrWO':_0x49cf55['nPIIg']};if(_0x49cf55['lIpvS']==='zSCWE'){_0x49cf55['rgINe'](test,'should respond with js',()=>request(_0x562eb8)['get']('/script.js')['expect']('Content-Type',/javascript/)['expect'](0xc8));}else{_0x33dc87['XUWIg'](test,_0x33dc87['ltrWO'],()=>request(_0x562eb8)['get']('/script.js')['expect']('Content-Type',/javascript/)['expect'](0xc8));}});describe(_0x52b9b3['irxVJ'],()=>{_0x49cf55['rgINe'](test,_0x49cf55['HHQdr'],()=>request(_0x562eb8)['get']('/style.css')['expect']('Content-Type',/css/)['expect'](0xc8));});});_0x52b9b3['iZfEn'](describe,'Database\x20state',()=>{var _0x40409e={'mZlLd':function(_0x1ddba0,_0x54ac2e,_0x3a9aea){return _0x1ddba0(_0x54ac2e,_0x3a9aea);},'wHgXa':'should respond with a limited array'};if(_0x52b9b3['fVoyo'](_0x52b9b3['unqyh'],_0x52b9b3['JPcFj'])){_0x52b9b3['jpCTP'](test,_0x52b9b3['ehyyq'],()=>{var _0x7c26af={'zKuuB':_0x52b9b3['ADizW']};if(_0x52b9b3['GxqiK'](_0x52b9b3['Hdhiy'],_0x52b9b3['Hdhiy'])){test(_0x7c26af['zKuuB'],()=>request(_0x562eb8)['get']('/list?_page=2')['expect']('Content-Type',/json/)['expect']('x-total-count',_0xa66de7['list']['length']['toString']())['expect']('Access-Control-Expose-Headers','X-Total-Count, Link')['expect'](0xc8,_0xa66de7['list']['slice'](0xa,0x14)));}else{assert(_0x8deef2['db']['getState']());}});}else{_0x40409e['mZlLd'](test,_0x40409e['wHgXa'],()=>request(_0x562eb8)['get']('/comments?_start=1&_limit=1')['expect']('Content-Type',/json/)['expect']('X-Total-Count',_0xa66de7['comments']['length']['toString']())['expect']('Access-Control-Expose-Headers','X-Total-Count')['expect'](0xc8,_0xa66de7['comments']['slice'](0x1,0x2)));}});_0x52b9b3['iZfEn'](describe,_0x52b9b3['QZzzs'],()=>{_0x52b9b3['AyXeu'](test,_0x52b9b3['Zepxi'],()=>request(_0x562eb8)['get']('/db')['expect']('Cache-Control','no-cache')['expect']('Pragma','no-cache')['expect']('Expires','-1'));});_0x52b9b3['iZfEn'](describe,_0x52b9b3['cVKHh'],()=>{var _0x59ef08={'uuwgO':function(_0x1655a0,_0x3ea873){return _0x1655a0(_0x3ea873);}};_0x52b9b3['nPqXM'](test,_0x52b9b3['HrSfE'],()=>request(_0x562eb8)['get']('/api/posts/1')['expect'](_0xa66de7['posts'][0x0]));_0x52b9b3['nPqXM'](test,_0x52b9b3['DJytk'],()=>request(_0x562eb8)['get']('/blog/posts/1/show')['expect'](_0xa66de7['posts'][0x0]));test('should rewrite using query without params',()=>{const _0x5c9bfb=_['cloneDeep'](_0xa66de7['posts'][0x0]);_0x5c9bfb['comments']=[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]];return _0x59ef08['uuwgO'](request,_0x562eb8)['get']('/firstpostwithcomments')['expect'](_0x5c9bfb);});_0x52b9b3['nPqXM'](test,_0x52b9b3['HnnrA'],()=>request(_0x562eb8)['get']('/comments/special/1-quux')['expect'](0xc8,[_0xa66de7['comments'][0x4]]));_0x52b9b3['nPqXM'](test,_0x52b9b3['TscMj'],()=>request(_0x562eb8)['get']('/articles?_id=1')['expect'](_0xa66de7['posts'][0x0]));_0x52b9b3['nPqXM'](test,'should expose routes',()=>request(_0x562eb8)['get']('/__rules')['expect'](_0x4943b0));});_0x52b9b3['HXbSY'](describe,_0x52b9b3['LLnIo'],()=>{var _0x9bc523={'NYvDO':function(_0x5634ea,_0x12a3e0,_0xd5c153){return _0x5634ea(_0x12a3e0,_0xd5c153);},'vEeDO':_0x52b9b3['fthTf'],'NhLCR':_0x52b9b3['zeesO'],'QYPmz':_0x52b9b3['QxSvM'],'wKSxh':_0x52b9b3['YwFJi'],'lLqml':function(_0x51dc74,_0x40bf58){return _0x52b9b3['couGG'](_0x51dc74,_0x40bf58);},'YANQi':_0x52b9b3['cuuys']};_0x52b9b3['SdfTB'](beforeEach,()=>{_0x8deef2['render']=(_0x5109f2,_0x20700e)=>{var _0x3c65da={'yvZPf':'6|5|4|3|0|2|1','VEQZg':function(_0x32d90d,_0x4acd9b,_0x27aea){return _0x9bc523['NYvDO'](_0x32d90d,_0x4acd9b,_0x27aea);},'TaKlT':_0x9bc523['vEeDO'],'FxCMp':_0x9bc523['NhLCR'],'gKxGv':_0x9bc523['QYPmz'],'JFjdQ':function(_0x3d2bd6,_0x444c2e,_0x2c7e4c){return _0x9bc523['NYvDO'](_0x3d2bd6,_0x444c2e,_0x2c7e4c);},'VZBqq':_0x9bc523['wKSxh'],'kXqYp':function(_0x29dd7a,_0x1ad54b,_0x2dab62){return _0x9bc523['NYvDO'](_0x29dd7a,_0x1ad54b,_0x2dab62);},'TUZKA':'should\x20respond\x20with\x20json\x20and\x20filter\x20resources'};if(_0x9bc523['lLqml'](_0x9bc523['YANQi'],'SDCBW')){_0x20700e['jsonp']({'data':_0x20700e['locals']['data']});}else{var _0x1b95b3=_0x3c65da['yvZPf']['split']('|'),_0x463a30=0x0;while(!![]){switch(_0x1b95b3[_0x463a30++]){case'0':_0x3c65da['VEQZg'](test,_0x3c65da['TaKlT'],()=>request(_0x562eb8)['get']('/comments?callback=1&_=1')['expect']('Content-Type',/text/)['expect'](new RegExp(_0xa66de7['comments'][0x0]['body']))['expect'](0xc8));continue;case'1':test(_0x3c65da['FxCMp'],()=>{_0xa66de7['posts']['push']({'id':0x63,'body':null});return request(_0x562eb8)['get']('/posts?body=foo')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['posts'][0x0]]);});continue;case'2':test('should ignore unknown query parameters',()=>request(_0x562eb8)['get']('/comments?foo=1&bar=2')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['comments']));continue;case'3':test('should support deep filter',()=>request(_0x562eb8)['get']('/deep?a.b=1')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['deep'][0x0]]));continue;case'4':test(_0x3c65da['gKxGv'],()=>request(_0x562eb8)['get']('/comments?id=1&id=2')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x0],_0xa66de7['comments'][0x1]]));continue;case'5':_0x3c65da['JFjdQ'](test,_0x3c65da['VZBqq'],()=>request(_0x562eb8)['get']('/users?tel=123')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['users'][0x1]]));continue;case'6':_0x3c65da['kXqYp'](test,_0x3c65da['TUZKA'],()=>request(_0x562eb8)['get']('/comments?postId=1&published=true')['expect']('Content-Type',/json/)['expect'](0xc8,[_0xa66de7['comments'][0x0]]));continue;}break;}}};});_0x52b9b3['hNCRw'](test,_0x52b9b3['GCZvb'],()=>request(_0x562eb8)['get']('/posts/1')['expect']('Content-Type',/json/)['expect'](0xc8,{'data':_0xa66de7['posts'][0x0]}));});describe('router.db._.id',()=>{_0x52b9b3['SdfTB'](beforeEach,()=>{var _0x321d36={'qGglE':'should respond with json and corresponding resource','vfdEE':function(_0x2b0cf3,_0x3dea76,_0x24e874){return _0x52b9b3['rjqIy'](_0x2b0cf3,_0x3dea76,_0x24e874);},'uHBIH':_0x52b9b3['VCfwH'],'CrCCn':function(_0x2c4184,_0x4b3227,_0x207511){return _0x52b9b3['rjqIy'](_0x2c4184,_0x4b3227,_0x207511);},'eibGN':_0x52b9b3['QQglR']};if('CfENZ'!==_0x52b9b3['XYmoY']){_0x8deef2['db']['setState']({'posts':[{'_id':0x1}]});_0x8deef2['db']['_']['id']=_0x52b9b3['tThzP'];}else{test(_0x321d36['qGglE'],()=>request(_0x562eb8)['get']('/posts/1')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['posts'][0x0]));_0x321d36['vfdEE'](test,_0x321d36['uHBIH'],()=>request(_0x562eb8)['get']('/refs/abcd-1234')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['refs'][0x0]));test('should support integer id as string',()=>request(_0x562eb8)['get']('/stringIds/1234')['expect']('Content-Type',/json/)['expect'](0xc8,_0xa66de7['stringIds'][0x0]));_0x321d36['CrCCn'](test,_0x321d36['eibGN'],()=>request(_0x562eb8)['get']('/posts/9001')['expect']('Content-Type',/json/)['expect'](0x194,{}));}});_0x52b9b3['RFIWW'](test,_0x52b9b3['bCCbA'],()=>request(_0x562eb8)['get']('/posts/1')['expect']('Content-Type',/json/)['expect'](0xc8,_0x8deef2['db']['getState']()['posts'][0x0]));_0x52b9b3['RFIWW'](test,'should be possible to POST using a different id property',()=>request(_0x562eb8)['post']('/posts')['send']({'body':'hello'})['expect']('Content-Type',/json/)['expect'](0xc9,{'_id':0x2,'body':'hello'}));});});