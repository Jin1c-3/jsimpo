'use strict';const expect=require('chai')['expect'];const AwsCompileWebsocketsEvents=require('../../../../../../../../../../lib/plugins/aws/package/compile/events/websockets/index');const Serverless=require('../../../../../../../../../../lib/Serverless');const AwsProvider=require('../../../../../../../../../../lib/plugins/aws/provider');describe('#compileIntegrations()',()=>{var _0x1a7626={'CRZab':'aws','sigDL':'$connect','sbQgh':'$disconnect','pprMz':function(_0x35d01d,_0x55492c){return _0x35d01d(_0x55492c);},'wlEzs':'WebsocketsApi','sApnp':'AWS_PROXY','wHbtt':'AWS::Partition','feImN':'AWS::Region','qHzOT':'FirstLambdaFunction','wyUAs':'/invocations','oYEWG':'arn:','OakVa':':apigateway:','awoPF':':lambda:path/2015-03-31/functions/','DsSGd':'Arn','eoZuR':'should create an integration resource for every event'};let _0x381092;_0x1a7626['pprMz'](beforeEach,()=>{const _0x4e375a=new Serverless();_0x4e375a['setProvider'](_0x1a7626['CRZab'],new AwsProvider(_0x4e375a));_0x4e375a['service']['provider']['compiledCloudFormationTemplate']={'Resources':{}};_0x381092=new AwsCompileWebsocketsEvents(_0x4e375a);_0x381092['websocketsApiLogicalId']=_0x381092['provider']['naming']['getWebsocketsApiLogicalId']();});it(_0x1a7626['eoZuR'],()=>{_0x381092['validated']={'events':[{'functionName':'First','route':_0x1a7626['sigDL']},{'functionName':'Second','route':_0x1a7626['sbQgh']}]};_0x381092['compileIntegrations']();const _0x3afcf4=_0x381092['serverless']['service']['provider']['compiledCloudFormationTemplate']['Resources'];_0x1a7626['pprMz'](expect,_0x3afcf4)['to']['deep']['equal']({'FirstWebsocketsIntegration':{'Type':'AWS::ApiGatewayV2::Integration','Properties':{'ApiId':{'Ref':_0x1a7626['wlEzs']},'IntegrationType':_0x1a7626['sApnp'],'IntegrationUri':{'Fn::Join':['',['arn:',{'Ref':_0x1a7626['wHbtt']},':apigateway:',{'Ref':_0x1a7626['feImN']},':lambda:path/2015-03-31/functions/',{'Fn::GetAtt':[_0x1a7626['qHzOT'],'Arn']},_0x1a7626['wyUAs']]]}}},'SecondWebsocketsIntegration':{'Type':'AWS::ApiGatewayV2::Integration','Properties':{'ApiId':{'Ref':_0x1a7626['wlEzs']},'IntegrationType':_0x1a7626['sApnp'],'IntegrationUri':{'Fn::Join':['',[_0x1a7626['oYEWG'],{'Ref':_0x1a7626['wHbtt']},_0x1a7626['OakVa'],{'Ref':'AWS::Region'},_0x1a7626['awoPF'],{'Fn::GetAtt':['SecondLambdaFunction',_0x1a7626['DsSGd']]},_0x1a7626['wyUAs']]]}}}});});});