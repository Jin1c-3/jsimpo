const should=require('should');const sinon=require('sinon');const urlService=require('../../../core/frontend/services/url');const helpers=require('../../../core/frontend/helpers');const models=require('../../../core/server/models');const testUtils=require('../../utils');describe('{{authors}} helper',function(){var _0x3e9430={'jUneQ':'haunted','uDUOb':'ghost','KQKSi':function(_0x4ab386,_0x11175c){return _0x4ab386(_0x11175c);},'sqqLz':'FySye','tgHnr':'Michael','hdwkF':'Thomas','dyEBo':'false','mpyne':'Michael,\x20Thomas','kIDWC':'John O\'Nolan','iVmnk':'AB=CD`EF','Aouiw':'John\x20O&#x27;Nolan,\x20AB&#x3D;CD&#x60;EF','OMRvU':'haunted|ghost','AQPBi':'on\x20','oXluu':' forever','xMKhu':function(_0x9e245f,_0xaa92b9){return _0x9e245f(_0xaa92b9);},'lVEZf':'haunted,\x20ghost\x20forever','DStVI':'foo','zgzNo':'bar','eNLYx':'author url','HuMIe':'<a href="author url">foo</a>','IjQOP':function(_0xf15c84,_0xa9d6c4){return _0xf15c84===_0xa9d6c4;},'oxeDT':'wLkuD','iGWhU':' &bull;','VQddh':function(_0x595102,_0x1f18f2){return _0x595102(_0x1f18f2);},'uqQmO':'&hellip; haunted, ghost &bull;','ZBGkm':'foo-bar','owOIE':'baz','cPQMF':'<a href="author url x">bar</a>','nrioU':'ndEbS','STOcE':'author url 1','dzuuP':'author\x20url\x202','XaQDO':'<a href="author url 1">foo</a>, <a href="author url 2">bar</a>','XlAJK':'<a href="author url 1">foo</a>','yIXAp':function(_0x5b652a,_0x37401f){return _0x5b652a(_0x37401f);},'WPbTA':'<a href="author url 2">bar</a>','aIRzd':'author\x20url\x203','wtdrI':'<a href="author url 2">bar</a>, <a href="author url 3">baz</a>','hNybY':'kHFqy','nUmxH':'author\x20url\x20x','FtUyO':'author\x20url\x20b','COBDk':'author url c','XgSvb':function(_0x4b3076,_0x27506e){return _0x4b3076(_0x27506e);},'AmrRN':function(_0x56e09c,_0x488dc0){return _0x56e09c(_0x488dc0);},'otFoE':function(_0x272a3d,_0x2ffbe2){return _0x272a3d(_0x2ffbe2);},'Azlij':function(_0x7e6c2,_0x5663b7,_0xd1f430){return _0x7e6c2(_0x5663b7,_0xd1f430);},'QeONA':'can use a different separator','crylf':'can add a single suffix to multiple authors','ikmlR':function(_0x6e990a,_0x412f54,_0x72a524){return _0x6e990a(_0x412f54,_0x72a524);},'tPWoD':'can add a prefix and suffix to multiple authors','pYsGl':'does not add prefix or suffix if no authors exist','yggMu':'can autolink authors to author pages','aSaBl':'can limit no. authors output to 1','yvAAa':function(_0x450bc9,_0x3d0582,_0x422fbd){return _0x450bc9(_0x3d0582,_0x422fbd);},'CASbe':'can list authors from a specified no.','KCmGH':'can list authors to a specified no.','JzDdh':'can list authors in a range','AlIaE':function(_0x319670,_0x108640,_0xdb54d2){return _0x319670(_0x108640,_0xdb54d2);},'ZkdyW':'can limit no. authors and output from 2','TcLYw':function(_0x2f5a6e,_0x114c95,_0x20f2a0){return _0x2f5a6e(_0x114c95,_0x20f2a0);}};_0x3e9430['AmrRN'](before,function(){models['init']();});_0x3e9430['AmrRN'](beforeEach,function(){sinon['stub'](urlService,'getUrlByResourceId');});_0x3e9430['otFoE'](afterEach,function(){sinon['restore']();});_0x3e9430['Azlij'](it,'can\x20return\x20string\x20with\x20authors',function(){var _0x59d8b7={'WlZqk':_0x3e9430['jUneQ'],'AhXiI':_0x3e9430['uDUOb'],'huyGP':function(_0x390f85,_0x16c315){return _0x3e9430['KQKSi'](_0x390f85,_0x16c315);},'KheTj':'haunted|ghost'};if(_0x3e9430['sqqLz']!==_0x3e9430['sqqLz']){const _0x151510=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x59d8b7['WlZqk']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x59d8b7['AhXiI']})];const _0xe439ac=helpers['authors']['call']({'authors':_0x151510},{'hash':{'separator':'|','autolink':'false'}});should['exist'](_0xe439ac);_0x59d8b7['huyGP'](String,_0xe439ac)['should']['equal'](_0x59d8b7['KheTj']);}else{const _0x348bd2=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['tgHnr']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['hdwkF']})];const _0x5e19a6=helpers['authors']['call']({'authors':_0x348bd2},{'hash':{'autolink':_0x3e9430['dyEBo']}});should['exist'](_0x5e19a6);String(_0x5e19a6)['should']['equal'](_0x3e9430['mpyne']);}});_0x3e9430['Azlij'](it,'can return string with authors with special chars',function(){const _0x1d2ad4=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['kIDWC']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['iVmnk']})];const _0x1a755f=helpers['authors']['call']({'authors':_0x1d2ad4},{'hash':{'autolink':'false'}});should['exist'](_0x1a755f);_0x3e9430['KQKSi'](String,_0x1a755f)['should']['equal'](_0x3e9430['Aouiw']);});it(_0x3e9430['QeONA'],function(){const _0x31c92b=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['jUneQ']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':'ghost'})];const _0x4ca3d0=helpers['authors']['call']({'authors':_0x31c92b},{'hash':{'separator':'|','autolink':_0x3e9430['dyEBo']}});should['exist'](_0x4ca3d0);String(_0x4ca3d0)['should']['equal'](_0x3e9430['OMRvU']);});_0x3e9430['Azlij'](it,'can add a single prefix to multiple authors',function(){const _0x1796d9=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['jUneQ']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':'ghost'})];const _0x30d174=helpers['authors']['call']({'authors':_0x1796d9},{'hash':{'prefix':_0x3e9430['AQPBi'],'autolink':_0x3e9430['dyEBo']}});should['exist'](_0x30d174);_0x3e9430['KQKSi'](String,_0x30d174)['should']['equal']('on\x20haunted,\x20ghost');});_0x3e9430['Azlij'](it,_0x3e9430['crylf'],function(){const _0x1c5533=[testUtils['DataGenerator']['forKnex']['createUser']({'name':'haunted'}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['uDUOb']})];const _0x1cc589=helpers['authors']['call']({'authors':_0x1c5533},{'hash':{'suffix':_0x3e9430['oXluu'],'autolink':'false'}});should['exist'](_0x1cc589);_0x3e9430['xMKhu'](String,_0x1cc589)['should']['equal'](_0x3e9430['lVEZf']);});_0x3e9430['ikmlR'](it,_0x3e9430['tPWoD'],function(){if(_0x3e9430['IjQOP'](_0x3e9430['oxeDT'],_0x3e9430['oxeDT'])){const _0x3b66f3=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['jUneQ']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['uDUOb']})];const _0x561dd1=helpers['authors']['call']({'authors':_0x3b66f3},{'hash':{'suffix':_0x3e9430['oXluu'],'prefix':_0x3e9430['AQPBi'],'autolink':_0x3e9430['dyEBo']}});should['exist'](_0x561dd1);_0x3e9430['xMKhu'](String,_0x561dd1)['should']['equal']('on haunted, ghost forever');}else{const _0x267d34=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['DStVI'],'slug':'foo-bar'}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['zgzNo'],'slug':'bar'})];urlService['getUrlByResourceId']['withArgs'](_0x267d34[0x0]['id'])['returns'](_0x3e9430['eNLYx']);const _0x193403=helpers['authors']['call']({'authors':_0x267d34},{'hash':{'to':'1'}});should['exist'](_0x193403);String(_0x193403)['should']['equal'](_0x3e9430['HuMIe']);}});_0x3e9430['ikmlR'](it,'can\x20add\x20a\x20prefix\x20and\x20suffix\x20with\x20HTML',function(){const _0x43f010=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['jUneQ']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['uDUOb']})];const _0x148726=helpers['authors']['call']({'authors':_0x43f010},{'hash':{'suffix':_0x3e9430['iGWhU'],'prefix':'&hellip; ','autolink':'false'}});should['exist'](_0x148726);_0x3e9430['VQddh'](String,_0x148726)['should']['equal'](_0x3e9430['uqQmO']);});it(_0x3e9430['pYsGl'],function(){var _0x16d060={'TOLUm':_0x3e9430['DStVI'],'ZsRIC':_0x3e9430['ZBGkm'],'cNtOk':_0x3e9430['zgzNo'],'BMrMQ':_0x3e9430['owOIE'],'jCXCV':function(_0x49d333,_0x471a9f){return _0x49d333(_0x471a9f);},'rvYxM':_0x3e9430['cPQMF']};if('ndEbS'!==_0x3e9430['nrioU']){const _0xd44136=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x16d060['TOLUm'],'slug':_0x16d060['ZsRIC']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':'bar','slug':_0x16d060['cNtOk']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x16d060['BMrMQ'],'slug':'baz'})];urlService['getUrlByResourceId']['withArgs'](_0xd44136[0x1]['id'])['returns']('author url x');const _0x17a179=helpers['authors']['call']({'authors':_0xd44136},{'hash':{'from':'2','limit':'1'}});should['exist'](_0x17a179);_0x16d060['jCXCV'](String,_0x17a179)['should']['equal'](_0x16d060['rvYxM']);}else{const _0x559861=helpers['authors']['call']({},{'hash':{'prefix':_0x3e9430['AQPBi'],'suffix':_0x3e9430['oXluu'],'autolink':_0x3e9430['dyEBo']}});should['exist'](_0x559861);String(_0x559861)['should']['equal']('');}});_0x3e9430['ikmlR'](it,_0x3e9430['yggMu'],function(){const _0x150e7c=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['DStVI'],'slug':_0x3e9430['ZBGkm']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['zgzNo'],'slug':'bar'})];urlService['getUrlByResourceId']['withArgs'](_0x150e7c[0x0]['id'])['returns'](_0x3e9430['STOcE']);urlService['getUrlByResourceId']['withArgs'](_0x150e7c[0x1]['id'])['returns'](_0x3e9430['dzuuP']);const _0x2a43cc=helpers['authors']['call']({'authors':_0x150e7c});should['exist'](_0x2a43cc);_0x3e9430['VQddh'](String,_0x2a43cc)['should']['equal'](_0x3e9430['XaQDO']);});_0x3e9430['ikmlR'](it,_0x3e9430['aSaBl'],function(){const _0xbcd6c3=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['DStVI'],'slug':_0x3e9430['ZBGkm']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':'bar','slug':'bar'})];urlService['getUrlByResourceId']['withArgs'](_0xbcd6c3[0x0]['id'])['returns'](_0x3e9430['STOcE']);const _0x155562=helpers['authors']['call']({'authors':_0xbcd6c3},{'hash':{'limit':'1'}});should['exist'](_0x155562);_0x3e9430['VQddh'](String,_0x155562)['should']['equal'](_0x3e9430['XlAJK']);});_0x3e9430['yvAAa'](it,_0x3e9430['CASbe'],function(){const _0x2deaf3=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['DStVI'],'slug':_0x3e9430['ZBGkm']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['zgzNo'],'slug':'bar'})];urlService['getUrlByResourceId']['withArgs'](_0x2deaf3[0x1]['id'])['returns']('author\x20url\x202');const _0x4a83c4=helpers['authors']['call']({'authors':_0x2deaf3},{'hash':{'from':'2'}});should['exist'](_0x4a83c4);_0x3e9430['yIXAp'](String,_0x4a83c4)['should']['equal'](_0x3e9430['WPbTA']);});_0x3e9430['yvAAa'](it,_0x3e9430['KCmGH'],function(){const _0x3849bd=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['DStVI'],'slug':_0x3e9430['ZBGkm']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['zgzNo'],'slug':_0x3e9430['zgzNo']})];urlService['getUrlByResourceId']['withArgs'](_0x3849bd[0x0]['id'])['returns'](_0x3e9430['eNLYx']);const _0xd6d91a=helpers['authors']['call']({'authors':_0x3849bd},{'hash':{'to':'1'}});should['exist'](_0xd6d91a);_0x3e9430['yIXAp'](String,_0xd6d91a)['should']['equal'](_0x3e9430['HuMIe']);});_0x3e9430['yvAAa'](it,_0x3e9430['JzDdh'],function(){const _0x1127c0=[testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['DStVI'],'slug':'foo-bar'}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['zgzNo'],'slug':_0x3e9430['zgzNo']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':'baz','slug':'baz'})];urlService['getUrlByResourceId']['withArgs'](_0x1127c0[0x1]['id'])['returns'](_0x3e9430['dzuuP']);urlService['getUrlByResourceId']['withArgs'](_0x1127c0[0x2]['id'])['returns'](_0x3e9430['aIRzd']);const _0x55928a=helpers['authors']['call']({'authors':_0x1127c0},{'hash':{'from':'2','to':'3'}});should['exist'](_0x55928a);_0x3e9430['yIXAp'](String,_0x55928a)['should']['equal'](_0x3e9430['wtdrI']);});_0x3e9430['AlIaE'](it,_0x3e9430['ZkdyW'],function(){var _0x3f90c4={'RJlxg':'bar','mgLSs':'author url 1','NHXcU':_0x3e9430['dzuuP'],'tdpbh':function(_0x3c51cf,_0x46a54d){return _0x3e9430['yIXAp'](_0x3c51cf,_0x46a54d);},'DgqCH':_0x3e9430['XaQDO']};if(_0x3e9430['hNybY']!=='jbmqM'){const _0x5a18c1=[testUtils['DataGenerator']['forKnex']['createUser']({'name':'foo','slug':_0x3e9430['ZBGkm']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['zgzNo'],'slug':_0x3e9430['zgzNo']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['owOIE'],'slug':_0x3e9430['owOIE']})];urlService['getUrlByResourceId']['withArgs'](_0x5a18c1[0x1]['id'])['returns'](_0x3e9430['nUmxH']);const _0x4e8c06=helpers['authors']['call']({'authors':_0x5a18c1},{'hash':{'from':'2','limit':'1'}});should['exist'](_0x4e8c06);_0x3e9430['yIXAp'](String,_0x4e8c06)['should']['equal']('<a href="author url x">bar</a>');}else{const _0x306a9e=[testUtils['DataGenerator']['forKnex']['createUser']({'name':'foo','slug':'foo-bar'}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3f90c4['RJlxg'],'slug':_0x3f90c4['RJlxg']})];urlService['getUrlByResourceId']['withArgs'](_0x306a9e[0x0]['id'])['returns'](_0x3f90c4['mgLSs']);urlService['getUrlByResourceId']['withArgs'](_0x306a9e[0x1]['id'])['returns'](_0x3f90c4['NHXcU']);const _0xff162c=helpers['authors']['call']({'authors':_0x306a9e});should['exist'](_0xff162c);_0x3f90c4['tdpbh'](String,_0xff162c)['should']['equal'](_0x3f90c4['DgqCH']);}});_0x3e9430['TcLYw'](it,'can\x20list\x20authors\x20in\x20a\x20range\x20(ignore\x20limit)',function(){const _0x2aede2=[testUtils['DataGenerator']['forKnex']['createUser']({'name':'foo','slug':_0x3e9430['ZBGkm']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['zgzNo'],'slug':_0x3e9430['zgzNo']}),testUtils['DataGenerator']['forKnex']['createUser']({'name':_0x3e9430['owOIE'],'slug':_0x3e9430['owOIE']})];urlService['getUrlByResourceId']['withArgs'](_0x2aede2[0x0]['id'])['returns']('author url a');urlService['getUrlByResourceId']['withArgs'](_0x2aede2[0x1]['id'])['returns'](_0x3e9430['FtUyO']);urlService['getUrlByResourceId']['withArgs'](_0x2aede2[0x2]['id'])['returns'](_0x3e9430['COBDk']);const _0x357dd0=helpers['authors']['call']({'authors':_0x2aede2},{'hash':{'from':'1','to':'3','limit':'2'}});should['exist'](_0x357dd0);_0x3e9430['XgSvb'](String,_0x357dd0)['should']['equal']('<a\x20href=\x22author\x20url\x20a\x22>foo</a>,\x20<a\x20href=\x22author\x20url\x20b\x22>bar</a>,\x20<a\x20href=\x22author\x20url\x20c\x22>baz</a>');});});