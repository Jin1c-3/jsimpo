'use strict';const chai=require('chai');const path=require('path');const overrideEnv=require('process-utils/override-env');const fs=require('fs');const conditionallyLoadDotenv=require('../../../../lib/cli/conditionally-load-dotenv');chai['use'](require('chai-as-promised'));const expect=require('chai')['expect'];describe('test/unit/lib/cli/conditionally-load-dotenv.test.js',()=>{var _0xfb7434={'GeRbH':'DEFAULT_ENV_VARIABLE=valuefromdefault','ccChj':'.env','CYZUk':'testing','Aeaty':'STAGE_ENV_VARIABLE=valuefromstage','upsYE':function(_0x43ba3f){return _0x43ba3f();},'tWhQR':function(_0x164077,_0x5c5bf4,_0x5e0d84){return _0x164077(_0x5c5bf4,_0x5e0d84);},'gySJm':function(_0x3e1528,_0x2030b1){return _0x3e1528(_0x2030b1);},'eCuWr':'valuefromdefault','zBFnT':function(_0x16e074,_0x4704ab){return _0x16e074(_0x4704ab);},'jcGFU':'valuefromstage','tfijS':function(_0x2d0b6e,_0x550bfc){return _0x2d0b6e(_0x550bfc);},'dTSMQ':'should\x20load\x20environment\x20variables\x20from\x20default\x20.env\x20file\x20if\x20no\x20matching\x20stage','aJsml':function(_0x4f6f8c,_0x50f492,_0x58d00b){return _0x4f6f8c(_0x50f492,_0x58d00b);}};let _0x479608;_0xfb7434['tfijS'](before,async()=>{const _0x38b0aa=_0xfb7434['GeRbH'];await fs['promises']['writeFile'](path['resolve'](_0xfb7434['ccChj']),_0x38b0aa);const _0x1032b7=_0xfb7434['CYZUk'];const _0x2b1214=_0xfb7434['Aeaty'];await fs['promises']['writeFile'](path['resolve']('.env.'+_0x1032b7),_0x2b1214);});beforeEach(()=>{conditionallyLoadDotenv['clear']();({restoreEnv}=_0xfb7434['upsYE'](overrideEnv));});afterEach(()=>{_0x479608&&_0x479608();});_0xfb7434['tWhQR'](it,_0xfb7434['dTSMQ'],async()=>{await _0xfb7434['tWhQR'](conditionallyLoadDotenv,{},{'useDotenv':!![]});_0xfb7434['gySJm'](expect,process['env']['DEFAULT_ENV_VARIABLE'])['to']['equal'](_0xfb7434['eCuWr']);_0xfb7434['zBFnT'](expect,process['env']['STAGE_ENV_VARIABLE'])['to']['be']['undefined'];});_0xfb7434['aJsml'](it,'should load environment variables from stage .env file if matching stage',async()=>{await _0xfb7434['tWhQR'](conditionallyLoadDotenv,{'stage':_0xfb7434['CYZUk']},{'useDotenv':!![]});_0xfb7434['zBFnT'](expect,process['env']['DEFAULT_ENV_VARIABLE'])['to']['be']['undefined'];_0xfb7434['zBFnT'](expect,process['env']['STAGE_ENV_VARIABLE'])['to']['equal'](_0xfb7434['jcGFU']);});});