import _0x3c795f from'fs-extra';import{join}from'path';import{nextBuild,findPort,killApp,initNextServerScript}from'next-test-utils';const appDir=join(__dirname,'../');jest['setTimeout'](0x3e8*0x3c*0x2);let appPort;let app;let buildId;const nextStart=async(appDir,appPort)=>{var rtGFOL={'cvpwf':function(callee,param1,param2){return callee(param1,param2);},'ruIOu':'server.js','TvHbg':function(callee,param1,param2,param3,param4){return callee(param1,param2,param3,param4);}};const scriptPath=rtGFOL['cvpwf'](join,appDir,rtGFOL['ruIOu']);const env=Object['assign']({...process['env']},{'PORT':''+appPort});return rtGFOL['TvHbg'](initNextServerScript,scriptPath,/ready on/i,env,/ReferenceError: options is not defined/);};describe('Serverless\x20Trace',()=>{var VKGmKE={'kNMpb':function(callee,param1){return callee(param1);},'tdRrD':function(callee){return callee();},'yYzmT':function(callee,param1,param2){return callee(param1,param2);},'BJpHg':'.next/BUILD_ID','mojTm':'utf8','nALIs':function(callee,param1){return callee(param1);},'UPfuZ':function(callee,param1){return callee(param1);},'DmHYS':function(callee,param1){return callee(param1);},'gLXiQ':'s-maxage=10, stale-while-revalidate','NCMXz':function(callee,param1,param2){return callee(param1,param2);},'AYans':'should\x20have\x20revalidate\x20page\x20in\x20prerender-manifest\x20with\x20correct\x20interval','IUgsz':function(callee,param1,param2){return callee(param1,param2);}};VKGmKE['DmHYS'](beforeAll,async()=>{await VKGmKE['kNMpb'](nextBuild,appDir);appPort=await VKGmKE['tdRrD'](findPort);app=await VKGmKE['yYzmT'](nextStart,appDir,appPort);buildId=await _0x3c795f['readFile'](join(appDir,VKGmKE['BJpHg']),VKGmKE['mojTm']);});afterAll(()=>killApp(app));VKGmKE['NCMXz'](it,VKGmKE['AYans'],async()=>{const data=await _0x3c795f['readJSON'](VKGmKE['yYzmT'](join,appDir,'.next/prerender-manifest.json'));VKGmKE['nALIs'](expect,data['routes']['/revalidate'])['toEqual']({'initialRevalidateSeconds':0xa,'dataRoute':'/_next/data/'+buildId+'/revalidate.json','srcRoute':null});});VKGmKE['IUgsz'](it,'should set correct Cache-Control header',async()=>{const url='http://localhost:'+appPort+'/revalidate';const res=await VKGmKE['UPfuZ'](fetch,url);VKGmKE['DmHYS'](expect,res['headers']['get']('Cache-Control'))['toMatch'](VKGmKE['gLXiQ']);});});