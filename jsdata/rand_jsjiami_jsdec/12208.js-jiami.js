'use strict';/**
 * Module dependencies
 */
             // Public node modules.
const cloudinary=require('cloudinary')['v2'];const intoStream=require('into-stream');const {errors}=require('strapi-plugin-upload');module['exports']={'init'(_0x9f99fd){var _0x18ce2d={'bvvJe':'cLDNp','gbEDT':'File\x20size\x20too\x20large','LvXhZ':'video','BGEIB':'scale','lExSe':function(_0x34950b){return _0x34950b();},'AWaRH':function(_0x1d96db,_0x1e1fe8){return _0x1d96db(_0x1e1fe8);},'nnLBG':'RJOlO','KFqGj':function(_0x552877,_0x1a2309){return _0x552877(_0x1a2309);},'XrwnB':function(_0x5a6b30,_0x4b2c43){return _0x5a6b30(_0x4b2c43);},'dyphq':'mKevC','Cnpld':'image','UJBUh':function(_0xdb8094,_0x2b8316){return _0xdb8094!==_0x2b8316;},'GPVEe':'not found','UXPMf':'sPTCU'};cloudinary['config'](_0x9f99fd);return{'upload'(_0x336266,_0x2dfe57={}){var _0x3b801b={'reFjs':function(_0x34a95f,_0x4d5f49){return _0x34a95f===_0x4d5f49;},'gsolX':'gPuHM','qJgSG':_0x18ce2d['bvvJe'],'VUPPl':_0x18ce2d['gbEDT'],'TBeNO':function(_0x445491,_0x222318){return _0x445491(_0x222318);},'yLKjD':_0x18ce2d['LvXhZ'],'HCBjj':_0x18ce2d['BGEIB'],'lgNDE':function(_0xde321e){return _0x18ce2d['lExSe'](_0xde321e);},'blLtt':function(_0x289f24,_0x3e33ee){return _0x18ce2d['AWaRH'](_0x289f24,_0x3e33ee);},'GgVch':'auto','Gbsnc':_0x18ce2d['nnLBG'],'bTjPc':'DqQzg','plPGZ':function(_0x13e800,_0x5b5ef5){return _0x18ce2d['KFqGj'](_0x13e800,_0x5b5ef5);}};return new Promise((_0x544e56,_0xe40aea)=>{var _0x2f99a5={'vHoyz':_0x3b801b['VUPPl'],'BfmoB':function(_0x3dca6d,_0x1754fd){return _0x3b801b['blLtt'](_0x3dca6d,_0x1754fd);},'YxJDd':function(_0x415369,_0x5db859){return _0x3b801b['blLtt'](_0x415369,_0x5db859);}};const _0x9f99fd={'resource_type':_0x3b801b['GgVch'],'public_id':_0x336266['hash']};if(_0x336266['ext']){if(_0x3b801b['reFjs'](_0x3b801b['Gbsnc'],_0x3b801b['bTjPc'])){if(err['message']['includes'](_0x2f99a5['vHoyz'])){return _0x2f99a5['BfmoB'](_0xe40aea,errors['entityTooLarge']());}return _0x2f99a5['YxJDd'](_0xe40aea,errors['unknownError']('Error\x20uploading\x20to\x20cloudinary:\x20'+err['message']));}else{_0x9f99fd['filename']=''+_0x336266['hash']+_0x336266['ext'];}}const _0x1df042=cloudinary['uploader']['upload_stream']({..._0x9f99fd,..._0x2dfe57},(_0x168aac,_0x2684b6)=>{if(_0x3b801b['reFjs'](_0x3b801b['gsolX'],_0x3b801b['qJgSG'])){_0x9f99fd['filename']=''+_0x336266['hash']+_0x336266['ext'];}else{if(_0x168aac){if(_0x168aac['message']['includes'](_0x3b801b['VUPPl'])){return _0x3b801b['TBeNO'](_0xe40aea,errors['entityTooLarge']());}return _0xe40aea(errors['unknownError']('Error uploading to cloudinary: '+_0x168aac['message']));}if(_0x2684b6['resource_type']===_0x3b801b['yLKjD']){_0x336266['previewUrl']=cloudinary['url'](_0x2684b6['public_id']+'.gif',{'video_sampling':0x6,'delay':0xc8,'width':0xfa,'crop':_0x3b801b['HCBjj'],'resource_type':_0x3b801b['yLKjD']});}_0x336266['url']=_0x2684b6['secure_url'];_0x336266['provider_metadata']={'public_id':_0x2684b6['public_id'],'resource_type':_0x2684b6['resource_type']};_0x3b801b['lgNDE'](_0x544e56);}});_0x3b801b['plPGZ'](intoStream,_0x336266['buffer'])['pipe'](_0x1df042);});},async 'delete'(_0x2695a3,_0x573f73={}){var _0x3d9018={'sXNkw':function(_0x47a554,_0x4c6a23){return _0x18ce2d['XrwnB'](_0x47a554,_0x4c6a23);}};try{if(_0x18ce2d['dyphq']!==_0x18ce2d['dyphq']){return _0x3d9018['sXNkw'](reject,errors['entityTooLarge']());}else{const {resource_type,public_id}=_0x2695a3['provider_metadata'];const _0x4e6231=await cloudinary['uploader']['destroy'](public_id,{'invalidate':!![],'resource_type':resource_type||_0x18ce2d['Cnpld'],..._0x573f73});if(_0x18ce2d['UJBUh'](_0x4e6231['result'],'ok')&&_0x18ce2d['UJBUh'](_0x4e6231['result'],_0x18ce2d['GPVEe'])){throw errors['unknownError']('Error deleting on cloudinary: '+_0x4e6231['result']);}}}catch(_0x155d58){if(_0x18ce2d['UXPMf']!==_0x18ce2d['UXPMf']){throw errors['unknownError']('Error\x20deleting\x20on\x20cloudinary:\x20'+_0x155d58['message']);}else{throw errors['unknownError']('Error deleting on cloudinary: '+_0x155d58['message']);}}}};}};