const logging=require('@tryghost/logging');module['exports']={'config':{'transaction':!![]},async 'up'({transacting:_0x12ee8f}){var _0x29aabf={'ChezN':'mailgun','YqGqI':function(_0x28782f,_0x51e19c){return _0x28782f(_0x51e19c);},'wyAiv':'settings','bKdWM':'mailgun_domain','EmLnT':function(_0x36c69f,_0x221e1f){return _0x36c69f(_0x221e1f);},'cPIJy':'email','xLcbY':'string'};const _0x1be4e2={'provider':_0x29aabf['ChezN'],'apiKey':null,'domain':null,'baseUrl':null};const _0x57bc0c=await _0x29aabf['YqGqI'](_0x12ee8f,_0x29aabf['wyAiv'])['where']({'key':'bulk_email_settings'})['select']()['first']();let _0xaa9e97;try{_0xaa9e97=JSON['parse'](_0x57bc0c['value'])||_0x1be4e2;}catch(_0x2c8c4d){logging['warn']('Error parsing bulk_email_settings JSON. Using defaults');_0xaa9e97=_0x1be4e2;}const _0x77bec8=[{'key':'mailgun_api_key','value':_0xaa9e97['apiKey']},{'key':_0x29aabf['bKdWM'],'value':_0xaa9e97['domain']},{'key':'mailgun_base_url','value':_0xaa9e97['baseUrl']}];for(const _0x5065a0 of _0x77bec8){logging['info']('Updating '+_0x5065a0['key']+' setting\'s value, group, type & flags.');await _0x29aabf['EmLnT'](_0x12ee8f,_0x29aabf['wyAiv'])['where']({'key':_0x5065a0['key']})['update']({'group':_0x29aabf['cPIJy'],'type':_0x29aabf['xLcbY'],'flags':null,'value':_0x5065a0['value']});}},async 'down'({transacting:_0x1e6654}){var _0x194d2a={'aABqk':'mailgun_api_key','XmcOJ':function(_0x475bcf,_0x591091){return _0x475bcf(_0x591091);},'fPTsY':'settings','kxoIo':'key'};const _0x2b1383=[_0x194d2a['aABqk'],'mailgun_domain','mailgun_base_url'];logging['info']('Deleting settings: '+_0x2b1383['join'](',\x20'));await _0x194d2a['XmcOJ'](_0x1e6654,_0x194d2a['fPTsY'])['whereIn'](_0x194d2a['kxoIo'],_0x2b1383)['del']();}};