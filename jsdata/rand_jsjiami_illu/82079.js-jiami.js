const vip = 'vip.v6';
const _0x4060 = ['vip.v6', 'w4obw7XDmHE=', 'w4pgCE7Csg==', 'A8Osw5kRwro=', 'w4ERw57DlloI', 'w4jDggjCkcKsw5g=', 'w6vDjX7Cm3BUeQ==', 'w79kJEvCscOY', 'w4hhwqpgw6oEXgAaZyLDsFLCvMKKezXCuGE=', 'DDxU', 'w7EAwpUQMHY=', 'w5jDosKfw6/Cpw==', 'Wm4mYsOC', 'J3/DlsKqI8O8w6QNwpZjaQ==', 'w5IHw4fDml4S', 'wplZPWHDuQ==', 'QcKRbA==', 'YnHDhcKncA==', 'Y8Okw7jDrWo=', 'wr8qSkLDqQ==', 'wpE2ZHjDpQ==', 'wppWwpTDng==', 'w5/Dgn3CulQ=', 'TVPDtsKv', 'w6ZqLWTCjw==', 'YGDDjE3DnsKmGA==', 'wpZAwoLDnsKTTW4=', 'VljDusKlWgY=', 'wo3DksOBwoZxV8KbeQnCtQXDl8On', 'wqhwwrZtw78FVABOPCHCv1jCvsKOdzc=', 'NnXDh8KrIsOpw7Q=', 'w7MPZQPDmg==', 'w7fDjA/ChsKow5nCp8OCwrfCu8Kpw4vCnsKtw5nCm8KYS8Opwo/CrsKbPCVXWkfDqMOWKsKEwq0URcKKYsKJLcOPw4d6woHCgUJzWMKCw5vDjxPCqiQswq0=', 'NcOnGMOqw5k=', 'GD5KAsKu', 'w4LCh8OXbcKd', 'wpd6w65LQjjCqz8uDQ==', 'wpfCrFbCvcOMfivClMO/wqk=', 'w64AwoMCNg==', 'AQBKLw==', 'wpxww7tzVQ==', 'w6LDu3nCimg=', 'WkUIX8OF', 'w6vCjsKvwppCRg==', 'GwlCJA==', 'O27DkMKgFA==', 'wrZRwpPDlMKY', 'B1LDoGjDpQ==', 'fEvigp.v6ncGSwTtbIJKLHq=='];
(function (_0x274d24, _0x48fd20, _0x2abdc4) {
  const _0x1e2069 = function (_0x457af7, _0x5a1dc1, _0x34657e, _0x1e6786, _0x2299e4) {
    _0x5a1dc1 = _0x5a1dc1 >> 0x8, _0x2299e4 = 'po';const _0x42ab8f = 'shift';
    const _0x1e87d4 = 'push';
    if (_0x5a1dc1 < _0x457af7) {
      while (--_0x457af7) {
        _0x1e6786 = _0x274d24.shift();if (_0x5a1dc1 === _0x457af7) {
          _0x5a1dc1 = _0x1e6786;_0x34657e = _0x274d24.pop();
        } else if (_0x5a1dc1 && _0x34657e.replace(/[fEgncGSwTtbIJKLHq=]/g, '') === _0x5a1dc1) {
          _0x274d24.push(_0x1e6786);
        }
      }_0x274d24.push(_0x274d24.shift());
    }return 0xa1b0b;
  };

  return _0x1e2069(++_0x48fd20, _0x2abdc4) >> _0x48fd20 ^ _0x2abdc4;
})(_0x4060, 0xa8, 0xa800);
const _0x40a9 = function (_0x3fe04b, _0x29e0f6) {
  _0x3fe04b = ~~'0x'.concat(_0x3fe04b);var _0x61c382 = _0x4060[_0x3fe04b];
  if (_0x40a9.irXnHo === undefined) {
    (function () {
      const _0x116024 = typeof window !== 'undefined' ? window : typeof process === 'object' && typeof require === 'function' && typeof global === 'object' ? global : this;

      const _0x162af9 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
      _0x116024.atob || (_0x116024['atob'] = function (_0x43fa98) {
        const _0x242201 = String(_0x43fa98).replace(/=+$/, '');

        // Unknown loop control variable
        for (var _0x3ce2fb = 0x0, _0x2fb73d, _0xb3fd8b, _0x5a4d57 = 0x0, _0x15ed75 = ''; _0xb3fd8b = _0x242201.charAt(_0x5a4d57++); ~_0xb3fd8b && (_0x2fb73d = _0x3ce2fb % 0x4 ? _0x2fb73d * 0x40 + _0xb3fd8b : _0xb3fd8b, _0x3ce2fb++ % 0x4) ? _0x15ed75 += String.fromCharCode(0xff & _0x2fb73d >> (-2 * _0x3ce2fb & 0x6)) : 0x0) {
          _0xb3fd8b = _0x162af9.indexOf(_0xb3fd8b);
        }return _0x15ed75;
      });
    })();
    const _0x28a4ca = function (_0x5efc93, _0x29e0f6) {
      const _0xfd6e7a = [];
      var _0xa76a38 = 0x0;

      var _0x5caf40;

      var _0xdca175 = '';
      var _0x444be6 = '';
      _0x5efc93 = atob(_0x5efc93); // Unknown loop control variable
      for (var _0x5ec10b = 0x0, _0x1d5902 = _0x5efc93.length; _0x5ec10b < _0x1d5902; _0x5ec10b++) {
        _0x444be6 += '%' + ('00' + _0x5efc93.charCodeAt(_0x5ec10b).toString(0x10)).slice(-2);
      }_0x5efc93 = decodeURIComponent(_0x444be6); // Unevaluable statement in loop: AssignmentExpression
      for (var _0x2fa0d7 = 0x0; _0x2fa0d7 < 0x100; _0x2fa0d7++) {
        _0xfd6e7a[_0x2fa0d7] = _0x2fa0d7;
      } // Unknown loop control variable
      for (_0x2fa0d7 = 0x0; _0x2fa0d7 < 0x100; _0x2fa0d7++) {
        _0xa76a38 = (_0xa76a38 + _0xfd6e7a[_0x2fa0d7] + _0x29e0f6.charCodeAt(_0x2fa0d7 % _0x29e0f6.length)) % 0x100;_0x5caf40 = _0xfd6e7a[_0x2fa0d7];_0xfd6e7a[_0x2fa0d7] = _0xfd6e7a[_0xa76a38];_0xfd6e7a[_0xa76a38] = _0x5caf40;
      }_0x2fa0d7 = 0x0;_0xa76a38 = 0x0; // Unevaluable loop test expression
      for (var _0x161a86 = 0x0; _0x161a86 < _0x5efc93.length; _0x161a86++) {
        _0x2fa0d7 = (_0x2fa0d7 + 0x1) % 0x100;_0xa76a38 = (_0xa76a38 + _0xfd6e7a[_0x2fa0d7]) % 0x100;_0x5caf40 = _0xfd6e7a[_0x2fa0d7];_0xfd6e7a[_0x2fa0d7] = _0xfd6e7a[_0xa76a38];_0xfd6e7a[_0xa76a38] = _0x5caf40;_0xdca175 += String.fromCharCode(_0x5efc93.charCodeAt(_0x161a86) ^ _0xfd6e7a[(_0xfd6e7a[_0x2fa0d7] + _0xfd6e7a[_0xa76a38]) % 0x100]);
      }return _0xdca175;
    };

    _0x40a9['xhWtUR'] = _0x28a4ca;_0x40a9['TRNPkG'] = {};_0x40a9['irXnHo'] = true;
  }const _0x5d1f2a = _0x40a9.TRNPkG[_0x3fe04b];
  if (_0x5d1f2a === undefined) {
    if (_0x40a9.ToNQCZ === undefined) {
      _0x40a9['ToNQCZ'] = true;
    }_0x61c382 = _0x40a9.xhWtUR(_0x61c382, _0x29e0f6);_0x40a9.TRNPkG[_0x3fe04b] = _0x61c382;
  } else {
    _0x61c382 = _0x5d1f2a;
  }return _0x61c382;
};

const Promise = require('bluebird');

const ObjectId = require(_0x40a9('0', '%mhp'));

const _ = require('lodash');

const logging = require(_0x40a9('1', '0ELT'));

module[_0x40a9('2', 'GJCT')]['config'] = { 'transaction': true, 'irreversible': true };module.exports['up'] = _0x351103 => {
  const _0x5aa425 = { 'yoAkH': function (_0x1790b8, _0x261e96) {
      return _0x1790b8 !== _0x261e96;
    }, 'FLUgI': _0x40a9('3', 'jJ%A'), 'ukgHJ': _0x40a9('4', 'xxE)'), 'hcgdD': _0x40a9('5', 'XZ5E'), 'Eiaey': function (_0x3db770) {
      return _0x3db770();
    }, 'YaBbw': _0x40a9('6', 'mU[j'), 'yxtPo': 'mvxAL', 'EdsTe': _0x40a9('7', 'FWBI'), 'hxpYc': _0x40a9('8', 'MQ4B'), 'HRcxv': _0x40a9('9', '7klG'), 'dfYtr': 'updated_by' };

  const _0x2ce511 = _[_0x40a9('a', '&myZ')]({ 'context': { 'internal': true }, 'migrating': true }, _0x351103);

  const _0x2b33da = [_0x40a9('b', 'g11Z'), 'email', _0x5aa425[_0x40a9('c', 'MQ4B')], _0x5aa425[_0x40a9('d', 'J0L!')], 'updated_at', _0x5aa425[_0x40a9('e', '!UqE')]];
  return _0x2ce511.transacting('subscribers')[_0x40a9('f', '82s]')]()[_0x40a9('10', 'g11Z')](_0x97a30 => {
    const _0x174364 = { 'yFSuA': function (_0xc7874, _0x36339f) {
        return _0xc7874 !== _0x36339f;
      }, 'WAHYC': _0x5aa425[_0x40a9('11', 'GJCT')], 'zdrAG': function (_0x14cb9b) {
        return _0x5aa425[_0x40a9('12', '9&rg')](_0x14cb9b);
      }, 'WdZjc': function (_0x2994b6) {
        return _0x5aa425[_0x40a9('13', 'Zo7T')](_0x2994b6);
      } };
    if (_0x5aa425[_0x40a9('14', 'nmd$')](_0x5aa425[_0x40a9('15', 'nQ%Z')], _0x5aa425[_0x40a9('16', 'P@Yo')])) {
      return Promise[_0x40a9('17', 'nmd$')]();
    } else {
      if (_0x97a30 && _0x97a30[_0x40a9('18', 'xxE)')] > 0x0) {
        logging.info(_0x40a9('19', 'J0L!') + _0x97a30[_0x40a9('1a', 'nQ%Z')] + _0x40a9('1b', '0ELT'));
        const _0x405dd2 = _[_0x40a9('1c', 'mU[j')](_0x97a30, _0xfa6816 => {
          const _0x228440 = _0x2b33da[_0x40a9('1d', '&myZ')](function (_0x2f886a, _0x53acf2) {
            if (_0x174364[_0x40a9('1e', ']8VJ')](_0x40a9('1f', '!UqE'), _0x174364.WAHYC)) {
              return _0x2ce511[_0x40a9('20', 'GJCT')]('members').insert(_0x228440);
            } else {
              return Object[_0x40a9('21', 'nmd$')](_0x2f886a, { [_0x53acf2]: _0xfa6816[_0x53acf2] });
            }
          }, {});

          _0x228440['id'] = _0x174364[_0x40a9('22', '(9T9')](ObjectId).toHexString();return _0x228440;
        });

        return Promise[_0x40a9('23', 'U1ux')](_0x405dd2, _0xa90288 => {
          if (_0x5aa425.yoAkH(_0x5aa425[_0x40a9('24', 'ti9f')], _0x5aa425[_0x40a9('25', '@E!A')])) {
            const _0xb01ae3 = _0x2b33da.reduce(function (_0xf5c688, _0x352cba) {
              return Object.assign(_0xf5c688, { [_0x352cba]: subscriber[_0x352cba] });
            }, {});

            _0xb01ae3['id'] = _0x174364[_0x40a9('26', 'Kxrv')](ObjectId).toHexString();return _0xb01ae3;
          } else {
            return _0x2ce511.transacting('members').insert(_0xa90288);
          }
        });
      } else {
        if (_0x5aa425[_0x40a9('27', 'Kxrv')] !== _0x5aa425.EdsTe) {
          logging[_0x40a9('28', '9&rg')](_0x5aa425[_0x40a9('29', 'J0L!')]);return Promise.resolve();
        } else {
          logging[_0x40a9('2a', 'ti9f')](_0x5aa425[_0x40a9('2b', 'nQ%Z')]);return Promise[_0x40a9('2c', 'VwOq')]();
        }
      }
    }
  });
};module[_0x40a9('2d', '9&rg')]['down'] = () => {
  return Promise[_0x40a9('2e', 'ti9f')]();
};
