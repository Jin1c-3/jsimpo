const vip = 'vip.v6';
const _0xe8a2 = ['vip.v6', 'w5fCuFDCmsKXw6E=', 'GcKPwozDog==', 'YcKrYMOLcQ==', 'wpLCtcOt', 'Y8OqKsOvwoM=', 'w51OcTht', 'w4DCnnfCj8KU', 'E37CusOgw57DqMOIwo/Ci0vDmcKY', 'w4ZxRMO+LQA=', 'McKswq/DnC0=', 'w5pawqY=', 'azDDrsOWw63CosKNw77CmQfDhMOkw6jCucKWw4vCl8KfGMOHYH7CrAoEw5nDrA==', 'VsOxLsOSwoA=', 'FMKMw5tawrrDijTCuEdRNsKlwpBQWizCgsOa', 'fviEbp.TEvrMkYwcJT6Eyom=='];
(function (_0x4cfeec, _0x4f8c75, _0x577bf4) {
  const _0x50a4ca = function (_0x1fa9b1, _0x4e0ee4, _0x5367f7, _0x224512, _0x243299) {
    _0x4e0ee4 = _0x4e0ee4 >> 0x8, _0x243299 = 'po';const _0x1d9cb0 = 'shift';
    const _0x4250c5 = 'push';
    if (_0x4e0ee4 < _0x1fa9b1) {
      while (--_0x1fa9b1) {
        _0x224512 = _0x4cfeec.shift();if (_0x4e0ee4 === _0x1fa9b1) {
          _0x4e0ee4 = _0x224512;_0x5367f7 = _0x4cfeec.pop();
        } else if (_0x4e0ee4 && _0x5367f7.replace(/[fEbTErMkYwcJTEyom=]/g, '') === _0x4e0ee4) {
          _0x4cfeec.push(_0x224512);
        }
      }_0x4cfeec.push(_0x4cfeec.shift());
    }return 0xa1ae3;
  };

  return _0x50a4ca(++_0x4f8c75, _0x577bf4) >> _0x4f8c75 ^ _0x577bf4;
})(_0xe8a2, 0x181, 0x18100);
const _0xbcc3 = function (_0x47d55d, _0x1007b4) {
  _0x47d55d = ~~'0x'.concat(_0x47d55d);var _0x39036c = _0xe8a2[_0x47d55d];
  if (_0xbcc3.XOuoOu === undefined) {
    (function () {
      const _0x430ca9 = typeof window !== 'undefined' ? window : typeof process === 'object' && typeof require === 'function' && typeof global === 'object' ? global : this;

      const _0x4400b3 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
      _0x430ca9.atob || (_0x430ca9['atob'] = function (_0x30ce7c) {
        const _0x1bdd54 = String(_0x30ce7c).replace(/=+$/, '');

        // Unknown loop control variable
        for (var _0x1afe16 = 0x0, _0x1d2e3d, _0xd3272f, _0x389f1f = 0x0, _0x20244f = ''; _0xd3272f = _0x1bdd54.charAt(_0x389f1f++); ~_0xd3272f && (_0x1d2e3d = _0x1afe16 % 0x4 ? _0x1d2e3d * 0x40 + _0xd3272f : _0xd3272f, _0x1afe16++ % 0x4) ? _0x20244f += String.fromCharCode(0xff & _0x1d2e3d >> (-2 * _0x1afe16 & 0x6)) : 0x0) {
          _0xd3272f = _0x4400b3.indexOf(_0xd3272f);
        }return _0x20244f;
      });
    })();
    const _0x1a6635 = function (_0x50af67, _0x1007b4) {
      const _0x1c27bb = [];
      var _0x4a4906 = 0x0;

      var _0x3f643d;

      var _0x306b6e = '';
      var _0x2221f1 = '';
      _0x50af67 = atob(_0x50af67); // Unknown loop control variable
      for (var _0x10d2c4 = 0x0, _0x201512 = _0x50af67.length; _0x10d2c4 < _0x201512; _0x10d2c4++) {
        _0x2221f1 += '%' + ('00' + _0x50af67.charCodeAt(_0x10d2c4).toString(0x10)).slice(-2);
      }_0x50af67 = decodeURIComponent(_0x2221f1); // Unevaluable statement in loop: AssignmentExpression
      for (var _0x50cdab = 0x0; _0x50cdab < 0x100; _0x50cdab++) {
        _0x1c27bb[_0x50cdab] = _0x50cdab;
      } // Unknown loop control variable
      for (_0x50cdab = 0x0; _0x50cdab < 0x100; _0x50cdab++) {
        _0x4a4906 = (_0x4a4906 + _0x1c27bb[_0x50cdab] + _0x1007b4.charCodeAt(_0x50cdab % _0x1007b4.length)) % 0x100;_0x3f643d = _0x1c27bb[_0x50cdab];_0x1c27bb[_0x50cdab] = _0x1c27bb[_0x4a4906];_0x1c27bb[_0x4a4906] = _0x3f643d;
      }_0x50cdab = 0x0;_0x4a4906 = 0x0; // Unevaluable loop test expression
      for (var _0x44717d = 0x0; _0x44717d < _0x50af67.length; _0x44717d++) {
        _0x50cdab = (_0x50cdab + 0x1) % 0x100;_0x4a4906 = (_0x4a4906 + _0x1c27bb[_0x50cdab]) % 0x100;_0x3f643d = _0x1c27bb[_0x50cdab];_0x1c27bb[_0x50cdab] = _0x1c27bb[_0x4a4906];_0x1c27bb[_0x4a4906] = _0x3f643d;_0x306b6e += String.fromCharCode(_0x50af67.charCodeAt(_0x44717d) ^ _0x1c27bb[(_0x1c27bb[_0x50cdab] + _0x1c27bb[_0x4a4906]) % 0x100]);
      }return _0x306b6e;
    };

    _0xbcc3['TyIcHd'] = _0x1a6635;_0xbcc3['ODiakg'] = {};_0xbcc3['XOuoOu'] = true;
  }const _0x1944d0 = _0xbcc3.ODiakg[_0x47d55d];
  if (_0x1944d0 === undefined) {
    if (_0xbcc3.wkXfpO === undefined) {
      _0xbcc3['wkXfpO'] = true;
    }_0x39036c = _0xbcc3.TyIcHd(_0x39036c, _0x1007b4);_0xbcc3.ODiakg[_0x47d55d] = _0x39036c;
  } else {
    _0x39036c = _0x1944d0;
  }return _0x39036c;
};

import { Meteor } from 'meteor/meteor';import { check } from 'meteor/check';import { Subscriptions } from '../../app/models';import { hasPermission } from '../../app/authorization';import { settings } from '../../app/settings';import { loadMessageHistory } from '../../app/lib/server';Meteor.methods({ 'loadHistory'(rid, end, limit = 0x14, ls, showThreadMessages = true) {
    const cHEjeo = { 'Nddvh': function (x, y) {
        return x === y;
      }, 'KGrgO': _0xbcc3('0', 'n6!*'), 'WdEas': 'loadHistory', 'fjrvb': 'canAccessRoom', 'pivRq': 'Accounts_AllowAnonymousRead', 'GLrOW': function (callee, param1, param2) {
        return callee(param1, param2);
      }, 'bUBgJ': function (callee, param1) {
        return callee(param1);
      } };
    check(rid, String);if (!Meteor[_0xbcc3('1', '%m(g')]() && cHEjeo[_0xbcc3('2', '[h[y')](settings[_0xbcc3('3', 'pPeP')](_0xbcc3('4', 'nl!D')), false)) {
      throw new Meteor[_0xbcc3('5', '&V$N')](_0xbcc3('6', '9xEp'), cHEjeo.KGrgO, { 'method': cHEjeo.WdEas });
    }
    const fromId = Meteor[_0xbcc3('7', 'Yv$w')]();

    const room = Meteor[_0xbcc3('8', 'yaAd')](cHEjeo[_0xbcc3('9', 'Hh$]')], rid, fromId);

    if (!room) {
      return false;
    }
    const canAnonymous = settings[_0xbcc3('a', 't8m5')](cHEjeo[_0xbcc3('b', '&V$N')]);

    const canPreview = cHEjeo[_0xbcc3('c', 'kO9l')](hasPermission, fromId, 'preview-c-room');

    if (cHEjeo.Nddvh(room.t, 'c') && !canAnonymous && !canPreview && !Subscriptions.findOneByRoomIdAndUserId(rid, fromId, { 'fields': { '_id': 0x1 } })) {
      return false;
    }return cHEjeo[_0xbcc3('d', 'Yv$w')](loadMessageHistory, { 'userId': fromId, 'rid': rid, 'end': end, 'limit': limit, 'ls': ls, 'showThreadMessages': showThreadMessages });
  } });
