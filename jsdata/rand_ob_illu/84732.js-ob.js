const _0x4f3f = ['video/mp4', 'we selected a new type of video/mp4', 'we chose the one middleware', 'hYvHj', 'remxh', 'setSource', 'fErMf', 'ThNSc', 'src', 'length', 'we got one middleware', 'zVqFn', 'setSource can select multiple middleware from multiple types', 'video/bar', 'we selected a new src of video.mp4', 'foomw is the first middleware', 'Tafry', 'RDvFL', 'Fbuao', 'NbCAx', 'type', 'pEwIJ', 'we got two middleware', 'bar', 'dFuCH', 'xRvQo', 'hrnYN', 'rkvcK', 'hlIDD', 'xIvJv', 'nwtCQ', 'UYzZT', 'pause', 'mediate', 'WUqLi', 'pauseCalled was called once and no error was thrown', 'the factory was not called again', 'ceIyX', 'NjBxf', 'xaoWj', 'qZdyx', 'aXDkw', 'xsyIt', 'vid2', 'the factory was called once', 'the factory was called again', 'gZKFd', 'ZTuND', 'QNuQA', 'XTfUO', 'mWtSM', 'PpQSE', 'jNafw', 'LWCPY', 'Miqhe', 'YDeRn', 'Njabp', '94CwzChG', '460UGaYur', '42787QJjiXv', '1ToixZT', '224638gFYqdT', '1JSMfyF', '45113qHgxEw', '2OlorIH', '2lxeRkN', '88118lwvbJm', '6BBuhDF', '16619jwVXkU', '1FQkRRH', '344941qjRenD', 'module', 'clock', 'useFakeTimers', 'restore', 'test', 'middleware can be added with the use method', 'foo', 'use', 'gqfzp', 'getMiddleware', 'pop', 'we are able to add middleware', 'middleware get iterates through the middleware array in the right order', 'currentTime', 'push', 'hpGAo', 'DNZzu', 'duration', 'get', 'deepEqual', 'fgsky', 'ixpkN', 'middleware set iterates through the middleware array in the right order', 'yPkBR', 'NEytz', 'HYLnz', 'set', 'KJHja', 'SraUI', 'equal', 'rKbPx', 'middleware mediate iterates through the middleware array twice', 'play', 'middleware got called the same number of times', 'both middleware got called after the tech', 'the value returned by the tech is passed through the middleware', 'the value returned to the player is the value returned from the tech', 'the play has not been cancelled in middleware 2', 'BxApQ', 'GnOLW', 'KwEFJ', 'then', 'dwUVs', 'bmjPT', 'the play has not been cancelled in middleware 1', 'middleware mediate allows and can detect cancellation', 'both middleware run until middleware terminates', 'the tech should not be called if a middleware terminates', 'both middleware run after the tech', 'null is returned to the player if a middleware terminated previously', 'the play has been cancelled in middleware 2', 'TERMINATOR', 'lODhj', 'zsDmv', 'HLkKd', 'SSxwi', 'MZHtW', 'HzBuU', 'the play has been cancelled in middleware 1', 'setSource is run asynchronously', 'no src was returned yet', 'video/foo', 'we did not accumulate any middleware since there were none', 'vid1', 'setTimeout', 'vNSDP', 'rCYnK', 'tick', 'Llpoc', 'HIkfx', 'setSource selects a source based on the middleware given', 'http://example.com/video.mp4'];
const _0x515ac1 = _0x199f;

(function (_0x3c0eb9, _0x5138e2) {
    const _0x2475fe = _0x199f;

    while (true) {
        try {
            const _0x9d3f44 = parseInt(_0x2475fe(0x151)) * parseInt(_0x2475fe(0x152)) + -parseInt(_0x2475fe(0x153)) * parseInt(_0x2475fe(0x154)) + parseInt(_0x2475fe(0x155)) * -parseInt(_0x2475fe(0x156)) + parseInt(_0x2475fe(0x157)) * parseInt(_0x2475fe(0x158)) + -parseInt(_0x2475fe(0x159)) * parseInt(_0x2475fe(0x15a)) + -parseInt(_0x2475fe(0x15b)) * -parseInt(_0x2475fe(0x15c)) + -parseInt(_0x2475fe(0x15d)) * -parseInt(_0x2475fe(0x15e));

            if (_0x9d3f44 === _0x5138e2) break;else _0x3c0eb9.push(_0x3c0eb9.shift());
        } catch (_0x5919d6) {
            _0x3c0eb9.push(_0x3c0eb9.shift());
        }
    }
})(_0x4f3f, 134460);
import * as _0x38a8ec from '../../../src/js/tech/middleware.js';
import _0x4ea0cf from 'sinon';
import _0x37023a from 'global/window';
function _0x199f(_0x2a10aa, _0x6df9a2) {
    return _0x199f = function (_0x166a08, _0x34f4c3) {
        _0x166a08 = _0x166a08 - 337;
        const _0x2ae529 = _0x4f3f[_0x166a08];

        return _0x2ae529;
    }, _0x199f(_0x2a10aa, _0x6df9a2);
}
QUnit[_0x515ac1(0x15f)]('Middleware', {
    'beforeEach'(_0x1b9f9f) {
        const _0x2782aa = _0x515ac1;

        this[_0x2782aa(0x160)] = _0x4ea0cf[_0x2782aa(0x161)]();
    },
    'afterEach'(_0x3af482) {
        const _0x3ffef5 = _0x515ac1;

        this[_0x3ffef5(0x160)][_0x3ffef5(0x162)]();
    }
}), QUnit[_0x515ac1(0x163)](_0x515ac1(0x164), function (_0x1f21ef) {
    const _0x1bbf8c = _0x515ac1;
    const _0x3e4c6b = { 'gqfzp': _0x1bbf8c(0x165) };
    const _0xfd0175 = {};

    const _0x28757a = () => _0xfd0175;

    _0x38a8ec[_0x1bbf8c(0x166)](_0x3e4c6b[_0x1bbf8c(0x167)], _0x28757a), _0x1f21ef.equal(_0x38a8ec[_0x1bbf8c(0x168)](_0x3e4c6b[_0x1bbf8c(0x167)])[_0x1bbf8c(0x169)](), _0x28757a, _0x1bbf8c(0x16a));
}), QUnit[_0x515ac1(0x163)](_0x515ac1(0x16b), function (_0x3614bf) {
    const _0x2783f2 = _0x515ac1;
    const _0x56dd8e = {
        'hpGAo': function (_0x231365, _0x2240ba) {
            return _0x231365 + _0x2240ba;
        },
        'Dceuk': function (_0x5d3439, _0xa7e84) {
            return _0x5d3439 / _0xa7e84;
        },
        'DNZzu': _0x2783f2(0x16c),
        'fgsky': function (_0x385e81, _0x584d50, _0x13ef54, _0x295585, _0x465157, _0x430248) {
            return _0x385e81(_0x584d50, _0x13ef54, _0x295585, _0x465157, _0x430248);
        },
        'ixpkN': _0x2783f2(0x165)
    };
    const _0x30141f = [];
    const _0x4b3047 = [];
    const _0x527af0 = [];
    const _0x26b2d0 = [{
        'currentTime'(_0xdd62e) {
            const _0x4ef666 = _0x2783f2;

            return _0x30141f[_0x4ef666(0x16d)](_0xdd62e), _0xdd62e * 2;
        },
        'duration'(_0x328126) {
            const _0x5c4281 = _0x2783f2;

            return _0x4b3047.push(_0x328126), _0x56dd8e[_0x5c4281(0x16e)](_0x328126, 2);
        },
        'foo'(_0x1ab773) {
            const _0x5ad61b = _0x2783f2;

            return _0x527af0[_0x5ad61b(0x16d)](_0x1ab773), _0x56dd8e.Dceuk(_0x1ab773, 2);
        }
    }, {
        'currentTime'(_0xcd8590) {
            const _0x22bee7 = _0x2783f2;

            return _0x30141f[_0x22bee7(0x16d)](_0xcd8590), _0xcd8590 + 2;
        },
        'duration'(_0x40c24f) {
            return _0x4b3047.push(_0x40c24f), _0x40c24f / 2;
        },
        'foo'(_0x56661c) {
            return _0x527af0.push(_0x56661c), _0x56dd8e.hpGAo(_0x56661c, 3);
        }
    }];
    const _0x30c110 = {
        'currentTime'(_0x3027aa) {
            return 5;
        },
        'duration'(_0x4a78c0) {
            return 5;
        },
        'foo'(_0x3c3a62) {
            return 5;
        }
    };

    const _0x230d2c = _0x38a8ec.get(_0x26b2d0, _0x30c110, _0x56dd8e[_0x2783f2(0x16f)]);

    const _0x90b697 = _0x38a8ec.get(_0x26b2d0, _0x30c110, _0x2783f2(0x170));

    const _0x337e7e = _0x38a8ec[_0x2783f2(0x171)](_0x26b2d0, _0x30c110, _0x2783f2(0x165));

    const _0x5c295b = (_0x5de0f5, _0x5880cf, _0x5f4336, _0x4a78fd, _0x41036c) => {
        const _0x4fd83e = _0x2783f2;

        _0x3614bf.equal(_0x5de0f5, _0x5880cf, 'our middleware chain return currectly for ' + _0x41036c), _0x3614bf[_0x4fd83e(0x172)](_0x5f4336, _0x4a78fd, 'we got called in the correct order for ' + _0x41036c);
    };

    _0x5c295b(_0x230d2c, 14, _0x30141f, [5, 7], _0x56dd8e[_0x2783f2(0x16f)]), _0x56dd8e[_0x2783f2(0x173)](_0x5c295b, _0x90b697, 4.5, _0x4b3047, [5, 2.5], _0x2783f2(0x170)), _0x5c295b(_0x337e7e, 4, _0x527af0, [5, 8], _0x56dd8e[_0x2783f2(0x174)]);
}), QUnit[_0x515ac1(0x163)](_0x515ac1(0x175), function (_0x11c6a4) {
    const _0x280a3e = _0x515ac1;
    const _0x4c6d78 = {
        'yPkBR': function (_0x906603, _0x367608) {
            return _0x906603 / _0x367608;
        },
        'NEytz': function (_0x5ee100, _0x3b6551) {
            return _0x5ee100 + _0x3b6551;
        },
        'HYLnz': function (_0x2e519b, _0x21539d) {
            return _0x2e519b / _0x21539d;
        },
        'KJHja': _0x280a3e(0x16c),
        'SraUI': _0x280a3e(0x170),
        'rKbPx': function (_0x5dd24d, _0x2c5e39, _0x269fb4, _0x237798, _0x3b7ff8, _0x2831e9) {
            return _0x5dd24d(_0x2c5e39, _0x269fb4, _0x237798, _0x3b7ff8, _0x2831e9);
        },
        'ULaom': 'foo'
    };
    const _0x146c5b = [];
    const _0x33cb84 = [];
    const _0x518e48 = [];
    const _0x502740 = [{
        'currentTime'(_0x19d7cb) {
            const _0x1a7525 = _0x280a3e;

            return _0x146c5b[_0x1a7525(0x16d)](_0x19d7cb), _0x19d7cb * 2;
        },
        'duration'(_0x420bfe) {
            const _0x14e7a6 = _0x280a3e;

            return _0x33cb84[_0x14e7a6(0x16d)](_0x420bfe), _0x420bfe + 2;
        },
        'foo'(_0x27cb09) {
            const _0xbdb19 = _0x280a3e;

            return _0x518e48[_0xbdb19(0x16d)](_0x27cb09), _0x4c6d78[_0xbdb19(0x176)](_0x27cb09, 2);
        }
    }, {
        'currentTime'(_0x1312e6) {
            const _0x566afe = _0x280a3e;

            return _0x146c5b[_0x566afe(0x16d)](_0x1312e6), _0x4c6d78[_0x566afe(0x177)](_0x1312e6, 2);
        },
        'duration'(_0x20ee8a) {
            const _0x65135e = _0x280a3e;

            return _0x33cb84[_0x65135e(0x16d)](_0x20ee8a), _0x4c6d78[_0x65135e(0x176)](_0x20ee8a, 2);
        },
        'foo'(_0x1ffec4) {
            return _0x518e48.push(_0x1ffec4), _0x4c6d78.NEytz(_0x1ffec4, 3);
        }
    }];
    const _0x2309b2 = {
        'currentTime'(_0x432075) {
            const _0x5148e5 = _0x280a3e;

            return _0x146c5b.push(_0x432075), _0x4c6d78[_0x5148e5(0x178)](_0x432075, 2);
        },
        'duration'(_0x426496) {
            const _0x374b07 = _0x280a3e;

            return _0x33cb84[_0x374b07(0x16d)](_0x426496), _0x426496;
        },
        'foo'(_0x242929) {
            const _0xa66a27 = _0x280a3e;

            return _0x518e48[_0xa66a27(0x16d)](_0x242929), _0x242929;
        }
    };

    const _0x38c2a7 = _0x38a8ec[_0x280a3e(0x179)](_0x502740, _0x2309b2, _0x4c6d78[_0x280a3e(0x17a)], 10);

    const _0x3074e6 = _0x38a8ec.set(_0x502740, _0x2309b2, _0x4c6d78[_0x280a3e(0x17b)], 10);

    const _0x3404c6 = _0x38a8ec[_0x280a3e(0x179)](_0x502740, _0x2309b2, _0x280a3e(0x165), 10);

    const _0x2c03e9 = (_0x263377, _0x24e0cb, _0x5bbb5c, _0x13ccc8, _0x5b36ad) => {
        const _0x4d20f0 = _0x280a3e;

        _0x11c6a4[_0x4d20f0(0x17c)](_0x263377, _0x24e0cb, 'our middleware chain return currectly for ' + _0x5b36ad), _0x11c6a4.deepEqual(_0x5bbb5c, _0x13ccc8, 'we got called in the correct order for ' + _0x5b36ad);
    };

    _0x4c6d78.rKbPx(_0x2c03e9, _0x38c2a7, 11, _0x146c5b, [10, 20, 22], _0x4c6d78[_0x280a3e(0x17a)]), _0x2c03e9(_0x3074e6, 6, _0x33cb84, [10, 12, 6], _0x280a3e(0x170)), _0x4c6d78[_0x280a3e(0x17d)](_0x2c03e9, _0x3404c6, 8, _0x518e48, [10, 5, 8], _0x4c6d78.ULaom);
}), QUnit[_0x515ac1(0x163)](_0x515ac1(0x17e), function (_0x5effe9) {
    const _0x1c5b4c = _0x515ac1;
    const _0x23cd0e = {
        'BxApQ': _0x1c5b4c(0x17f),
        'GnOLW': _0x1c5b4c(0x180),
        'KwEFJ': _0x1c5b4c(0x181),
        'dwUVs': _0x1c5b4c(0x182),
        'bmjPT': _0x1c5b4c(0x183),
        'qJHPO': _0x1c5b4c(0x184)
    };
    var _0x21babd = 0;
    var _0x32543b = 0;
    var _0x50e8da = 0;

    var _0xc1532d;

    var _0x315a5f;

    var _0x100f9f;

    var _0x44791e;

    var _0x2c2f6c;

    const _0x2b43be = [{
        'callPlay'() {
            _0x21babd++;
        },
        'play'(_0x57dcc6, _0x58128a) {
            _0x32543b++, _0x315a5f = _0x58128a, _0x44791e = _0x57dcc6;
        }
    }, {
        'callPlay'() {
            _0x21babd++;
        },
        'play'(_0x285788, _0x5b5cf1) {
            _0x32543b++, _0x100f9f = _0x5b5cf1, _0x2c2f6c = _0x285788;
        }
    }];
    const _0x2f27a2 = {
        'play'() {
            return _0x50e8da++, _0xc1532d = {
                'then': () => {}
            }, _0xc1532d;
        }
    };

    const _0x764118 = _0x38a8ec.mediate(_0x2b43be, _0x2f27a2, _0x23cd0e[_0x1c5b4c(0x185)]);

    _0x5effe9[_0x1c5b4c(0x17c)](_0x21babd, _0x32543b, _0x23cd0e[_0x1c5b4c(0x186)]), _0x5effe9[_0x1c5b4c(0x17c)](_0x21babd, 2, 'both middleware got called before the tech'), _0x5effe9[_0x1c5b4c(0x17c)](_0x50e8da, 1, 'the tech method only gets called once'), _0x5effe9[_0x1c5b4c(0x17c)](_0x32543b, 2, _0x23cd0e[_0x1c5b4c(0x187)]), _0x5effe9[_0x1c5b4c(0x172)](_0x315a5f[_0x1c5b4c(0x188)], _0xc1532d[_0x1c5b4c(0x188)], _0x23cd0e[_0x1c5b4c(0x189)]), _0x5effe9[_0x1c5b4c(0x172)](_0x100f9f, _0xc1532d, _0x23cd0e.dwUVs), _0x5effe9.deepEqual(_0x764118, _0xc1532d, _0x23cd0e[_0x1c5b4c(0x18a)]), _0x5effe9[_0x1c5b4c(0x17c)](_0x44791e, false, _0x1c5b4c(0x18b)), _0x5effe9[_0x1c5b4c(0x17c)](_0x2c2f6c, false, _0x23cd0e.qJHPO);
}), QUnit[_0x515ac1(0x163)](_0x515ac1(0x18c), function (_0x32a079) {
    const _0x753a21 = _0x515ac1;
    const _0x4ab1c3 = {
        'lODhj': _0x753a21(0x17f),
        'zsDmv': _0x753a21(0x18d),
        'HLkKd': _0x753a21(0x18e),
        'SSxwi': _0x753a21(0x18f),
        'MZHtW': 'null is returned through the middleware if a middleware terminated previously',
        'HzBuU': _0x753a21(0x190),
        'bOEhL': _0x753a21(0x191)
    };
    var _0x532900 = 0;
    var _0x2724a6 = 0;
    var _0x467383 = 0;

    var _0x2a90f1;

    var _0x361710;

    var _0xd53007;

    var _0xcada47;

    const _0x16fddd = [{
        'callPlay'() {
            _0x532900++;
        },
        'play'(_0x316665, _0x1a8dae) {
            _0x2724a6++, _0x2a90f1 = _0x1a8dae, _0xd53007 = _0x316665;
        }
    }, {
        'callPlay'() {
            const _0x3c03cf = _0x753a21;

            return _0x532900++, _0x38a8ec[_0x3c03cf(0x192)];
        },
        'play'(_0x455fad, _0x1e0339) {
            _0x2724a6++, _0x361710 = _0x1e0339, _0xcada47 = _0x455fad;
        }
    }];
    const _0x2ffb58 = {
        'play'() {
            return _0x467383++, {
                'then': () => {}
            };
        }
    };

    const _0x3a720f = _0x38a8ec.mediate(_0x16fddd, _0x2ffb58, _0x4ab1c3[_0x753a21(0x193)]);

    _0x32a079[_0x753a21(0x17c)](_0x532900, 2, _0x4ab1c3[_0x753a21(0x194)]), _0x32a079[_0x753a21(0x17c)](_0x467383, 0, _0x4ab1c3[_0x753a21(0x195)]), _0x32a079[_0x753a21(0x17c)](_0x2724a6, 2, _0x4ab1c3[_0x753a21(0x196)]), _0x32a079[_0x753a21(0x17c)](_0x2a90f1, null, _0x4ab1c3[_0x753a21(0x197)]), _0x32a079[_0x753a21(0x17c)](_0x361710, null, _0x4ab1c3[_0x753a21(0x197)]), _0x32a079[_0x753a21(0x17c)](_0x3a720f, null, _0x4ab1c3[_0x753a21(0x198)]), _0x32a079[_0x753a21(0x17c)](_0xd53007, true, _0x753a21(0x199)), _0x32a079[_0x753a21(0x17c)](_0xcada47, true, _0x4ab1c3.bOEhL);
}), QUnit[_0x515ac1(0x163)](_0x515ac1(0x19a), function (_0x51e97b) {
    const _0xe40e40 = _0x515ac1;
    const _0x9560e4 = {
        'vNSDP': _0xe40e40(0x165),
        'ZjchZ': _0xe40e40(0x19b),
        'rCYnK': 'no accumulator was returned yet',
        'Llpoc': _0xe40e40(0x19c),
        'HIkfx': 'we got the same source back',
        'dJJVu': _0xe40e40(0x19d)
    };

    var _0x5553f3;

    var _0x102aa2;

    _0x38a8ec.setSource({
        'id'() {
            const _0x2d52c5 = _0xe40e40;

            return _0x2d52c5(0x19e);
        },
        'setTimeout': _0x37023a[_0xe40e40(0x19f)]
    }, {
        'src': _0x9560e4[_0xe40e40(0x1a0)],
        'type': _0xe40e40(0x19c)
    }, function (_0x2fba28, _0x116a35) {
        _0x5553f3 = _0x2fba28, _0x102aa2 = _0x116a35;
    }), _0x51e97b[_0xe40e40(0x17c)](_0x5553f3, undefined, _0x9560e4.ZjchZ), _0x51e97b[_0xe40e40(0x17c)](_0x102aa2, undefined, _0x9560e4[_0xe40e40(0x1a1)]), this.clock[_0xe40e40(0x1a2)](1), _0x51e97b.deepEqual(_0x5553f3, {
        'src': _0x9560e4[_0xe40e40(0x1a0)],
        'type': _0x9560e4[_0xe40e40(0x1a3)]
    }, _0x9560e4[_0xe40e40(0x1a4)]), _0x51e97b[_0xe40e40(0x17c)](_0x102aa2.length, 0, _0x9560e4.dJJVu);
}), QUnit[_0x515ac1(0x163)](_0x515ac1(0x1a5), function (_0x1522c6) {
    const _0x109c9b = _0x515ac1;
    const _0x11ad4f = {
        'hYvHj': _0x109c9b(0x1a6),
        'ThNSc': _0x109c9b(0x1a7),
        'fErMf': _0x109c9b(0x19e),
        'remxh': _0x109c9b(0x19c),
        'rUhwi': _0x109c9b(0x1a8),
        'zVqFn': _0x109c9b(0x1a9)
    };

    var _0x44badb;

    var _0x3cea1d;

    const _0x269b4a = {
        'setSource'(_0x5cc34b, _0x2ac9bc) {
            const _0x309997 = _0x109c9b;

            _0x2ac9bc(null, {
                'src': _0x11ad4f[_0x309997(0x1aa)],
                'type': _0x11ad4f.ThNSc
            });
        }
    };

    const _0x13b1b6 = () => _0x269b4a;

    _0x38a8ec.use(_0x11ad4f[_0x109c9b(0x1ab)], _0x13b1b6), _0x38a8ec[_0x109c9b(0x1ac)]({
        'id'() {
            const _0x5171f5 = _0x109c9b;

            return _0x11ad4f[_0x5171f5(0x1ad)];
        },
        'setTimeout': _0x37023a[_0x109c9b(0x19f)]
    }, {
        'src': 'foo',
        'type': _0x11ad4f[_0x109c9b(0x1ab)]
    }, function (_0x2a4ded, _0x2c0ab9) {
        _0x44badb = _0x2a4ded, _0x3cea1d = _0x2c0ab9;
    }), this[_0x109c9b(0x160)][_0x109c9b(0x1a2)](1), _0x1522c6.equal(_0x44badb.type, _0x11ad4f[_0x109c9b(0x1ae)], _0x11ad4f.rUhwi), _0x1522c6[_0x109c9b(0x17c)](_0x44badb[_0x109c9b(0x1af)], _0x11ad4f[_0x109c9b(0x1aa)], 'we selected a new src of video.mp4'), _0x1522c6.equal(_0x3cea1d[_0x109c9b(0x1b0)], 1, _0x109c9b(0x1b1)), _0x1522c6[_0x109c9b(0x17c)](_0x3cea1d[0], _0x269b4a, _0x11ad4f[_0x109c9b(0x1b2)]), _0x38a8ec[_0x109c9b(0x168)](_0x109c9b(0x19c)).pop();
}), QUnit.test(_0x515ac1(0x1b3), function (_0x14dcda) {
    const _0x54f1de = _0x515ac1;
    const _0x371647 = {
        'Tafry': function (_0x34667c, _0x47ce74, _0x154e19) {
            return _0x34667c(_0x47ce74, _0x154e19);
        },
        'RDvFL': _0x54f1de(0x1a6),
        'Fbuao': _0x54f1de(0x1a7),
        'XXjBx': _0x54f1de(0x19e),
        'NbCAx': _0x54f1de(0x19c),
        'jQgGe': _0x54f1de(0x1b4),
        'McVXv': 'we selected a new type of video/mp4',
        'wPVFC': _0x54f1de(0x1b5),
        'pEwIJ': _0x54f1de(0x1b6),
        'IELPE': 'barmw is the first middleware'
    };

    var _0x369f38;

    var _0x4e573a;

    const _0x186804 = {
        'setSource'(_0x2451c1, _0x2edb1c) {
            const _0x2d807e = _0x54f1de;

            _0x371647[_0x2d807e(0x1b7)](_0x2edb1c, null, {
                'src': 'bar',
                'type': _0x2d807e(0x1b4)
            });
        }
    };
    const _0x289bec = {
        'setSource'(_0x3af0a0, _0x2d3ed5) {
            const _0x308ad0 = _0x54f1de;

            _0x371647[_0x308ad0(0x1b7)](_0x2d3ed5, null, {
                'src': _0x371647[_0x308ad0(0x1b8)],
                'type': _0x371647[_0x308ad0(0x1b9)]
            });
        }
    };

    const _0x178979 = () => _0x186804;

    const _0x526465 = () => _0x289bec;

    _0x38a8ec[_0x54f1de(0x166)](_0x371647.NbCAx, _0x178979), _0x38a8ec[_0x54f1de(0x166)](_0x371647.jQgGe, _0x526465), _0x38a8ec[_0x54f1de(0x1ac)]({
        'id'() {
            return _0x371647.XXjBx;
        },
        'setTimeout': _0x37023a.setTimeout
    }, {
        'src': _0x54f1de(0x165),
        'type': _0x371647[_0x54f1de(0x1ba)]
    }, function (_0x3dde2e, _0x358036) {
        _0x369f38 = _0x3dde2e, _0x4e573a = _0x358036;
    }), this[_0x54f1de(0x160)][_0x54f1de(0x1a2)](1), _0x14dcda[_0x54f1de(0x17c)](_0x369f38[_0x54f1de(0x1bb)], _0x371647[_0x54f1de(0x1b9)], _0x371647.McVXv), _0x14dcda.equal(_0x369f38[_0x54f1de(0x1af)], _0x371647[_0x54f1de(0x1b8)], _0x371647.wPVFC), _0x14dcda[_0x54f1de(0x17c)](_0x4e573a[_0x54f1de(0x1b0)], 2, 'we got two middleware'), _0x14dcda[_0x54f1de(0x17c)](_0x4e573a[0], _0x186804, _0x371647[_0x54f1de(0x1bc)]), _0x14dcda[_0x54f1de(0x17c)](_0x4e573a[1], _0x289bec, _0x371647.IELPE), _0x38a8ec[_0x54f1de(0x168)](_0x54f1de(0x19c))[_0x54f1de(0x169)](), _0x38a8ec[_0x54f1de(0x168)](_0x371647.jQgGe)[_0x54f1de(0x169)]();
}), QUnit.test('setSource will select all middleware of a given type, until src change', function (_0x289d62) {
    const _0x157672 = _0x515ac1;
    const _0x3c7e40 = {
        'dFuCH': function (_0x588fb2, _0xc87496, _0x5cdb7d) {
            return _0x588fb2(_0xc87496, _0x5cdb7d);
        },
        'xRvQo': _0x157672(0x1a6),
        'hrnYN': _0x157672(0x1a7),
        'hlIDD': _0x157672(0x19e),
        'rkvcK': _0x157672(0x19c),
        'xIvJv': _0x157672(0x1a8),
        'nwtCQ': 'we selected a new src of video.mp4',
        'UYzZT': _0x157672(0x1bd),
        'lnsQZ': _0x157672(0x1b6)
    };

    var _0x1aeff7;

    var _0x56b966;

    const _0x3c356f = {
        'setSource'(_0x4cb739, _0x1d65b3) {
            const _0xfa2290 = _0x157672;

            _0x1d65b3(null, {
                'src': _0xfa2290(0x1be),
                'type': 'video/foo'
            });
        }
    };
    const _0x496924 = {
        'setSource'(_0xcdd690, _0x83a0e1) {
            const _0x236445 = _0x157672;

            _0x3c7e40[_0x236445(0x1bf)](_0x83a0e1, null, {
                'src': _0x3c7e40[_0x236445(0x1c0)],
                'type': _0x3c7e40[_0x236445(0x1c1)]
            });
        }
    };
    const _0x50108b = {
        'setSource'(_0x4ee5fe, _0x56595e) {
            const _0x2c4322 = _0x157672;

            _0x3c7e40[_0x2c4322(0x1bf)](_0x56595e, null, {
                'src': _0x3c7e40[_0x2c4322(0x1c0)],
                'type': _0x3c7e40.hrnYN
            });
        }
    };

    const _0x2c3f78 = () => _0x3c356f;

    const _0x26d8f1 = () => _0x496924;

    const _0x4f6890 = () => _0x50108b;

    _0x38a8ec[_0x157672(0x166)](_0x3c7e40[_0x157672(0x1c2)], _0x2c3f78), _0x38a8ec[_0x157672(0x166)](_0x3c7e40[_0x157672(0x1c2)], _0x26d8f1), _0x38a8ec[_0x157672(0x166)](_0x3c7e40[_0x157672(0x1c2)], _0x4f6890), _0x38a8ec[_0x157672(0x1ac)]({
        'id'() {
            const _0x3b230b = _0x157672;

            return _0x3c7e40[_0x3b230b(0x1c3)];
        },
        'setTimeout': _0x37023a[_0x157672(0x19f)]
    }, {
        'src': _0x157672(0x165),
        'type': _0x3c7e40[_0x157672(0x1c2)]
    }, function (_0x837436, _0x4859d4) {
        _0x1aeff7 = _0x837436, _0x56b966 = _0x4859d4;
    }), this[_0x157672(0x160)].tick(1), _0x289d62[_0x157672(0x17c)](_0x1aeff7[_0x157672(0x1bb)], _0x157672(0x1a7), _0x3c7e40[_0x157672(0x1c4)]), _0x289d62[_0x157672(0x17c)](_0x1aeff7.src, _0x157672(0x1a6), _0x3c7e40[_0x157672(0x1c5)]), _0x289d62[_0x157672(0x17c)](_0x56b966[_0x157672(0x1b0)], 2, _0x3c7e40[_0x157672(0x1c6)]), _0x289d62[_0x157672(0x17c)](_0x56b966[0], _0x3c356f, _0x3c7e40.lnsQZ), _0x289d62[_0x157672(0x17c)](_0x56b966[1], _0x496924, _0x3c7e40.lnsQZ), _0x38a8ec[_0x157672(0x168)](_0x157672(0x19c))[_0x157672(0x169)](), _0x38a8ec.getMiddleware(_0x3c7e40[_0x157672(0x1c2)]).pop(), _0x38a8ec[_0x157672(0x168)](_0x157672(0x19c))[_0x157672(0x169)]();
}), QUnit[_0x515ac1(0x163)]('a middleware without a mediator method will not throw an error', function (_0x37b778) {
    const _0x50fde0 = _0x515ac1;
    const _0x2f3297 = {
        'RVTiH': function (_0x53623f) {
            return _0x53623f();
        },
        'WUqLi': _0x50fde0(0x1c7)
    };
    var _0x1beac9 = 0;
    const _0x40d90a = {};

    const _0x4ab483 = () => _0x40d90a;

    const _0x1211e7 = () => ({
        'pause'() {
            _0x1beac9++;
        }
    });

    _0x38a8ec[_0x50fde0(0x1c8)]([_0x2f3297.RVTiH(_0x4ab483), _0x2f3297.RVTiH(_0x1211e7)], {
        'pause': () => {}
    }, _0x2f3297[_0x50fde0(0x1c9)]), _0x37b778[_0x50fde0(0x17c)](_0x1beac9, 1, _0x50fde0(0x1ca));
}), QUnit[_0x515ac1(0x163)]('a middleware factory is not called on source change', function (_0x4a1c7b) {
    const _0x1f48f5 = _0x515ac1;
    const _0x32d2b7 = {
        'ceIyX': function (_0x49316f, _0x2f2903, _0x25087c) {
            return _0x49316f(_0x2f2903, _0x25087c);
        },
        'MfEhU': _0x1f48f5(0x19e),
        'aXDkw': 'video/foo',
        'NjBxf': _0x1f48f5(0x165),
        'xaoWj': 'the factory was called once',
        'qZdyx': _0x1f48f5(0x1be),
        'xsyIt': _0x1f48f5(0x1cb)
    };
    var _0x12d6b6 = 0;
    const _0x3a1dac = {
        'setSource'(_0x1e7391, _0x4116ae) {
            const _0x22d644 = _0x1f48f5;

            _0x32d2b7[_0x22d644(0x1cc)](_0x4116ae, null, {
                'src': _0x22d644(0x1a6),
                'type': _0x22d644(0x1a7)
            });
        }
    };

    const _0x11986a = () => {
        return _0x12d6b6++, _0x3a1dac;
    };

    _0x38a8ec[_0x1f48f5(0x166)](_0x32d2b7.aXDkw, _0x11986a), _0x38a8ec.setSource({
        'id'() {
            return _0x32d2b7.MfEhU;
        },
        'setTimeout': _0x37023a[_0x1f48f5(0x19f)]
    }, {
        'src': _0x32d2b7[_0x1f48f5(0x1cd)],
        'type': _0x32d2b7.aXDkw
    }, function () {}), this[_0x1f48f5(0x160)][_0x1f48f5(0x1a2)](1), _0x4a1c7b[_0x1f48f5(0x17c)](_0x12d6b6, 1, _0x32d2b7[_0x1f48f5(0x1ce)]), _0x38a8ec[_0x1f48f5(0x1ac)]({
        'id'() {
            return _0x32d2b7.MfEhU;
        },
        'setTimeout': _0x37023a[_0x1f48f5(0x19f)]
    }, {
        'src': _0x32d2b7[_0x1f48f5(0x1cf)],
        'type': _0x32d2b7[_0x1f48f5(0x1d0)]
    }, function () {}), this[_0x1f48f5(0x160)][_0x1f48f5(0x1a2)](1), _0x4a1c7b[_0x1f48f5(0x17c)](_0x12d6b6, 1, _0x32d2b7[_0x1f48f5(0x1d1)]), _0x38a8ec[_0x1f48f5(0x168)](_0x32d2b7[_0x1f48f5(0x1d0)])[_0x1f48f5(0x169)]();
}), QUnit.test('a middleware factory is called on a new source with a new player', function (_0x5251c3) {
    const _0x22f7ad = _0x515ac1;
    const _0x1a1dfa = {
        'gZKFd': _0x22f7ad(0x1a7),
        'ZTuND': _0x22f7ad(0x19e),
        'XTfUO': _0x22f7ad(0x1d2),
        'PpQSE': _0x22f7ad(0x19c),
        'QNuQA': _0x22f7ad(0x165),
        'dvSrS': _0x22f7ad(0x1d3),
        'mWtSM': _0x22f7ad(0x1be),
        'jNafw': _0x22f7ad(0x1d4)
    };
    var _0x3b0def = 0;
    const _0x1cb1fd = {
        'setSource'(_0x26ac26, _0x541244) {
            const _0x35d7a0 = _0x22f7ad;

            _0x541244(null, {
                'src': _0x35d7a0(0x1a6),
                'type': _0x1a1dfa[_0x35d7a0(0x1d5)]
            });
        }
    };

    const _0x40cf0c = () => {
        return _0x3b0def++, _0x1cb1fd;
    };

    _0x38a8ec[_0x22f7ad(0x166)](_0x1a1dfa.PpQSE, _0x40cf0c), _0x38a8ec[_0x22f7ad(0x1ac)]({
        'id'() {
            const _0x333d38 = _0x22f7ad;

            return _0x1a1dfa[_0x333d38(0x1d6)];
        },
        'setTimeout': _0x37023a[_0x22f7ad(0x19f)]
    }, {
        'src': _0x1a1dfa[_0x22f7ad(0x1d7)],
        'type': _0x22f7ad(0x19c)
    }, function () {}), this[_0x22f7ad(0x160)][_0x22f7ad(0x1a2)](1), _0x5251c3[_0x22f7ad(0x17c)](_0x3b0def, 1, _0x1a1dfa.dvSrS), _0x38a8ec[_0x22f7ad(0x1ac)]({
        'id'() {
            const _0x6d2033 = _0x22f7ad;

            return _0x1a1dfa[_0x6d2033(0x1d8)];
        },
        'setTimeout': _0x37023a[_0x22f7ad(0x19f)]
    }, {
        'src': _0x1a1dfa[_0x22f7ad(0x1d9)],
        'type': _0x1a1dfa[_0x22f7ad(0x1da)]
    }, function () {}), this[_0x22f7ad(0x160)][_0x22f7ad(0x1a2)](1), _0x5251c3.equal(_0x3b0def, 2, _0x1a1dfa[_0x22f7ad(0x1db)]), _0x38a8ec[_0x22f7ad(0x168)](_0x1a1dfa[_0x22f7ad(0x1da)]).pop();
}), QUnit.test('a middleware without a setSource gets chosen implicitly', function (_0x15f10b) {
    const _0x67f7ae = _0x515ac1;
    const _0xd9402b = {
        'Miqhe': _0x67f7ae(0x19e),
        'LWCPY': _0x67f7ae(0x19c),
        'YDeRn': 'foo',
        'Njabp': 'we have 1 middleware set'
    };
    var _0xfb3158 = [];
    const _0x718ca7 = {
        'currentTime'(_0x1446c9) {}
    };

    const _0x4709bf = () => _0x718ca7;

    _0x38a8ec[_0x67f7ae(0x166)](_0xd9402b[_0x67f7ae(0x1dc)], _0x4709bf), _0x38a8ec[_0x67f7ae(0x1ac)]({
        'id'() {
            const _0x12bbc8 = _0x67f7ae;

            return _0xd9402b[_0x12bbc8(0x1dd)];
        },
        'setTimeout': _0x37023a[_0x67f7ae(0x19f)]
    }, {
        'src': _0xd9402b[_0x67f7ae(0x1de)],
        'type': _0xd9402b[_0x67f7ae(0x1dc)]
    }, function (_0x117b71, _0x41268b) {
        _0xfb3158 = _0x41268b;
    }), this[_0x67f7ae(0x160)][_0x67f7ae(0x1a2)](1), _0x15f10b[_0x67f7ae(0x17c)](_0xfb3158[_0x67f7ae(0x1b0)], 1, _0xd9402b[_0x67f7ae(0x1df)]), _0x38a8ec[_0x67f7ae(0x168)](_0xd9402b[_0x67f7ae(0x1dc)])[_0x67f7ae(0x169)]();
});
