'use strict';
var vip = "vip.v6";
var _0x38c1 = [vip, "w412wpnClnITVMKywqvDr2/CncO6JMOSwq0fwqvCkg==", "RMK4wosWwoHDn8OIwq7CncOm", "w4PCvGBkwro=", "w6DCisOLwr7CtDMzA8Kr", "dH/CtjEMOhnDgMOhRRfDpGEzw4vCkMOhdX0=", "w6rDkHLClQ==", "f2EgOMKl", "dsKrJcKowpg=", "A8Ohwqc3ag==", "w6zCpMKVIyXDh8K5Znx8w6fDqMKgw7rCqS1fw4pAT8OLKQ==", "wpLDssKGw5FW", "w6bDlHnCgcOhBxB9XMKww4YEeMK/wp1bw4vCkMKmUcKvc17CtcK1JzDCrQTDskPCu8K7Xy3CscKRw6vDu1wRPMKnD352w53DkRNCwp8oJH3DiSbDmy7CjcOn", "Q8KeJMKdwqHDs8KJw5g=", "wrbDindDO8OFwpAHwozDiMKMw7U=", "QcKACsOwEw==", "QnLCnsK4OMOwwo7DhQ==", 
"wq3DgXJOC8OFwpgXwr7DncKOw68=", "wqjCtMOxw7VP", "w5PDoE9k", "YMOowozCl8Kf", "w506wo0uVA==", "wp7Ck8Oxw4BI", "w74ZLRrCr8K5ASN/XQ==", "w7M0wp0o", "EQ3CvcK6w4c=", "ecKrwpAFwow=", "aXnCsjTCrcORFgvCoA==", "C03CgcKiB2F7HMOewpjDhEzCgSrDv1QKwpXCjA==", "bynCkTga", "XcKCN8OHEQ==", "w5waXj3CqTU7wojDt8KBw4rCgAvDtHsReMOSHw==", "A8Kcw7YiP0sMwqnDpkwrUUnDsy49w5waDsK1QA==", "MX/CmMKqGA==", "MsOUUMKlJw==", "W2/CoQ==", "w7jDtxx/Ug==", "WMKHwpMAwqk=", "w5dLOcO+woxaw7Vz", "w4t9w53CvsOI", "wrfCk8OkbsOPwrHCq0Q=", "w6fCgsO3fsOB", 
"w4QEKwQ=", "woNeCsOYMw==", "w7dUw4nClsOU", "w7wOMQXCv8K5Fi9p", "w4zDhjZIbsKUCEzDosKMw6JSwrTDmcOBwq9yw7scw4BowoLCr8KZMsKAG8KW", "V8OywoLCssODeU7CuHA2KcKD", "C2Qbw6HDtA==", "w6lTw7zCoMOj", "f1zCkigx", "csOvwo3CuA==", "w7HCkMKoaMOcwqTCvkA=", "bBDDmcKqw4prWcOPGcKrCSfCt2swwp7Du0YTw5dK", "wr7CoQRywqbCshNGwoPClXJhwqw8NQjCtWAX", "aMKkw47DhsOLRB/DvS3DgcKD", "w4PDp8KTwrQ=", "dMKlFsOyFQzDscKtwoxJMyBQIA4rGA==", "P8OHesOqbcO7wq/DhMOBasOmw5ZwwrVjXEfDnMKXwo8EdWJrw63DgT1sM8KUJQEbwqcyw6UywqrDpQpiQ13CmsO1wq7CuMKUw5fCpR51Pg==", 
"esKlwoADwo7DnsKNw7XDlsOt", "dcKZO8OTJQ==", "YcKmB8Oew4jDhsKGw5YQZ17CvQxRwqHDvcOWw6smSMOV", "I0nChcOyw5BtUcOZXMK7TCrCvnlNwoTDsUkaw4s=", "ClvCmsKzw5FOWsObccK6DjvCqw==", "CknCgMKcB0F/PcOdwpHDh27ClQHDpEUAwo/ClhDCpB4=", "Ml/ClcK0w59lUMKcV8K6FSfCvW4DwpjCtEEfw5ZcVMK1wqoFwqXDnsKfS8KFOMKz", "UsKUJ8KLwp7DvMKCw4hScFrDq1A5wqTDocOaw6kmQ8OePSHCmHQjAMKxw44=", "YsOAaHpK", "QcKoB8K0woY=", "WMOsUEdG", "LmTCmcKpNA==", "w5HCgMOIwqjCkjg+BQ==", "wqZtF8OpOjpHcA==", "ScKdwoXCl8Kp", "wq/DgyRfasKYK0g=", "wpnCnsKLwq0f", "wo4gwobDq8OEw48GKGg4w5jDnw==", 
"WcK0wq7CnA==", "VcO1dsOAdA==", "Q8Oiwp/CvsOCYkLCs00=", "w7B/w7zCu8OKRm85woHDnsOFwrFhw6gJQ8KXw6gC", "w6/DssONwqpQXMKUw61zZg==", "w6cXAsOiwqY=", "A3Qaw6PDsA==", "w4l8IF5aYEwNaw==", "w4bDkHvCicOiLgIwTsK1w4QpbMK2wpsPw4vCkcKs", "wrvDnMKzw4E=", "SUlGwr8y", "w6rCqMKWND0=", "w6p/w6PCuMOQeG0xwpA=", "CsKuw4l0aksMwqnDpkwrLQbDmzgnw5YBCQ==", "w4FhQXA=", "w51rw6XCtsOJ", "An/CvsO0UmF7HMOewpjDhDDDjgLDqU4Awo7CixbCpQ==", "Hy92wqjCqA==", "K2PCksKJPMO9wozDrMOcIk0qJ8KKw7tkFsKlw5INwrDCoQ==", "QlfCtRTCtg==", "IcKkw5VhVn4Dwqc=", 
"TAN0wrgh", "ZsO6woDDkMOUTBTDqw==", "w5VlVnPDhA==", "f1M0OMKTGksPX8KCwqrDhg==", "HFvCryw=", "w5TDjkJZwqw=", "Q8ORbMO3bsOswr7DjcOX", "w5/ChsOpYcOLwpzCrUzCmQlAwrXCmGs/wqnCg8K9Nw==", "w6how7/Cp8OAeHo9wobDiQ==", "w7zDr8OGwr8=", "w7rCu8Kxwr/Csw==", "w7Z4J1JH", "wrQgwovDo8Otw6oLIFklw5fDuiVMWsKfM1/Ckw==", "cMO0d2ZtWcKiw7scw6U=", "AEfCicKr", "wrtbKcKRwqM=", "FVfCusK+FA==", "w4YaQT7Csws5woDDpg==", "w4fDlilQbsK1LUDDs8KAw611wqzDksOuwrp2w7YW", "J03CiMK+", "w6rDgjBdbQ==", "V1bCjS3Cgg==", "w6zDpcOQwqxQXMKMw6FlZsKhw4RoZcKlFsODYkhVwpoUw5hNwr5Q", 
"w5NJwoTCtnc=", "cnzCocKoNsO9TkrCocO2ZcK8Og==", "wpjCkMOlw55uwrMBwopjEkQYcsKFworCjDUAwrzDkmzDng==", "w5oawqg4dQ==", "e8K+wqvCnsKJwrrDjMOCwo7CtCcUw7I=", "w5VKS1jDqQ==", "Y8OReMOtd8O/wq8=", "wpvCk8Ouw6NA", "w5jDg8K2w4d0RAvCsg==", "w74QWz8=", "wp8Dw7jDpFQ5JTwFw4TCgMKOwojDi8OZG2jDlF98JS4BwpzDgMKyUgdNwrRkw6PDhSN9YMOHfcK8w4jDiCYPUmpNWMOpwqTCpMOVQsKg", "w6I/wqnCvMOY", "wpnClMOkw6BuwpMFwqtgG0c6ZsKuwpHCnT8awqY=", "w4trPEFKYFsBfVg=", "Lhdnwqk=", "Vn3CtTjCsA==", "w5d2wobClWgtVsK6wro=", "jvsip.KvzSh6ckOMXbRUgKPf=="];
(function(obj, count, long) {
  var fn = function(to, value, str, val, key) {
    value = value >> 8;
    key = "po";
    var str = "shift";
    var method = "push";
    if (value < to) {
      for (; --to;) {
        val = obj[str]();
        if (value === to) {
          value = val;
          str = obj[key + "p"]();
        } else {
          if (value && str["replace"](/[jsKzShckOMXbRUgKPf=]/g, "") === value) {
            obj[method](val);
          }
        }
      }
      obj[method](obj[str]());
    }
    return 662439;
  };
  return fn(++count, long) >> count ^ long;
})(_0x38c1, 187, 47872);
var _0x5332 = function(c, alpha) {
  c = ~~"0x"["concat"](c);
  var x = _0x38c1[c];
  if (_0x5332["uxfaoT"] === undefined) {
    (function() {
      var jid = typeof window !== "undefined" ? window : typeof process === "object" && typeof require === "function" && typeof global === "object" ? global : this;
      var listeners = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
      if (!jid["atob"]) {
        jid["atob"] = function(i) {
          var str = String(i)["replace"](/=+$/, "");
          var bc = 0;
          var bs;
          var buffer;
          var Y = 0;
          var pix_color = "";
          for (; buffer = str["charAt"](Y++); ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer, bc++ % 4) ? pix_color = pix_color + String["fromCharCode"](255 & bs >> (-2 * bc & 6)) : 0) {
            buffer = listeners["indexOf"](buffer);
          }
          return pix_color;
        };
      }
    })();
    var testcase = function(data, fn) {
      var secretKey = [];
      var y = 0;
      var temp;
      var testResult = "";
      var tempData = "";
      data = atob(data);
      var val = 0;
      var key = data["length"];
      for (; val < key; val++) {
        tempData = tempData + ("%" + ("00" + data["charCodeAt"](val)["toString"](16))["slice"](-2));
      }
      data = decodeURIComponent(tempData);
      var x = 0;
      for (; x < 256; x++) {
        secretKey[x] = x;
      }
      x = 0;
      for (; x < 256; x++) {
        y = (y + secretKey[x] + fn["charCodeAt"](x % fn["length"])) % 256;
        temp = secretKey[x];
        secretKey[x] = secretKey[y];
        secretKey[y] = temp;
      }
      x = 0;
      y = 0;
      var i = 0;
      for (; i < data["length"]; i++) {
        x = (x + 1) % 256;
        y = (y + secretKey[x]) % 256;
        temp = secretKey[x];
        secretKey[x] = secretKey[y];
        secretKey[y] = temp;
        testResult = testResult + String["fromCharCode"](data["charCodeAt"](i) ^ secretKey[(secretKey[x] + secretKey[y]) % 256]);
      }
      return testResult;
    };
    _0x5332["PwQIWZ"] = testcase;
    _0x5332["PjGNWP"] = {};
    _0x5332["uxfaoT"] = !![];
  }
  var e = _0x5332["PjGNWP"][c];
  if (e === undefined) {
    if (_0x5332["SoRNhk"] === undefined) {
      _0x5332["SoRNhk"] = !![];
    }
    x = _0x5332["PwQIWZ"](x, alpha);
    _0x5332["PjGNWP"][c] = x;
  } else {
    x = e;
  }
  return x;
};
"use strict";
const fs = require("fs");
const path = require("path");
const {
  expect : expect
} = require(_0x5332("0", "Qj!s"));
const fse = require(_0x5332("1", "Dd$I"));
const {
  execSync : execSync
} = require(_0x5332("2", "rEU5"));
const serverlessExec = require(_0x5332("3", "8&rj"));
const {
  getTmpDirPath : getTmpDirPath
} = require(_0x5332("4", "vNTO"));
const fixturePaths = {
  "regular" : path[_0x5332("5", "B(9L")](__dirname, "fixtures/regular"),
  "individually" : path["join"](__dirname, "fixtures/individually"),
  "artifact" : path["join"](__dirname, _0x5332("6", "YJx7"))
};
describe("Integration test - Packaging - CloudFormation", () => {
  var data = {
    "BFplB" : function(saveNotifs) {
      return saveNotifs();
    },
    "zFBeO" : function(require, load, callback) {
      return require(load, callback);
    },
    "DAiXo" : _0x5332("7", ")RF!"),
    "OmnEw" : function(saveNotifs, notifications) {
      return saveNotifs(notifications);
    },
    "rWudp" : "ServerlessDeploymentBucket",
    "jAQuI" : "Arn",
    "yKtOn" : _0x5332("8", "ydD]"),
    "Lffrg" : function(value, joiner) {
      return value !== joiner;
    },
    "UsggJ" : _0x5332("9", "YJx7"),
    "Vyybj" : function(require, load, callback) {
      return require(load, callback);
    },
    "wUEeG" : function(saveNotifs, notifications) {
      return saveNotifs(notifications);
    },
    "lJLvZ" : _0x5332("a", "x!ry"),
    "VZqLj" : _0x5332("b", "rEU5"),
    "aROTA" : function(require, load, callback) {
      return require(load, callback);
    },
    "vVzPq" : "handler.hello",
    "wDYCS" : _0x5332("c", "rEU5"),
    "SLdvs" : function(require, load, callback) {
      return require(load, callback);
    },
    "yEyyN" : function(saveNotifs, notifications) {
      return saveNotifs(notifications);
    },
    "dRPwI" : function(saveNotifs, notifications) {
      return saveNotifs(notifications);
    },
    "ONYAq" : function(saveNotifs, notifications) {
      return saveNotifs(notifications);
    },
    "gWJjG" : _0x5332("d", "*IeB"),
    "LMwfM" : "SUpmR",
    "sgMim" : function(require, load, callback) {
      return require(load, callback);
    },
    "QIlwF" : "aws-nodejs-us-east-1-custom-name",
    "aYSPt" : function(require, load, callback) {
      return require(load, callback);
    },
    "xjHQN" : _0x5332("e", "rEU5"),
    "pNoXH" : "creates the correct default function resource in cfn template",
    "WjxvP" : _0x5332("f", "x!ry")
  };
  let root;
  data["ONYAq"](beforeEach, () => {
    root = data[_0x5332("10", "K%Q[")](getTmpDirPath);
  });
  data[_0x5332("11", "x!ry")](it, data[_0x5332("12", "K%Q[")], () => {
    if (data[_0x5332("13", "^t[]")]("gUUUE", data["UsggJ"])) {
      fse[_0x5332("14", "ou2G")](fixturePaths[_0x5332("15", "kGzV")], root);
      data[_0x5332("16", "3KX1")](execSync, serverlessExec + _0x5332("17", "gE1Q"), {
        "cwd" : root
      });
      const _0x5da451 = JSON[_0x5332("18", "KwdB")](fs[_0x5332("19", "kwxI")](path[_0x5332("1a", "3KX1")](root, data[_0x5332("1b", ")RF!")])));
      expect(_0x5da451[_0x5332("1c", "Qj!s")][_0x5332("1d", "$qh@")][_0x5332("1e", "C^)M")]["Code"][_0x5332("1f", "uVKU")])["to"][_0x5332("20", "mbsg")](/serverless\/aws-nodejs\/dev\/[^]*\/artifact.zip/);
      delete _0x5da451[_0x5332("21", "F4aU")][_0x5332("22", "Ve4d")]["Properties"][_0x5332("23", "vfC^")][_0x5332("24", "eH5r")];
      data[_0x5332("25", "S]0V")](expect, _0x5da451[_0x5332("26", "$qh@")][_0x5332("27", "TK0T")])["to"][_0x5332("28", "Zubw")][_0x5332("29", "$qh@")]({
        "Type" : _0x5332("2a", "*IeB"),
        "Properties" : {
          "Code" : {
            "S3Bucket" : {
              "Ref" : data[_0x5332("2b", "Omrj")]
            }
          },
          "FunctionName" : "aws-nodejs-dev-hello",
          "Handler" : "handler.hello",
          "MemorySize" : 1024,
          "Role" : {
            "Fn::GetAtt" : [_0x5332("2c", "^t[]"), data["jAQuI"]]
          },
          "Runtime" : data[_0x5332("2d", "1]Wr")],
          "Timeout" : 6
        },
        "DependsOn" : ["HelloLogGroup"]
      });
    } else {
      fse[_0x5332("2e", "TK0T")](fixturePaths["artifact"], root);
      data[_0x5332("2f", "eH5r")](execSync, serverlessExec + _0x5332("30", "vNTO"), {
        "cwd" : root
      });
      const _0x2fa56a = JSON[_0x5332("31", "Zubw")](fs[_0x5332("32", "$MIJ")](path[_0x5332("33", "GrHJ")](root, data[_0x5332("34", "8&rj")])));
      data["OmnEw"](expect, _0x2fa56a[_0x5332("35", ")RF!")][_0x5332("36", "Dd$I")][_0x5332("37", "$qh@")][_0x5332("38", "C^)M")][_0x5332("39", "B(9L")])["to"][_0x5332("3a", "F4aU")](/serverless\/aws-nodejs\/dev\/[^]*\/artifact.zip/);
      delete _0x2fa56a[_0x5332("1c", "Qj!s")][_0x5332("3b", "kwxI")][_0x5332("3c", "K%Q[")][_0x5332("3d", "*IeB")][_0x5332("3e", "aS&q")];
      data[_0x5332("3f", "^t[]")](expect, _0x2fa56a[_0x5332("40", "X)KF")][_0x5332("41", "gE1Q")])["to"][_0x5332("42", "*IeB")][_0x5332("43", "gE1Q")]({
        "Type" : data[_0x5332("44", "1]Wr")],
        "Properties" : {
          "Code" : {
            "S3Bucket" : {
              "Ref" : _0x5332("45", "C^)M")
            }
          },
          "FunctionName" : data[_0x5332("46", "KPSA")],
          "Handler" : _0x5332("47", "ES4Y"),
          "MemorySize" : 1024,
          "Role" : {
            "Fn::GetAtt" : [_0x5332("48", "LJKw"), data[_0x5332("49", "9$2k")]]
          },
          "Runtime" : data["yKtOn"],
          "Timeout" : 6
        },
        "DependsOn" : [_0x5332("4a", "3KX1")]
      });
    }
  });
  data["aYSPt"](it, data[_0x5332("4b", "Zubw")], () => {
    fse["copySync"](fixturePaths[_0x5332("4c", ")RF!")], root);
    data[_0x5332("4d", "KJ73")](execSync, serverlessExec + _0x5332("4e", "vfC^"), {
      "cwd" : root
    });
    const stack = JSON[_0x5332("18", "KwdB")](fs["readFileSync"](path[_0x5332("4f", "X)KF")](root, _0x5332("50", "lhxA"))));
    data[_0x5332("51", "2rIw")](expect, stack["Resources"][_0x5332("52", "LJKw")][_0x5332("53", "F4aU")][_0x5332("54", "Omrj")][_0x5332("39", "B(9L")])["to"][_0x5332("55", "1]Wr")](/serverless\/aws-nodejs\/dev\/[^]*\/aws-nodejs.zip/);
    delete stack[_0x5332("56", "KPSA")][_0x5332("57", "KPSA")][_0x5332("58", "ydD]")]["Code"][_0x5332("59", "8&rj")];
    expect(stack[_0x5332("5a", "ou2G")][_0x5332("5b", ")$iK")])["to"][_0x5332("5c", "Ve4d")]["equal"]({
      "Type" : data["lJLvZ"],
      "Properties" : {
        "Code" : {
          "S3Bucket" : {
            "Ref" : data[_0x5332("5d", "$MIJ")]
          }
        },
        "FunctionName" : data[_0x5332("5e", "x!ry")],
        "Handler" : data[_0x5332("5f", "QaY!")],
        "MemorySize" : 1024,
        "Role" : {
          "Fn::GetAtt" : [_0x5332("60", "S]0V"), data[_0x5332("61", "vfC^")]]
        },
        "Runtime" : "nodejs12.x",
        "Timeout" : 6
      },
      "DependsOn" : [data["wDYCS"]]
    });
  });
  it(_0x5332("62", "Ve4d"), () => {
    fse[_0x5332("63", "x!ry")](fixturePaths[_0x5332("64", "A9bH")], root);
    data[_0x5332("65", "YJx7")](execSync, serverlessExec + _0x5332("66", "^t[]"), {
      "cwd" : root
    });
    const stack = JSON["parse"](fs[_0x5332("67", "A9bH")](path["join"](root, data["DAiXo"])));
    data[_0x5332("68", "LJKw")](expect, stack["Resources"][_0x5332("41", "gE1Q")]["Properties"][_0x5332("69", "8&rj")][_0x5332("6a", "3KX1")])["to"][_0x5332("6b", "9$2k")](/serverless\/aws-nodejs\/dev\/[^]*\/hello.zip/);
    data[_0x5332("6c", "KJ73")](expect, stack["Resources"]["Hello2LambdaFunction"][_0x5332("6d", "LJ^a")][_0x5332("6e", "9$2k")][_0x5332("6f", "rEU5")])["to"][_0x5332("70", "ydD]")](/serverless\/aws-nodejs\/dev\/[^]*\/hello2.zip/);
    delete stack[_0x5332("71", "1]Wr")][_0x5332("72", "*IeB")]["Properties"]["Code"][_0x5332("73", ")$iK")];
    data[_0x5332("74", "YJx7")](expect, stack["Resources"][_0x5332("75", "X)KF")])["to"]["deep"][_0x5332("43", "gE1Q")]({
      "Type" : _0x5332("76", "TK0T"),
      "Properties" : {
        "Code" : {
          "S3Bucket" : {
            "Ref" : data[_0x5332("77", "*IeB")]
          }
        },
        "FunctionName" : data["VZqLj"],
        "Handler" : data["vVzPq"],
        "MemorySize" : 1024,
        "Role" : {
          "Fn::GetAtt" : [data[_0x5332("78", "!1bx")], _0x5332("79", "ES4Y")]
        },
        "Runtime" : "nodejs12.x",
        "Timeout" : 6
      },
      "DependsOn" : [data[_0x5332("7a", "gE1Q")]]
    });
  });
  it(data["WjxvP"], () => {
    var _0x1d8b38 = {
      "CFHuR" : function(_relatedTarget) {
        return data["BFplB"](_relatedTarget);
      }
    };
    if (data[_0x5332("7b", "ydD]")] === "SUpmR") {
      fse[_0x5332("7c", "uVKU")](fixturePaths["regular"], root);
      data[_0x5332("7d", "$qh@")](execSync, serverlessExec + _0x5332("7e", "Dd$I"), {
        "cwd" : root
      });
      const _0x384b41 = JSON[_0x5332("7f", "Dd$I")](fs[_0x5332("19", "kwxI")](path[_0x5332("80", "LJ^a")](root, data[_0x5332("81", "kGzV")])));
      data[_0x5332("82", "$qh@")](expect, _0x384b41[_0x5332("83", "LJ^a")][_0x5332("84", "gE1Q")]["Properties"][_0x5332("85", "Qj!s")])["to"][_0x5332("86", "mbsg")](data[_0x5332("87", "$qh@")]);
    } else {
      root = _0x1d8b38[_0x5332("88", ")$iK")](getTmpDirPath);
    }
  });
});

