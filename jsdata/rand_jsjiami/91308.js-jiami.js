var vip='vip.v6',_0x21b2=[vip,'wpDDiMO5OlFiw7gGwo1nRTIrw4DDpcO5X8ONw7MVwo0=','wr7CucOiUwvDmMOBwp/CjRfDrsKydMKBdxXDvMKObsOjO8OsMwtALUnCisKLwoBtw6nCrcOLRCrCvl/DvMOzwr8aIcO/SMOiFWd/woBiwqECwpJlbMKyVTFrd8KBBcKQwpXCiEkyL2FKwrLCtS9UbMK+w4LDosOqKD/CncK0wo3CjcOow6vDlsOHAcKnw5AXBcOHFMOOJcK7cVrClzTDl8Kfw5RwwpXDmy3DsgkEw4EGXcOrMG9Ww67CkznCpsOVYTRRAMKMw6rCr8KDwqbCvsOtTMOW','w5LDthrCmg==','D8KPPMOLRg==','w4p4w5o6Dl8w','U8OxwqhlJsOFwo7Cpw9Jw5d0wojCgcOdw6EZw63CicOlwoU=','OyPDjmNlwpfDscOuwqvCn006CyMywq7CsEDDlMKAVsOTEsKHHgPDkAPDvcOiEMO7Ix0LMwnDtxIPOMKoZmUhwqEEwqfCiDfClMOJwo40LcK1wobDoMKAwoMIwqkJXQfCj8KOw5HDmsKURzlrHUsnwo3Ci8KJfGzDt08=','CnjCsnTDlA/DncKxwr8=','bRV6w7xFw58RbcOi','Q8KgRHZxV34=','w6PDhxzDjyI=','w4vCt8OwMHY0w5Zow5LDi8OLD2pFMkzDocKkEzY=','w5Qiw4YILBPChjw=','wo3DtcKTZ8KrHcKI','TXnDp8K9cGJxw7s0wrzDpcONGAU7wrbCng4=','EUZNfCPDuThRKHPChBvDgcOufsKOw78YBsO3w4lRMCM3w45h','fW4YCUjCrsOgwpM+fw==','IcO0ZGk=','X0nDs1o=','woHCu0p5','P8O0T2I/w5PCrXYtwrY=','bWgnDV/CucOnwqgpIkPDu2ROwqIFw58jPjLDvA==','wr7CucOiUwvDmMOBwp/CjRfDrsKydMKBdxXDvMKObsOjO8OsMwtAFkHCnMKbwoFlw6zCrcOLRCrCvl/DvMOzwr8aIcK7DMOvDnB5wpd5wrwJw4sZEsO0WCp8ccKWHsKNwp7CrTcyIUdgwrLCtS9UbMOjw6jDosOoYXs=','wpjDq0Z6D20=','wqfChsKQDnV6w5zCpw==','DcKcF8KZag==','H8KyNsOBWSwmeg==','wrrCm1xwwrs=','WKviANp.RovR6shxTdCXhTu=='];(function(_0x12d240,_0x3f2ff3,_0x4d1d6c){var _0x2619f1=function(_0x26436b,_0x5c1a61,_0x5c3379,_0xc49fc0,_0x3c2116){_0x5c1a61=_0x5c1a61>>0x8,_0x3c2116='po';var _0x1acc9e='shift',_0x3b8b83='push';if(_0x5c1a61<_0x26436b){while(--_0x26436b){_0xc49fc0=_0x12d240[_0x1acc9e]();if(_0x5c1a61===_0x26436b){_0x5c1a61=_0xc49fc0;_0x5c3379=_0x12d240[_0x3c2116+'p']();}else if(_0x5c1a61&&_0x5c3379['replace'](/[WKANRoRshxTdCXhTu=]/g,'')===_0x5c1a61){_0x12d240[_0x3b8b83](_0xc49fc0);}}_0x12d240[_0x3b8b83](_0x12d240[_0x1acc9e]());}return 0xa1b62;};return _0x2619f1(++_0x3f2ff3,_0x4d1d6c)>>_0x3f2ff3^_0x4d1d6c;}(_0x21b2,0x98,0x9800));var _0x4748=function(_0x5f2d07,_0xc4af86){_0x5f2d07=~~'0x'['concat'](_0x5f2d07);var _0x1f86e2=_0x21b2[_0x5f2d07];if(_0x4748['AKRBiW']===undefined){(function(){var _0x4399da=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x372bdb='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x4399da['atob']||(_0x4399da['atob']=function(_0x16b0a7){var _0x422f5a=String(_0x16b0a7)['replace'](/=+$/,'');for(var _0x1233ba=0x0,_0x458d23,_0x5f5a9f,_0xc675e0=0x0,_0x15ce8f='';_0x5f5a9f=_0x422f5a['charAt'](_0xc675e0++);~_0x5f5a9f&&(_0x458d23=_0x1233ba%0x4?_0x458d23*0x40+_0x5f5a9f:_0x5f5a9f,_0x1233ba++%0x4)?_0x15ce8f+=String['fromCharCode'](0xff&_0x458d23>>(-0x2*_0x1233ba&0x6)):0x0){_0x5f5a9f=_0x372bdb['indexOf'](_0x5f5a9f);}return _0x15ce8f;});}());var _0x62b8a5=function(_0x3a29d2,_0xc4af86){var _0x1dd756=[],_0x5a373f=0x0,_0x17dffd,_0x531a56='',_0x98d4e5='';_0x3a29d2=atob(_0x3a29d2);for(var _0x99ed9d=0x0,_0x2e6b37=_0x3a29d2['length'];_0x99ed9d<_0x2e6b37;_0x99ed9d++){_0x98d4e5+='%'+('00'+_0x3a29d2['charCodeAt'](_0x99ed9d)['toString'](0x10))['slice'](-0x2);}_0x3a29d2=decodeURIComponent(_0x98d4e5);for(var _0x562e4c=0x0;_0x562e4c<0x100;_0x562e4c++){_0x1dd756[_0x562e4c]=_0x562e4c;}for(_0x562e4c=0x0;_0x562e4c<0x100;_0x562e4c++){_0x5a373f=(_0x5a373f+_0x1dd756[_0x562e4c]+_0xc4af86['charCodeAt'](_0x562e4c%_0xc4af86['length']))%0x100;_0x17dffd=_0x1dd756[_0x562e4c];_0x1dd756[_0x562e4c]=_0x1dd756[_0x5a373f];_0x1dd756[_0x5a373f]=_0x17dffd;}_0x562e4c=0x0;_0x5a373f=0x0;for(var _0x47b4f6=0x0;_0x47b4f6<_0x3a29d2['length'];_0x47b4f6++){_0x562e4c=(_0x562e4c+0x1)%0x100;_0x5a373f=(_0x5a373f+_0x1dd756[_0x562e4c])%0x100;_0x17dffd=_0x1dd756[_0x562e4c];_0x1dd756[_0x562e4c]=_0x1dd756[_0x5a373f];_0x1dd756[_0x5a373f]=_0x17dffd;_0x531a56+=String['fromCharCode'](_0x3a29d2['charCodeAt'](_0x47b4f6)^_0x1dd756[(_0x1dd756[_0x562e4c]+_0x1dd756[_0x5a373f])%0x100]);}return _0x531a56;};_0x4748['MEzjCL']=_0x62b8a5;_0x4748['unibls']={};_0x4748['AKRBiW']=!![];}var _0x20183e=_0x4748['unibls'][_0x5f2d07];if(_0x20183e===undefined){if(_0x4748['XPeKRl']===undefined){_0x4748['XPeKRl']=!![];}_0x1f86e2=_0x4748['MEzjCL'](_0x1f86e2,_0xc4af86);_0x4748['unibls'][_0x5f2d07]=_0x1f86e2;}else{_0x1f86e2=_0x20183e;}return _0x1f86e2;};import*as _0x5e238e from'./directory';import _0x4db32e from'../resource-schema';import _0x3152f6 from'@hapi/joi';import _0x4176de from'fs-extra';import _0x3f0ba from'path';jest['mock'](_0x4748('0','cYx^'));const root=_0x4748('1','GcH$');describe(_0x4748('2','ulU#'),()=>{var HtKxRc={'KLwgN':function(callee,param1){return callee(param1);},'qMvKf':function(callee,param1){return callee(param1);},'osZBu':function(callee,param1,param2){return callee(param1,param2);}};HtKxRc['osZBu'](test,_0x4748('3','nvtk'),async()=>{const context={'root':root};const initialObject={'path':'directory'};const partialUpdate={'path':_0x4748('4','A2Pd')};const fullPath=_0x3f0ba[_0x4748('5','w^Wh')](root,initialObject[_0x4748('6','*bT3')]);const createPlan=await _0x5e238e[_0x4748('7','tyne')](context,initialObject);expect(createPlan)[_0x4748('8','w^Wh')]();expect(createPlan)[_0x4748('9','A2Pd')](_0x4748('a','m](S'));const createResponse=await _0x5e238e[_0x4748('b','ix^j')](context,initialObject);const validateResult=_0x3152f6[_0x4748('c','11Lv')](createResponse,{..._0x5e238e['schema'],..._0x4db32e});expect(validateResult[_0x4748('d','kr^V')])[_0x4748('e','B4ol')]();HtKxRc[_0x4748('f','tyne')](expect,_0x4176de['ensureDir'])['toHaveBeenCalledWith'](fullPath);HtKxRc['qMvKf'](expect,createResponse)[_0x4748('10','8sNL')](_0x4748('11','m](S'));const readResponse=await _0x5e238e[_0x4748('12','KRaM')](context,createResponse['id']);HtKxRc[_0x4748('13','hNTP')](expect,readResponse)[_0x4748('14','Lv$&')](createResponse);const updatedResource={...readResponse,...partialUpdate};const updatePlan=await _0x5e238e['plan'](context,updatedResource);expect(updatePlan)[_0x4748('15','20N7')](_0x4748('16','5%(F'));_0x4176de[_0x4748('17','qgrZ')]['mockReset']();const updateResponse=await _0x5e238e['update'](context,updatedResource);expect(_0x4176de[_0x4748('18','o]5M')])['toHaveBeenCalledWith'](fullPath);await _0x5e238e[_0x4748('19','EEI0')](context,updateResponse);expect(_0x4176de[_0x4748('1a','ZNz$')])[_0x4748('1b','&bW3')](fullPath);});});