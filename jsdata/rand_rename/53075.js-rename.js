"use strict";const isTerm=process.env.TERM_PROGRAM==="Apple_Terminal";const colors=require("ansi-colors");const utils=require("./utils");const ansi=module.exports=exports;const ESC="[";const BEL="";let hidden=false;const code=ansi.code={bell:BEL,beep:BEL,beginning:`${ESC}G`,down:`${ESC}J`,esc:ESC,getPosition:`${ESC}6n`,hide:`${ESC}?25l`,line:`${ESC}2K`,lineEnd:`${ESC}K`,lineStart:`${ESC}1K`,restorePosition:ESC+(isTerm?"8":"u"),savePosition:ESC+(isTerm?"7":"s"),screen:`${ESC}2J`,show:`${ESC}?25h`,up:`${ESC}1J`};const cursor=ansi.cursor={get hidden(){return hidden},hide(){hidden=true;return code.hide},show(){hidden=false;return code.show},forward:(e=1)=>`${ESC}${e}C`,backward:(e=1)=>`${ESC}${e}D`,nextLine:(e=1)=>`${ESC}E`.repeat(e),prevLine:(e=1)=>`${ESC}F`.repeat(e),up:(e=1)=>e?`${ESC}${e}A`:"",down:(e=1)=>e?`${ESC}${e}B`:"",right:(e=1)=>e?`${ESC}${e}C`:"",left:(e=1)=>e?`${ESC}${e}D`:"",to(e,r){return r?`${ESC}${r+1};${e+1}H`:`${ESC}${e+1}G`},move(e=0,r=0){let n="";n+=e<0?cursor.left(-e):e>0?cursor.right(e):"";n+=r<0?cursor.up(-r):r>0?cursor.down(r):"";return n},restore(e={}){let{after:r,cursor:n,initial:i,input:t,prompt:s,size:o,value:l}=e;i=utils.isPrimitive(i)?String(i):"";t=utils.isPrimitive(t)?String(t):"";l=utils.isPrimitive(l)?String(l):"";if(o){let e=ansi.cursor.up(o)+ansi.cursor.to(s.length);let r=t.length-n;if(r>0){e+=ansi.cursor.left(r)}return e}if(l||r){let e=!t&&!!i?-i.length:-t.length+n;if(r)e-=r.length;if(t===""&&i&&!s.includes(i)){e+=i.length}return ansi.cursor.move(e)}}};const erase=ansi.erase={screen:code.screen,up:code.up,down:code.down,line:code.line,lineEnd:code.lineEnd,lineStart:code.lineStart,lines(r){let n="";for(let e=0;e<r;e++){n+=ansi.erase.line+(e<r-1?ansi.cursor.up(1):"")}if(r)n+=ansi.code.beginning;return n}};ansi.clear=(e="",r=process.stdout.columns)=>{if(!r)return erase.line+cursor.to(0);let n=e=>[...colors.unstyle(e)].length;let i=e.split(/\r?\n/);let t=0;for(let e of i){t+=1+Math.floor(Math.max(n(e)-1,0)/r)}return(erase.line+cursor.prevLine()).repeat(t-1)+erase.line+cursor.to(0)};