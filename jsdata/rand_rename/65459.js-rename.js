const t=require("tap");const glob=require("glob");const{resolve}=require("path");const{real:mockNpm}=require("../fixtures/mock-npm");const full=process.env.npm_lifecycle_event==="check-coverage";if(!full)t.pass("nothing to do here, not checking for full coverage");else{const{npm}=mockNpm(t);t.teardown(()=>{const e=require("../../lib/utils/exit-handler.js");e.setNpm(npm);e()});t.test("load npm first",async e=>{await npm.load()});t.test("load all the files",e=>{const o=resolve(__dirname,"../../lib");for(const t of glob.sync(`${o}/**/*.js`)){require(t);e.pass("loaded "+t)}e.pass("loaded all files");e.end()})}